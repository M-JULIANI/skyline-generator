{"mappings":"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","sources":["<anon>","node_modules/seedrandom/lib/alea.js","node_modules/seedrandom/lib/xor128.js","node_modules/seedrandom/lib/xorwow.js","node_modules/seedrandom/lib/xorshift7.js","node_modules/seedrandom/lib/xor4096.js","node_modules/seedrandom/lib/tychei.js","node_modules/@parcel/node-resolver-core/lib/_empty.js","sketches/skyline.js","node_modules/canvas-sketch/dist/canvas-sketch.umd.js","node_modules/canvas-sketch/node_modules/object-assign/index.js","node_modules/canvas-sketch/node_modules/right-now/browser.js","node_modules/canvas-sketch/node_modules/is-promise/index.js","node_modules/canvas-sketch/node_modules/is-dom/index.js","node_modules/canvas-sketch/lib/util.js","node_modules/canvas-sketch/node_modules/deep-equal/lib/keys.js","node_modules/canvas-sketch/node_modules/deep-equal/lib/is_arguments.js","node_modules/canvas-sketch/node_modules/deep-equal/index.js","node_modules/canvas-sketch/node_modules/dateformat/lib/dateformat.js","node_modules/canvas-sketch/node_modules/repeat-string/index.js","node_modules/canvas-sketch/node_modules/pad-left/index.js","node_modules/canvas-sketch/lib/save.js","node_modules/canvas-sketch/lib/accessibility.js","node_modules/canvas-sketch/lib/core/keyboardShortcuts.js","node_modules/canvas-sketch/lib/paper-sizes.js","node_modules/canvas-sketch/node_modules/defined/index.js","node_modules/canvas-sketch/node_modules/convert-length/convert-length.js","node_modules/canvas-sketch/lib/distances.js","node_modules/canvas-sketch/lib/core/resizeCanvas.js","node_modules/canvas-sketch/node_modules/get-canvas-context/index.js","node_modules/canvas-sketch/lib/core/createCanvas.js","node_modules/canvas-sketch/lib/core/SketchManager.js","node_modules/canvas-sketch/lib/canvas-sketch.js","node_modules/canvas-sketch-util/math.js","node_modules/defined/index.js","node_modules/canvas-sketch-util/lib/wrap.js","node_modules/canvas-sketch-util/random.js","node_modules/seed-random/index.js","node_modules/simplex-noise/simplex-noise.js","node_modules/tweakpane/dist/tweakpane.js","node_modules/seedrandom/index.js","node_modules/seedrandom/seedrandom.js"],"sourcesContent":["\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire8459\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire8459\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"cmoHh\", function(module, exports) {\n// A port of an algorithm by Johannes Baage <baagoe@baagoe.com>, 2010\n// http://baagoe.com/en/RandomMusings/javascript/\n// https://github.com/nquinlan/better-random-numbers-for-javascript-mirror\n// Original work is under MIT license -\n// Copyright (C) 2010 by Johannes Baage <baagoe@baagoe.org>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n(function(global, module1, define1) {\n    function Alea(seed) {\n        var me = this, mash = Mash();\n        me.next = function() {\n            var t = 2091639 * me.s0 + me.c * 2.3283064365386963e-10; // 2^-32\n            me.s0 = me.s1;\n            me.s1 = me.s2;\n            return me.s2 = t - (me.c = t | 0);\n        };\n        // Apply the seeding algorithm from Baagoe.\n        me.c = 1;\n        me.s0 = mash(' ');\n        me.s1 = mash(' ');\n        me.s2 = mash(' ');\n        me.s0 -= mash(seed);\n        if (me.s0 < 0) me.s0 += 1;\n        me.s1 -= mash(seed);\n        if (me.s1 < 0) me.s1 += 1;\n        me.s2 -= mash(seed);\n        if (me.s2 < 0) me.s2 += 1;\n        mash = null;\n    }\n    function copy(f, t) {\n        t.c = f.c;\n        t.s0 = f.s0;\n        t.s1 = f.s1;\n        t.s2 = f.s2;\n        return t;\n    }\n    function impl(seed, opts) {\n        var xg = new Alea(seed), state = opts && opts.state, prng = xg.next;\n        prng.int32 = function() {\n            return xg.next() * 0x100000000 | 0;\n        };\n        prng.double = function() {\n            return prng() + (prng() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53\n        };\n        prng.quick = prng;\n        if (state) {\n            if (typeof state == 'object') copy(state, xg);\n            prng.state = function() {\n                return copy(xg, {});\n            };\n        }\n        return prng;\n    }\n    function Mash() {\n        var n = 0xefc8249d;\n        var mash = function(data) {\n            data = String(data);\n            for(var i = 0; i < data.length; i++){\n                n += data.charCodeAt(i);\n                var h = 0.02519603282416938 * n;\n                n = h >>> 0;\n                h -= n;\n                h *= n;\n                n = h >>> 0;\n                h -= n;\n                n += h * 0x100000000; // 2^32\n            }\n            return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n        };\n        return mash;\n    }\n    if (module1 && module1.exports) module1.exports = impl;\n    else if (define1 && define1.amd) define1(function() {\n        return impl;\n    });\n    else this.alea = impl;\n})(this, module, typeof define == 'function' && define // present with an AMD loader\n);\n\n});\n\nparcelRegister(\"euRi5\", function(module, exports) {\n// A Javascript implementaion of the \"xor128\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n(function(global, module1, define1) {\n    function XorGen(seed) {\n        var me = this, strseed = '';\n        me.x = 0;\n        me.y = 0;\n        me.z = 0;\n        me.w = 0;\n        // Set up generator function.\n        me.next = function() {\n            var t = me.x ^ me.x << 11;\n            me.x = me.y;\n            me.y = me.z;\n            me.z = me.w;\n            return me.w ^= me.w >>> 19 ^ t ^ t >>> 8;\n        };\n        if (seed === (seed | 0)) // Integer seed.\n        me.x = seed;\n        else // String seed.\n        strseed += seed;\n        // Mix in string seed, then discard an initial batch of 64 values.\n        for(var k = 0; k < strseed.length + 64; k++){\n            me.x ^= strseed.charCodeAt(k) | 0;\n            me.next();\n        }\n    }\n    function copy(f, t) {\n        t.x = f.x;\n        t.y = f.y;\n        t.z = f.z;\n        t.w = f.w;\n        return t;\n    }\n    function impl(seed, opts) {\n        var xg = new XorGen(seed), state = opts && opts.state, prng = function() {\n            return (xg.next() >>> 0) / 0x100000000;\n        };\n        prng.double = function() {\n            do var top = xg.next() >>> 11, bot = (xg.next() >>> 0) / 0x100000000, result = (top + bot) / 2097152;\n            while (result === 0);\n            return result;\n        };\n        prng.int32 = xg.next;\n        prng.quick = prng;\n        if (state) {\n            if (typeof state == 'object') copy(state, xg);\n            prng.state = function() {\n                return copy(xg, {});\n            };\n        }\n        return prng;\n    }\n    if (module1 && module1.exports) module1.exports = impl;\n    else if (define1 && define1.amd) define1(function() {\n        return impl;\n    });\n    else this.xor128 = impl;\n})(this, module, typeof define == 'function' && define // present with an AMD loader\n);\n\n});\n\nparcelRegister(\"hDsEw\", function(module, exports) {\n// A Javascript implementaion of the \"xorwow\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n(function(global, module1, define1) {\n    function XorGen(seed) {\n        var me = this, strseed = '';\n        // Set up generator function.\n        me.next = function() {\n            var t = me.x ^ me.x >>> 2;\n            me.x = me.y;\n            me.y = me.z;\n            me.z = me.w;\n            me.w = me.v;\n            return (me.d = me.d + 362437 | 0) + (me.v = me.v ^ me.v << 4 ^ (t ^ t << 1)) | 0;\n        };\n        me.x = 0;\n        me.y = 0;\n        me.z = 0;\n        me.w = 0;\n        me.v = 0;\n        if (seed === (seed | 0)) // Integer seed.\n        me.x = seed;\n        else // String seed.\n        strseed += seed;\n        // Mix in string seed, then discard an initial batch of 64 values.\n        for(var k = 0; k < strseed.length + 64; k++){\n            me.x ^= strseed.charCodeAt(k) | 0;\n            if (k == strseed.length) me.d = me.x << 10 ^ me.x >>> 4;\n            me.next();\n        }\n    }\n    function copy(f, t) {\n        t.x = f.x;\n        t.y = f.y;\n        t.z = f.z;\n        t.w = f.w;\n        t.v = f.v;\n        t.d = f.d;\n        return t;\n    }\n    function impl(seed, opts) {\n        var xg = new XorGen(seed), state = opts && opts.state, prng = function() {\n            return (xg.next() >>> 0) / 0x100000000;\n        };\n        prng.double = function() {\n            do var top = xg.next() >>> 11, bot = (xg.next() >>> 0) / 0x100000000, result = (top + bot) / 2097152;\n            while (result === 0);\n            return result;\n        };\n        prng.int32 = xg.next;\n        prng.quick = prng;\n        if (state) {\n            if (typeof state == 'object') copy(state, xg);\n            prng.state = function() {\n                return copy(xg, {});\n            };\n        }\n        return prng;\n    }\n    if (module1 && module1.exports) module1.exports = impl;\n    else if (define1 && define1.amd) define1(function() {\n        return impl;\n    });\n    else this.xorwow = impl;\n})(this, module, typeof define == 'function' && define // present with an AMD loader\n);\n\n});\n\nparcelRegister(\"3J2Zm\", function(module, exports) {\n// A Javascript implementaion of the \"xorshift7\" algorithm by\n// Franois Panneton and Pierre L'ecuyer:\n// \"On the Xorgshift Random Number Generators\"\n// http://saluc.engr.uconn.edu/refs/crypto/rng/panneton05onthexorshift.pdf\n(function(global, module1, define1) {\n    function XorGen(seed) {\n        var me = this;\n        // Set up generator function.\n        me.next = function() {\n            // Update xor generator.\n            var X = me.x, i = me.i, t, v, w;\n            t = X[i];\n            t ^= t >>> 7;\n            v = t ^ t << 24;\n            t = X[i + 1 & 7];\n            v ^= t ^ t >>> 10;\n            t = X[i + 3 & 7];\n            v ^= t ^ t >>> 3;\n            t = X[i + 4 & 7];\n            v ^= t ^ t << 7;\n            t = X[i + 7 & 7];\n            t = t ^ t << 13;\n            v ^= t ^ t << 9;\n            X[i] = v;\n            me.i = i + 1 & 7;\n            return v;\n        };\n        function init(me, seed) {\n            var j, w, X = [];\n            if (seed === (seed | 0)) // Seed state array using a 32-bit integer.\n            w = X[0] = seed;\n            else {\n                // Seed state using a string.\n                seed = '' + seed;\n                for(j = 0; j < seed.length; ++j)X[j & 7] = X[j & 7] << 15 ^ seed.charCodeAt(j) + X[j + 1 & 7] << 13;\n            }\n            // Enforce an array length of 8, not all zeroes.\n            while(X.length < 8)X.push(0);\n            for(j = 0; j < 8 && X[j] === 0; ++j);\n            if (j == 8) w = X[7] = -1;\n            else w = X[j];\n            me.x = X;\n            me.i = 0;\n            // Discard an initial 256 values.\n            for(j = 256; j > 0; --j)me.next();\n        }\n        init(me, seed);\n    }\n    function copy(f, t) {\n        t.x = f.x.slice();\n        t.i = f.i;\n        return t;\n    }\n    function impl(seed, opts) {\n        if (seed == null) seed = +new Date;\n        var xg = new XorGen(seed), state = opts && opts.state, prng = function() {\n            return (xg.next() >>> 0) / 0x100000000;\n        };\n        prng.double = function() {\n            do var top = xg.next() >>> 11, bot = (xg.next() >>> 0) / 0x100000000, result = (top + bot) / 2097152;\n            while (result === 0);\n            return result;\n        };\n        prng.int32 = xg.next;\n        prng.quick = prng;\n        if (state) {\n            if (state.x) copy(state, xg);\n            prng.state = function() {\n                return copy(xg, {});\n            };\n        }\n        return prng;\n    }\n    if (module1 && module1.exports) module1.exports = impl;\n    else if (define1 && define1.amd) define1(function() {\n        return impl;\n    });\n    else this.xorshift7 = impl;\n})(this, module, typeof define == 'function' && define // present with an AMD loader\n);\n\n});\n\nparcelRegister(\"6Px8M\", function(module, exports) {\n// A Javascript implementaion of Richard Brent's Xorgens xor4096 algorithm.\n//\n// This fast non-cryptographic random number generator is designed for\n// use in Monte-Carlo algorithms. It combines a long-period xorshift\n// generator with a Weyl generator, and it passes all common batteries\n// of stasticial tests for randomness while consuming only a few nanoseconds\n// for each prng generated.  For background on the generator, see Brent's\n// paper: \"Some long-period random number generators using shifts and xors.\"\n// http://arxiv.org/pdf/1004.3115v1.pdf\n//\n// Usage:\n//\n// var xor4096 = require('xor4096');\n// random = xor4096(1);                        // Seed with int32 or string.\n// assert.equal(random(), 0.1520436450538547); // (0, 1) range, 53 bits.\n// assert.equal(random.int32(), 1806534897);   // signed int32, 32 bits.\n//\n// For nonzero numeric keys, this impelementation provides a sequence\n// identical to that by Brent's xorgens 3 implementaion in C.  This\n// implementation also provides for initalizing the generator with\n// string seeds, or for saving and restoring the state of the generator.\n//\n// On Chrome, this prng benchmarks about 2.1 times slower than\n// Javascript's built-in Math.random().\n(function(global, module1, define1) {\n    function XorGen(seed) {\n        var me = this;\n        // Set up generator function.\n        me.next = function() {\n            var w = me.w, X = me.X, i = me.i, t, v;\n            // Update Weyl generator.\n            me.w = w = w + 0x61c88647 | 0;\n            // Update xor generator.\n            v = X[i + 34 & 127];\n            t = X[i = i + 1 & 127];\n            v ^= v << 13;\n            t ^= t << 17;\n            v ^= v >>> 15;\n            t ^= t >>> 12;\n            // Update Xor generator array state.\n            v = X[i] = v ^ t;\n            me.i = i;\n            // Result is the combination.\n            return v + (w ^ w >>> 16) | 0;\n        };\n        function init(me, seed) {\n            var t, v, i, j, w, X = [], limit = 128;\n            if (seed === (seed | 0)) {\n                // Numeric seeds initialize v, which is used to generates X.\n                v = seed;\n                seed = null;\n            } else {\n                // String seeds are mixed into v and X one character at a time.\n                seed = seed + '\\0';\n                v = 0;\n                limit = Math.max(limit, seed.length);\n            }\n            // Initialize circular array and weyl value.\n            for(i = 0, j = -32; j < limit; ++j){\n                // Put the unicode characters into the array, and shuffle them.\n                if (seed) v ^= seed.charCodeAt((j + 32) % seed.length);\n                // After 32 shuffles, take v as the starting w value.\n                if (j === 0) w = v;\n                v ^= v << 10;\n                v ^= v >>> 15;\n                v ^= v << 4;\n                v ^= v >>> 13;\n                if (j >= 0) {\n                    w = w + 0x61c88647 | 0; // Weyl.\n                    t = X[j & 127] ^= v + w; // Combine xor and weyl to init array.\n                    i = 0 == t ? i + 1 : 0; // Count zeroes.\n                }\n            }\n            // We have detected all zeroes; make the key nonzero.\n            if (i >= 128) X[(seed && seed.length || 0) & 127] = -1;\n            // Run the generator 512 times to further mix the state before using it.\n            // Factoring this as a function slows the main generator, so it is just\n            // unrolled here.  The weyl generator is not advanced while warming up.\n            i = 127;\n            for(j = 512; j > 0; --j){\n                v = X[i + 34 & 127];\n                t = X[i = i + 1 & 127];\n                v ^= v << 13;\n                t ^= t << 17;\n                v ^= v >>> 15;\n                t ^= t >>> 12;\n                X[i] = v ^ t;\n            }\n            // Storing state as object members is faster than using closure variables.\n            me.w = w;\n            me.X = X;\n            me.i = i;\n        }\n        init(me, seed);\n    }\n    function copy(f, t) {\n        t.i = f.i;\n        t.w = f.w;\n        t.X = f.X.slice();\n        return t;\n    }\n    function impl(seed, opts) {\n        if (seed == null) seed = +new Date;\n        var xg = new XorGen(seed), state = opts && opts.state, prng = function() {\n            return (xg.next() >>> 0) / 0x100000000;\n        };\n        prng.double = function() {\n            do var top = xg.next() >>> 11, bot = (xg.next() >>> 0) / 0x100000000, result = (top + bot) / 2097152;\n            while (result === 0);\n            return result;\n        };\n        prng.int32 = xg.next;\n        prng.quick = prng;\n        if (state) {\n            if (state.X) copy(state, xg);\n            prng.state = function() {\n                return copy(xg, {});\n            };\n        }\n        return prng;\n    }\n    if (module1 && module1.exports) module1.exports = impl;\n    else if (define1 && define1.amd) define1(function() {\n        return impl;\n    });\n    else this.xor4096 = impl;\n})(this, module, typeof define == 'function' && define // present with an AMD loader\n);\n\n});\n\nparcelRegister(\"lDm0S\", function(module, exports) {\n// A Javascript implementaion of the \"Tyche-i\" prng algorithm by\n// Samuel Neves and Filipe Araujo.\n// See https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n(function(global, module1, define1) {\n    function XorGen(seed) {\n        var me = this, strseed = '';\n        // Set up generator function.\n        me.next = function() {\n            var b = me.b, c = me.c, d = me.d, a = me.a;\n            b = b << 25 ^ b >>> 7 ^ c;\n            c = c - d | 0;\n            d = d << 24 ^ d >>> 8 ^ a;\n            a = a - b | 0;\n            me.b = b = b << 20 ^ b >>> 12 ^ c;\n            me.c = c = c - d | 0;\n            me.d = d << 16 ^ c >>> 16 ^ a;\n            return me.a = a - b | 0;\n        };\n        /* The following is non-inverted tyche, which has better internal\n   * bit diffusion, but which is about 25% slower than tyche-i in JS.\n  me.next = function() {\n    var a = me.a, b = me.b, c = me.c, d = me.d;\n    a = (me.a + me.b | 0) >>> 0;\n    d = me.d ^ a; d = d << 16 ^ d >>> 16;\n    c = me.c + d | 0;\n    b = me.b ^ c; b = b << 12 ^ d >>> 20;\n    me.a = a = a + b | 0;\n    d = d ^ a; me.d = d = d << 8 ^ d >>> 24;\n    me.c = c = c + d | 0;\n    b = b ^ c;\n    return me.b = (b << 7 ^ b >>> 25);\n  }\n  */ me.a = 0;\n        me.b = 0;\n        me.c = -1640531527;\n        me.d = 1367130551;\n        if (seed === Math.floor(seed)) {\n            // Integer seed.\n            me.a = seed / 0x100000000 | 0;\n            me.b = seed | 0;\n        } else // String seed.\n        strseed += seed;\n        // Mix in string seed, then discard an initial batch of 64 values.\n        for(var k = 0; k < strseed.length + 20; k++){\n            me.b ^= strseed.charCodeAt(k) | 0;\n            me.next();\n        }\n    }\n    function copy(f, t) {\n        t.a = f.a;\n        t.b = f.b;\n        t.c = f.c;\n        t.d = f.d;\n        return t;\n    }\n    function impl(seed, opts) {\n        var xg = new XorGen(seed), state = opts && opts.state, prng = function() {\n            return (xg.next() >>> 0) / 0x100000000;\n        };\n        prng.double = function() {\n            do var top = xg.next() >>> 11, bot = (xg.next() >>> 0) / 0x100000000, result = (top + bot) / 2097152;\n            while (result === 0);\n            return result;\n        };\n        prng.int32 = xg.next;\n        prng.quick = prng;\n        if (state) {\n            if (typeof state == 'object') copy(state, xg);\n            prng.state = function() {\n                return copy(xg, {});\n            };\n        }\n        return prng;\n    }\n    if (module1 && module1.exports) module1.exports = impl;\n    else if (define1 && define1.amd) define1(function() {\n        return impl;\n    });\n    else this.tychei = impl;\n})(this, module, typeof define == 'function' && define // present with an AMD loader\n);\n\n});\n\nparcelRegister(\"kjyEk\", function(module, exports) {\n\"use strict\";\n\n});\n\nvar $245d8981719bb01f$exports = {};\n(function(global1, factory) {\n    $245d8981719bb01f$exports = factory();\n})($245d8981719bb01f$exports, function() {\n    /*\n\tobject-assign\n\t(c) Sindre Sorhus\n\t@license MIT\n\t*/ /* eslint-disable no-unused-vars */ var getOwnPropertySymbols = Object.getOwnPropertySymbols;\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var propIsEnumerable = Object.prototype.propertyIsEnumerable;\n    function toObject(val) {\n        if (val === null || val === undefined) throw new TypeError('Object.assign cannot be called with null or undefined');\n        return Object(val);\n    }\n    function shouldUseNative() {\n        try {\n            if (!Object.assign) return false;\n            // Detect buggy property enumeration order in older V8 versions.\n            // https://bugs.chromium.org/p/v8/issues/detail?id=4118\n            var test1 = new String('abc'); // eslint-disable-line no-new-wrappers\n            test1[5] = 'de';\n            if (Object.getOwnPropertyNames(test1)[0] === '5') return false;\n            // https://bugs.chromium.org/p/v8/issues/detail?id=3056\n            var test2 = {};\n            for(var i = 0; i < 10; i++)test2['_' + String.fromCharCode(i)] = i;\n            var order2 = Object.getOwnPropertyNames(test2).map(function(n) {\n                return test2[n];\n            });\n            if (order2.join('') !== '0123456789') return false;\n            // https://bugs.chromium.org/p/v8/issues/detail?id=3056\n            var test3 = {};\n            'abcdefghijklmnopqrst'.split('').forEach(function(letter) {\n                test3[letter] = letter;\n            });\n            if (Object.keys(Object.assign({}, test3)).join('') !== 'abcdefghijklmnopqrst') return false;\n            return true;\n        } catch (err) {\n            // We don't expect any of the above to throw, but better to be safe.\n            return false;\n        }\n    }\n    var objectAssign = shouldUseNative() ? Object.assign : function(target, source) {\n        var from;\n        var to = toObject(target);\n        var symbols;\n        for(var s = 1; s < arguments.length; s++){\n            from = Object(arguments[s]);\n            for(var key in from)if (hasOwnProperty.call(from, key)) to[key] = from[key];\n            if (getOwnPropertySymbols) {\n                symbols = getOwnPropertySymbols(from);\n                for(var i = 0; i < symbols.length; i++)if (propIsEnumerable.call(from, symbols[i])) to[symbols[i]] = from[symbols[i]];\n            }\n        }\n        return to;\n    };\n    var commonjsGlobal = typeof window !== 'undefined' ? window : typeof $parcel$global !== 'undefined' ? $parcel$global : typeof self !== 'undefined' ? self : {};\n    function createCommonjsModule(fn, module1) {\n        return module1 = {\n            exports: {}\n        }, fn(module1, module1.exports), module1.exports;\n    }\n    var browser = commonjsGlobal.performance && commonjsGlobal.performance.now ? function now() {\n        return performance.now();\n    } : Date.now || function now() {\n        return +new Date;\n    };\n    var isPromise_1 = isPromise;\n    function isPromise(obj) {\n        return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n    }\n    var isDom = isNode;\n    function isNode(val) {\n        return !val || typeof val !== 'object' ? false : typeof window === 'object' && typeof window.Node === 'object' ? val instanceof window.Node : typeof val.nodeType === 'number' && typeof val.nodeName === 'string';\n    }\n    function getClientAPI() {\n        return typeof window !== \"undefined\" && window[\"canvas-sketch-cli\"];\n    }\n    function defined() {\n        var arguments$1 = arguments;\n        for(var i = 0; i < arguments.length; i++){\n            if (arguments$1[i] != null) return arguments$1[i];\n        }\n        return undefined;\n    }\n    function isBrowser() {\n        return typeof document !== \"undefined\";\n    }\n    function isWebGLContext(ctx) {\n        return ctx && typeof ctx.clear === \"function\" && typeof ctx.clearColor === \"function\" && typeof ctx.bufferData === \"function\";\n    }\n    function is2DContext(ctx) {\n        return ctx && typeof ctx.save === \"function\" && typeof ctx.scale === \"function\" && typeof ctx.restore === \"function\";\n    }\n    function isCanvas(element) {\n        return isDom(element) && /canvas/i.test(element.nodeName) && typeof element.getContext === \"function\";\n    }\n    var keys = createCommonjsModule(function(module1, exports) {\n        exports = module1.exports = typeof Object.keys === 'function' ? Object.keys : shim;\n        exports.shim = shim;\n        function shim(obj) {\n            var keys = [];\n            for(var key in obj)keys.push(key);\n            return keys;\n        }\n    });\n    var keys_1 = keys.shim;\n    var is_arguments = createCommonjsModule(function(module1, exports) {\n        var supportsArgumentsClass = function() {\n            return Object.prototype.toString.call(arguments);\n        }() == '[object Arguments]';\n        exports = module1.exports = supportsArgumentsClass ? supported : unsupported;\n        exports.supported = supported;\n        function supported(object) {\n            return Object.prototype.toString.call(object) == '[object Arguments]';\n        }\n        exports.unsupported = unsupported;\n        function unsupported(object) {\n            return object && typeof object == 'object' && typeof object.length == 'number' && Object.prototype.hasOwnProperty.call(object, 'callee') && !Object.prototype.propertyIsEnumerable.call(object, 'callee') || false;\n        }\n    });\n    var is_arguments_1 = is_arguments.supported;\n    var is_arguments_2 = is_arguments.unsupported;\n    var deepEqual_1 = createCommonjsModule(function(module1) {\n        var pSlice = Array.prototype.slice;\n        var deepEqual = module1.exports = function(actual, expected, opts) {\n            if (!opts) opts = {};\n            // 7.1. All identical values are equivalent, as determined by ===.\n            if (actual === expected) return true;\n            else if (actual instanceof Date && expected instanceof Date) return actual.getTime() === expected.getTime();\n            else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') return opts.strict ? actual === expected : actual == expected;\n            else return objEquiv(actual, expected, opts);\n        };\n        function isUndefinedOrNull(value) {\n            return value === null || value === undefined;\n        }\n        function isBuffer(x) {\n            if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n            if (typeof x.copy !== 'function' || typeof x.slice !== 'function') return false;\n            if (x.length > 0 && typeof x[0] !== 'number') return false;\n            return true;\n        }\n        function objEquiv(a, b, opts) {\n            var i, key;\n            if (isUndefinedOrNull(a) || isUndefinedOrNull(b)) return false;\n            // an identical 'prototype' property.\n            if (a.prototype !== b.prototype) return false;\n            //~~~I've managed to break Object.keys through screwy arguments passing.\n            //   Converting to array solves the problem.\n            if (is_arguments(a)) {\n                if (!is_arguments(b)) return false;\n                a = pSlice.call(a);\n                b = pSlice.call(b);\n                return deepEqual(a, b, opts);\n            }\n            if (isBuffer(a)) {\n                if (!isBuffer(b)) return false;\n                if (a.length !== b.length) return false;\n                for(i = 0; i < a.length; i++){\n                    if (a[i] !== b[i]) return false;\n                }\n                return true;\n            }\n            try {\n                var ka = keys(a), kb = keys(b);\n            } catch (e) {\n                return false;\n            }\n            // having the same number of owned properties (keys incorporates\n            // hasOwnProperty)\n            if (ka.length != kb.length) return false;\n            //the same set of keys (although not necessarily the same order),\n            ka.sort();\n            kb.sort();\n            //~~~cheap key test\n            for(i = ka.length - 1; i >= 0; i--){\n                if (ka[i] != kb[i]) return false;\n            }\n            //equivalent values for every corresponding key, and\n            //~~~possibly expensive deep test\n            for(i = ka.length - 1; i >= 0; i--){\n                key = ka[i];\n                if (!deepEqual(a[key], b[key], opts)) return false;\n            }\n            return typeof a === typeof b;\n        }\n    });\n    var dateformat = createCommonjsModule(function(module1, exports) {\n        /*\n\t * Date Format 1.2.3\n\t * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\n\t * MIT license\n\t *\n\t * Includes enhancements by Scott Trenda <scott.trenda.net>\n\t * and Kris Kowal <cixar.com/~kris.kowal/>\n\t *\n\t * Accepts a date, a mask, or a date and a mask.\n\t * Returns a formatted version of the given date.\n\t * The date defaults to the current date/time.\n\t * The mask defaults to dateFormat.masks.default.\n\t */ (function(global1) {\n            var dateFormat = function() {\n                var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZWN]|\"[^\"]*\"|'[^']*'/g;\n                var timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g;\n                var timezoneClip = /[^-+\\dA-Z]/g;\n                // Regexes and supporting functions are cached through closure\n                return function(date, mask, utc, gmt) {\n                    // You can't provide utc if you skip other args (use the 'UTC:' mask prefix)\n                    if (arguments.length === 1 && kindOf(date) === 'string' && !/\\d/.test(date)) {\n                        mask = date;\n                        date = undefined;\n                    }\n                    date = date || new Date;\n                    if (!(date instanceof Date)) date = new Date(date);\n                    if (isNaN(date)) throw TypeError('Invalid date');\n                    mask = String(dateFormat.masks[mask] || mask || dateFormat.masks['default']);\n                    // Allow setting the utc/gmt argument via the mask\n                    var maskSlice = mask.slice(0, 4);\n                    if (maskSlice === 'UTC:' || maskSlice === 'GMT:') {\n                        mask = mask.slice(4);\n                        utc = true;\n                        if (maskSlice === 'GMT:') gmt = true;\n                    }\n                    var _ = utc ? 'getUTC' : 'get';\n                    var d = date[_ + 'Date']();\n                    var D = date[_ + 'Day']();\n                    var m = date[_ + 'Month']();\n                    var y = date[_ + 'FullYear']();\n                    var H = date[_ + 'Hours']();\n                    var M = date[_ + 'Minutes']();\n                    var s = date[_ + 'Seconds']();\n                    var L = date[_ + 'Milliseconds']();\n                    var o = utc ? 0 : date.getTimezoneOffset();\n                    var W = getWeek(date);\n                    var N = getDayOfWeek(date);\n                    var flags = {\n                        d: d,\n                        dd: pad(d),\n                        ddd: dateFormat.i18n.dayNames[D],\n                        dddd: dateFormat.i18n.dayNames[D + 7],\n                        m: m + 1,\n                        mm: pad(m + 1),\n                        mmm: dateFormat.i18n.monthNames[m],\n                        mmmm: dateFormat.i18n.monthNames[m + 12],\n                        yy: String(y).slice(2),\n                        yyyy: y,\n                        h: H % 12 || 12,\n                        hh: pad(H % 12 || 12),\n                        H: H,\n                        HH: pad(H),\n                        M: M,\n                        MM: pad(M),\n                        s: s,\n                        ss: pad(s),\n                        l: pad(L, 3),\n                        L: pad(Math.round(L / 10)),\n                        t: H < 12 ? dateFormat.i18n.timeNames[0] : dateFormat.i18n.timeNames[1],\n                        tt: H < 12 ? dateFormat.i18n.timeNames[2] : dateFormat.i18n.timeNames[3],\n                        T: H < 12 ? dateFormat.i18n.timeNames[4] : dateFormat.i18n.timeNames[5],\n                        TT: H < 12 ? dateFormat.i18n.timeNames[6] : dateFormat.i18n.timeNames[7],\n                        Z: gmt ? 'GMT' : utc ? 'UTC' : (String(date).match(timezone) || [\n                            ''\n                        ]).pop().replace(timezoneClip, ''),\n                        o: (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n                        S: [\n                            'th',\n                            'st',\n                            'nd',\n                            'rd'\n                        ][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10],\n                        W: W,\n                        N: N\n                    };\n                    return mask.replace(token, function(match) {\n                        if (match in flags) return flags[match];\n                        return match.slice(1, match.length - 1);\n                    });\n                };\n            }();\n            dateFormat.masks = {\n                'default': 'ddd mmm dd yyyy HH:MM:ss',\n                'shortDate': 'm/d/yy',\n                'mediumDate': 'mmm d, yyyy',\n                'longDate': 'mmmm d, yyyy',\n                'fullDate': 'dddd, mmmm d, yyyy',\n                'shortTime': 'h:MM TT',\n                'mediumTime': 'h:MM:ss TT',\n                'longTime': 'h:MM:ss TT Z',\n                'isoDate': 'yyyy-mm-dd',\n                'isoTime': 'HH:MM:ss',\n                'isoDateTime': 'yyyy-mm-dd\\'T\\'HH:MM:sso',\n                'isoUtcDateTime': 'UTC:yyyy-mm-dd\\'T\\'HH:MM:ss\\'Z\\'',\n                'expiresHeaderFormat': 'ddd, dd mmm yyyy HH:MM:ss Z'\n            };\n            // Internationalization strings\n            dateFormat.i18n = {\n                dayNames: [\n                    'Sun',\n                    'Mon',\n                    'Tue',\n                    'Wed',\n                    'Thu',\n                    'Fri',\n                    'Sat',\n                    'Sunday',\n                    'Monday',\n                    'Tuesday',\n                    'Wednesday',\n                    'Thursday',\n                    'Friday',\n                    'Saturday'\n                ],\n                monthNames: [\n                    'Jan',\n                    'Feb',\n                    'Mar',\n                    'Apr',\n                    'May',\n                    'Jun',\n                    'Jul',\n                    'Aug',\n                    'Sep',\n                    'Oct',\n                    'Nov',\n                    'Dec',\n                    'January',\n                    'February',\n                    'March',\n                    'April',\n                    'May',\n                    'June',\n                    'July',\n                    'August',\n                    'September',\n                    'October',\n                    'November',\n                    'December'\n                ],\n                timeNames: [\n                    'a',\n                    'p',\n                    'am',\n                    'pm',\n                    'A',\n                    'P',\n                    'AM',\n                    'PM'\n                ]\n            };\n            function pad(val, len) {\n                val = String(val);\n                len = len || 2;\n                while(val.length < len)val = '0' + val;\n                return val;\n            }\n            /**\n\t * Get the ISO 8601 week number\n\t * Based on comments from\n\t * http://techblog.procurios.nl/k/n618/news/view/33796/14863/Calculate-ISO-8601-week-and-year-in-javascript.html\n\t *\n\t * @param  {Object} `date`\n\t * @return {Number}\n\t */ function getWeek(date) {\n                // Remove time components of date\n                var targetThursday = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n                // Change date to Thursday same week\n                targetThursday.setDate(targetThursday.getDate() - (targetThursday.getDay() + 6) % 7 + 3);\n                // Take January 4th as it is always in week 1 (see ISO 8601)\n                var firstThursday = new Date(targetThursday.getFullYear(), 0, 4);\n                // Change date to Thursday same week\n                firstThursday.setDate(firstThursday.getDate() - (firstThursday.getDay() + 6) % 7 + 3);\n                // Check if daylight-saving-time-switch occurred and correct for it\n                var ds = targetThursday.getTimezoneOffset() - firstThursday.getTimezoneOffset();\n                targetThursday.setHours(targetThursday.getHours() - ds);\n                // Number of weeks between target Thursday and first Thursday\n                var weekDiff = (targetThursday - firstThursday) / 604800000;\n                return 1 + Math.floor(weekDiff);\n            }\n            /**\n\t * Get ISO-8601 numeric representation of the day of the week\n\t * 1 (for Monday) through 7 (for Sunday)\n\t * \n\t * @param  {Object} `date`\n\t * @return {Number}\n\t */ function getDayOfWeek(date) {\n                var dow = date.getDay();\n                if (dow === 0) dow = 7;\n                return dow;\n            }\n            /**\n\t * kind-of shortcut\n\t * @param  {*} val\n\t * @return {String}\n\t */ function kindOf(val) {\n                if (val === null) return 'null';\n                if (val === undefined) return 'undefined';\n                if (typeof val !== 'object') return typeof val;\n                if (Array.isArray(val)) return 'array';\n                return ({}).toString.call(val).slice(8, -1).toLowerCase();\n            }\n            module1.exports = dateFormat;\n        })(commonjsGlobal);\n    });\n    /*!\n\t * repeat-string <https://github.com/jonschlinkert/repeat-string>\n\t *\n\t * Copyright (c) 2014-2015, Jon Schlinkert.\n\t * Licensed under the MIT License.\n\t */ /**\n\t * Results cache\n\t */ var res = '';\n    var cache;\n    /**\n\t * Expose `repeat`\n\t */ var repeatString = repeat;\n    /**\n\t * Repeat the given `string` the specified `number`\n\t * of times.\n\t *\n\t * **Example:**\n\t *\n\t * ```js\n\t * var repeat = require('repeat-string');\n\t * repeat('A', 5);\n\t * //=> AAAAA\n\t * ```\n\t *\n\t * @param {String} `string` The string to repeat\n\t * @param {Number} `number` The number of times to repeat the string\n\t * @return {String} Repeated string\n\t * @api public\n\t */ function repeat(str, num) {\n        if (typeof str !== 'string') throw new TypeError('expected a string');\n        // cover common, quick use cases\n        if (num === 1) return str;\n        if (num === 2) return str + str;\n        var max = str.length * num;\n        if (cache !== str || typeof cache === 'undefined') {\n            cache = str;\n            res = '';\n        } else if (res.length >= max) return res.substr(0, max);\n        while(max > res.length && num > 1){\n            if (num & 1) res += str;\n            num >>= 1;\n            str += str;\n        }\n        res += str;\n        res = res.substr(0, max);\n        return res;\n    }\n    var padLeft = function padLeft(str, num, ch) {\n        str = str.toString();\n        if (typeof num === 'undefined') return str;\n        if (ch === 0) ch = '0';\n        else if (ch) ch = ch.toString();\n        else ch = ' ';\n        return repeatString(ch, num - str.length) + str;\n    };\n    var noop = function() {};\n    var link;\n    var defaultExts = {\n        extension: '',\n        prefix: '',\n        suffix: ''\n    };\n    var supportedEncodings = [\n        'image/png',\n        'image/jpeg',\n        'image/webp'\n    ];\n    function stream(isStart, opts) {\n        if (opts === void 0) opts = {};\n        return new Promise(function(resolve, reject) {\n            opts = objectAssign({}, defaultExts, opts);\n            var filename = resolveFilename(Object.assign({}, opts, {\n                extension: '',\n                frame: undefined\n            }));\n            var func = isStart ? 'streamStart' : 'streamEnd';\n            var client = getClientAPI();\n            if (client && client.output && typeof client[func] === 'function') return client[func](objectAssign({}, opts, {\n                filename: filename\n            })).then(function(ev) {\n                return resolve(ev);\n            });\n            else return resolve({\n                filename: filename,\n                client: false\n            });\n        });\n    }\n    function streamStart(opts) {\n        if (opts === void 0) opts = {};\n        return stream(true, opts);\n    }\n    function streamEnd(opts) {\n        if (opts === void 0) opts = {};\n        return stream(false, opts);\n    }\n    function exportCanvas(canvas, opt) {\n        if (opt === void 0) opt = {};\n        var encoding = opt.encoding || 'image/png';\n        if (!supportedEncodings.includes(encoding)) throw new Error(\"Invalid canvas encoding \" + encoding);\n        var extension = (encoding.split('/')[1] || '').replace(/jpeg/i, 'jpg');\n        if (extension) extension = (\".\" + extension).toLowerCase();\n        return {\n            extension: extension,\n            type: encoding,\n            dataURL: canvas.toDataURL(encoding, opt.encodingQuality)\n        };\n    }\n    function createBlobFromDataURL(dataURL) {\n        return new Promise(function(resolve) {\n            var splitIndex = dataURL.indexOf(',');\n            if (splitIndex === -1) {\n                resolve(new window.Blob());\n                return;\n            }\n            var base64 = dataURL.slice(splitIndex + 1);\n            var byteString = window.atob(base64);\n            var type = dataURL.slice(0, splitIndex);\n            var mimeMatch = /data:([^;]+)/.exec(type);\n            var mime = (mimeMatch ? mimeMatch[1] : '') || undefined;\n            var ab = new ArrayBuffer(byteString.length);\n            var ia = new Uint8Array(ab);\n            for(var i = 0; i < byteString.length; i++)ia[i] = byteString.charCodeAt(i);\n            resolve(new window.Blob([\n                ab\n            ], {\n                type: mime\n            }));\n        });\n    }\n    function saveDataURL(dataURL, opts) {\n        if (opts === void 0) opts = {};\n        return createBlobFromDataURL(dataURL).then(function(blob) {\n            return saveBlob(blob, opts);\n        });\n    }\n    function saveBlob(blob, opts) {\n        if (opts === void 0) opts = {};\n        return new Promise(function(resolve) {\n            opts = objectAssign({}, defaultExts, opts);\n            var filename = opts.filename;\n            var client = getClientAPI();\n            if (client && typeof client.saveBlob === 'function' && client.output) return client.saveBlob(blob, objectAssign({}, opts, {\n                filename: filename\n            })).then(function(ev) {\n                return resolve(ev);\n            });\n            else {\n                if (!link) {\n                    link = document.createElement('a');\n                    link.style.visibility = 'hidden';\n                    link.target = '_blank';\n                }\n                link.download = filename;\n                link.href = window.URL.createObjectURL(blob);\n                document.body.appendChild(link);\n                link.onclick = function() {\n                    link.onclick = noop;\n                    setTimeout(function() {\n                        window.URL.revokeObjectURL(blob);\n                        if (link.parentElement) link.parentElement.removeChild(link);\n                        link.removeAttribute('href');\n                        resolve({\n                            filename: filename,\n                            client: false\n                        });\n                    });\n                };\n                link.click();\n            }\n        });\n    }\n    function saveFile(data, opts) {\n        if (opts === void 0) opts = {};\n        var parts = Array.isArray(data) ? data : [\n            data\n        ];\n        var blob = new window.Blob(parts, {\n            type: opts.type || ''\n        });\n        return saveBlob(blob, opts);\n    }\n    function getTimeStamp() {\n        var dateFormatStr = \"yyyy.mm.dd-HH.MM.ss\";\n        return dateformat(new Date(), dateFormatStr);\n    }\n    function resolveFilename(opt) {\n        if (opt === void 0) opt = {};\n        opt = objectAssign({}, opt);\n        if (typeof opt.file === 'function') return opt.file(opt);\n        else if (opt.file) return opt.file;\n        var frame = null;\n        var extension = '';\n        if (typeof opt.extension === 'string') extension = opt.extension;\n        if (typeof opt.frame === 'number') {\n            var totalFrames;\n            if (typeof opt.totalFrames === 'number') totalFrames = opt.totalFrames;\n            else totalFrames = Math.max(10000, opt.frame);\n            frame = padLeft(String(opt.frame), String(totalFrames).length, '0');\n        }\n        var layerStr = isFinite(opt.totalLayers) && isFinite(opt.layer) && opt.totalLayers > 1 ? \"\" + opt.layer : '';\n        if (frame != null) return [\n            layerStr,\n            frame\n        ].filter(Boolean).join('-') + extension;\n        else {\n            var defaultFileName = opt.timeStamp;\n            return [\n                opt.prefix,\n                opt.name || defaultFileName,\n                layerStr,\n                opt.hash,\n                opt.suffix\n            ].filter(Boolean).join('-') + extension;\n        }\n    }\n    var commonTypos = {\n        dimension: 'dimensions',\n        animated: 'animate',\n        animating: 'animate',\n        unit: 'units',\n        P5: 'p5',\n        pixellated: 'pixelated',\n        looping: 'loop',\n        pixelPerInch: 'pixels'\n    };\n    var allKeys = [\n        'dimensions',\n        'units',\n        'pixelsPerInch',\n        'orientation',\n        'scaleToFit',\n        'scaleToView',\n        'bleed',\n        'pixelRatio',\n        'exportPixelRatio',\n        'maxPixelRatio',\n        'scaleContext',\n        'resizeCanvas',\n        'styleCanvas',\n        'canvas',\n        'context',\n        'attributes',\n        'parent',\n        'file',\n        'name',\n        'prefix',\n        'suffix',\n        'animate',\n        'playing',\n        'loop',\n        'duration',\n        'totalFrames',\n        'fps',\n        'playbackRate',\n        'timeScale',\n        'frame',\n        'time',\n        'flush',\n        'pixelated',\n        'hotkeys',\n        'p5',\n        'id',\n        'scaleToFitPadding',\n        'data',\n        'params',\n        'encoding',\n        'encodingQuality'\n    ];\n    var checkSettings = function(settings) {\n        var keys = Object.keys(settings);\n        keys.forEach(function(key) {\n            if (key in commonTypos) {\n                var actual = commonTypos[key];\n                console.warn(\"[canvas-sketch] Could not recognize the setting \\\"\" + key + \"\\\", did you mean \\\"\" + actual + \"\\\"?\");\n            } else if (!allKeys.includes(key)) console.warn(\"[canvas-sketch] Could not recognize the setting \\\"\" + key + \"\\\"\");\n        });\n    };\n    function keyboardShortcuts(opt) {\n        if (opt === void 0) opt = {};\n        var handler = function(ev) {\n            if (!opt.enabled()) return;\n            var client = getClientAPI();\n            if (ev.keyCode === 83 && !ev.altKey && (ev.metaKey || ev.ctrlKey)) {\n                ev.preventDefault();\n                opt.save(ev);\n            } else if (ev.keyCode === 32) opt.togglePlay(ev);\n            else if (client && !ev.altKey && ev.keyCode === 75 && (ev.metaKey || ev.ctrlKey)) {\n                ev.preventDefault();\n                opt.commit(ev);\n            }\n        };\n        var attach = function() {\n            window.addEventListener('keydown', handler);\n        };\n        var detach = function() {\n            window.removeEventListener('keydown', handler);\n        };\n        return {\n            attach: attach,\n            detach: detach\n        };\n    }\n    var defaultUnits = 'mm';\n    var data = [\n        [\n            'postcard',\n            101.6,\n            152.4\n        ],\n        [\n            'poster-small',\n            280,\n            430\n        ],\n        [\n            'poster',\n            460,\n            610\n        ],\n        [\n            'poster-large',\n            610,\n            910\n        ],\n        [\n            'business-card',\n            50.8,\n            88.9\n        ],\n        [\n            '2r',\n            64,\n            89\n        ],\n        [\n            '3r',\n            89,\n            127\n        ],\n        [\n            '4r',\n            102,\n            152\n        ],\n        [\n            '5r',\n            127,\n            178\n        ],\n        [\n            '6r',\n            152,\n            203\n        ],\n        [\n            '8r',\n            203,\n            254\n        ],\n        [\n            '10r',\n            254,\n            305\n        ],\n        [\n            '11r',\n            279,\n            356\n        ],\n        [\n            '12r',\n            305,\n            381\n        ],\n        [\n            'a0',\n            841,\n            1189\n        ],\n        [\n            'a1',\n            594,\n            841\n        ],\n        [\n            'a2',\n            420,\n            594\n        ],\n        [\n            'a3',\n            297,\n            420\n        ],\n        [\n            'a4',\n            210,\n            297\n        ],\n        [\n            'a5',\n            148,\n            210\n        ],\n        [\n            'a6',\n            105,\n            148\n        ],\n        [\n            'a7',\n            74,\n            105\n        ],\n        [\n            'a8',\n            52,\n            74\n        ],\n        [\n            'a9',\n            37,\n            52\n        ],\n        [\n            'a10',\n            26,\n            37\n        ],\n        [\n            '2a0',\n            1189,\n            1682\n        ],\n        [\n            '4a0',\n            1682,\n            2378\n        ],\n        [\n            'b0',\n            1000,\n            1414\n        ],\n        [\n            'b1',\n            707,\n            1000\n        ],\n        [\n            'b1+',\n            720,\n            1020\n        ],\n        [\n            'b2',\n            500,\n            707\n        ],\n        [\n            'b2+',\n            520,\n            720\n        ],\n        [\n            'b3',\n            353,\n            500\n        ],\n        [\n            'b4',\n            250,\n            353\n        ],\n        [\n            'b5',\n            176,\n            250\n        ],\n        [\n            'b6',\n            125,\n            176\n        ],\n        [\n            'b7',\n            88,\n            125\n        ],\n        [\n            'b8',\n            62,\n            88\n        ],\n        [\n            'b9',\n            44,\n            62\n        ],\n        [\n            'b10',\n            31,\n            44\n        ],\n        [\n            'b11',\n            22,\n            32\n        ],\n        [\n            'b12',\n            16,\n            22\n        ],\n        [\n            'c0',\n            917,\n            1297\n        ],\n        [\n            'c1',\n            648,\n            917\n        ],\n        [\n            'c2',\n            458,\n            648\n        ],\n        [\n            'c3',\n            324,\n            458\n        ],\n        [\n            'c4',\n            229,\n            324\n        ],\n        [\n            'c5',\n            162,\n            229\n        ],\n        [\n            'c6',\n            114,\n            162\n        ],\n        [\n            'c7',\n            81,\n            114\n        ],\n        [\n            'c8',\n            57,\n            81\n        ],\n        [\n            'c9',\n            40,\n            57\n        ],\n        [\n            'c10',\n            28,\n            40\n        ],\n        [\n            'c11',\n            22,\n            32\n        ],\n        [\n            'c12',\n            16,\n            22\n        ],\n        [\n            'half-letter',\n            5.5,\n            8.5,\n            'in'\n        ],\n        [\n            'letter',\n            8.5,\n            11,\n            'in'\n        ],\n        [\n            'legal',\n            8.5,\n            14,\n            'in'\n        ],\n        [\n            'junior-legal',\n            5,\n            8,\n            'in'\n        ],\n        [\n            'ledger',\n            11,\n            17,\n            'in'\n        ],\n        [\n            'tabloid',\n            11,\n            17,\n            'in'\n        ],\n        [\n            'ansi-a',\n            8.5,\n            11.0,\n            'in'\n        ],\n        [\n            'ansi-b',\n            11.0,\n            17.0,\n            'in'\n        ],\n        [\n            'ansi-c',\n            17.0,\n            22.0,\n            'in'\n        ],\n        [\n            'ansi-d',\n            22.0,\n            34.0,\n            'in'\n        ],\n        [\n            'ansi-e',\n            34.0,\n            44.0,\n            'in'\n        ],\n        [\n            'arch-a',\n            9,\n            12,\n            'in'\n        ],\n        [\n            'arch-b',\n            12,\n            18,\n            'in'\n        ],\n        [\n            'arch-c',\n            18,\n            24,\n            'in'\n        ],\n        [\n            'arch-d',\n            24,\n            36,\n            'in'\n        ],\n        [\n            'arch-e',\n            36,\n            48,\n            'in'\n        ],\n        [\n            'arch-e1',\n            30,\n            42,\n            'in'\n        ],\n        [\n            'arch-e2',\n            26,\n            38,\n            'in'\n        ],\n        [\n            'arch-e3',\n            27,\n            39,\n            'in'\n        ]\n    ];\n    var paperSizes = data.reduce(function(dict, preset) {\n        var item = {\n            units: preset[3] || defaultUnits,\n            dimensions: [\n                preset[1],\n                preset[2]\n            ]\n        };\n        dict[preset[0]] = item;\n        dict[preset[0].replace(/-/g, ' ')] = item;\n        return dict;\n    }, {});\n    var defined$1 = function() {\n        for(var i = 0; i < arguments.length; i++){\n            if (arguments[i] !== undefined) return arguments[i];\n        }\n    };\n    var units = [\n        'mm',\n        'cm',\n        'm',\n        'pc',\n        'pt',\n        'in',\n        'ft',\n        'px'\n    ];\n    var conversions = {\n        // metric\n        m: {\n            system: 'metric',\n            factor: 1\n        },\n        cm: {\n            system: 'metric',\n            factor: 0.01\n        },\n        mm: {\n            system: 'metric',\n            factor: 0.001\n        },\n        // imperial\n        pt: {\n            system: 'imperial',\n            factor: 1 / 72\n        },\n        pc: {\n            system: 'imperial',\n            factor: 1 / 6\n        },\n        in: {\n            system: 'imperial',\n            factor: 1\n        },\n        ft: {\n            system: 'imperial',\n            factor: 12\n        }\n    };\n    const anchors = {\n        metric: {\n            unit: 'm',\n            ratio: 1 / 0.0254\n        },\n        imperial: {\n            unit: 'in',\n            ratio: 0.0254\n        }\n    };\n    function round(value, decimals) {\n        return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);\n    }\n    function convertDistance(value, fromUnit, toUnit, opts) {\n        if (typeof value !== 'number' || !isFinite(value)) throw new Error('Value must be a finite number');\n        if (!fromUnit || !toUnit) throw new Error('Must specify from and to units');\n        opts = opts || {};\n        var pixelsPerInch = defined$1(opts.pixelsPerInch, 96);\n        var precision = opts.precision;\n        var roundPixel = opts.roundPixel !== false;\n        fromUnit = fromUnit.toLowerCase();\n        toUnit = toUnit.toLowerCase();\n        if (units.indexOf(fromUnit) === -1) throw new Error('Invalid from unit \"' + fromUnit + '\", must be one of: ' + units.join(', '));\n        if (units.indexOf(toUnit) === -1) throw new Error('Invalid from unit \"' + toUnit + '\", must be one of: ' + units.join(', '));\n        if (fromUnit === toUnit) // We don't need to convert from A to B since they are the same already\n        return value;\n        var toFactor = 1;\n        var fromFactor = 1;\n        var isToPixel = false;\n        if (fromUnit === 'px') {\n            fromFactor = 1 / pixelsPerInch;\n            fromUnit = 'in';\n        }\n        if (toUnit === 'px') {\n            isToPixel = true;\n            toFactor = pixelsPerInch;\n            toUnit = 'in';\n        }\n        var fromUnitData = conversions[fromUnit];\n        var toUnitData = conversions[toUnit];\n        // source to anchor inside source's system\n        var anchor = value * fromUnitData.factor * fromFactor;\n        // if systems differ, convert one to another\n        if (fromUnitData.system !== toUnitData.system) // regular 'm' to 'in' and so forth\n        anchor *= anchors[fromUnitData.system].ratio;\n        var result = anchor / toUnitData.factor * toFactor;\n        if (isToPixel && roundPixel) result = Math.round(result);\n        else if (typeof precision === 'number' && isFinite(precision)) result = round(result, precision);\n        return result;\n    }\n    var convertLength = convertDistance;\n    var units_1 = units;\n    convertLength.units = units_1;\n    function getDimensionsFromPreset(dimensions, unitsTo, pixelsPerInch) {\n        if (unitsTo === void 0) unitsTo = 'px';\n        if (pixelsPerInch === void 0) pixelsPerInch = 72;\n        if (typeof dimensions === 'string') {\n            var key = dimensions.toLowerCase();\n            if (!(key in paperSizes)) throw new Error(\"The dimension preset \\\"\" + dimensions + \"\\\" is not supported or could not be found; try using a4, a3, postcard, letter, etc.\");\n            var preset = paperSizes[key];\n            return preset.dimensions.map(function(d) {\n                return convertDistance$1(d, preset.units, unitsTo, pixelsPerInch);\n            });\n        } else return dimensions;\n    }\n    function convertDistance$1(dimension, unitsFrom, unitsTo, pixelsPerInch) {\n        if (unitsFrom === void 0) unitsFrom = 'px';\n        if (unitsTo === void 0) unitsTo = 'px';\n        if (pixelsPerInch === void 0) pixelsPerInch = 72;\n        return convertLength(dimension, unitsFrom, unitsTo, {\n            pixelsPerInch: pixelsPerInch,\n            precision: 4,\n            roundPixel: true\n        });\n    }\n    function checkIfHasDimensions(settings) {\n        if (!settings.dimensions) return false;\n        if (typeof settings.dimensions === 'string') return true;\n        if (Array.isArray(settings.dimensions) && settings.dimensions.length >= 2) return true;\n        return false;\n    }\n    function getParentSize(props, settings) {\n        if (!isBrowser()) return [\n            300,\n            150\n        ];\n        var element = settings.parent || window;\n        if (element === window || element === document || element === document.body) return [\n            window.innerWidth,\n            window.innerHeight\n        ];\n        else {\n            var ref = element.getBoundingClientRect();\n            var width = ref.width;\n            var height = ref.height;\n            return [\n                width,\n                height\n            ];\n        }\n    }\n    function resizeCanvas(props, settings) {\n        var width, height;\n        var styleWidth, styleHeight;\n        var canvasWidth, canvasHeight;\n        var browser = isBrowser();\n        var dimensions = settings.dimensions;\n        var hasDimensions = checkIfHasDimensions(settings);\n        var exporting = props.exporting;\n        var scaleToFit = hasDimensions ? settings.scaleToFit !== false : false;\n        var scaleToView = !exporting && hasDimensions ? settings.scaleToView : true;\n        if (!browser) scaleToFit = scaleToView = false;\n        var units = settings.units;\n        var pixelsPerInch = typeof settings.pixelsPerInch === 'number' && isFinite(settings.pixelsPerInch) ? settings.pixelsPerInch : 72;\n        var bleed = defined(settings.bleed, 0);\n        var devicePixelRatio = browser ? window.devicePixelRatio : 1;\n        var basePixelRatio = scaleToView ? devicePixelRatio : 1;\n        var pixelRatio, exportPixelRatio;\n        if (typeof settings.pixelRatio === 'number' && isFinite(settings.pixelRatio)) {\n            pixelRatio = settings.pixelRatio;\n            exportPixelRatio = defined(settings.exportPixelRatio, pixelRatio);\n        } else if (hasDimensions) {\n            pixelRatio = basePixelRatio;\n            exportPixelRatio = defined(settings.exportPixelRatio, 1);\n        } else {\n            pixelRatio = devicePixelRatio;\n            exportPixelRatio = defined(settings.exportPixelRatio, pixelRatio);\n        }\n        if (typeof settings.maxPixelRatio === 'number' && isFinite(settings.maxPixelRatio)) pixelRatio = Math.min(settings.maxPixelRatio, pixelRatio);\n        if (exporting) pixelRatio = exportPixelRatio;\n        var ref = getParentSize(props, settings);\n        var parentWidth = ref[0];\n        var parentHeight = ref[1];\n        var trimWidth, trimHeight;\n        if (hasDimensions) {\n            var result = getDimensionsFromPreset(dimensions, units, pixelsPerInch);\n            var highest = Math.max(result[0], result[1]);\n            var lowest = Math.min(result[0], result[1]);\n            if (settings.orientation) {\n                var landscape = settings.orientation === 'landscape';\n                width = landscape ? highest : lowest;\n                height = landscape ? lowest : highest;\n            } else {\n                width = result[0];\n                height = result[1];\n            }\n            trimWidth = width;\n            trimHeight = height;\n            width += bleed * 2;\n            height += bleed * 2;\n        } else {\n            width = parentWidth;\n            height = parentHeight;\n            trimWidth = width;\n            trimHeight = height;\n        }\n        var realWidth = width;\n        var realHeight = height;\n        if (hasDimensions && units) {\n            realWidth = convertDistance$1(width, units, 'px', pixelsPerInch);\n            realHeight = convertDistance$1(height, units, 'px', pixelsPerInch);\n        }\n        styleWidth = Math.round(realWidth);\n        styleHeight = Math.round(realHeight);\n        if (scaleToFit && !exporting && hasDimensions) {\n            var aspect = width / height;\n            var windowAspect = parentWidth / parentHeight;\n            var scaleToFitPadding = defined(settings.scaleToFitPadding, 40);\n            var maxWidth = Math.round(parentWidth - scaleToFitPadding * 2);\n            var maxHeight = Math.round(parentHeight - scaleToFitPadding * 2);\n            if (styleWidth > maxWidth || styleHeight > maxHeight) {\n                if (windowAspect > aspect) {\n                    styleHeight = maxHeight;\n                    styleWidth = Math.round(styleHeight * aspect);\n                } else {\n                    styleWidth = maxWidth;\n                    styleHeight = Math.round(styleWidth / aspect);\n                }\n            }\n        }\n        canvasWidth = scaleToView ? Math.round(pixelRatio * styleWidth) : Math.round(pixelRatio * realWidth);\n        canvasHeight = scaleToView ? Math.round(pixelRatio * styleHeight) : Math.round(pixelRatio * realHeight);\n        var viewportWidth = scaleToView ? Math.round(styleWidth) : Math.round(realWidth);\n        var viewportHeight = scaleToView ? Math.round(styleHeight) : Math.round(realHeight);\n        var scaleX = canvasWidth / width;\n        var scaleY = canvasHeight / height;\n        return {\n            bleed: bleed,\n            pixelRatio: pixelRatio,\n            width: width,\n            height: height,\n            dimensions: [\n                width,\n                height\n            ],\n            units: units || 'px',\n            scaleX: scaleX,\n            scaleY: scaleY,\n            pixelsPerInch: pixelsPerInch,\n            viewportWidth: viewportWidth,\n            viewportHeight: viewportHeight,\n            canvasWidth: canvasWidth,\n            canvasHeight: canvasHeight,\n            trimWidth: trimWidth,\n            trimHeight: trimHeight,\n            styleWidth: styleWidth,\n            styleHeight: styleHeight\n        };\n    }\n    var getCanvasContext_1 = getCanvasContext;\n    function getCanvasContext(type, opts) {\n        if (typeof type !== 'string') throw new TypeError('must specify type string');\n        opts = opts || {};\n        if (typeof document === 'undefined' && !opts.canvas) return null // check for Node\n        ;\n        var canvas = opts.canvas || document.createElement('canvas');\n        if (typeof opts.width === 'number') canvas.width = opts.width;\n        if (typeof opts.height === 'number') canvas.height = opts.height;\n        var attribs = opts;\n        var gl;\n        try {\n            var names = [\n                type\n            ];\n            // prefix GL contexts\n            if (type.indexOf('webgl') === 0) names.push('experimental-' + type);\n            for(var i = 0; i < names.length; i++){\n                gl = canvas.getContext(names[i], attribs);\n                if (gl) return gl;\n            }\n        } catch (e) {\n            gl = null;\n        }\n        return gl || null // ensure null on fail\n        ;\n    }\n    function createCanvasElement() {\n        if (!isBrowser()) throw new Error('It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.');\n        return document.createElement('canvas');\n    }\n    function createCanvas(settings) {\n        if (settings === void 0) settings = {};\n        var context, canvas;\n        var ownsCanvas = false;\n        if (settings.canvas !== false) {\n            context = settings.context;\n            if (!context || typeof context === 'string') {\n                var newCanvas = settings.canvas;\n                if (!newCanvas) {\n                    newCanvas = createCanvasElement();\n                    ownsCanvas = true;\n                }\n                var type = context || '2d';\n                if (typeof newCanvas.getContext !== 'function') throw new Error(\"The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?\");\n                context = getCanvasContext_1(type, objectAssign({}, settings.attributes, {\n                    canvas: newCanvas\n                }));\n                if (!context) throw new Error(\"Failed at canvas.getContext('\" + type + \"') - the browser may not support this context, or a different context may already be in use with this canvas.\");\n            }\n            canvas = context.canvas;\n            if (settings.canvas && canvas !== settings.canvas) throw new Error('The { canvas } and { context } settings must point to the same underlying canvas element');\n            if (settings.pixelated) {\n                context.imageSmoothingEnabled = false;\n                context.mozImageSmoothingEnabled = false;\n                context.oImageSmoothingEnabled = false;\n                context.webkitImageSmoothingEnabled = false;\n                context.msImageSmoothingEnabled = false;\n                canvas.style['image-rendering'] = 'pixelated';\n            }\n        }\n        return {\n            canvas: canvas,\n            context: context,\n            ownsCanvas: ownsCanvas\n        };\n    }\n    var SketchManager = function SketchManager() {\n        var this$1 = this;\n        this._settings = {};\n        this._props = {};\n        this._sketch = undefined;\n        this._raf = null;\n        this._recordTimeout = null;\n        this._lastRedrawResult = undefined;\n        this._isP5Resizing = false;\n        this._keyboardShortcuts = keyboardShortcuts({\n            enabled: function() {\n                return this$1.settings.hotkeys !== false;\n            },\n            save: function(ev) {\n                if (ev.shiftKey) {\n                    if (this$1.props.recording) {\n                        this$1.endRecord();\n                        this$1.run();\n                    } else this$1.record();\n                } else if (!this$1.props.recording) this$1.exportFrame();\n            },\n            togglePlay: function() {\n                if (this$1.props.playing) this$1.pause();\n                else this$1.play();\n            },\n            commit: function(ev) {\n                this$1.exportFrame({\n                    commit: true\n                });\n            }\n        });\n        this._animateHandler = function() {\n            return this$1.animate();\n        };\n        this._resizeHandler = function() {\n            var changed = this$1.resize();\n            if (changed) this$1.render();\n        };\n    };\n    var prototypeAccessors = {\n        sketch: {\n            configurable: true\n        },\n        settings: {\n            configurable: true\n        },\n        props: {\n            configurable: true\n        }\n    };\n    prototypeAccessors.sketch.get = function() {\n        return this._sketch;\n    };\n    prototypeAccessors.settings.get = function() {\n        return this._settings;\n    };\n    prototypeAccessors.props.get = function() {\n        return this._props;\n    };\n    SketchManager.prototype._computePlayhead = function _computePlayhead(currentTime, duration) {\n        var hasDuration = typeof duration === \"number\" && isFinite(duration);\n        return hasDuration ? currentTime / duration : 0;\n    };\n    SketchManager.prototype._computeFrame = function _computeFrame(playhead, time, totalFrames, fps) {\n        return isFinite(totalFrames) && totalFrames > 1 ? Math.floor(playhead * (totalFrames - 1)) : Math.floor(fps * time);\n    };\n    SketchManager.prototype._computeCurrentFrame = function _computeCurrentFrame() {\n        return this._computeFrame(this.props.playhead, this.props.time, this.props.totalFrames, this.props.fps);\n    };\n    SketchManager.prototype._getSizeProps = function _getSizeProps() {\n        var props = this.props;\n        return {\n            width: props.width,\n            height: props.height,\n            pixelRatio: props.pixelRatio,\n            canvasWidth: props.canvasWidth,\n            canvasHeight: props.canvasHeight,\n            viewportWidth: props.viewportWidth,\n            viewportHeight: props.viewportHeight\n        };\n    };\n    SketchManager.prototype.run = function run() {\n        if (!this.sketch) throw new Error(\"should wait until sketch is loaded before trying to play()\");\n        if (this.settings.playing !== false) this.play();\n        if (typeof this.sketch.dispose === \"function\") console.warn(\"In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()\");\n        if (!this.props.started) {\n            this._signalBegin();\n            this.props.started = true;\n        }\n        this.tick();\n        this.render();\n        return this;\n    };\n    SketchManager.prototype._cancelTimeouts = function _cancelTimeouts() {\n        if (this._raf != null && typeof window !== \"undefined\" && typeof window.cancelAnimationFrame === \"function\") {\n            window.cancelAnimationFrame(this._raf);\n            this._raf = null;\n        }\n        if (this._recordTimeout != null) {\n            clearTimeout(this._recordTimeout);\n            this._recordTimeout = null;\n        }\n    };\n    SketchManager.prototype.play = function play() {\n        var animate = this.settings.animate;\n        if (\"animation\" in this.settings) {\n            animate = true;\n            console.warn(\"[canvas-sketch] { animation } has been renamed to { animate }\");\n        }\n        if (!animate) return;\n        if (!isBrowser()) {\n            console.error(\"[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported\");\n            return;\n        }\n        if (this.props.playing) return;\n        if (!this.props.started) {\n            this._signalBegin();\n            this.props.started = true;\n        }\n        this.props.playing = true;\n        this._cancelTimeouts();\n        this._lastTime = browser();\n        this._raf = window.requestAnimationFrame(this._animateHandler);\n    };\n    SketchManager.prototype.pause = function pause() {\n        if (this.props.recording) this.endRecord();\n        this.props.playing = false;\n        this._cancelTimeouts();\n    };\n    SketchManager.prototype.togglePlay = function togglePlay() {\n        if (this.props.playing) this.pause();\n        else this.play();\n    };\n    SketchManager.prototype.stop = function stop() {\n        this.pause();\n        this.props.frame = 0;\n        this.props.playhead = 0;\n        this.props.time = 0;\n        this.props.deltaTime = 0;\n        this.props.started = false;\n        this.render();\n    };\n    SketchManager.prototype.record = function record() {\n        var this$1 = this;\n        if (this.props.recording) return;\n        if (!isBrowser()) {\n            console.error(\"[canvas-sketch] WARN: Recording from Node.js is not yet supported\");\n            return;\n        }\n        this.stop();\n        this.props.playing = true;\n        this.props.recording = true;\n        var exportOpts = this._createExportOptions({\n            sequence: true\n        });\n        var frameInterval = 1 / this.props.fps;\n        this._cancelTimeouts();\n        var tick = function() {\n            if (!this$1.props.recording) return Promise.resolve();\n            this$1.props.deltaTime = frameInterval;\n            this$1.tick();\n            return this$1.exportFrame(exportOpts).then(function() {\n                if (!this$1.props.recording) return;\n                this$1.props.deltaTime = 0;\n                this$1.props.frame++;\n                if (this$1.props.frame < this$1.props.totalFrames) {\n                    this$1.props.time += frameInterval;\n                    this$1.props.playhead = this$1._computePlayhead(this$1.props.time, this$1.props.duration);\n                    this$1._recordTimeout = setTimeout(tick, 0);\n                } else {\n                    console.log(\"Finished recording\");\n                    this$1._signalEnd();\n                    this$1.endRecord();\n                    this$1.stop();\n                    this$1.run();\n                }\n            });\n        };\n        if (!this.props.started) {\n            this._signalBegin();\n            this.props.started = true;\n        }\n        if (this.sketch && typeof this.sketch.beginRecord === \"function\") this._wrapContextScale(function(props) {\n            return this$1.sketch.beginRecord(props);\n        });\n        streamStart(exportOpts).catch(function(err) {\n            console.error(err);\n        }).then(function(response) {\n            this$1._raf = window.requestAnimationFrame(tick);\n        });\n    };\n    SketchManager.prototype._signalBegin = function _signalBegin() {\n        var this$1 = this;\n        if (this.sketch && typeof this.sketch.begin === \"function\") this._wrapContextScale(function(props) {\n            return this$1.sketch.begin(props);\n        });\n    };\n    SketchManager.prototype._signalEnd = function _signalEnd() {\n        var this$1 = this;\n        if (this.sketch && typeof this.sketch.end === \"function\") this._wrapContextScale(function(props) {\n            return this$1.sketch.end(props);\n        });\n    };\n    SketchManager.prototype.endRecord = function endRecord() {\n        var this$1 = this;\n        var wasRecording = this.props.recording;\n        this._cancelTimeouts();\n        this.props.recording = false;\n        this.props.deltaTime = 0;\n        this.props.playing = false;\n        return streamEnd().catch(function(err) {\n            console.error(err);\n        }).then(function() {\n            if (wasRecording && this$1.sketch && typeof this$1.sketch.endRecord === \"function\") this$1._wrapContextScale(function(props) {\n                return this$1.sketch.endRecord(props);\n            });\n        });\n    };\n    SketchManager.prototype._createExportOptions = function _createExportOptions(opt) {\n        if (opt === void 0) opt = {};\n        return {\n            sequence: opt.sequence,\n            save: opt.save,\n            fps: this.props.fps,\n            frame: opt.sequence ? this.props.frame : undefined,\n            file: this.settings.file,\n            name: this.settings.name,\n            prefix: this.settings.prefix,\n            suffix: this.settings.suffix,\n            encoding: this.settings.encoding,\n            encodingQuality: this.settings.encodingQuality,\n            timeStamp: opt.timeStamp || getTimeStamp(),\n            totalFrames: isFinite(this.props.totalFrames) ? Math.max(0, this.props.totalFrames) : 1000\n        };\n    };\n    SketchManager.prototype.exportFrame = function exportFrame(opt) {\n        var this$1 = this;\n        if (opt === void 0) opt = {};\n        if (!this.sketch) return Promise.all([]);\n        if (typeof this.sketch.preExport === \"function\") this.sketch.preExport();\n        var exportOpts = this._createExportOptions(opt);\n        var client = getClientAPI();\n        var p = Promise.resolve();\n        if (client && opt.commit && typeof client.commit === \"function\") {\n            var commitOpts = objectAssign({}, exportOpts);\n            var hash = client.commit(commitOpts);\n            if (isPromise_1(hash)) p = hash;\n            else p = Promise.resolve(hash);\n        }\n        return p.then(function(hash) {\n            return this$1._doExportFrame(objectAssign({}, exportOpts, {\n                hash: hash || \"\"\n            }));\n        }).then(function(result) {\n            if (result.length === 1) return result[0];\n            else return result;\n        });\n    };\n    SketchManager.prototype._doExportFrame = function _doExportFrame(exportOpts) {\n        var this$1 = this;\n        if (exportOpts === void 0) exportOpts = {};\n        this._props.exporting = true;\n        this.resize();\n        var drawResult = this.render();\n        var canvas = this.props.canvas;\n        if (typeof drawResult === \"undefined\") drawResult = [\n            canvas\n        ];\n        drawResult = [].concat(drawResult).filter(Boolean);\n        drawResult = drawResult.map(function(result) {\n            var hasDataObject = typeof result === \"object\" && result && (\"data\" in result || \"dataURL\" in result);\n            var data = hasDataObject ? result.data : result;\n            var opts = hasDataObject ? objectAssign({}, result, {\n                data: data\n            }) : {\n                data: data\n            };\n            if (isCanvas(data)) {\n                var encoding = opts.encoding || exportOpts.encoding;\n                var encodingQuality = defined(opts.encodingQuality, exportOpts.encodingQuality, 0.95);\n                var ref = exportCanvas(data, {\n                    encoding: encoding,\n                    encodingQuality: encodingQuality\n                });\n                var dataURL = ref.dataURL;\n                var extension = ref.extension;\n                var type = ref.type;\n                return Object.assign(opts, {\n                    dataURL: dataURL,\n                    extension: extension,\n                    type: type\n                });\n            } else return opts;\n        });\n        this._props.exporting = false;\n        this.resize();\n        this.render();\n        return Promise.all(drawResult.map(function(result, i, layerList) {\n            var curOpt = objectAssign({\n                extension: \"\",\n                prefix: \"\",\n                suffix: \"\"\n            }, exportOpts, result, {\n                layer: i,\n                totalLayers: layerList.length\n            });\n            var saveParam = exportOpts.save === false ? false : result.save;\n            curOpt.save = saveParam !== false;\n            curOpt.filename = resolveFilename(curOpt);\n            delete curOpt.encoding;\n            delete curOpt.encodingQuality;\n            for(var k in curOpt)if (typeof curOpt[k] === \"undefined\") delete curOpt[k];\n            var savePromise = Promise.resolve({});\n            if (curOpt.save) {\n                var data = curOpt.data;\n                if (curOpt.dataURL) {\n                    var dataURL = curOpt.dataURL;\n                    savePromise = saveDataURL(dataURL, curOpt);\n                } else savePromise = saveFile(data, curOpt);\n            }\n            return savePromise.then(function(saveResult) {\n                return Object.assign({}, curOpt, saveResult);\n            });\n        })).then(function(ev) {\n            var savedEvents = ev.filter(function(e) {\n                return e.save;\n            });\n            if (savedEvents.length > 0) {\n                var eventWithOutput = savedEvents.find(function(e) {\n                    return e.outputName;\n                });\n                var isClient = savedEvents.some(function(e) {\n                    return e.client;\n                });\n                var isStreaming = savedEvents.some(function(e) {\n                    return e.stream;\n                });\n                var item;\n                if (savedEvents.length > 1) item = savedEvents.length;\n                else if (eventWithOutput) item = eventWithOutput.outputName + \"/\" + savedEvents[0].filename;\n                else item = \"\" + savedEvents[0].filename;\n                var ofSeq = \"\";\n                if (exportOpts.sequence) {\n                    var hasTotalFrames = isFinite(this$1.props.totalFrames);\n                    ofSeq = hasTotalFrames ? \" (frame \" + (exportOpts.frame + 1) + \" / \" + this$1.props.totalFrames + \")\" : \" (frame \" + exportOpts.frame + \")\";\n                } else if (savedEvents.length > 1) ofSeq = \" files\";\n                var client = isClient ? \"canvas-sketch-cli\" : \"canvas-sketch\";\n                var action = isStreaming ? \"Streaming into\" : \"Exported\";\n                console.log(\"%c[\" + client + \"]%c \" + action + \" %c\" + item + \"%c\" + ofSeq, \"color: #8e8e8e;\", \"color: initial;\", \"font-weight: bold;\", \"font-weight: initial;\");\n            }\n            if (typeof this$1.sketch.postExport === \"function\") this$1.sketch.postExport();\n            return ev;\n        });\n    };\n    SketchManager.prototype._wrapContextScale = function _wrapContextScale(cb) {\n        this._preRender();\n        cb(this.props);\n        this._postRender();\n    };\n    SketchManager.prototype._preRender = function _preRender() {\n        var props = this.props;\n        if (is2DContext(props.context) && !props.p5) {\n            props.context.save();\n            if (this.settings.scaleContext !== false) props.context.scale(props.scaleX, props.scaleY);\n        } else if (props.p5) props.p5.scale(props.scaleX / props.pixelRatio, props.scaleY / props.pixelRatio);\n    };\n    SketchManager.prototype._postRender = function _postRender() {\n        var props = this.props;\n        if (is2DContext(props.context) && !props.p5) props.context.restore();\n        if (props.gl && this.settings.flush !== false && !props.p5) props.gl.flush();\n    };\n    SketchManager.prototype.tick = function tick() {\n        if (this.sketch && typeof this.sketch.tick === \"function\") {\n            this._preRender();\n            this.sketch.tick(this.props);\n            this._postRender();\n        }\n    };\n    SketchManager.prototype.render = function render() {\n        if (this.props.p5) {\n            this._lastRedrawResult = undefined;\n            this.props.p5.redraw();\n            return this._lastRedrawResult;\n        } else return this.submitDrawCall();\n    };\n    SketchManager.prototype.submitDrawCall = function submitDrawCall() {\n        if (!this.sketch) return;\n        var props = this.props;\n        this._preRender();\n        var drawResult;\n        if (typeof this.sketch === \"function\") drawResult = this.sketch(props);\n        else if (typeof this.sketch.render === \"function\") drawResult = this.sketch.render(props);\n        this._postRender();\n        return drawResult;\n    };\n    SketchManager.prototype.update = function update(opt) {\n        var this$1 = this;\n        if (opt === void 0) opt = {};\n        var notYetSupported = [\n            \"animate\"\n        ];\n        Object.keys(opt).forEach(function(key) {\n            if (notYetSupported.indexOf(key) >= 0) throw new Error(\"Sorry, the { \" + key + \" } option is not yet supported with update().\");\n        });\n        var oldCanvas = this._settings.canvas;\n        var oldContext = this._settings.context;\n        for(var key in opt){\n            var value = opt[key];\n            if (typeof value !== \"undefined\") this$1._settings[key] = value;\n        }\n        var timeOpts = Object.assign({}, this._settings, opt);\n        if (\"time\" in opt && \"frame\" in opt) throw new Error(\"You should specify { time } or { frame } but not both\");\n        else if (\"time\" in opt) delete timeOpts.frame;\n        else if (\"frame\" in opt) delete timeOpts.time;\n        if (\"duration\" in opt && \"totalFrames\" in opt) throw new Error(\"You should specify { duration } or { totalFrames } but not both\");\n        else if (\"duration\" in opt) delete timeOpts.totalFrames;\n        else if (\"totalFrames\" in opt) delete timeOpts.duration;\n        if (\"data\" in opt) this._props.data = opt.data;\n        var timeProps = this.getTimeProps(timeOpts);\n        Object.assign(this._props, timeProps);\n        if (oldCanvas !== this._settings.canvas || oldContext !== this._settings.context) {\n            var ref = createCanvas(this._settings);\n            var canvas = ref.canvas;\n            var context = ref.context;\n            this.props.canvas = canvas;\n            this.props.context = context;\n            this._setupGLKey();\n            this._appendCanvasIfNeeded();\n        }\n        if (opt.p5 && typeof opt.p5 !== \"function\") {\n            this.props.p5 = opt.p5;\n            this.props.p5.draw = function() {\n                if (this$1._isP5Resizing) return;\n                this$1._lastRedrawResult = this$1.submitDrawCall();\n            };\n        }\n        if (\"playing\" in opt) {\n            if (opt.playing) this.play();\n            else this.pause();\n        }\n        checkSettings(this._settings);\n        this.resize();\n        this.render();\n        return this.props;\n    };\n    SketchManager.prototype.resize = function resize() {\n        var oldSizes = this._getSizeProps();\n        var settings = this.settings;\n        var props = this.props;\n        var newProps = resizeCanvas(props, settings);\n        Object.assign(this._props, newProps);\n        var ref = this.props;\n        var pixelRatio = ref.pixelRatio;\n        var canvasWidth = ref.canvasWidth;\n        var canvasHeight = ref.canvasHeight;\n        var styleWidth = ref.styleWidth;\n        var styleHeight = ref.styleHeight;\n        var canvas = this.props.canvas;\n        if (canvas && settings.resizeCanvas !== false) {\n            if (props.p5) {\n                if (canvas.width !== canvasWidth || canvas.height !== canvasHeight) {\n                    this._isP5Resizing = true;\n                    props.p5.pixelDensity(pixelRatio);\n                    props.p5.resizeCanvas(canvasWidth / pixelRatio, canvasHeight / pixelRatio, false);\n                    this._isP5Resizing = false;\n                }\n            } else {\n                if (canvas.width !== canvasWidth) canvas.width = canvasWidth;\n                if (canvas.height !== canvasHeight) canvas.height = canvasHeight;\n            }\n            if (isBrowser() && settings.styleCanvas !== false) {\n                canvas.style.width = styleWidth + \"px\";\n                canvas.style.height = styleHeight + \"px\";\n            }\n        }\n        var newSizes = this._getSizeProps();\n        var changed = !deepEqual_1(oldSizes, newSizes);\n        if (changed) this._sizeChanged();\n        return changed;\n    };\n    SketchManager.prototype._sizeChanged = function _sizeChanged() {\n        if (this.sketch && typeof this.sketch.resize === \"function\") this.sketch.resize(this.props);\n    };\n    SketchManager.prototype.animate = function animate() {\n        if (!this.props.playing) return;\n        if (!isBrowser()) {\n            console.error(\"[canvas-sketch] WARN: Animation in Node.js is not yet supported\");\n            return;\n        }\n        this._raf = window.requestAnimationFrame(this._animateHandler);\n        var now = browser();\n        var fps = this.props.fps;\n        var frameIntervalMS = 1000 / fps;\n        var deltaTimeMS = now - this._lastTime;\n        var duration = this.props.duration;\n        var hasDuration = typeof duration === \"number\" && isFinite(duration);\n        var isNewFrame = true;\n        var playbackRate = this.settings.playbackRate;\n        if (playbackRate === \"fixed\") deltaTimeMS = frameIntervalMS;\n        else if (playbackRate === \"throttle\") {\n            if (deltaTimeMS > frameIntervalMS) {\n                now = now - deltaTimeMS % frameIntervalMS;\n                this._lastTime = now;\n            } else isNewFrame = false;\n        } else this._lastTime = now;\n        var deltaTime = deltaTimeMS / 1000;\n        var newTime = this.props.time + deltaTime * this.props.timeScale;\n        if (newTime < 0 && hasDuration) newTime = duration + newTime;\n        var isFinished = false;\n        var isLoopStart = false;\n        var looping = this.settings.loop !== false;\n        if (hasDuration && newTime >= duration) {\n            if (looping) {\n                isNewFrame = true;\n                newTime = newTime % duration;\n                isLoopStart = true;\n            } else {\n                isNewFrame = false;\n                newTime = duration;\n                isFinished = true;\n            }\n            this._signalEnd();\n        }\n        if (isNewFrame) {\n            this.props.deltaTime = deltaTime;\n            this.props.time = newTime;\n            this.props.playhead = this._computePlayhead(newTime, duration);\n            var lastFrame = this.props.frame;\n            this.props.frame = this._computeCurrentFrame();\n            if (isLoopStart) this._signalBegin();\n            if (lastFrame !== this.props.frame) this.tick();\n            this.render();\n            this.props.deltaTime = 0;\n        }\n        if (isFinished) this.pause();\n    };\n    SketchManager.prototype.dispatch = function dispatch(cb) {\n        if (typeof cb !== \"function\") throw new Error(\"must pass function into dispatch()\");\n        cb(this.props);\n        this.render();\n    };\n    SketchManager.prototype.mount = function mount() {\n        this._appendCanvasIfNeeded();\n    };\n    SketchManager.prototype.unmount = function unmount() {\n        if (isBrowser()) {\n            window.removeEventListener(\"resize\", this._resizeHandler);\n            this._keyboardShortcuts.detach();\n        }\n        if (this.props.canvas.parentElement) this.props.canvas.parentElement.removeChild(this.props.canvas);\n    };\n    SketchManager.prototype._appendCanvasIfNeeded = function _appendCanvasIfNeeded() {\n        if (!isBrowser()) return;\n        if (this.settings.parent !== false && this.props.canvas && !this.props.canvas.parentElement) {\n            var defaultParent = this.settings.parent || document.body;\n            defaultParent.appendChild(this.props.canvas);\n        }\n    };\n    SketchManager.prototype._setupGLKey = function _setupGLKey() {\n        if (this.props.context) {\n            if (isWebGLContext(this.props.context)) this._props.gl = this.props.context;\n            else delete this._props.gl;\n        }\n    };\n    SketchManager.prototype.getTimeProps = function getTimeProps(settings) {\n        if (settings === void 0) settings = {};\n        var duration = settings.duration;\n        var totalFrames = settings.totalFrames;\n        var timeScale = defined(settings.timeScale, 1);\n        var fps = defined(settings.fps, 24);\n        var hasDuration = typeof duration === \"number\" && isFinite(duration);\n        var hasTotalFrames = typeof totalFrames === \"number\" && isFinite(totalFrames);\n        var totalFramesFromDuration = hasDuration ? Math.floor(fps * duration) : undefined;\n        var durationFromTotalFrames = hasTotalFrames ? totalFrames / fps : undefined;\n        if (hasDuration && hasTotalFrames && totalFramesFromDuration !== totalFrames) throw new Error(\"You should specify either duration or totalFrames, but not both. Or, they must match exactly.\");\n        if (typeof settings.dimensions === \"undefined\" && typeof settings.units !== \"undefined\") console.warn(\"You've specified a { units } setting but no { dimension }, so the units will be ignored.\");\n        totalFrames = defined(totalFrames, totalFramesFromDuration, Infinity);\n        duration = defined(duration, durationFromTotalFrames, Infinity);\n        var startTime = settings.time;\n        var startFrame = settings.frame;\n        var hasStartTime = typeof startTime === \"number\" && isFinite(startTime);\n        var hasStartFrame = typeof startFrame === \"number\" && isFinite(startFrame);\n        var time = 0;\n        var frame = 0;\n        var playhead = 0;\n        if (hasStartTime && hasStartFrame) throw new Error(\"You should specify either start frame or time, but not both.\");\n        else if (hasStartTime) {\n            time = startTime;\n            playhead = this._computePlayhead(time, duration);\n            frame = this._computeFrame(playhead, time, totalFrames, fps);\n        } else if (hasStartFrame) {\n            frame = startFrame;\n            time = frame / fps;\n            playhead = this._computePlayhead(time, duration);\n        }\n        return {\n            playhead: playhead,\n            time: time,\n            frame: frame,\n            duration: duration,\n            totalFrames: totalFrames,\n            fps: fps,\n            timeScale: timeScale\n        };\n    };\n    SketchManager.prototype.setup = function setup(settings) {\n        var this$1 = this;\n        if (settings === void 0) settings = {};\n        if (this.sketch) throw new Error(\"Multiple setup() calls not yet supported.\");\n        this._settings = Object.assign({}, settings, this._settings);\n        checkSettings(this._settings);\n        var ref = createCanvas(this._settings);\n        var context = ref.context;\n        var canvas = ref.canvas;\n        var timeProps = this.getTimeProps(this._settings);\n        this._props = Object.assign({}, timeProps, {\n            canvas: canvas,\n            context: context,\n            deltaTime: 0,\n            started: false,\n            exporting: false,\n            playing: false,\n            recording: false,\n            settings: this.settings,\n            data: this.settings.data,\n            render: function() {\n                return this$1.render();\n            },\n            togglePlay: function() {\n                return this$1.togglePlay();\n            },\n            dispatch: function(cb) {\n                return this$1.dispatch(cb);\n            },\n            tick: function() {\n                return this$1.tick();\n            },\n            resize: function() {\n                return this$1.resize();\n            },\n            update: function(opt) {\n                return this$1.update(opt);\n            },\n            exportFrame: function(opt) {\n                return this$1.exportFrame(opt);\n            },\n            record: function() {\n                return this$1.record();\n            },\n            play: function() {\n                return this$1.play();\n            },\n            pause: function() {\n                return this$1.pause();\n            },\n            stop: function() {\n                return this$1.stop();\n            }\n        });\n        this._setupGLKey();\n        this.resize();\n    };\n    SketchManager.prototype.loadAndRun = function loadAndRun(canvasSketch, newSettings) {\n        var this$1 = this;\n        return this.load(canvasSketch, newSettings).then(function() {\n            this$1.run();\n            return this$1;\n        });\n    };\n    SketchManager.prototype.unload = function unload() {\n        var this$1 = this;\n        this.pause();\n        if (!this.sketch) return;\n        if (typeof this.sketch.unload === \"function\") this._wrapContextScale(function(props) {\n            return this$1.sketch.unload(props);\n        });\n        this._sketch = null;\n    };\n    SketchManager.prototype.destroy = function destroy() {\n        this.unload();\n        this.unmount();\n    };\n    SketchManager.prototype.load = function load(createSketch, newSettings) {\n        var this$1 = this;\n        if (typeof createSketch !== \"function\") throw new Error(\"The function must take in a function as the first parameter. Example:\\n  canvasSketcher(() => { ... }, settings)\");\n        if (this.sketch) this.unload();\n        if (typeof newSettings !== \"undefined\") this.update(newSettings);\n        this._preRender();\n        var preload = Promise.resolve();\n        if (this.settings.p5) {\n            if (!isBrowser()) throw new Error(\"[canvas-sketch] ERROR: Using p5.js in Node.js is not supported\");\n            preload = new Promise(function(resolve) {\n                var P5Constructor = this$1.settings.p5;\n                var preload;\n                if (P5Constructor.p5) {\n                    preload = P5Constructor.preload;\n                    P5Constructor = P5Constructor.p5;\n                }\n                var p5Sketch = function(p5) {\n                    if (preload) p5.preload = function() {\n                        return preload(p5);\n                    };\n                    p5.setup = function() {\n                        var props = this$1.props;\n                        var isGL = this$1.settings.context === \"webgl\";\n                        var renderer = isGL ? p5.WEBGL : p5.P2D;\n                        p5.noLoop();\n                        p5.pixelDensity(props.pixelRatio);\n                        p5.createCanvas(props.viewportWidth, props.viewportHeight, renderer);\n                        if (isGL && this$1.settings.attributes) p5.setAttributes(this$1.settings.attributes);\n                        this$1.update({\n                            p5: p5,\n                            canvas: p5.canvas,\n                            context: p5._renderer.drawingContext\n                        });\n                        resolve();\n                    };\n                };\n                if (typeof P5Constructor === \"function\") new P5Constructor(p5Sketch);\n                else {\n                    if (typeof window.createCanvas !== \"function\") throw new Error(\"{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?\\nnew p5(); // <-- attaches to global scope\");\n                    p5Sketch(window);\n                }\n            });\n        }\n        return preload.then(function() {\n            var loader = createSketch(this$1.props);\n            if (!isPromise_1(loader)) loader = Promise.resolve(loader);\n            return loader;\n        }).then(function(sketch) {\n            if (!sketch) sketch = {};\n            this$1._sketch = sketch;\n            if (isBrowser()) {\n                this$1._keyboardShortcuts.attach();\n                window.addEventListener(\"resize\", this$1._resizeHandler);\n            }\n            this$1._postRender();\n            this$1._sizeChanged();\n            return this$1;\n        }).catch(function(err) {\n            console.warn(\"Could not start sketch, the async loading function rejected with an error:\\n    Error: \" + err.message);\n            throw err;\n        });\n    };\n    Object.defineProperties(SketchManager.prototype, prototypeAccessors);\n    var CACHE = 'hot-id-cache';\n    var runtimeCollisions = [];\n    function isHotReload() {\n        var client = getClientAPI();\n        return client && client.hot;\n    }\n    function cacheGet(id) {\n        var client = getClientAPI();\n        if (!client) return undefined;\n        client[CACHE] = client[CACHE] || {};\n        return client[CACHE][id];\n    }\n    function cachePut(id, data) {\n        var client = getClientAPI();\n        if (!client) return undefined;\n        client[CACHE] = client[CACHE] || {};\n        client[CACHE][id] = data;\n    }\n    function getTimeProp(oldManager, newSettings) {\n        return newSettings.animate ? {\n            time: oldManager.props.time\n        } : undefined;\n    }\n    function canvasSketch(sketch, settings) {\n        if (settings === void 0) settings = {};\n        if (settings.p5) {\n            if (settings.canvas || settings.context && typeof settings.context !== 'string') throw new Error(\"In { p5 } mode, you can't pass your own canvas or context, unless the context is a \\\"webgl\\\" or \\\"2d\\\" string\");\n            var context = typeof settings.context === 'string' ? settings.context : false;\n            settings = Object.assign({}, settings, {\n                canvas: false,\n                context: context\n            });\n        }\n        var isHot = isHotReload();\n        var hotID;\n        if (isHot) hotID = defined(settings.id, '$__DEFAULT_CANVAS_SKETCH_ID__$');\n        var isInjecting = isHot && typeof hotID === 'string';\n        if (isInjecting && runtimeCollisions.includes(hotID)) {\n            console.warn(\"Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. \", hotID);\n            isInjecting = false;\n        }\n        var preload = Promise.resolve();\n        if (isInjecting) {\n            runtimeCollisions.push(hotID);\n            var previousData = cacheGet(hotID);\n            if (previousData) {\n                var next = function() {\n                    var newProps = getTimeProp(previousData.manager, settings);\n                    previousData.manager.destroy();\n                    return newProps;\n                };\n                preload = previousData.load.then(next).catch(next);\n            }\n        }\n        return preload.then(function(newProps) {\n            var manager = new SketchManager();\n            var result;\n            if (sketch) {\n                settings = Object.assign({}, settings, newProps);\n                manager.setup(settings);\n                manager.mount();\n                result = manager.loadAndRun(sketch);\n            } else result = Promise.resolve(manager);\n            if (isInjecting) cachePut(hotID, {\n                load: result,\n                manager: manager\n            });\n            return result;\n        });\n    }\n    canvasSketch.canvasSketch = canvasSketch;\n    canvasSketch.PaperSizes = paperSizes;\n    return canvasSketch;\n});\n\n\nvar $d4b6eff69b324b58$exports = {};\nvar $7a4c4b0affb0d9b8$exports = {};\n'use strict';\n$7a4c4b0affb0d9b8$exports = function defined() {\n    for(var i = 0; i < arguments.length; i++){\n        if (typeof arguments[i] !== 'undefined') return arguments[i];\n    }\n};\n\n\nvar $25c59ad3be6332bd$exports = {};\n$25c59ad3be6332bd$exports = $25c59ad3be6332bd$var$wrap;\nfunction $25c59ad3be6332bd$var$wrap(value, from, to) {\n    if (typeof from !== 'number' || typeof to !== 'number') throw new TypeError('Must specify \"to\" and \"from\" arguments as numbers');\n    // algorithm from http://stackoverflow.com/a/5852628/599884\n    if (from > to) {\n        var t = from;\n        from = to;\n        to = t;\n    }\n    var cycle = to - from;\n    if (cycle === 0) return to;\n    return value - cycle * Math.floor((value - from) / cycle);\n}\n\n\nvar $d4b6eff69b324b58$var$EPSILON = Number.EPSILON;\nfunction $d4b6eff69b324b58$var$clamp(value, min, max) {\n    return min < max ? value < min ? min : value > max ? max : value : value < max ? max : value > min ? min : value;\n}\nfunction $d4b6eff69b324b58$var$clamp01(v) {\n    return $d4b6eff69b324b58$var$clamp(v, 0, 1);\n}\nfunction $d4b6eff69b324b58$var$lerp(min, max, t) {\n    return min * (1 - t) + max * t;\n}\nfunction $d4b6eff69b324b58$var$inverseLerp(min, max, t) {\n    if (Math.abs(min - max) < $d4b6eff69b324b58$var$EPSILON) return 0;\n    else return (t - min) / (max - min);\n}\nfunction $d4b6eff69b324b58$var$smoothstep(min, max, t) {\n    var x = $d4b6eff69b324b58$var$clamp($d4b6eff69b324b58$var$inverseLerp(min, max, t), 0, 1);\n    return x * x * (3 - 2 * x);\n}\nfunction $d4b6eff69b324b58$var$toFinite(n, defaultValue) {\n    defaultValue = $7a4c4b0affb0d9b8$exports(defaultValue, 0);\n    return typeof n === 'number' && isFinite(n) ? n : defaultValue;\n}\nfunction $d4b6eff69b324b58$var$expandVector(dims) {\n    if (typeof dims !== 'number') throw new TypeError('Expected dims argument');\n    return function(p, defaultValue) {\n        defaultValue = $7a4c4b0affb0d9b8$exports(defaultValue, 0);\n        var scalar;\n        if (p == null) // No vector, create a default one\n        scalar = defaultValue;\n        else if (typeof p === 'number' && isFinite(p)) // Expand single channel to multiple vector\n        scalar = p;\n        var out = [];\n        var i;\n        if (scalar == null) for(i = 0; i < dims; i++)out[i] = $d4b6eff69b324b58$var$toFinite(p[i], defaultValue);\n        else for(i = 0; i < dims; i++)out[i] = scalar;\n        return out;\n    };\n}\nfunction $d4b6eff69b324b58$var$lerpArray(min, max, t, out) {\n    out = out || [];\n    if (min.length !== max.length) throw new TypeError('min and max array are expected to have the same length');\n    for(var i = 0; i < min.length; i++)out[i] = $d4b6eff69b324b58$var$lerp(min[i], max[i], t);\n    return out;\n}\nfunction $d4b6eff69b324b58$var$newArray(n, initialValue) {\n    n = $7a4c4b0affb0d9b8$exports(n, 0);\n    if (typeof n !== 'number') throw new TypeError('Expected n argument to be a number');\n    var out = [];\n    for(var i = 0; i < n; i++)out.push(initialValue);\n    return out;\n}\nfunction $d4b6eff69b324b58$var$linspace(n, opts) {\n    n = $7a4c4b0affb0d9b8$exports(n, 0);\n    if (typeof n !== 'number') throw new TypeError('Expected n argument to be a number');\n    opts = opts || {};\n    if (typeof opts === 'boolean') opts = {\n        endpoint: true\n    };\n    var offset = $7a4c4b0affb0d9b8$exports(opts.offset, 0);\n    if (opts.endpoint) return $d4b6eff69b324b58$var$newArray(n).map(function(_, i) {\n        return n <= 1 ? 0 : (i + offset) / (n - 1);\n    });\n    else return $d4b6eff69b324b58$var$newArray(n).map(function(_, i) {\n        return (i + offset) / n;\n    });\n}\nfunction $d4b6eff69b324b58$var$lerpFrames(values, t, out) {\n    t = $d4b6eff69b324b58$var$clamp(t, 0, 1);\n    var len = values.length - 1;\n    var whole = t * len;\n    var frame = Math.floor(whole);\n    var fract = whole - frame;\n    var nextFrame = Math.min(frame + 1, len);\n    var a = values[frame % values.length];\n    var b = values[nextFrame % values.length];\n    if (typeof a === 'number' && typeof b === 'number') return $d4b6eff69b324b58$var$lerp(a, b, fract);\n    else if (Array.isArray(a) && Array.isArray(b)) return $d4b6eff69b324b58$var$lerpArray(a, b, fract, out);\n    else throw new TypeError('Mismatch in value type of two array elements: ' + frame + ' and ' + nextFrame);\n}\nfunction $d4b6eff69b324b58$var$mod(a, b) {\n    return (a % b + b) % b;\n}\nfunction $d4b6eff69b324b58$var$degToRad(n) {\n    return n * Math.PI / 180;\n}\nfunction $d4b6eff69b324b58$var$radToDeg(n) {\n    return n * 180 / Math.PI;\n}\nfunction $d4b6eff69b324b58$var$fract(n) {\n    return n - Math.floor(n);\n}\nfunction $d4b6eff69b324b58$var$sign(n) {\n    if (n > 0) return 1;\n    else if (n < 0) return -1;\n    else return 0;\n}\n// Specific function from Unity / ofMath, not sure its needed?\n// function lerpWrap (a, b, t, min, max) {\n//   return wrap(a + wrap(b - a, min, max) * t, min, max)\n// }\nfunction $d4b6eff69b324b58$var$pingPong(t, length) {\n    t = $d4b6eff69b324b58$var$mod(t, length * 2);\n    return length - Math.abs(t - length);\n}\nfunction $d4b6eff69b324b58$var$damp(a, b, lambda, dt) {\n    return $d4b6eff69b324b58$var$lerp(a, b, 1 - Math.exp(-lambda * dt));\n}\nfunction $d4b6eff69b324b58$var$dampArray(a, b, lambda, dt, out) {\n    out = out || [];\n    for(var i = 0; i < a.length; i++)out[i] = $d4b6eff69b324b58$var$damp(a[i], b[i], lambda, dt);\n    return out;\n}\nfunction $d4b6eff69b324b58$var$mapRange(value, inputMin, inputMax, outputMin, outputMax, clamp) {\n    // Reference:\n    // https://openframeworks.cc/documentation/math/ofMath/\n    if (Math.abs(inputMin - inputMax) < $d4b6eff69b324b58$var$EPSILON) return outputMin;\n    else {\n        var outVal = (value - inputMin) / (inputMax - inputMin) * (outputMax - outputMin) + outputMin;\n        if (clamp) {\n            if (outputMax < outputMin) {\n                if (outVal < outputMax) outVal = outputMax;\n                else if (outVal > outputMin) outVal = outputMin;\n            } else {\n                if (outVal > outputMax) outVal = outputMax;\n                else if (outVal < outputMin) outVal = outputMin;\n            }\n        }\n        return outVal;\n    }\n}\n$d4b6eff69b324b58$exports = {\n    mod: $d4b6eff69b324b58$var$mod,\n    fract: $d4b6eff69b324b58$var$fract,\n    sign: $d4b6eff69b324b58$var$sign,\n    degToRad: $d4b6eff69b324b58$var$degToRad,\n    radToDeg: $d4b6eff69b324b58$var$radToDeg,\n    wrap: $25c59ad3be6332bd$exports,\n    pingPong: $d4b6eff69b324b58$var$pingPong,\n    linspace: $d4b6eff69b324b58$var$linspace,\n    lerp: $d4b6eff69b324b58$var$lerp,\n    lerpArray: $d4b6eff69b324b58$var$lerpArray,\n    inverseLerp: $d4b6eff69b324b58$var$inverseLerp,\n    lerpFrames: $d4b6eff69b324b58$var$lerpFrames,\n    clamp: $d4b6eff69b324b58$var$clamp,\n    clamp01: $d4b6eff69b324b58$var$clamp01,\n    smoothstep: $d4b6eff69b324b58$var$smoothstep,\n    damp: $d4b6eff69b324b58$var$damp,\n    dampArray: $d4b6eff69b324b58$var$dampArray,\n    mapRange: $d4b6eff69b324b58$var$mapRange,\n    expand2D: $d4b6eff69b324b58$var$expandVector(2),\n    expand3D: $d4b6eff69b324b58$var$expandVector(3),\n    expand4D: $d4b6eff69b324b58$var$expandVector(4)\n};\n\n\nvar $42aaec2867bae1b8$require$mapRange = $d4b6eff69b324b58$exports.mapRange;\nvar $1959121dce5586b4$exports = {};\nvar $ced3fcf7c41a216a$exports = {};\n'use strict';\nvar $ced3fcf7c41a216a$var$width = 256; // each RC4 output is 0 <= x < 256\nvar $ced3fcf7c41a216a$var$chunks = 6; // at least six RC4 outputs for each double\nvar $ced3fcf7c41a216a$var$digits = 52; // there are 52 significant digits in a double\nvar $ced3fcf7c41a216a$var$pool = []; // pool: entropy pool starts empty\nvar $ced3fcf7c41a216a$var$GLOBAL = typeof $parcel$global === 'undefined' ? window : $parcel$global;\n//\n// The following constants are related to IEEE 754 limits.\n//\nvar $ced3fcf7c41a216a$var$startdenom = Math.pow($ced3fcf7c41a216a$var$width, $ced3fcf7c41a216a$var$chunks), $ced3fcf7c41a216a$var$significance = Math.pow(2, $ced3fcf7c41a216a$var$digits), $ced3fcf7c41a216a$var$overflow = $ced3fcf7c41a216a$var$significance * 2, $ced3fcf7c41a216a$var$mask = $ced3fcf7c41a216a$var$width - 1;\nvar $ced3fcf7c41a216a$var$oldRandom = Math.random;\n//\n// seedrandom()\n// This is the seedrandom function described above.\n//\n$ced3fcf7c41a216a$exports = function(seed, options) {\n    if (options && options.global === true) {\n        options.global = false;\n        Math.random = $ced3fcf7c41a216a$exports(seed, options);\n        options.global = true;\n        return Math.random;\n    }\n    var use_entropy = options && options.entropy || false;\n    var key = [];\n    // Flatten the seed string or build one from local entropy if needed.\n    var shortseed = $ced3fcf7c41a216a$var$mixkey($ced3fcf7c41a216a$var$flatten(use_entropy ? [\n        seed,\n        $ced3fcf7c41a216a$var$tostring($ced3fcf7c41a216a$var$pool)\n    ] : 0 in arguments ? seed : $ced3fcf7c41a216a$var$autoseed(), 3), key);\n    // Use the seed to initialize an ARC4 generator.\n    var arc4 = new $ced3fcf7c41a216a$var$ARC4(key);\n    // Mix the randomness into accumulated entropy.\n    $ced3fcf7c41a216a$var$mixkey($ced3fcf7c41a216a$var$tostring(arc4.S), $ced3fcf7c41a216a$var$pool);\n    // Override Math.random\n    // This function returns a random double in [0, 1) that contains\n    // randomness in every bit of the mantissa of the IEEE 754 value.\n    return function() {\n        var n = arc4.g($ced3fcf7c41a216a$var$chunks), d = $ced3fcf7c41a216a$var$startdenom, x = 0; //   and no 'extra last byte'.\n        while(n < $ced3fcf7c41a216a$var$significance){\n            n = (n + x) * $ced3fcf7c41a216a$var$width; //   shifting numerator and\n            d *= $ced3fcf7c41a216a$var$width; //   denominator and generating a\n            x = arc4.g(1); //   new least-significant-byte.\n        }\n        while(n >= $ced3fcf7c41a216a$var$overflow){\n            n /= 2; //   last byte, shift everything\n            d /= 2; //   right using integer Math until\n            x >>>= 1; //   we have exactly the desired bits.\n        }\n        return (n + x) / d; // Form the number within [0, 1).\n    };\n};\n$ced3fcf7c41a216a$exports.resetGlobal = function() {\n    Math.random = $ced3fcf7c41a216a$var$oldRandom;\n};\n//\n// ARC4\n//\n// An ARC4 implementation.  The constructor takes a key in the form of\n// an array of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates\n// the next (count) outputs from ARC4.  Its return value is a number x\n// that is in the range 0 <= x < (width ^ count).\n//\n/** @constructor */ function $ced3fcf7c41a216a$var$ARC4(key) {\n    var t, keylen = key.length, me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\n    // The empty key [] is treated as [0].\n    if (!keylen) key = [\n        keylen++\n    ];\n    // Set up S using the standard key scheduling algorithm.\n    while(i < $ced3fcf7c41a216a$var$width)s[i] = i++;\n    for(i = 0; i < $ced3fcf7c41a216a$var$width; i++){\n        s[i] = s[j = $ced3fcf7c41a216a$var$mask & j + key[i % keylen] + (t = s[i])];\n        s[j] = t;\n    }\n    // The \"g\" method returns the next (count) outputs as one number.\n    (me.g = function(count) {\n        // Using instance members instead of closure state nearly doubles speed.\n        var t, r = 0, i = me.i, j = me.j, s = me.S;\n        while(count--){\n            t = s[i = $ced3fcf7c41a216a$var$mask & i + 1];\n            r = r * $ced3fcf7c41a216a$var$width + s[$ced3fcf7c41a216a$var$mask & (s[i] = s[j = $ced3fcf7c41a216a$var$mask & j + t]) + (s[j] = t)];\n        }\n        me.i = i;\n        me.j = j;\n        return r;\n    // For robust unpredictability discard an initial batch of values.\n    // See http://www.rsa.com/rsalabs/node.asp?id=2009\n    })($ced3fcf7c41a216a$var$width);\n}\n//\n// flatten()\n// Converts an object tree to nested arrays of strings.\n//\nfunction $ced3fcf7c41a216a$var$flatten(obj, depth) {\n    var result = [], typ = (typeof obj)[0], prop;\n    if (depth && typ == 'o') {\n        for(prop in obj)try {\n            result.push($ced3fcf7c41a216a$var$flatten(obj[prop], depth - 1));\n        } catch (e) {}\n    }\n    return result.length ? result : typ == 's' ? obj : obj + '\\0';\n}\n//\n// mixkey()\n// Mixes a string seed into a key that is an array of integers, and\n// returns a shortened string seed that is equivalent to the result key.\n//\nfunction $ced3fcf7c41a216a$var$mixkey(seed, key) {\n    var stringseed = seed + '', smear, j = 0;\n    while(j < stringseed.length)key[$ced3fcf7c41a216a$var$mask & j] = $ced3fcf7c41a216a$var$mask & (smear ^= key[$ced3fcf7c41a216a$var$mask & j] * 19) + stringseed.charCodeAt(j++);\n    return $ced3fcf7c41a216a$var$tostring(key);\n}\n//\n// autoseed()\n// Returns an object for autoseeding, using window.crypto if available.\n//\n/** @param {Uint8Array=} seed */ function $ced3fcf7c41a216a$var$autoseed(seed) {\n    try {\n        $ced3fcf7c41a216a$var$GLOBAL.crypto.getRandomValues(seed = new Uint8Array($ced3fcf7c41a216a$var$width));\n        return $ced3fcf7c41a216a$var$tostring(seed);\n    } catch (e) {\n        return [\n            +new Date,\n            $ced3fcf7c41a216a$var$GLOBAL,\n            $ced3fcf7c41a216a$var$GLOBAL.navigator && $ced3fcf7c41a216a$var$GLOBAL.navigator.plugins,\n            $ced3fcf7c41a216a$var$GLOBAL.screen,\n            $ced3fcf7c41a216a$var$tostring($ced3fcf7c41a216a$var$pool)\n        ];\n    }\n}\n//\n// tostring()\n// Converts an array of charcodes to a string\n//\nfunction $ced3fcf7c41a216a$var$tostring(a) {\n    return String.fromCharCode.apply(0, a);\n}\n//\n// When seedrandom.js is loaded, we immediately mix a few bits\n// from the built-in RNG into the entropy pool.  Because we do\n// not want to intefere with determinstic PRNG state later,\n// seedrandom will not call Math.random on its own again after\n// initialization.\n//\n$ced3fcf7c41a216a$var$mixkey(Math.random(), $ced3fcf7c41a216a$var$pool);\n\n\nvar $7f9986d0b71cf3d1$exports = {};\n/*\n * A fast javascript implementation of simplex noise by Jonas Wagner\n\nBased on a speed-improved simplex noise algorithm for 2D, 3D and 4D in Java.\nWhich is based on example code by Stefan Gustavson (stegu@itn.liu.se).\nWith Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\nBetter rank ordering method by Stefan Gustavson in 2012.\n\n\n Copyright (c) 2018 Jonas Wagner\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */ (function() {\n    'use strict';\n    var F2 = 0.5 * (Math.sqrt(3.0) - 1.0);\n    var G2 = (3.0 - Math.sqrt(3.0)) / 6.0;\n    var F3 = 1.0 / 3.0;\n    var G3 = 1.0 / 6.0;\n    var F4 = (Math.sqrt(5.0) - 1.0) / 4.0;\n    var G4 = (5.0 - Math.sqrt(5.0)) / 20.0;\n    function SimplexNoise(randomOrSeed) {\n        var random;\n        if (typeof randomOrSeed == 'function') random = randomOrSeed;\n        else if (randomOrSeed) random = alea(randomOrSeed);\n        else random = Math.random;\n        this.p = buildPermutationTable(random);\n        this.perm = new Uint8Array(512);\n        this.permMod12 = new Uint8Array(512);\n        for(var i = 0; i < 512; i++){\n            this.perm[i] = this.p[i & 255];\n            this.permMod12[i] = this.perm[i] % 12;\n        }\n    }\n    SimplexNoise.prototype = {\n        grad3: new Float32Array([\n            1,\n            1,\n            0,\n            -1,\n            1,\n            0,\n            1,\n            -1,\n            0,\n            -1,\n            -1,\n            0,\n            1,\n            0,\n            1,\n            -1,\n            0,\n            1,\n            1,\n            0,\n            -1,\n            -1,\n            0,\n            -1,\n            0,\n            1,\n            1,\n            0,\n            -1,\n            1,\n            0,\n            1,\n            -1,\n            0,\n            -1,\n            -1\n        ]),\n        grad4: new Float32Array([\n            0,\n            1,\n            1,\n            1,\n            0,\n            1,\n            1,\n            -1,\n            0,\n            1,\n            -1,\n            1,\n            0,\n            1,\n            -1,\n            -1,\n            0,\n            -1,\n            1,\n            1,\n            0,\n            -1,\n            1,\n            -1,\n            0,\n            -1,\n            -1,\n            1,\n            0,\n            -1,\n            -1,\n            -1,\n            1,\n            0,\n            1,\n            1,\n            1,\n            0,\n            1,\n            -1,\n            1,\n            0,\n            -1,\n            1,\n            1,\n            0,\n            -1,\n            -1,\n            -1,\n            0,\n            1,\n            1,\n            -1,\n            0,\n            1,\n            -1,\n            -1,\n            0,\n            -1,\n            1,\n            -1,\n            0,\n            -1,\n            -1,\n            1,\n            1,\n            0,\n            1,\n            1,\n            1,\n            0,\n            -1,\n            1,\n            -1,\n            0,\n            1,\n            1,\n            -1,\n            0,\n            -1,\n            -1,\n            1,\n            0,\n            1,\n            -1,\n            1,\n            0,\n            -1,\n            -1,\n            -1,\n            0,\n            1,\n            -1,\n            -1,\n            0,\n            -1,\n            1,\n            1,\n            1,\n            0,\n            1,\n            1,\n            -1,\n            0,\n            1,\n            -1,\n            1,\n            0,\n            1,\n            -1,\n            -1,\n            0,\n            -1,\n            1,\n            1,\n            0,\n            -1,\n            1,\n            -1,\n            0,\n            -1,\n            -1,\n            1,\n            0,\n            -1,\n            -1,\n            -1,\n            0\n        ]),\n        noise2D: function(xin, yin) {\n            var permMod12 = this.permMod12;\n            var perm = this.perm;\n            var grad3 = this.grad3;\n            var n0 = 0; // Noise contributions from the three corners\n            var n1 = 0;\n            var n2 = 0;\n            // Skew the input space to determine which simplex cell we're in\n            var s = (xin + yin) * F2; // Hairy factor for 2D\n            var i = Math.floor(xin + s);\n            var j = Math.floor(yin + s);\n            var t = (i + j) * G2;\n            var X0 = i - t; // Unskew the cell origin back to (x,y) space\n            var Y0 = j - t;\n            var x0 = xin - X0; // The x,y distances from the cell origin\n            var y0 = yin - Y0;\n            // For the 2D case, the simplex shape is an equilateral triangle.\n            // Determine which simplex we are in.\n            var i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n            if (x0 > y0) {\n                i1 = 1;\n                j1 = 0;\n            } else {\n                i1 = 0;\n                j1 = 1;\n            } // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n            // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n            // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n            // c = (3-sqrt(3))/6\n            var x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n            var y1 = y0 - j1 + G2;\n            var x2 = x0 - 1.0 + 2.0 * G2; // Offsets for last corner in (x,y) unskewed coords\n            var y2 = y0 - 1.0 + 2.0 * G2;\n            // Work out the hashed gradient indices of the three simplex corners\n            var ii = i & 255;\n            var jj = j & 255;\n            // Calculate the contribution from the three corners\n            var t0 = 0.5 - x0 * x0 - y0 * y0;\n            if (t0 >= 0) {\n                var gi0 = permMod12[ii + perm[jj]] * 3;\n                t0 *= t0;\n                n0 = t0 * t0 * (grad3[gi0] * x0 + grad3[gi0 + 1] * y0); // (x,y) of grad3 used for 2D gradient\n            }\n            var t1 = 0.5 - x1 * x1 - y1 * y1;\n            if (t1 >= 0) {\n                var gi1 = permMod12[ii + i1 + perm[jj + j1]] * 3;\n                t1 *= t1;\n                n1 = t1 * t1 * (grad3[gi1] * x1 + grad3[gi1 + 1] * y1);\n            }\n            var t2 = 0.5 - x2 * x2 - y2 * y2;\n            if (t2 >= 0) {\n                var gi2 = permMod12[ii + 1 + perm[jj + 1]] * 3;\n                t2 *= t2;\n                n2 = t2 * t2 * (grad3[gi2] * x2 + grad3[gi2 + 1] * y2);\n            }\n            // Add contributions from each corner to get the final noise value.\n            // The result is scaled to return values in the interval [-1,1].\n            return 70.0 * (n0 + n1 + n2);\n        },\n        // 3D simplex noise\n        noise3D: function(xin, yin, zin) {\n            var permMod12 = this.permMod12;\n            var perm = this.perm;\n            var grad3 = this.grad3;\n            var n0, n1, n2, n3; // Noise contributions from the four corners\n            // Skew the input space to determine which simplex cell we're in\n            var s = (xin + yin + zin) * F3; // Very nice and simple skew factor for 3D\n            var i = Math.floor(xin + s);\n            var j = Math.floor(yin + s);\n            var k = Math.floor(zin + s);\n            var t = (i + j + k) * G3;\n            var X0 = i - t; // Unskew the cell origin back to (x,y,z) space\n            var Y0 = j - t;\n            var Z0 = k - t;\n            var x0 = xin - X0; // The x,y,z distances from the cell origin\n            var y0 = yin - Y0;\n            var z0 = zin - Z0;\n            // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n            // Determine which simplex we are in.\n            var i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords\n            var i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords\n            if (x0 >= y0) {\n                if (y0 >= z0) {\n                    i1 = 1;\n                    j1 = 0;\n                    k1 = 0;\n                    i2 = 1;\n                    j2 = 1;\n                    k2 = 0;\n                } else if (x0 >= z0) {\n                    i1 = 1;\n                    j1 = 0;\n                    k1 = 0;\n                    i2 = 1;\n                    j2 = 0;\n                    k2 = 1;\n                } else {\n                    i1 = 0;\n                    j1 = 0;\n                    k1 = 1;\n                    i2 = 1;\n                    j2 = 0;\n                    k2 = 1;\n                } // Z X Y order\n            } else {\n                if (y0 < z0) {\n                    i1 = 0;\n                    j1 = 0;\n                    k1 = 1;\n                    i2 = 0;\n                    j2 = 1;\n                    k2 = 1;\n                } else if (x0 < z0) {\n                    i1 = 0;\n                    j1 = 1;\n                    k1 = 0;\n                    i2 = 0;\n                    j2 = 1;\n                    k2 = 1;\n                } else {\n                    i1 = 0;\n                    j1 = 1;\n                    k1 = 0;\n                    i2 = 1;\n                    j2 = 1;\n                    k2 = 0;\n                } // Y X Z order\n            }\n            // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n            // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n            // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n            // c = 1/6.\n            var x1 = x0 - i1 + G3; // Offsets for second corner in (x,y,z) coords\n            var y1 = y0 - j1 + G3;\n            var z1 = z0 - k1 + G3;\n            var x2 = x0 - i2 + 2.0 * G3; // Offsets for third corner in (x,y,z) coords\n            var y2 = y0 - j2 + 2.0 * G3;\n            var z2 = z0 - k2 + 2.0 * G3;\n            var x3 = x0 - 1.0 + 3.0 * G3; // Offsets for last corner in (x,y,z) coords\n            var y3 = y0 - 1.0 + 3.0 * G3;\n            var z3 = z0 - 1.0 + 3.0 * G3;\n            // Work out the hashed gradient indices of the four simplex corners\n            var ii = i & 255;\n            var jj = j & 255;\n            var kk = k & 255;\n            // Calculate the contribution from the four corners\n            var t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0;\n            if (t0 < 0) n0 = 0.0;\n            else {\n                var gi0 = permMod12[ii + perm[jj + perm[kk]]] * 3;\n                t0 *= t0;\n                n0 = t0 * t0 * (grad3[gi0] * x0 + grad3[gi0 + 1] * y0 + grad3[gi0 + 2] * z0);\n            }\n            var t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1;\n            if (t1 < 0) n1 = 0.0;\n            else {\n                var gi1 = permMod12[ii + i1 + perm[jj + j1 + perm[kk + k1]]] * 3;\n                t1 *= t1;\n                n1 = t1 * t1 * (grad3[gi1] * x1 + grad3[gi1 + 1] * y1 + grad3[gi1 + 2] * z1);\n            }\n            var t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2;\n            if (t2 < 0) n2 = 0.0;\n            else {\n                var gi2 = permMod12[ii + i2 + perm[jj + j2 + perm[kk + k2]]] * 3;\n                t2 *= t2;\n                n2 = t2 * t2 * (grad3[gi2] * x2 + grad3[gi2 + 1] * y2 + grad3[gi2 + 2] * z2);\n            }\n            var t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3;\n            if (t3 < 0) n3 = 0.0;\n            else {\n                var gi3 = permMod12[ii + 1 + perm[jj + 1 + perm[kk + 1]]] * 3;\n                t3 *= t3;\n                n3 = t3 * t3 * (grad3[gi3] * x3 + grad3[gi3 + 1] * y3 + grad3[gi3 + 2] * z3);\n            }\n            // Add contributions from each corner to get the final noise value.\n            // The result is scaled to stay just inside [-1,1]\n            return 32.0 * (n0 + n1 + n2 + n3);\n        },\n        // 4D simplex noise, better simplex rank ordering method 2012-03-09\n        noise4D: function(x, y, z, w) {\n            var perm = this.perm;\n            var grad4 = this.grad4;\n            var n0, n1, n2, n3, n4; // Noise contributions from the five corners\n            // Skew the (x,y,z,w) space to determine which cell of 24 simplices we're in\n            var s = (x + y + z + w) * F4; // Factor for 4D skewing\n            var i = Math.floor(x + s);\n            var j = Math.floor(y + s);\n            var k = Math.floor(z + s);\n            var l = Math.floor(w + s);\n            var t = (i + j + k + l) * G4; // Factor for 4D unskewing\n            var X0 = i - t; // Unskew the cell origin back to (x,y,z,w) space\n            var Y0 = j - t;\n            var Z0 = k - t;\n            var W0 = l - t;\n            var x0 = x - X0; // The x,y,z,w distances from the cell origin\n            var y0 = y - Y0;\n            var z0 = z - Z0;\n            var w0 = w - W0;\n            // For the 4D case, the simplex is a 4D shape I won't even try to describe.\n            // To find out which of the 24 possible simplices we're in, we need to\n            // determine the magnitude ordering of x0, y0, z0 and w0.\n            // Six pair-wise comparisons are performed between each possible pair\n            // of the four coordinates, and the results are used to rank the numbers.\n            var rankx = 0;\n            var ranky = 0;\n            var rankz = 0;\n            var rankw = 0;\n            if (x0 > y0) rankx++;\n            else ranky++;\n            if (x0 > z0) rankx++;\n            else rankz++;\n            if (x0 > w0) rankx++;\n            else rankw++;\n            if (y0 > z0) ranky++;\n            else rankz++;\n            if (y0 > w0) ranky++;\n            else rankw++;\n            if (z0 > w0) rankz++;\n            else rankw++;\n            var i1, j1, k1, l1; // The integer offsets for the second simplex corner\n            var i2, j2, k2, l2; // The integer offsets for the third simplex corner\n            var i3, j3, k3, l3; // The integer offsets for the fourth simplex corner\n            // simplex[c] is a 4-vector with the numbers 0, 1, 2 and 3 in some order.\n            // Many values of c will never occur, since e.g. x>y>z>w makes x<z, y<w and x<w\n            // impossible. Only the 24 indices which have non-zero entries make any sense.\n            // We use a thresholding to set the coordinates in turn from the largest magnitude.\n            // Rank 3 denotes the largest coordinate.\n            i1 = rankx >= 3 ? 1 : 0;\n            j1 = ranky >= 3 ? 1 : 0;\n            k1 = rankz >= 3 ? 1 : 0;\n            l1 = rankw >= 3 ? 1 : 0;\n            // Rank 2 denotes the second largest coordinate.\n            i2 = rankx >= 2 ? 1 : 0;\n            j2 = ranky >= 2 ? 1 : 0;\n            k2 = rankz >= 2 ? 1 : 0;\n            l2 = rankw >= 2 ? 1 : 0;\n            // Rank 1 denotes the second smallest coordinate.\n            i3 = rankx >= 1 ? 1 : 0;\n            j3 = ranky >= 1 ? 1 : 0;\n            k3 = rankz >= 1 ? 1 : 0;\n            l3 = rankw >= 1 ? 1 : 0;\n            // The fifth corner has all coordinate offsets = 1, so no need to compute that.\n            var x1 = x0 - i1 + G4; // Offsets for second corner in (x,y,z,w) coords\n            var y1 = y0 - j1 + G4;\n            var z1 = z0 - k1 + G4;\n            var w1 = w0 - l1 + G4;\n            var x2 = x0 - i2 + 2.0 * G4; // Offsets for third corner in (x,y,z,w) coords\n            var y2 = y0 - j2 + 2.0 * G4;\n            var z2 = z0 - k2 + 2.0 * G4;\n            var w2 = w0 - l2 + 2.0 * G4;\n            var x3 = x0 - i3 + 3.0 * G4; // Offsets for fourth corner in (x,y,z,w) coords\n            var y3 = y0 - j3 + 3.0 * G4;\n            var z3 = z0 - k3 + 3.0 * G4;\n            var w3 = w0 - l3 + 3.0 * G4;\n            var x4 = x0 - 1.0 + 4.0 * G4; // Offsets for last corner in (x,y,z,w) coords\n            var y4 = y0 - 1.0 + 4.0 * G4;\n            var z4 = z0 - 1.0 + 4.0 * G4;\n            var w4 = w0 - 1.0 + 4.0 * G4;\n            // Work out the hashed gradient indices of the five simplex corners\n            var ii = i & 255;\n            var jj = j & 255;\n            var kk = k & 255;\n            var ll = l & 255;\n            // Calculate the contribution from the five corners\n            var t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0 - w0 * w0;\n            if (t0 < 0) n0 = 0.0;\n            else {\n                var gi0 = perm[ii + perm[jj + perm[kk + perm[ll]]]] % 32 * 4;\n                t0 *= t0;\n                n0 = t0 * t0 * (grad4[gi0] * x0 + grad4[gi0 + 1] * y0 + grad4[gi0 + 2] * z0 + grad4[gi0 + 3] * w0);\n            }\n            var t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1 - w1 * w1;\n            if (t1 < 0) n1 = 0.0;\n            else {\n                var gi1 = perm[ii + i1 + perm[jj + j1 + perm[kk + k1 + perm[ll + l1]]]] % 32 * 4;\n                t1 *= t1;\n                n1 = t1 * t1 * (grad4[gi1] * x1 + grad4[gi1 + 1] * y1 + grad4[gi1 + 2] * z1 + grad4[gi1 + 3] * w1);\n            }\n            var t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2 - w2 * w2;\n            if (t2 < 0) n2 = 0.0;\n            else {\n                var gi2 = perm[ii + i2 + perm[jj + j2 + perm[kk + k2 + perm[ll + l2]]]] % 32 * 4;\n                t2 *= t2;\n                n2 = t2 * t2 * (grad4[gi2] * x2 + grad4[gi2 + 1] * y2 + grad4[gi2 + 2] * z2 + grad4[gi2 + 3] * w2);\n            }\n            var t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3 - w3 * w3;\n            if (t3 < 0) n3 = 0.0;\n            else {\n                var gi3 = perm[ii + i3 + perm[jj + j3 + perm[kk + k3 + perm[ll + l3]]]] % 32 * 4;\n                t3 *= t3;\n                n3 = t3 * t3 * (grad4[gi3] * x3 + grad4[gi3 + 1] * y3 + grad4[gi3 + 2] * z3 + grad4[gi3 + 3] * w3);\n            }\n            var t4 = 0.6 - x4 * x4 - y4 * y4 - z4 * z4 - w4 * w4;\n            if (t4 < 0) n4 = 0.0;\n            else {\n                var gi4 = perm[ii + 1 + perm[jj + 1 + perm[kk + 1 + perm[ll + 1]]]] % 32 * 4;\n                t4 *= t4;\n                n4 = t4 * t4 * (grad4[gi4] * x4 + grad4[gi4 + 1] * y4 + grad4[gi4 + 2] * z4 + grad4[gi4 + 3] * w4);\n            }\n            // Sum up and scale the result to cover the range [-1,1]\n            return 27.0 * (n0 + n1 + n2 + n3 + n4);\n        }\n    };\n    function buildPermutationTable(random) {\n        var i;\n        var p = new Uint8Array(256);\n        for(i = 0; i < 256; i++)p[i] = i;\n        for(i = 0; i < 255; i++){\n            var r = i + ~~(random() * (256 - i));\n            var aux = p[i];\n            p[i] = p[r];\n            p[r] = aux;\n        }\n        return p;\n    }\n    SimplexNoise._buildPermutationTable = buildPermutationTable;\n    function alea() {\n        // Johannes Baage <baagoe@baagoe.com>, 2010\n        var s0 = 0;\n        var s1 = 0;\n        var s2 = 0;\n        var c = 1;\n        var mash = masher();\n        s0 = mash(' ');\n        s1 = mash(' ');\n        s2 = mash(' ');\n        for(var i = 0; i < arguments.length; i++){\n            s0 -= mash(arguments[i]);\n            if (s0 < 0) s0 += 1;\n            s1 -= mash(arguments[i]);\n            if (s1 < 0) s1 += 1;\n            s2 -= mash(arguments[i]);\n            if (s2 < 0) s2 += 1;\n        }\n        mash = null;\n        return function() {\n            var t = 2091639 * s0 + c * 2.3283064365386963e-10; // 2^-32\n            s0 = s1;\n            s1 = s2;\n            return s2 = t - (c = t | 0);\n        };\n    }\n    function masher() {\n        var n = 0xefc8249d;\n        return function(data) {\n            data = data.toString();\n            for(var i = 0; i < data.length; i++){\n                n += data.charCodeAt(i);\n                var h = 0.02519603282416938 * n;\n                n = h >>> 0;\n                h -= n;\n                h *= n;\n                n = h >>> 0;\n                h -= n;\n                n += h * 0x100000000; // 2^32\n            }\n            return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n        };\n    }\n    // amd\n    if (typeof define !== 'undefined' && define.amd) define(function() {\n        return SimplexNoise;\n    });\n    $7f9986d0b71cf3d1$exports.SimplexNoise = SimplexNoise;\n    $7f9986d0b71cf3d1$exports = SimplexNoise;\n})();\n\n\n\nfunction $1959121dce5586b4$var$createRandom(defaultSeed) {\n    defaultSeed = $7a4c4b0affb0d9b8$exports(defaultSeed, null);\n    var defaultRandom = Math.random;\n    var currentSeed;\n    var currentRandom;\n    var noiseGenerator;\n    var _nextGaussian = null;\n    var _hasNextGaussian = false;\n    setSeed(defaultSeed);\n    return {\n        value: value,\n        createRandom: function(defaultSeed) {\n            return $1959121dce5586b4$var$createRandom(defaultSeed);\n        },\n        setSeed: setSeed,\n        getSeed: getSeed,\n        getRandomSeed: getRandomSeed,\n        valueNonZero: valueNonZero,\n        permuteNoise: permuteNoise,\n        noise1D: noise1D,\n        noise2D: noise2D,\n        noise3D: noise3D,\n        noise4D: noise4D,\n        sign: sign,\n        boolean: boolean,\n        chance: chance,\n        range: range,\n        rangeFloor: rangeFloor,\n        pick: pick,\n        shuffle: shuffle,\n        onCircle: onCircle,\n        insideCircle: insideCircle,\n        onSphere: onSphere,\n        insideSphere: insideSphere,\n        quaternion: quaternion,\n        weighted: weighted,\n        weightedSet: weightedSet,\n        weightedSetIndex: weightedSetIndex,\n        gaussian: gaussian\n    };\n    function setSeed(seed, opt) {\n        if (typeof seed === 'number' || typeof seed === 'string') {\n            currentSeed = seed;\n            currentRandom = $ced3fcf7c41a216a$exports(currentSeed, opt);\n        } else {\n            currentSeed = undefined;\n            currentRandom = defaultRandom;\n        }\n        noiseGenerator = createNoise();\n        _nextGaussian = null;\n        _hasNextGaussian = false;\n    }\n    function value() {\n        return currentRandom();\n    }\n    function valueNonZero() {\n        var u = 0;\n        while(u === 0)u = value();\n        return u;\n    }\n    function getSeed() {\n        return currentSeed;\n    }\n    function getRandomSeed() {\n        var seed = String(Math.floor(Math.random() * 1000000));\n        return seed;\n    }\n    function createNoise() {\n        return new $7f9986d0b71cf3d1$exports(currentRandom);\n    }\n    function permuteNoise() {\n        noiseGenerator = createNoise();\n    }\n    function noise1D(x, frequency, amplitude) {\n        if (!isFinite(x)) throw new TypeError('x component for noise() must be finite');\n        frequency = $7a4c4b0affb0d9b8$exports(frequency, 1);\n        amplitude = $7a4c4b0affb0d9b8$exports(amplitude, 1);\n        return amplitude * noiseGenerator.noise2D(x * frequency, 0);\n    }\n    function noise2D(x, y, frequency, amplitude) {\n        if (!isFinite(x)) throw new TypeError('x component for noise() must be finite');\n        if (!isFinite(y)) throw new TypeError('y component for noise() must be finite');\n        frequency = $7a4c4b0affb0d9b8$exports(frequency, 1);\n        amplitude = $7a4c4b0affb0d9b8$exports(amplitude, 1);\n        return amplitude * noiseGenerator.noise2D(x * frequency, y * frequency);\n    }\n    function noise3D(x, y, z, frequency, amplitude) {\n        if (!isFinite(x)) throw new TypeError('x component for noise() must be finite');\n        if (!isFinite(y)) throw new TypeError('y component for noise() must be finite');\n        if (!isFinite(z)) throw new TypeError('z component for noise() must be finite');\n        frequency = $7a4c4b0affb0d9b8$exports(frequency, 1);\n        amplitude = $7a4c4b0affb0d9b8$exports(amplitude, 1);\n        return amplitude * noiseGenerator.noise3D(x * frequency, y * frequency, z * frequency);\n    }\n    function noise4D(x, y, z, w, frequency, amplitude) {\n        if (!isFinite(x)) throw new TypeError('x component for noise() must be finite');\n        if (!isFinite(y)) throw new TypeError('y component for noise() must be finite');\n        if (!isFinite(z)) throw new TypeError('z component for noise() must be finite');\n        if (!isFinite(w)) throw new TypeError('w component for noise() must be finite');\n        frequency = $7a4c4b0affb0d9b8$exports(frequency, 1);\n        amplitude = $7a4c4b0affb0d9b8$exports(amplitude, 1);\n        return amplitude * noiseGenerator.noise4D(x * frequency, y * frequency, z * frequency, w * frequency);\n    }\n    function sign() {\n        return boolean() ? 1 : -1;\n    }\n    function boolean() {\n        return value() > 0.5;\n    }\n    function chance(n) {\n        n = $7a4c4b0affb0d9b8$exports(n, 0.5);\n        if (typeof n !== 'number') throw new TypeError('expected n to be a number');\n        return value() < n;\n    }\n    function range(min, max) {\n        if (max === undefined) {\n            max = min;\n            min = 0;\n        }\n        if (typeof min !== 'number' || typeof max !== 'number') throw new TypeError('Expected all arguments to be numbers');\n        return value() * (max - min) + min;\n    }\n    function rangeFloor(min, max) {\n        if (max === undefined) {\n            max = min;\n            min = 0;\n        }\n        if (typeof min !== 'number' || typeof max !== 'number') throw new TypeError('Expected all arguments to be numbers');\n        return Math.floor(range(min, max));\n    }\n    function pick(array) {\n        if (array.length === 0) return undefined;\n        return array[rangeFloor(0, array.length)];\n    }\n    function shuffle(arr) {\n        if (!Array.isArray(arr)) throw new TypeError('Expected Array, got ' + typeof arr);\n        var rand;\n        var tmp;\n        var len = arr.length;\n        var ret = arr.slice();\n        while(len){\n            rand = Math.floor(value() * len--);\n            tmp = ret[len];\n            ret[len] = ret[rand];\n            ret[rand] = tmp;\n        }\n        return ret;\n    }\n    function onCircle(radius, out) {\n        radius = $7a4c4b0affb0d9b8$exports(radius, 1);\n        out = out || [];\n        var theta = value() * 2.0 * Math.PI;\n        out[0] = radius * Math.cos(theta);\n        out[1] = radius * Math.sin(theta);\n        return out;\n    }\n    function insideCircle(radius, out) {\n        radius = $7a4c4b0affb0d9b8$exports(radius, 1);\n        out = out || [];\n        onCircle(1, out);\n        var r = radius * Math.sqrt(value());\n        out[0] *= r;\n        out[1] *= r;\n        return out;\n    }\n    function onSphere(radius, out) {\n        radius = $7a4c4b0affb0d9b8$exports(radius, 1);\n        out = out || [];\n        var u = value() * Math.PI * 2;\n        var v = value() * 2 - 1;\n        var phi = u;\n        var theta = Math.acos(v);\n        out[0] = radius * Math.sin(theta) * Math.cos(phi);\n        out[1] = radius * Math.sin(theta) * Math.sin(phi);\n        out[2] = radius * Math.cos(theta);\n        return out;\n    }\n    function insideSphere(radius, out) {\n        radius = $7a4c4b0affb0d9b8$exports(radius, 1);\n        out = out || [];\n        var u = value() * Math.PI * 2;\n        var v = value() * 2 - 1;\n        var k = value();\n        var phi = u;\n        var theta = Math.acos(v);\n        var r = radius * Math.cbrt(k);\n        out[0] = r * Math.sin(theta) * Math.cos(phi);\n        out[1] = r * Math.sin(theta) * Math.sin(phi);\n        out[2] = r * Math.cos(theta);\n        return out;\n    }\n    function quaternion(out) {\n        out = out || [];\n        var u1 = value();\n        var u2 = value();\n        var u3 = value();\n        var sq1 = Math.sqrt(1 - u1);\n        var sq2 = Math.sqrt(u1);\n        var theta1 = Math.PI * 2 * u2;\n        var theta2 = Math.PI * 2 * u3;\n        var x = Math.sin(theta1) * sq1;\n        var y = Math.cos(theta1) * sq1;\n        var z = Math.sin(theta2) * sq2;\n        var w = Math.cos(theta2) * sq2;\n        out[0] = x;\n        out[1] = y;\n        out[2] = z;\n        out[3] = w;\n        return out;\n    }\n    function weightedSet(set) {\n        set = set || [];\n        if (set.length === 0) return null;\n        return set[weightedSetIndex(set)].value;\n    }\n    function weightedSetIndex(set) {\n        set = set || [];\n        if (set.length === 0) return -1;\n        return weighted(set.map(function(s) {\n            return s.weight;\n        }));\n    }\n    function weighted(weights) {\n        weights = weights || [];\n        if (weights.length === 0) return -1;\n        var totalWeight = 0;\n        var i;\n        for(i = 0; i < weights.length; i++)totalWeight += weights[i];\n        if (totalWeight <= 0) throw new Error('Weights must sum to > 0');\n        var random = value() * totalWeight;\n        for(i = 0; i < weights.length; i++){\n            if (random < weights[i]) return i;\n            random -= weights[i];\n        }\n        return 0;\n    }\n    function gaussian(mean, standardDerivation) {\n        mean = $7a4c4b0affb0d9b8$exports(mean, 0);\n        standardDerivation = $7a4c4b0affb0d9b8$exports(standardDerivation, 1);\n        // https://github.com/openjdk-mirror/jdk7u-jdk/blob/f4d80957e89a19a29bb9f9807d2a28351ed7f7df/src/share/classes/java/util/Random.java#L496\n        if (_hasNextGaussian) {\n            _hasNextGaussian = false;\n            var result = _nextGaussian;\n            _nextGaussian = null;\n            return mean + standardDerivation * result;\n        } else {\n            var v1 = 0;\n            var v2 = 0;\n            var s = 0;\n            do {\n                v1 = value() * 2 - 1; // between -1 and 1\n                v2 = value() * 2 - 1; // between -1 and 1\n                s = v1 * v1 + v2 * v2;\n            }while (s >= 1 || s === 0);\n            var multiplier = Math.sqrt(-2 * Math.log(s) / s);\n            _nextGaussian = v2 * multiplier;\n            _hasNextGaussian = true;\n            return mean + standardDerivation * (v1 * multiplier);\n        }\n    }\n}\n$1959121dce5586b4$exports = $1959121dce5586b4$var$createRandom();\n\n\nvar $42aaec2867bae1b8$require$noise1D = $1959121dce5586b4$exports.noise1D;\nvar $c398a0ea03e027b6$exports = {};\n/*! Tweakpane 3.1.10 (c) 2016 cocopon, licensed under the MIT license. */ (function(global, factory) {\n    factory($c398a0ea03e027b6$exports);\n})($c398a0ea03e027b6$exports, function(exports1) {\n    'use strict';\n    /***\n     * A simple semantic versioning perser.\n     */ class Semver {\n        /**\n         * @hidden\n         */ constructor(text){\n            const [core, prerelease] = text.split('-');\n            const coreComps = core.split('.');\n            this.major = parseInt(coreComps[0], 10);\n            this.minor = parseInt(coreComps[1], 10);\n            this.patch = parseInt(coreComps[2], 10);\n            this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n        }\n        toString() {\n            const core = [\n                this.major,\n                this.minor,\n                this.patch\n            ].join('.');\n            return this.prerelease !== null ? [\n                core,\n                this.prerelease\n            ].join('-') : core;\n        }\n    }\n    class BladeApi {\n        constructor(controller){\n            this.controller_ = controller;\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n    class TpEvent {\n        constructor(target){\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last){\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n    class TpUpdateEvent extends TpEvent {\n        constructor(target, value, presetKey){\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n        }\n    }\n    class TpFoldEvent extends TpEvent {\n        constructor(target, expanded){\n            super(target);\n            this.expanded = expanded;\n        }\n    }\n    class TpTabSelectEvent extends TpEvent {\n        constructor(target, index){\n            super(target);\n            this.index = index;\n        }\n    }\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) return false;\n        for(let i = 0; i < a1.length; i++){\n            if (a1[i] !== a2[i]) return false;\n        }\n        return true;\n    }\n    function isPropertyWritable(obj, key) {\n        let target = obj;\n        do {\n            const d = Object.getOwnPropertyDescriptor(target, key);\n            if (d && (d.set !== undefined || d.writable === true)) return true;\n            target = Object.getPrototypeOf(target);\n        }while (target !== null);\n        return false;\n    }\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: ()=>'View has been already disposed',\n        invalidparams: (context)=>`Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context)=>`No matching controller for '${context.key}'`,\n        nomatchingview: (context)=>`No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: ()=>`Value is not bindable`,\n        propertynotfound: (context)=>`Property '${context.name}' not found`,\n        shouldneverhappen: ()=>'This error should never happen'\n    };\n    class TpError {\n        static alreadyDisposed() {\n            return new TpError({\n                type: 'alreadydisposed'\n            });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable'\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name\n                }\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({\n                type: 'shouldneverhappen'\n            });\n        }\n        constructor(config){\n            var _a;\n            this.message = (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n    }\n    class BindingTarget {\n        constructor(obj, key, opt_id){\n            this.obj_ = obj;\n            this.key_ = key;\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\n        }\n        static isBindable(obj) {\n            if (obj === null) return false;\n            if (typeof obj !== 'object' && typeof obj !== 'function') return false;\n            return true;\n        }\n        get key() {\n            return this.key_;\n        }\n        get presetKey() {\n            return this.presetKey_;\n        }\n        read() {\n            return this.obj_[this.key_];\n        }\n        write(value) {\n            this.obj_[this.key_] = value;\n        }\n        writeProperty(name, value) {\n            const valueObj = this.read();\n            if (!BindingTarget.isBindable(valueObj)) throw TpError.notBindable();\n            if (!(name in valueObj)) throw TpError.propertyNotFound(name);\n            valueObj[name] = value;\n        }\n    }\n    class ButtonApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.valueController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.valueController.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.valueController.emitter;\n            emitter.on(eventName, ()=>{\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n    class Emitter {\n        constructor(){\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) observers = this.observers_[eventName] = [];\n            observers.push({\n                handler: handler\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) this.observers_[eventName] = observers.filter((observer)=>{\n                return observer.handler !== handler;\n            });\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) return;\n            observers.forEach((observer)=>{\n                observer.handler(event);\n            });\n        }\n    }\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier)=>{\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : ''\n            ].join('');\n        };\n        return fn;\n    }\n    function compose(h1, h2) {\n        return (input)=>h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n    function applyClass(elem, className, active) {\n        if (active) elem.classList.add(className);\n        else elem.classList.remove(className);\n    }\n    function valueToClassName(elem, className) {\n        return (value)=>{\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text)=>{\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n    const className$q = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config){\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$q());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$q('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$q('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n    class ButtonController {\n        constructor(doc, config){\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this\n            });\n        }\n    }\n    class BoundValue {\n        constructor(initialValue, config){\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : (v1, v2)=>v1 === v2;\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true\n            };\n            const constrainedValue = this.constraint_ ? this.constraint_.constrain(rawValue) : rawValue;\n            const prevValue = this.rawValue_;\n            const changed = !this.equals_(prevValue, constrainedValue);\n            if (!changed && !opts.forceEmit) return;\n            this.emitter.emit('beforechange', {\n                sender: this\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                previousRawValue: prevValue,\n                rawValue: constrainedValue,\n                sender: this\n            });\n        }\n    }\n    class PrimitiveValue {\n        constructor(initialValue){\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true\n            };\n            const prevValue = this.value_;\n            if (prevValue === value && !opts.forceEmit) return;\n            this.emitter.emit('beforechange', {\n                sender: this\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                previousRawValue: prevValue,\n                rawValue: this.value_,\n                sender: this\n            });\n        }\n    }\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) return new PrimitiveValue(initialValue);\n        return new BoundValue(initialValue, config);\n    }\n    class ValueMap {\n        constructor(valueMap){\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for(const key in this.valMap_){\n                const v = this.valMap_[key];\n                v.emitter.on('change', ()=>{\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key)=>{\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key])\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key)=>{\n            if (tmp === undefined) return undefined;\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded ? Object.assign(Object.assign({}, tmp), {\n                [key]: result.value\n            }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item)=>{\n            if (tmp === undefined) return undefined;\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) return undefined;\n            return [\n                ...tmp,\n                result.value\n            ];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) return false;\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional)=>(v)=>{\n                if (!optional && v === undefined) return {\n                    succeeded: false,\n                    value: undefined\n                };\n                if (optional && v === undefined) return {\n                    succeeded: true,\n                    value: undefined\n                };\n                const result = parse(v);\n                return result !== undefined ? {\n                    succeeded: true,\n                    value: result\n                } : {\n                    succeeded: false,\n                    value: undefined\n                };\n            };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse)=>createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v)=>typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v)=>typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v)=>typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v)=>typeof v === 'function' ? v : undefined)(optional),\n            constant: (value)=>createParamsParserBuilder((v)=>v === value ? value : undefined)(optional),\n            raw: createParamsParserBuilder((v)=>v)(optional),\n            object: (keyToParserMap)=>createParamsParserBuilder((v)=>{\n                    if (!isObject(v)) return undefined;\n                    return parseObject(v, keyToParserMap);\n                })(optional),\n            array: (itemParser)=>createParamsParserBuilder((v)=>{\n                    if (!Array.isArray(v)) return undefined;\n                    return parseArray(v, itemParser);\n                })(optional)\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false)\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n    function warnMissing(info) {\n        console.warn([\n            `Missing '${info.key}' of ${info.target} in ${info.place}.`,\n            'Please rebuild plugins with the latest core package.'\n        ].join(' '));\n    }\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) elem.parentElement.removeChild(elem);\n        return null;\n    }\n    class ReadonlyValue {\n        constructor(value){\n            this.value_ = value;\n        }\n        static create(value) {\n            return [\n                new ReadonlyValue(value),\n                (rawValue, options)=>{\n                    value.setRawValue(rawValue, options);\n                }\n            ];\n        }\n        get emitter() {\n            return this.value_.emitter;\n        }\n        get rawValue() {\n            return this.value_.rawValue;\n        }\n    }\n    const className$p = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$p(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap){\n            var _a;\n            super(valueMap);\n            this.onDisabledChange_ = this.onDisabledChange_.bind(this);\n            this.onParentChange_ = this.onParentChange_.bind(this);\n            this.onParentGlobalDisabledChange_ = this.onParentGlobalDisabledChange_.bind(this);\n            [this.globalDisabled_, this.setGlobalDisabled_] = ReadonlyValue.create(createValue(this.getGlobalDisabled_()));\n            this.value('disabled').emitter.on('change', this.onDisabledChange_);\n            this.value('parent').emitter.on('change', this.onParentChange_);\n            (_a = this.get('parent')) === null || _a === void 0 || _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n        }\n        static create(opt_initialValue) {\n            var _a, _b, _c;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            return new ViewProps(ValueMap.createCore({\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n                parent: (_c = initialValue.parent) !== null && _c !== void 0 ? _c : null\n            }));\n        }\n        get globalDisabled() {\n            return this.globalDisabled_;\n        }\n        bindClassModifiers(elem) {\n            bindValue(this.globalDisabled_, valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValue(this.globalDisabled_, (disabled)=>{\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValue(this.globalDisabled_, (disabled)=>{\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed)=>{\n                if (disposed) callback();\n            });\n        }\n        getGlobalDisabled_() {\n            const parent = this.get('parent');\n            const parentDisabled = parent ? parent.globalDisabled.rawValue : false;\n            return parentDisabled || this.get('disabled');\n        }\n        updateGlobalDisabled_() {\n            this.setGlobalDisabled_(this.getGlobalDisabled_());\n        }\n        onDisabledChange_() {\n            this.updateGlobalDisabled_();\n        }\n        onParentGlobalDisabledChange_() {\n            this.updateGlobalDisabled_();\n        }\n        onParentChange_(ev) {\n            var _a;\n            const prevParent = ev.previousRawValue;\n            prevParent === null || prevParent === void 0 || prevParent.globalDisabled.emitter.off('change', this.onParentGlobalDisabledChange_);\n            (_a = this.get('parent')) === null || _a === void 0 || _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n            this.updateGlobalDisabled_();\n        }\n    }\n    function getAllBladePositions() {\n        return [\n            'veryfirst',\n            'first',\n            'last',\n            'verylast'\n        ];\n    }\n    const className$o = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst'\n    };\n    class BladeController {\n        constructor(config){\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', ()=>{\n                getAllBladePositions().forEach((pos)=>{\n                    elem.classList.remove(className$o(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos)=>{\n                    elem.classList.add(className$o(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(()=>{\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n        set parent(parent) {\n            this.parent_ = parent;\n            if (!('parent' in this.viewProps.valMap_)) {\n                warnMissing({\n                    key: 'parent',\n                    target: ViewProps.name,\n                    place: 'BladeController.parent'\n                });\n                return;\n            }\n            this.viewProps.set('parent', this.parent_ ? this.parent_.viewProps : null);\n        }\n    }\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function getGlobalObject() {\n        return globalThis;\n    }\n    function getWindowDocument() {\n        const globalObj = forceCast(getGlobalObject());\n        return globalObj.document;\n    }\n    function getCanvasContext(canvasElement) {\n        const win = canvasElement.ownerDocument.defaultView;\n        if (!win) return null;\n        const isBrowser = 'document' in win;\n        return isBrowser ? canvasElement.getContext('2d', {\n            willReadFrequently: true\n        }) : null;\n    }\n    const ICON_ID_TO_INNER_HTML_MAP = {\n        check: '<path d=\"M2 8l4 4l8 -8\"/>',\n        dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n        p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>'\n    };\n    function createSvgIconElement(document, iconId) {\n        const elem = document.createElementNS(SVG_NS, 'svg');\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n        return elem;\n    }\n    function insertElementAt(parentElement, element, index) {\n        parentElement.insertBefore(element, parentElement.children[index]);\n    }\n    function removeElement(element) {\n        if (element.parentElement) element.parentElement.removeChild(element);\n    }\n    function removeChildElements(element) {\n        while(element.children.length > 0)element.removeChild(element.children[0]);\n    }\n    function removeChildNodes(element) {\n        while(element.childNodes.length > 0)element.removeChild(element.childNodes[0]);\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) return forceCast(ev.relatedTarget);\n        if ('explicitOriginalTarget' in ev) return ev.explicitOriginalTarget;\n        return null;\n    }\n    const className$n = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line)=>{\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index)=>{\n            if (index > 0) frag.appendChild(doc.createElement('br'));\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config){\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$n());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$n('l'));\n            bindValueMap(config.props, 'label', (value)=>{\n                if (isEmpty(value)) this.element.classList.add(className$n(undefined, 'nol'));\n                else {\n                    this.element.classList.remove(className$n(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$n('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n    class LabelController extends BladeController {\n        constructor(doc, config){\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), {\n                view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps\n                }),\n                viewProps: viewProps\n            }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n    const ButtonBladePlugin = {\n        id: 'button',\n        type: 'blade',\n        accept (params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('button'),\n                label: p.optional.string\n            });\n            return result ? {\n                params: result\n            } : null;\n        },\n        controller (args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label\n                }),\n                valueController: new ButtonController(args.document, {\n                    props: ValueMap.fromObject({\n                        title: args.params.title\n                    }),\n                    viewProps: args.viewProps\n                })\n            });\n        },\n        api (args) {\n            if (!(args.controller instanceof LabelController)) return null;\n            if (!(args.controller.valueController instanceof ButtonController)) return null;\n            return new ButtonApi(args.controller);\n        }\n    };\n    class ValueBladeController extends BladeController {\n        constructor(config){\n            super(config);\n            this.value = config.value;\n        }\n    }\n    function createBlade() {\n        return new ValueMap({\n            positions: createValue([], {\n                equals: deepEqualsArray\n            })\n        });\n    }\n    class Foldable extends ValueMap {\n        constructor(valueMap){\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) return '0';\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) return `${exHeight}px`;\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            const onExpand = ()=>{\n                const expanded = this.styleExpanded;\n                if (expanded) elem.classList.add(expandedClassName);\n                else elem.classList.remove(expandedClassName);\n            };\n            bindValueMap(this, 'expanded', onExpand);\n            bindValueMap(this, 'temporaryExpanded', onExpand);\n        }\n        cleanUpTransition() {\n            this.set('shouldFixHeight', false);\n            this.set('expandedHeight', null);\n            this.set('completed', true);\n        }\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, ()=>{\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', ()=>{\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                const h = computeExpandedFolderHeight(foldable, elem);\n                if (h > 0) foldable.set('expandedHeight', h);\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', ()=>{\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev)=>{\n            if (ev.propertyName !== 'height') return;\n            foldable.cleanUpTransition();\n        });\n    }\n    class RackLikeApi extends BladeApi {\n        constructor(controller, rackApi){\n            super(controller);\n            this.rackApi_ = rackApi;\n        }\n    }\n    function addButtonAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), {\n            view: 'button'\n        }));\n    }\n    function addFolderAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), {\n            view: 'folder'\n        }));\n    }\n    function addSeparatorAsBlade(api, opt_params) {\n        const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n        return api.addBlade(Object.assign(Object.assign({}, params), {\n            view: 'separator'\n        }));\n    }\n    function addTabAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), {\n            view: 'tab'\n        }));\n    }\n    class NestedOrderedSet {\n        constructor(extract){\n            this.emitter = new Emitter();\n            this.items_ = [];\n            this.cache_ = new Set();\n            this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n            this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n            this.extract_ = extract;\n        }\n        get items() {\n            return this.items_;\n        }\n        allItems() {\n            return Array.from(this.cache_);\n        }\n        find(callback) {\n            for (const item of this.allItems()){\n                if (callback(item)) return item;\n            }\n            return null;\n        }\n        includes(item) {\n            return this.cache_.has(item);\n        }\n        add(item, opt_index) {\n            if (this.includes(item)) throw TpError.shouldNeverHappen();\n            const index = opt_index !== undefined ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            this.cache_.add(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.on('add', this.onSubListAdd_);\n                subList.emitter.on('remove', this.onSubListRemove_);\n                subList.allItems().forEach((item)=>{\n                    this.cache_.add(item);\n                });\n            }\n            this.emitter.emit('add', {\n                index: index,\n                item: item,\n                root: this,\n                target: this\n            });\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) return;\n            this.items_.splice(index, 1);\n            this.cache_.delete(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.off('add', this.onSubListAdd_);\n                subList.emitter.off('remove', this.onSubListRemove_);\n            }\n            this.emitter.emit('remove', {\n                index: index,\n                item: item,\n                root: this,\n                target: this\n            });\n        }\n        onSubListAdd_(ev) {\n            this.cache_.add(ev.item);\n            this.emitter.emit('add', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target\n            });\n        }\n        onSubListRemove_(ev) {\n            this.cache_.delete(ev.item);\n            this.emitter.emit('remove', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target\n            });\n        }\n    }\n    class InputBindingApi extends BladeApi {\n        constructor(controller){\n            super(controller);\n            this.onBindingChange_ = this.onBindingChange_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('change', this.onBindingChange_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev)=>{\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingChange_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('change', {\n                event: new TpChangeEvent(this, forceCast(value), this.controller_.binding.target.presetKey, ev.options.last)\n            });\n        }\n    }\n    class InputBindingController extends LabelController {\n        constructor(doc, config){\n            super(doc, config);\n            this.binding = config.binding;\n        }\n    }\n    class MonitorBindingApi extends BladeApi {\n        constructor(controller){\n            super(controller);\n            this.onBindingUpdate_ = this.onBindingUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('update', this.onBindingUpdate_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev)=>{\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingUpdate_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(this, forceCast(value), this.controller_.binding.target.presetKey)\n            });\n        }\n    }\n    class MonitorBindingController extends LabelController {\n        constructor(doc, config){\n            super(doc, config);\n            this.binding = config.binding;\n            this.viewProps.bindDisabled(this.binding.ticker);\n            this.viewProps.handleDispose(()=>{\n                this.binding.dispose();\n            });\n        }\n    }\n    function findSubBladeApiSet(api) {\n        if (api instanceof RackApi) return api['apiSet_'];\n        if (api instanceof RackLikeApi) return api['rackApi_']['apiSet_'];\n        return null;\n    }\n    function getApiByController(apiSet, controller) {\n        const api = apiSet.find((api)=>api.controller_ === controller);\n        if (!api) throw TpError.shouldNeverHappen();\n        return api;\n    }\n    function createBindingTarget(obj, key, opt_id) {\n        if (!BindingTarget.isBindable(obj)) throw TpError.notBindable();\n        return new BindingTarget(obj, key, opt_id);\n    }\n    class RackApi extends BladeApi {\n        constructor(controller, pool){\n            super(controller);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.onRackInputChange_ = this.onRackInputChange_.bind(this);\n            this.onRackMonitorUpdate_ = this.onRackMonitorUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.apiSet_ = new NestedOrderedSet(findSubBladeApiSet);\n            this.pool_ = pool;\n            const rack = this.controller_.rack;\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            rack.emitter.on('inputchange', this.onRackInputChange_);\n            rack.emitter.on('monitorupdate', this.onRackMonitorUpdate_);\n            rack.children.forEach((bc)=>{\n                this.setUpApi_(bc);\n            });\n        }\n        get children() {\n            return this.controller_.rack.children.map((bc)=>getApiByController(this.apiSet_, bc));\n        }\n        addInput(object, key, opt_params) {\n            const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createInput(doc, createBindingTarget(object, key, params.presetKey), params);\n            const api = new InputBindingApi(bc);\n            return this.add(api, params.index);\n        }\n        addMonitor(object, key, opt_params) {\n            const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createMonitor(doc, createBindingTarget(object, key), params);\n            const api = new MonitorBindingApi(bc);\n            return forceCast(this.add(api, params.index));\n        }\n        addFolder(params) {\n            return addFolderAsBlade(this, params);\n        }\n        addButton(params) {\n            return addButtonAsBlade(this, params);\n        }\n        addSeparator(opt_params) {\n            return addSeparatorAsBlade(this, opt_params);\n        }\n        addTab(params) {\n            return addTabAsBlade(this, params);\n        }\n        add(api, opt_index) {\n            this.controller_.rack.add(api.controller_, opt_index);\n            const gapi = this.apiSet_.find((a)=>a.controller_ === api.controller_);\n            if (gapi) this.apiSet_.remove(gapi);\n            this.apiSet_.add(api);\n            return api;\n        }\n        remove(api) {\n            this.controller_.rack.remove(api.controller_);\n        }\n        addBlade(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createBlade(doc, params);\n            const api = this.pool_.createBladeApi(bc);\n            return this.add(api, params.index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev)=>{\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpApi_(bc) {\n            const api = this.apiSet_.find((api)=>api.controller_ === bc);\n            if (!api) this.apiSet_.add(this.pool_.createBladeApi(bc));\n        }\n        onRackAdd_(ev) {\n            this.setUpApi_(ev.bladeController);\n        }\n        onRackRemove_(ev) {\n            if (ev.isRoot) {\n                const api = getApiByController(this.apiSet_, ev.bladeController);\n                this.apiSet_.remove(api);\n            }\n        }\n        onRackInputChange_(ev) {\n            const bc = ev.bladeController;\n            if (bc instanceof InputBindingController) {\n                const api = getApiByController(this.apiSet_, bc);\n                const binding = bc.binding;\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, forceCast(binding.target.read()), binding.target.presetKey, ev.options.last)\n                });\n            } else if (bc instanceof ValueBladeController) {\n                const api = getApiByController(this.apiSet_, bc);\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, bc.value.rawValue, undefined, ev.options.last)\n                });\n            }\n        }\n        onRackMonitorUpdate_(ev) {\n            if (!(ev.bladeController instanceof MonitorBindingController)) throw TpError.shouldNeverHappen();\n            const api = getApiByController(this.apiSet_, ev.bladeController);\n            const binding = ev.bladeController.binding;\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(api, forceCast(binding.target.read()), binding.target.presetKey)\n            });\n        }\n    }\n    class FolderApi extends RackLikeApi {\n        constructor(controller, pool){\n            super(controller, new RackApi(controller.rackController, pool));\n            this.emitter_ = new Emitter();\n            this.controller_.foldable.value('expanded').emitter.on('change', (ev)=>{\n                this.emitter_.emit('fold', {\n                    event: new TpFoldEvent(this, ev.sender.rawValue)\n                });\n            });\n            this.rackApi_.on('change', (ev)=>{\n                this.emitter_.emit('change', {\n                    event: ev\n                });\n            });\n            this.rackApi_.on('update', (ev)=>{\n                this.emitter_.emit('update', {\n                    event: ev\n                });\n            });\n        }\n        get expanded() {\n            return this.controller_.foldable.get('expanded');\n        }\n        set expanded(expanded) {\n            this.controller_.foldable.set('expanded', expanded);\n        }\n        get title() {\n            return this.controller_.props.get('title');\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            return this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev)=>{\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n    class RackLikeController extends BladeController {\n        constructor(config){\n            super({\n                blade: config.blade,\n                view: config.view,\n                viewProps: config.rackController.viewProps\n            });\n            this.rackController = config.rackController;\n        }\n    }\n    class PlainView {\n        constructor(doc, config){\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n    function findInputBindingController(bcs, b) {\n        for(let i = 0; i < bcs.length; i++){\n            const bc = bcs[i];\n            if (bc instanceof InputBindingController && bc.binding === b) return bc;\n        }\n        return null;\n    }\n    function findMonitorBindingController(bcs, b) {\n        for(let i = 0; i < bcs.length; i++){\n            const bc = bcs[i];\n            if (bc instanceof MonitorBindingController && bc.binding === b) return bc;\n        }\n        return null;\n    }\n    function findValueBladeController(bcs, v) {\n        for(let i = 0; i < bcs.length; i++){\n            const bc = bcs[i];\n            if (bc instanceof ValueBladeController && bc.value === v) return bc;\n        }\n        return null;\n    }\n    function findSubRack(bc) {\n        if (bc instanceof RackController) return bc.rack;\n        if (bc instanceof RackLikeController) return bc.rackController.rack;\n        return null;\n    }\n    function findSubBladeControllerSet(bc) {\n        const rack = findSubRack(bc);\n        return rack ? rack['bcSet_'] : null;\n    }\n    class BladeRack {\n        constructor(config){\n            var _a, _b;\n            this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n            this.onSetAdd_ = this.onSetAdd_.bind(this);\n            this.onSetRemove_ = this.onSetRemove_.bind(this);\n            this.onChildDispose_ = this.onChildDispose_.bind(this);\n            this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n            this.onChildInputChange_ = this.onChildInputChange_.bind(this);\n            this.onChildMonitorUpdate_ = this.onChildMonitorUpdate_.bind(this);\n            this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n            this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n            this.onDescendantLayout_ = this.onDescendantLayout_.bind(this);\n            this.onDescendantInputChange_ = this.onDescendantInputChange_.bind(this);\n            this.onDescendantMonitorUpdate_ = this.onDescendantMonitorUpdate_.bind(this);\n            this.emitter = new Emitter();\n            this.blade_ = (_a = config.blade) !== null && _a !== void 0 ? _a : null;\n            (_b = this.blade_) === null || _b === void 0 || _b.value('positions').emitter.on('change', this.onBladePositionsChange_);\n            this.viewProps = config.viewProps;\n            this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n            this.bcSet_.emitter.on('add', this.onSetAdd_);\n            this.bcSet_.emitter.on('remove', this.onSetRemove_);\n        }\n        get children() {\n            return this.bcSet_.items;\n        }\n        add(bc, opt_index) {\n            var _a;\n            (_a = bc.parent) === null || _a === void 0 || _a.remove(bc);\n            if (isPropertyWritable(bc, 'parent')) bc.parent = this;\n            else {\n                bc['parent_'] = this;\n                warnMissing({\n                    key: 'parent',\n                    target: 'BladeController',\n                    place: 'BladeRack.add'\n                });\n            }\n            this.bcSet_.add(bc, opt_index);\n        }\n        remove(bc) {\n            if (isPropertyWritable(bc, 'parent')) bc.parent = null;\n            else {\n                bc['parent_'] = null;\n                warnMissing({\n                    key: 'parent',\n                    target: 'BladeController',\n                    place: 'BladeRack.remove'\n                });\n            }\n            this.bcSet_.remove(bc);\n        }\n        find(controllerClass) {\n            return forceCast(this.bcSet_.allItems().filter((bc)=>{\n                return bc instanceof controllerClass;\n            }));\n        }\n        onSetAdd_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('add', {\n                bladeController: ev.item,\n                index: ev.index,\n                isRoot: isRoot,\n                sender: this\n            });\n            if (!isRoot) return;\n            const bc = ev.item;\n            bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n            bc.blade.value('positions').emitter.on('change', this.onChildPositionsChange_);\n            bc.viewProps.handleDispose(this.onChildDispose_);\n            if (bc instanceof InputBindingController) bc.binding.emitter.on('change', this.onChildInputChange_);\n            else if (bc instanceof MonitorBindingController) bc.binding.emitter.on('update', this.onChildMonitorUpdate_);\n            else if (bc instanceof ValueBladeController) bc.value.emitter.on('change', this.onChildValueChange_);\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.on('layout', this.onDescendantLayout_);\n                    emitter.on('inputchange', this.onDescendantInputChange_);\n                    emitter.on('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        onSetRemove_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('remove', {\n                bladeController: ev.item,\n                isRoot: isRoot,\n                sender: this\n            });\n            if (!isRoot) return;\n            const bc = ev.item;\n            if (bc instanceof InputBindingController) bc.binding.emitter.off('change', this.onChildInputChange_);\n            else if (bc instanceof MonitorBindingController) bc.binding.emitter.off('update', this.onChildMonitorUpdate_);\n            else if (bc instanceof ValueBladeController) bc.value.emitter.off('change', this.onChildValueChange_);\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.off('layout', this.onDescendantLayout_);\n                    emitter.off('inputchange', this.onDescendantInputChange_);\n                    emitter.off('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        updatePositions_() {\n            const visibleItems = this.bcSet_.items.filter((bc)=>!bc.viewProps.get('hidden'));\n            const firstVisibleItem = visibleItems[0];\n            const lastVisibleItem = visibleItems[visibleItems.length - 1];\n            this.bcSet_.items.forEach((bc)=>{\n                const ps = [];\n                if (bc === firstVisibleItem) {\n                    ps.push('first');\n                    if (!this.blade_ || this.blade_.get('positions').includes('veryfirst')) ps.push('veryfirst');\n                }\n                if (bc === lastVisibleItem) {\n                    ps.push('last');\n                    if (!this.blade_ || this.blade_.get('positions').includes('verylast')) ps.push('verylast');\n                }\n                bc.blade.set('positions', ps);\n            });\n        }\n        onChildPositionsChange_() {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this\n            });\n        }\n        onChildViewPropsChange_(_ev) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this\n            });\n        }\n        onChildDispose_() {\n            const disposedUcs = this.bcSet_.items.filter((bc)=>{\n                return bc.viewProps.get('disposed');\n            });\n            disposedUcs.forEach((bc)=>{\n                this.bcSet_.remove(bc);\n            });\n        }\n        onChildInputChange_(ev) {\n            const bc = findInputBindingController(this.find(InputBindingController), ev.sender);\n            if (!bc) throw TpError.alreadyDisposed();\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this\n            });\n        }\n        onChildMonitorUpdate_(ev) {\n            const bc = findMonitorBindingController(this.find(MonitorBindingController), ev.sender);\n            if (!bc) throw TpError.alreadyDisposed();\n            this.emitter.emit('monitorupdate', {\n                bladeController: bc,\n                sender: this\n            });\n        }\n        onChildValueChange_(ev) {\n            const bc = findValueBladeController(this.find(ValueBladeController), ev.sender);\n            if (!bc) throw TpError.alreadyDisposed();\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this\n            });\n        }\n        onDescendantLayout_(_) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this\n            });\n        }\n        onDescendantInputChange_(ev) {\n            this.emitter.emit('inputchange', {\n                bladeController: ev.bladeController,\n                options: ev.options,\n                sender: this\n            });\n        }\n        onDescendantMonitorUpdate_(ev) {\n            this.emitter.emit('monitorupdate', {\n                bladeController: ev.bladeController,\n                sender: this\n            });\n        }\n        onBladePositionsChange_() {\n            this.updatePositions_();\n        }\n    }\n    class RackController extends BladeController {\n        constructor(doc, config){\n            super(Object.assign(Object.assign({}, config), {\n                view: new PlainView(doc, {\n                    viewName: 'brk',\n                    viewProps: config.viewProps\n                })\n            }));\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            const rack = new BladeRack({\n                blade: config.root ? undefined : config.blade,\n                viewProps: config.viewProps\n            });\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            this.rack = rack;\n            this.viewProps.handleDispose(()=>{\n                for(let i = this.rack.children.length - 1; i >= 0; i--){\n                    const bc = this.rack.children[i];\n                    bc.viewProps.set('disposed', true);\n                }\n            });\n        }\n        onRackAdd_(ev) {\n            if (!ev.isRoot) return;\n            insertElementAt(this.view.element, ev.bladeController.view.element, ev.index);\n        }\n        onRackRemove_(ev) {\n            if (!ev.isRoot) return;\n            removeElement(ev.bladeController.view.element);\n        }\n    }\n    const bladeContainerClassName = ClassName('cnt');\n    class FolderView {\n        constructor(doc, config){\n            var _a;\n            this.className_ = ClassName((_a = config.viewName) !== null && _a !== void 0 ? _a : 'fld');\n            this.element = doc.createElement('div');\n            this.element.classList.add(this.className_(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            this.foldable_ = config.foldable;\n            this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n            bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(this.className_('b'));\n            bindValueMap(config.props, 'title', (title)=>{\n                if (isEmpty(title)) this.element.classList.add(this.className_(undefined, 'not'));\n                else this.element.classList.remove(this.className_(undefined, 'not'));\n            });\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const indentElem = doc.createElement('div');\n            indentElem.classList.add(this.className_('i'));\n            this.element.appendChild(indentElem);\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(this.className_('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(this.className_('m'));\n            this.buttonElement.appendChild(markElem);\n            const containerElem = config.containerElement;\n            containerElem.classList.add(this.className_('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n        }\n    }\n    class FolderController extends RackLikeController {\n        constructor(doc, config){\n            var _a;\n            const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n            const rc = new RackController(doc, {\n                blade: config.blade,\n                root: config.root,\n                viewProps: config.viewProps\n            });\n            super(Object.assign(Object.assign({}, config), {\n                rackController: rc,\n                view: new FolderView(doc, {\n                    containerElement: rc.view.element,\n                    foldable: foldable,\n                    props: config.props,\n                    viewName: config.root ? 'rot' : undefined,\n                    viewProps: config.viewProps\n                })\n            }));\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.props = config.props;\n            this.foldable = foldable;\n            bindFoldable(this.foldable, this.view.containerElement);\n            this.rackController.rack.emitter.on('add', ()=>{\n                this.foldable.cleanUpTransition();\n            });\n            this.rackController.rack.emitter.on('remove', ()=>{\n                this.foldable.cleanUpTransition();\n            });\n            this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n        }\n        get document() {\n            return this.view.element.ownerDocument;\n        }\n        onTitleClick_() {\n            this.foldable.set('expanded', !this.foldable.get('expanded'));\n        }\n    }\n    const FolderBladePlugin = {\n        id: 'folder',\n        type: 'blade',\n        accept (params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('folder'),\n                expanded: p.optional.boolean\n            });\n            return result ? {\n                params: result\n            } : null;\n        },\n        controller (args) {\n            return new FolderController(args.document, {\n                blade: args.blade,\n                expanded: args.params.expanded,\n                props: ValueMap.fromObject({\n                    title: args.params.title\n                }),\n                viewProps: args.viewProps\n            });\n        },\n        api (args) {\n            if (!(args.controller instanceof FolderController)) return null;\n            return new FolderApi(args.controller, args.pool);\n        }\n    };\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config){\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), {\n                value: config.valueController.value,\n                view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps\n                }),\n                viewProps: viewProps\n            }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n    class SeparatorApi extends BladeApi {\n    }\n    const className$m = ClassName('spr');\n    class SeparatorView {\n        constructor(doc, config){\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$m());\n            config.viewProps.bindClassModifiers(this.element);\n            const hrElem = doc.createElement('hr');\n            hrElem.classList.add(className$m('r'));\n            this.element.appendChild(hrElem);\n        }\n    }\n    class SeparatorController extends BladeController {\n        constructor(doc, config){\n            super(Object.assign(Object.assign({}, config), {\n                view: new SeparatorView(doc, {\n                    viewProps: config.viewProps\n                })\n            }));\n        }\n    }\n    const SeparatorBladePlugin = {\n        id: 'separator',\n        type: 'blade',\n        accept (params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('separator')\n            });\n            return result ? {\n                params: result\n            } : null;\n        },\n        controller (args) {\n            return new SeparatorController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps\n            });\n        },\n        api (args) {\n            if (!(args.controller instanceof SeparatorController)) return null;\n            return new SeparatorApi(args.controller);\n        }\n    };\n    const className$l = ClassName('tbi');\n    class TabItemView {\n        constructor(doc, config){\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$l());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValueMap(config.props, 'selected', (selected)=>{\n                if (selected) this.element.classList.add(className$l(undefined, 'sel'));\n                else this.element.classList.remove(className$l(undefined, 'sel'));\n            });\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$l('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$l('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n        }\n    }\n    class TabItemController {\n        constructor(doc, config){\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new TabItemView(doc, {\n                props: config.props,\n                viewProps: config.viewProps\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this\n            });\n        }\n    }\n    class TabPageController {\n        constructor(doc, config){\n            this.onItemClick_ = this.onItemClick_.bind(this);\n            this.ic_ = new TabItemController(doc, {\n                props: config.itemProps,\n                viewProps: ViewProps.create()\n            });\n            this.ic_.emitter.on('click', this.onItemClick_);\n            this.cc_ = new RackController(doc, {\n                blade: createBlade(),\n                viewProps: ViewProps.create()\n            });\n            this.props = config.props;\n            bindValueMap(this.props, 'selected', (selected)=>{\n                this.itemController.props.set('selected', selected);\n                this.contentController.viewProps.set('hidden', !selected);\n            });\n        }\n        get itemController() {\n            return this.ic_;\n        }\n        get contentController() {\n            return this.cc_;\n        }\n        onItemClick_() {\n            this.props.set('selected', true);\n        }\n    }\n    class TabPageApi {\n        constructor(controller, contentRackApi){\n            this.controller_ = controller;\n            this.rackApi_ = contentRackApi;\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.itemController.props.set('title', title);\n        }\n        get selected() {\n            return this.controller_.props.get('selected');\n        }\n        set selected(selected) {\n            this.controller_.props.set('selected', selected);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n    }\n    class TabApi extends RackLikeApi {\n        constructor(controller, pool){\n            super(controller, new RackApi(controller.rackController, pool));\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.onSelect_ = this.onSelect_.bind(this);\n            this.emitter_ = new Emitter();\n            this.pageApiMap_ = new Map();\n            this.rackApi_.on('change', (ev)=>{\n                this.emitter_.emit('change', {\n                    event: ev\n                });\n            });\n            this.rackApi_.on('update', (ev)=>{\n                this.emitter_.emit('update', {\n                    event: ev\n                });\n            });\n            this.controller_.tab.selectedIndex.emitter.on('change', this.onSelect_);\n            this.controller_.pageSet.emitter.on('add', this.onPageAdd_);\n            this.controller_.pageSet.emitter.on('remove', this.onPageRemove_);\n            this.controller_.pageSet.items.forEach((pc)=>{\n                this.setUpPageApi_(pc);\n            });\n        }\n        get pages() {\n            return this.controller_.pageSet.items.map((pc)=>{\n                const api = this.pageApiMap_.get(pc);\n                if (!api) throw TpError.shouldNeverHappen();\n                return api;\n            });\n        }\n        addPage(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const pc = new TabPageController(doc, {\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: params.title\n                }),\n                props: ValueMap.fromObject({\n                    selected: false\n                })\n            });\n            this.controller_.add(pc, params.index);\n            const api = this.pageApiMap_.get(pc);\n            if (!api) throw TpError.shouldNeverHappen();\n            return api;\n        }\n        removePage(index) {\n            this.controller_.remove(index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev)=>{\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpPageApi_(pc) {\n            const rackApi = this.rackApi_['apiSet_'].find((api)=>api.controller_ === pc.contentController);\n            if (!rackApi) throw TpError.shouldNeverHappen();\n            const api = new TabPageApi(pc, rackApi);\n            this.pageApiMap_.set(pc, api);\n        }\n        onPageAdd_(ev) {\n            this.setUpPageApi_(ev.item);\n        }\n        onPageRemove_(ev) {\n            const api = this.pageApiMap_.get(ev.item);\n            if (!api) throw TpError.shouldNeverHappen();\n            this.pageApiMap_.delete(ev.item);\n        }\n        onSelect_(ev) {\n            this.emitter_.emit('select', {\n                event: new TpTabSelectEvent(this, ev.rawValue)\n            });\n        }\n    }\n    const INDEX_NOT_SELECTED = -1;\n    class Tab {\n        constructor(){\n            this.onItemSelectedChange_ = this.onItemSelectedChange_.bind(this);\n            this.empty = createValue(true);\n            this.selectedIndex = createValue(INDEX_NOT_SELECTED);\n            this.items_ = [];\n        }\n        add(item, opt_index) {\n            const index = opt_index !== null && opt_index !== void 0 ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            item.emitter.on('change', this.onItemSelectedChange_);\n            this.keepSelection_();\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) return;\n            this.items_.splice(index, 1);\n            item.emitter.off('change', this.onItemSelectedChange_);\n            this.keepSelection_();\n        }\n        keepSelection_() {\n            if (this.items_.length === 0) {\n                this.selectedIndex.rawValue = INDEX_NOT_SELECTED;\n                this.empty.rawValue = true;\n                return;\n            }\n            const firstSelIndex = this.items_.findIndex((s)=>s.rawValue);\n            if (firstSelIndex < 0) {\n                this.items_.forEach((s, i)=>{\n                    s.rawValue = i === 0;\n                });\n                this.selectedIndex.rawValue = 0;\n            } else {\n                this.items_.forEach((s, i)=>{\n                    s.rawValue = i === firstSelIndex;\n                });\n                this.selectedIndex.rawValue = firstSelIndex;\n            }\n            this.empty.rawValue = false;\n        }\n        onItemSelectedChange_(ev) {\n            if (ev.rawValue) {\n                const index = this.items_.findIndex((s)=>s === ev.sender);\n                this.items_.forEach((s, i)=>{\n                    s.rawValue = i === index;\n                });\n                this.selectedIndex.rawValue = index;\n            } else this.keepSelection_();\n        }\n    }\n    const className$k = ClassName('tab');\n    class TabView {\n        constructor(doc, config){\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$k(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.empty, valueToClassName(this.element, className$k(undefined, 'nop')));\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$k('t'));\n            this.element.appendChild(titleElem);\n            this.itemsElement = titleElem;\n            const indentElem = doc.createElement('div');\n            indentElem.classList.add(className$k('i'));\n            this.element.appendChild(indentElem);\n            const contentsElem = config.contentsElement;\n            contentsElem.classList.add(className$k('c'));\n            this.element.appendChild(contentsElem);\n            this.contentsElement = contentsElem;\n        }\n    }\n    class TabController extends RackLikeController {\n        constructor(doc, config){\n            const cr = new RackController(doc, {\n                blade: config.blade,\n                viewProps: config.viewProps\n            });\n            const tab = new Tab();\n            super({\n                blade: config.blade,\n                rackController: cr,\n                view: new TabView(doc, {\n                    contentsElement: cr.view.element,\n                    empty: tab.empty,\n                    viewProps: config.viewProps\n                })\n            });\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.pageSet_ = new NestedOrderedSet(()=>null);\n            this.pageSet_.emitter.on('add', this.onPageAdd_);\n            this.pageSet_.emitter.on('remove', this.onPageRemove_);\n            this.tab = tab;\n        }\n        get pageSet() {\n            return this.pageSet_;\n        }\n        add(pc, opt_index) {\n            this.pageSet_.add(pc, opt_index);\n        }\n        remove(index) {\n            this.pageSet_.remove(this.pageSet_.items[index]);\n        }\n        onPageAdd_(ev) {\n            const pc = ev.item;\n            insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n            pc.itemController.viewProps.set('parent', this.viewProps);\n            this.rackController.rack.add(pc.contentController, ev.index);\n            this.tab.add(pc.props.value('selected'));\n        }\n        onPageRemove_(ev) {\n            const pc = ev.item;\n            removeElement(pc.itemController.view.element);\n            pc.itemController.viewProps.set('parent', null);\n            this.rackController.rack.remove(pc.contentController);\n            this.tab.remove(pc.props.value('selected'));\n        }\n    }\n    const TabBladePlugin = {\n        id: 'tab',\n        type: 'blade',\n        accept (params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                pages: p.required.array(p.required.object({\n                    title: p.required.string\n                })),\n                view: p.required.constant('tab')\n            });\n            if (!result || result.pages.length === 0) return null;\n            return {\n                params: result\n            };\n        },\n        controller (args) {\n            const c = new TabController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps\n            });\n            args.params.pages.forEach((p)=>{\n                const pc = new TabPageController(args.document, {\n                    itemProps: ValueMap.fromObject({\n                        selected: false,\n                        title: p.title\n                    }),\n                    props: ValueMap.fromObject({\n                        selected: false\n                    })\n                });\n                c.add(pc);\n            });\n            return c;\n        },\n        api (args) {\n            if (!(args.controller instanceof TabController)) return null;\n            return new TabApi(args.controller, args.pool);\n        }\n    };\n    function createBladeController(plugin, args) {\n        const ac = plugin.accept(args.params);\n        if (!ac) return null;\n        const disabled = ParamsParsers.optional.boolean(args.params['disabled']).value;\n        const hidden = ParamsParsers.optional.boolean(args.params['hidden']).value;\n        return plugin.controller({\n            blade: createBlade(),\n            document: args.document,\n            params: forceCast(Object.assign(Object.assign({}, ac.params), {\n                disabled: disabled,\n                hidden: hidden\n            })),\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden\n            })\n        });\n    }\n    class ManualTicker {\n        constructor(){\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() {}\n        tick() {\n            if (this.disabled) return;\n            this.emitter.emit('tick', {\n                sender: this\n            });\n        }\n    }\n    class IntervalTicker {\n        constructor(doc, interval){\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) this.clearTimer_();\n            else this.setTimer_();\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) return;\n            const win = this.doc_.defaultView;\n            if (win) win.clearInterval(this.timerId_);\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) return;\n            const win = this.doc_.defaultView;\n            if (win) this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n        }\n        onTick_() {\n            if (this.disabled_) return;\n            this.emitter.emit('tick', {\n                sender: this\n            });\n        }\n    }\n    class InputBinding {\n        constructor(config){\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.reader = config.reader;\n            this.writer = config.writer;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.target = config.target;\n            this.read();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue !== undefined) this.value.rawValue = this.reader(targetValue);\n        }\n        write_(rawValue) {\n            this.writer(this.target, rawValue);\n        }\n        onValueChange_(ev) {\n            this.write_(ev.rawValue);\n            this.emitter.emit('change', {\n                options: ev.options,\n                rawValue: ev.rawValue,\n                sender: this\n            });\n        }\n    }\n    function fillBuffer(buffer, bufferSize) {\n        while(buffer.length < bufferSize)buffer.push(undefined);\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [\n            ...createTrimmedBuffer(buffer),\n            newValue\n        ];\n        if (newBuffer.length > buffer.length) newBuffer.splice(0, newBuffer.length - buffer.length);\n        else fillBuffer(newBuffer, buffer.length);\n        return newBuffer;\n    }\n    class MonitorBinding {\n        constructor(config){\n            this.onTick_ = this.onTick_.bind(this);\n            this.reader_ = config.reader;\n            this.target = config.target;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.ticker = config.ticker;\n            this.ticker.emitter.on('tick', this.onTick_);\n            this.read();\n        }\n        dispose() {\n            this.ticker.dispose();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue === undefined) return;\n            const buffer = this.value.rawValue;\n            const newValue = this.reader_(targetValue);\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\n            this.emitter.emit('update', {\n                rawValue: newValue,\n                sender: this\n            });\n        }\n        onTick_(_) {\n            this.read();\n        }\n    }\n    class CompositeConstraint {\n        constructor(constraints){\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c)=>{\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) return c;\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc)=>{\n                if (tmpResult) return tmpResult;\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) return result;\n        }\n        return null;\n    }\n    class DefiniteRangeConstraint {\n        constructor(config){\n            this.values = ValueMap.fromObject({\n                max: config.max,\n                min: config.min\n            });\n        }\n        constrain(value) {\n            const max = this.values.get('max');\n            const min = this.values.get('min');\n            return Math.min(Math.max(value, min), max);\n        }\n    }\n    class ListConstraint {\n        constructor(options){\n            this.values = ValueMap.fromObject({\n                options: options\n            });\n        }\n        get options() {\n            return this.values.get('options');\n        }\n        constrain(value) {\n            const opts = this.values.get('options');\n            if (opts.length === 0) return value;\n            const matched = opts.filter((item)=>{\n                return item.value === value;\n            }).length > 0;\n            return matched ? value : opts[0].value;\n        }\n    }\n    class RangeConstraint {\n        constructor(config){\n            this.values = ValueMap.fromObject({\n                max: config.max,\n                min: config.min\n            });\n        }\n        get maxValue() {\n            return this.values.get('max');\n        }\n        get minValue() {\n            return this.values.get('min');\n        }\n        constrain(value) {\n            const max = this.values.get('max');\n            const min = this.values.get('min');\n            let result = value;\n            if (!isEmpty(min)) result = Math.max(result, min);\n            if (!isEmpty(max)) result = Math.min(result, max);\n            return result;\n        }\n    }\n    class StepConstraint {\n        constructor(step, origin = 0){\n            this.step = step;\n            this.origin = origin;\n        }\n        constrain(value) {\n            const o = this.origin % this.step;\n            const r = Math.round((value - o) / this.step);\n            return o + r * this.step;\n        }\n    }\n    const className$j = ClassName('lst');\n    class ListView {\n        constructor(doc, config){\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.props_ = config.props;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$j());\n            config.viewProps.bindClassModifiers(this.element);\n            const selectElem = doc.createElement('select');\n            selectElem.classList.add(className$j('s'));\n            config.viewProps.bindDisabled(selectElem);\n            this.element.appendChild(selectElem);\n            this.selectElement = selectElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(className$j('m'));\n            markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            this.element.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value_ = config.value;\n            bindValueMap(this.props_, 'options', (opts)=>{\n                removeChildElements(this.selectElement);\n                opts.forEach((item)=>{\n                    const optionElem = doc.createElement('option');\n                    optionElem.textContent = item.text;\n                    this.selectElement.appendChild(optionElem);\n                });\n                this.update_();\n            });\n        }\n        update_() {\n            const values = this.props_.get('options').map((o)=>o.value);\n            this.selectElement.selectedIndex = values.indexOf(this.value_.rawValue);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n    class ListController {\n        constructor(doc, config){\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ListView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.view.selectElement.addEventListener('change', this.onSelectChange_);\n        }\n        onSelectChange_(e) {\n            const selectElem = forceCast(e.currentTarget);\n            this.value.rawValue = this.props.get('options')[selectElem.selectedIndex].value;\n        }\n    }\n    const className$i = ClassName('pop');\n    class PopupView {\n        constructor(doc, config){\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$i());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$i(undefined, 'v')));\n        }\n    }\n    class PopupController {\n        constructor(doc, config){\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps\n            });\n        }\n    }\n    const className$h = ClassName('txt');\n    class TextView {\n        constructor(doc, config){\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$h());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$h('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n    class TextController {\n        constructor(doc, config){\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) this.value.rawValue = parsedValue;\n            this.view.refresh();\n        }\n    }\n    function boolToString(value) {\n        return String(value);\n    }\n    function boolFromUnknown(value) {\n        if (value === 'false') return false;\n        return !!value;\n    }\n    function BooleanFormatter(value) {\n        return boolToString(value);\n    }\n    class NumberLiteralNode {\n        constructor(text){\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2)=>Math.pow(v1, v2),\n        '*': (v1, v2)=>v1 * v2,\n        '/': (v1, v2)=>v1 / v2,\n        '%': (v1, v2)=>v1 % v2,\n        '+': (v1, v2)=>v1 + v2,\n        '-': (v1, v2)=>v1 - v2,\n        '<<': (v1, v2)=>v1 << v2,\n        '>>': (v1, v2)=>v1 >> v2,\n        '>>>': (v1, v2)=>v1 >>> v2,\n        '&': (v1, v2)=>v1 & v2,\n        '^': (v1, v2)=>v1 ^ v2,\n        '|': (v1, v2)=>v1 | v2\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right){\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) throw new Error(`unexpected binary operator: '${this.operator}`);\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')'\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v)=>v,\n        '-': (v)=>-v,\n        '~': (v)=>~v\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr){\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) throw new Error(`unexpected unary operator: '${this.operator}`);\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return [\n                'u(',\n                this.operator,\n                this.expression.toString(),\n                ')'\n            ].join(' ');\n        }\n    }\n    function combineReader(parsers) {\n        return (text, cursor)=>{\n            for(let i = 0; i < parsers.length; i++){\n                const result = parsers[i](text, cursor);\n                if (result !== '') return result;\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = m && m[0]) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = m && m[0]) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') return ds;\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') return '';\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') return '';\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') return '';\n        const si = readSignedInteger(text, cursor);\n        if (si === '') return '';\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') return ch;\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') return '';\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') return '';\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') return '';\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') return '';\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') return '';\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') return '';\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = m && m[0]) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') return '';\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') return '';\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = m && m[0]) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') return '';\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') return '';\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = m && m[0]) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') return '';\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') return '';\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral\n    ]);\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') return null;\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') return null;\n        const expr = parseExpression(text, cursor);\n        if (!expr) return null;\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') return null;\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        var _a;\n        return (_a = parseLiteral(text, cursor)) !== null && _a !== void 0 ? _a : parseParenthesizedExpression(text, cursor);\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) return expr;\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') return null;\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) return null;\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable)\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op)=>text.startsWith(op, cursor))[0];\n        if (!op) return null;\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor)=>{\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) return null;\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for(;;){\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) break;\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) return null;\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr ? {\n                cursor: cursor,\n                evaluable: expr\n            } : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        [\n            '**'\n        ],\n        [\n            '*',\n            '/',\n            '%'\n        ],\n        [\n            '+',\n            '-'\n        ],\n        [\n            '<<',\n            '>>>',\n            '>>'\n        ],\n        [\n            '&'\n        ],\n        [\n            '^'\n        ],\n        [\n            '|'\n        ]\n    ].reduce((parser, ops)=>{\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) return null;\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) return null;\n        return expr.evaluable;\n    }\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') return value;\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) return pv;\n        }\n        return 0;\n    }\n    function numberToString(value) {\n        return String(value);\n    }\n    function createNumberFormatter(digits) {\n        return (value)=>{\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n    const innerFormatter = createNumberFormatter(0);\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n    function formatString(value) {\n        return value;\n    }\n    function connectValues({ primary: primary, secondary: secondary, forward: forward, backward: backward }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) return;\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev)=>{\n            preventFeedback(()=>{\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev)=>{\n            preventFeedback(()=>{\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(()=>{\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(()=>{\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true\n            });\n        });\n    }\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) return +step;\n        else if (keys.downKey) return -step;\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp'\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight'\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n    function computeOffset$1(ev, elem) {\n        var _a, _b;\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((_a = win && win.scrollX) !== null && _a !== void 0 ? _a : 0) + rect.left),\n            y: ev.pageY - (((_b = win && win.scrollY) !== null && _b !== void 0 ? _b : 0) + rect.top)\n        };\n    }\n    class PointerHandler {\n        constructor(element){\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_, {\n                passive: false\n            });\n            element.addEventListener('touchmove', this.onTouchMove_, {\n                passive: true\n            });\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height\n                },\n                point: offset ? {\n                    x: offset.x,\n                    y: offset.y\n                } : null\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 || _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top\n                } : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top\n                } : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top\n                } : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey\n            });\n        }\n    }\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n    function loopRange(value, max) {\n        return (value % max + max) % max;\n    }\n    const className$g = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config){\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g(), className$g(undefined, 'num'));\n            if (config.arrayPosition) this.element.classList.add(className$g(undefined, config.arrayPosition));\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$g('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$g());\n            this.inputElement.classList.add(className$g('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$g('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$g('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$g('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$g('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$g(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$g(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? 1 : 0);\n            const adx = constrainRange(-aox, -4, 4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [\n                `M ${aox + adx},0 L${aox},4 L${aox + adx},8`,\n                `M ${x},-1 L${x},9`\n            ].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n    class NumberTextController {\n        constructor(doc, config){\n            var _a;\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.sliderProps_ = (_a = config.sliderProps) !== null && _a !== void 0 ? _a : null;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        constrainValue_(value) {\n            var _a, _b;\n            const min = (_a = this.sliderProps_) === null || _a === void 0 ? void 0 : _a.get('minValue');\n            const max = (_b = this.sliderProps_) === null || _b === void 0 ? void 0 : _b.get('maxValue');\n            let v = value;\n            if (min !== undefined) v = Math.max(v, min);\n            if (max !== undefined) v = Math.min(v, max);\n            return v;\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) this.value.rawValue = this.constrainValue_(parsedValue);\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) return;\n            this.value.setRawValue(this.constrainValue_(this.value.rawValue + step), {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) return;\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) return null;\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.constrainValue_(this.originRawValue_ + dx * this.props.get('draggingScale'));\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) return;\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) return;\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n    const className$f = ClassName('sld');\n    class SliderView {\n        constructor(doc, config){\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$f());\n            config.viewProps.bindClassModifiers(this.element);\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$f('t'));\n            config.viewProps.bindTabIndex(trackElem);\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$f('k'));\n            this.trackElement.appendChild(knobElem);\n            this.knobElement = knobElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('minValue'), this.props_.get('maxValue'), 0, 100), 0, 100);\n            this.knobElement.style.width = `${p}%`;\n        }\n        onChange_() {\n            this.update_();\n        }\n    }\n    class SliderController {\n        constructor(doc, config){\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.props = config.props;\n            this.view = new SliderView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.ptHandler_ = new PointerHandler(this.view.trackElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n            this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) return;\n            this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('minValue'), this.props.get('maxValue')), opts);\n        }\n        onPointerDownOrMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) return;\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) return;\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true\n            });\n        }\n    }\n    const className$e = ClassName('sldtxt');\n    class SliderTextView {\n        constructor(doc, config){\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$e('s'));\n            this.sliderView_ = config.sliderView;\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$e('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n    class SliderTextController {\n        constructor(doc, config){\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sliderC_ = new SliderController(doc, {\n                baseStep: config.baseStep,\n                props: config.sliderProps,\n                value: config.value,\n                viewProps: this.viewProps\n            });\n            this.textC_ = new NumberTextController(doc, {\n                baseStep: config.baseStep,\n                parser: config.parser,\n                props: config.textProps,\n                sliderProps: config.sliderProps,\n                value: config.value,\n                viewProps: config.viewProps\n            });\n            this.view = new SliderTextView(doc, {\n                sliderView: this.sliderC_.view,\n                textView: this.textC_.view\n            });\n        }\n        get sliderController() {\n            return this.sliderC_;\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n    function parseListOptions(value) {\n        const p = ParamsParsers;\n        if (Array.isArray(value)) return p.required.array(p.required.object({\n            text: p.required.string,\n            value: p.required.raw\n        }))(value).value;\n        if (typeof value === 'object') return p.required.raw(value).value;\n        return undefined;\n    }\n    function parsePickerLayout(value) {\n        if (value === 'inline' || value === 'popup') return value;\n        return undefined;\n    }\n    function parsePointDimensionParams(value) {\n        const p = ParamsParsers;\n        return p.required.object({\n            max: p.optional.number,\n            min: p.optional.number,\n            step: p.optional.number\n        })(value).value;\n    }\n    function normalizeListOptions(options) {\n        if (Array.isArray(options)) return options;\n        const items = [];\n        Object.keys(options).forEach((text)=>{\n            items.push({\n                text: text,\n                value: options[text]\n            });\n        });\n        return items;\n    }\n    function createListConstraint(options) {\n        return !isEmpty(options) ? new ListConstraint(normalizeListOptions(forceCast(options))) : null;\n    }\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) return null;\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) return getDecimalDigits(sc.step);\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n    const className$d = ClassName('ckb');\n    class CheckboxView {\n        constructor(doc, config){\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$d());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className$d('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$d('i'));\n            inputElem.type = 'checkbox';\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.viewProps.bindDisabled(this.inputElement);\n            const wrapperElem = doc.createElement('div');\n            wrapperElem.classList.add(className$d('w'));\n            labelElem.appendChild(wrapperElem);\n            const markElem = createSvgIconElement(doc, 'check');\n            wrapperElem.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            this.inputElement.checked = this.value.rawValue;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n    class CheckboxController {\n        constructor(doc, config){\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CheckboxView(doc, {\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            this.value.rawValue = inputElem.checked;\n        }\n    }\n    function createConstraint$6(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) constraints.push(lc);\n        return new CompositeConstraint(constraints);\n    }\n    const BooleanInputPlugin = {\n        id: 'input-bool',\n        type: 'input',\n        accept: (value, params)=>{\n            if (typeof value !== 'boolean') return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions)\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (_args)=>boolFromUnknown,\n            constraint: (args)=>createConstraint$6(args.params),\n            writer: (_args)=>writePrimitive\n        },\n        controller: (args)=>{\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) return new ListController(doc, {\n                props: new ValueMap({\n                    options: lc.values.value('options')\n                }),\n                value: value,\n                viewProps: args.viewProps\n            });\n            return new CheckboxController(doc, {\n                value: value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    const className$c = ClassName('col');\n    class ColorView {\n        constructor(doc, config){\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.foldable.bindExpandedClass(this.element, className$c(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$c(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$c('h'));\n            this.element.appendChild(headElem);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$c('s'));\n            headElem.appendChild(swatchElem);\n            this.swatchElement = swatchElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$c('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$c('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            } else this.pickerElement = null;\n        }\n    }\n    function rgbToHslInt(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const c = cmax - cmin;\n        let h = 0;\n        let s = 0;\n        const l = (cmin + cmax) / 2;\n        if (c !== 0) {\n            s = c / (1 - Math.abs(cmax + cmin - 1));\n            if (rp === cmax) h = (gp - bp) / c;\n            else if (gp === cmax) h = 2 + (bp - rp) / c;\n            else h = 4 + (rp - gp) / c;\n            h = h / 6 + (h < 0 ? 1 : 0);\n        }\n        return [\n            h * 360,\n            s * 100,\n            l * 100\n        ];\n    }\n    function hslToRgbInt(h, s, l) {\n        const hp = (h % 360 + 360) % 360;\n        const sp = constrainRange(s / 100, 0, 1);\n        const lp = constrainRange(l / 100, 0, 1);\n        const c = (1 - Math.abs(2 * lp - 1)) * sp;\n        const x = c * (1 - Math.abs(hp / 60 % 2 - 1));\n        const m = lp - c / 2;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) [rp, gp, bp] = [\n            c,\n            x,\n            0\n        ];\n        else if (hp >= 60 && hp < 120) [rp, gp, bp] = [\n            x,\n            c,\n            0\n        ];\n        else if (hp >= 120 && hp < 180) [rp, gp, bp] = [\n            0,\n            c,\n            x\n        ];\n        else if (hp >= 180 && hp < 240) [rp, gp, bp] = [\n            0,\n            x,\n            c\n        ];\n        else if (hp >= 240 && hp < 300) [rp, gp, bp] = [\n            x,\n            0,\n            c\n        ];\n        else [rp, gp, bp] = [\n            c,\n            0,\n            x\n        ];\n        return [\n            (rp + m) * 255,\n            (gp + m) * 255,\n            (bp + m) * 255\n        ];\n    }\n    function rgbToHsvInt(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const d = cmax - cmin;\n        let h;\n        if (d === 0) h = 0;\n        else if (cmax === rp) h = 60 * (((gp - bp) / d % 6 + 6) % 6);\n        else if (cmax === gp) h = 60 * ((bp - rp) / d + 2);\n        else h = 60 * ((rp - gp) / d + 4);\n        const s = cmax === 0 ? 0 : d / cmax;\n        const v = cmax;\n        return [\n            h,\n            s * 100,\n            v * 100\n        ];\n    }\n    function hsvToRgbInt(h, s, v) {\n        const hp = loopRange(h, 360);\n        const sp = constrainRange(s / 100, 0, 1);\n        const vp = constrainRange(v / 100, 0, 1);\n        const c = vp * sp;\n        const x = c * (1 - Math.abs(hp / 60 % 2 - 1));\n        const m = vp - c;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) [rp, gp, bp] = [\n            c,\n            x,\n            0\n        ];\n        else if (hp >= 60 && hp < 120) [rp, gp, bp] = [\n            x,\n            c,\n            0\n        ];\n        else if (hp >= 120 && hp < 180) [rp, gp, bp] = [\n            0,\n            c,\n            x\n        ];\n        else if (hp >= 180 && hp < 240) [rp, gp, bp] = [\n            0,\n            x,\n            c\n        ];\n        else if (hp >= 240 && hp < 300) [rp, gp, bp] = [\n            x,\n            0,\n            c\n        ];\n        else [rp, gp, bp] = [\n            c,\n            0,\n            x\n        ];\n        return [\n            (rp + m) * 255,\n            (gp + m) * 255,\n            (bp + m) * 255\n        ];\n    }\n    function hslToHsvInt(h, s, l) {\n        const sd = l + s * (100 - Math.abs(2 * l - 100)) / 200;\n        return [\n            h,\n            sd !== 0 ? s * (100 - Math.abs(2 * l - 100)) / sd : 0,\n            l + s * (100 - Math.abs(2 * l - 100)) / 200\n        ];\n    }\n    function hsvToHslInt(h, s, v) {\n        const sd = 100 - Math.abs(v * (200 - s) / 100 - 100);\n        return [\n            h,\n            sd !== 0 ? s * v / sd : 0,\n            v * (200 - s) / 200\n        ];\n    }\n    function removeAlphaComponent(comps) {\n        return [\n            comps[0],\n            comps[1],\n            comps[2]\n        ];\n    }\n    function appendAlphaComponent(comps, alpha) {\n        return [\n            comps[0],\n            comps[1],\n            comps[2],\n            alpha\n        ];\n    }\n    const MODE_CONVERTER_MAP = {\n        hsl: {\n            hsl: (h, s, l)=>[\n                    h,\n                    s,\n                    l\n                ],\n            hsv: hslToHsvInt,\n            rgb: hslToRgbInt\n        },\n        hsv: {\n            hsl: hsvToHslInt,\n            hsv: (h, s, v)=>[\n                    h,\n                    s,\n                    v\n                ],\n            rgb: hsvToRgbInt\n        },\n        rgb: {\n            hsl: rgbToHslInt,\n            hsv: rgbToHsvInt,\n            rgb: (r, g, b)=>[\n                    r,\n                    g,\n                    b\n                ]\n        }\n    };\n    function getColorMaxComponents(mode, type) {\n        return [\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 360,\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 100\n        ];\n    }\n    function loopHueRange(hue, max) {\n        return hue === max ? max : loopRange(hue, max);\n    }\n    function constrainColorComponents(components, mode, type) {\n        var _a;\n        const ms = getColorMaxComponents(mode, type);\n        return [\n            mode === 'rgb' ? constrainRange(components[0], 0, ms[0]) : loopHueRange(components[0], ms[0]),\n            constrainRange(components[1], 0, ms[1]),\n            constrainRange(components[2], 0, ms[2]),\n            constrainRange((_a = components[3]) !== null && _a !== void 0 ? _a : 1, 0, 1)\n        ];\n    }\n    function convertColorType(comps, mode, from, to) {\n        const fms = getColorMaxComponents(mode, from);\n        const tms = getColorMaxComponents(mode, to);\n        return comps.map((c, index)=>c / fms[index] * tms[index]);\n    }\n    function convertColor(components, from, to) {\n        const intComps = convertColorType(components, from.mode, from.type, 'int');\n        const result = MODE_CONVERTER_MAP[from.mode][to.mode](...intComps);\n        return convertColorType(result, to.mode, 'int', to.type);\n    }\n    function isRgbColorComponent(obj, key) {\n        if (typeof obj !== 'object' || isEmpty(obj)) return false;\n        return key in obj && typeof obj[key] === 'number';\n    }\n    class Color {\n        static black(type = 'int') {\n            return new Color([\n                0,\n                0,\n                0\n            ], 'rgb', type);\n        }\n        static fromObject(obj, type = 'int') {\n            const comps = 'a' in obj ? [\n                obj.r,\n                obj.g,\n                obj.b,\n                obj.a\n            ] : [\n                obj.r,\n                obj.g,\n                obj.b\n            ];\n            return new Color(comps, 'rgb', type);\n        }\n        static toRgbaObject(color, type = 'int') {\n            return color.toRgbaObject(type);\n        }\n        static isRgbColorObject(obj) {\n            return isRgbColorComponent(obj, 'r') && isRgbColorComponent(obj, 'g') && isRgbColorComponent(obj, 'b');\n        }\n        static isRgbaColorObject(obj) {\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n        }\n        static isColorObject(obj) {\n            return this.isRgbColorObject(obj);\n        }\n        static equals(v1, v2) {\n            if (v1.mode !== v2.mode) return false;\n            const comps1 = v1.comps_;\n            const comps2 = v2.comps_;\n            for(let i = 0; i < comps1.length; i++){\n                if (comps1[i] !== comps2[i]) return false;\n            }\n            return true;\n        }\n        constructor(comps, mode, type = 'int'){\n            this.mode = mode;\n            this.type = type;\n            this.comps_ = constrainColorComponents(comps, mode, type);\n        }\n        getComponents(opt_mode, type = 'int') {\n            return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), {\n                mode: this.mode,\n                type: this.type\n            }, {\n                mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode,\n                type: type\n            }), this.comps_[3]);\n        }\n        toRgbaObject(type = 'int') {\n            const rgbComps = this.getComponents('rgb', type);\n            return {\n                r: rgbComps[0],\n                g: rgbComps[1],\n                b: rgbComps[2],\n                a: rgbComps[3]\n            };\n        }\n    }\n    const className$b = ClassName('colp');\n    class ColorPickerView {\n        constructor(doc, config){\n            this.alphaViews_ = null;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            config.viewProps.bindClassModifiers(this.element);\n            const hsvElem = doc.createElement('div');\n            hsvElem.classList.add(className$b('hsv'));\n            const svElem = doc.createElement('div');\n            svElem.classList.add(className$b('sv'));\n            this.svPaletteView_ = config.svPaletteView;\n            svElem.appendChild(this.svPaletteView_.element);\n            hsvElem.appendChild(svElem);\n            const hElem = doc.createElement('div');\n            hElem.classList.add(className$b('h'));\n            this.hPaletteView_ = config.hPaletteView;\n            hElem.appendChild(this.hPaletteView_.element);\n            hsvElem.appendChild(hElem);\n            this.element.appendChild(hsvElem);\n            const rgbElem = doc.createElement('div');\n            rgbElem.classList.add(className$b('rgb'));\n            this.textView_ = config.textView;\n            rgbElem.appendChild(this.textView_.element);\n            this.element.appendChild(rgbElem);\n            if (config.alphaViews) {\n                this.alphaViews_ = {\n                    palette: config.alphaViews.palette,\n                    text: config.alphaViews.text\n                };\n                const aElem = doc.createElement('div');\n                aElem.classList.add(className$b('a'));\n                const apElem = doc.createElement('div');\n                apElem.classList.add(className$b('ap'));\n                apElem.appendChild(this.alphaViews_.palette.element);\n                aElem.appendChild(apElem);\n                const atElem = doc.createElement('div');\n                atElem.classList.add(className$b('at'));\n                atElem.appendChild(this.alphaViews_.text.element);\n                aElem.appendChild(atElem);\n                this.element.appendChild(aElem);\n            }\n        }\n        get allFocusableElements() {\n            const elems = [\n                this.svPaletteView_.element,\n                this.hPaletteView_.element,\n                this.textView_.modeSelectElement,\n                ...this.textView_.textViews.map((v)=>v.inputElement)\n            ];\n            if (this.alphaViews_) elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n            return elems;\n        }\n    }\n    function parseColorType(value) {\n        return value === 'int' ? 'int' : value === 'float' ? 'float' : undefined;\n    }\n    function parseColorInputParams(params) {\n        const p = ParamsParsers;\n        return parseParams(params, {\n            alpha: p.optional.boolean,\n            color: p.optional.object({\n                alpha: p.optional.boolean,\n                type: p.optional.custom(parseColorType)\n            }),\n            expanded: p.optional.boolean,\n            picker: p.optional.custom(parsePickerLayout)\n        });\n    }\n    function getBaseStepForColor(forAlpha) {\n        return forAlpha ? 0.1 : 1;\n    }\n    function extractColorType(params) {\n        var _a;\n        return (_a = params.color) === null || _a === void 0 ? void 0 : _a.type;\n    }\n    function equalsStringColorFormat(f1, f2) {\n        return f1.alpha === f2.alpha && f1.mode === f2.mode && f1.notation === f2.notation && f1.type === f2.type;\n    }\n    function parseCssNumberOrPercentage(text, maxValue) {\n        const m = text.match(/^(.+)%$/);\n        if (!m) return Math.min(parseFloat(text), maxValue);\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\n    }\n    const ANGLE_TO_DEG_MAP = {\n        deg: (angle)=>angle,\n        grad: (angle)=>angle * 360 / 400,\n        rad: (angle)=>angle * 360 / (2 * Math.PI),\n        turn: (angle)=>angle * 360\n    };\n    function parseCssNumberOrAngle(text) {\n        const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n        if (!m) return parseFloat(text);\n        const angle = parseFloat(m[1]);\n        const unit = m[2];\n        return ANGLE_TO_DEG_MAP[unit](angle);\n    }\n    function parseFunctionalRgbColorComponents(text) {\n        const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) return null;\n        const comps = [\n            parseCssNumberOrPercentage(m[1], 255),\n            parseCssNumberOrPercentage(m[2], 255),\n            parseCssNumberOrPercentage(m[3], 255)\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) return null;\n        return comps;\n    }\n    function createFunctionalRgbColorParser(type) {\n        return (text)=>{\n            const comps = parseFunctionalRgbColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseFunctionalRgbaColorComponents(text) {\n        const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) return null;\n        const comps = [\n            parseCssNumberOrPercentage(m[1], 255),\n            parseCssNumberOrPercentage(m[2], 255),\n            parseCssNumberOrPercentage(m[3], 255),\n            parseCssNumberOrPercentage(m[4], 1)\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) || isNaN(comps[3])) return null;\n        return comps;\n    }\n    function createFunctionalRgbaColorParser(type) {\n        return (text)=>{\n            const comps = parseFunctionalRgbaColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseHslColorComponents(text) {\n        const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) return null;\n        const comps = [\n            parseCssNumberOrAngle(m[1]),\n            parseCssNumberOrPercentage(m[2], 100),\n            parseCssNumberOrPercentage(m[3], 100)\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) return null;\n        return comps;\n    }\n    function createHslColorParser(type) {\n        return (text)=>{\n            const comps = parseHslColorComponents(text);\n            return comps ? new Color(comps, 'hsl', type) : null;\n        };\n    }\n    function parseHslaColorComponents(text) {\n        const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) return null;\n        const comps = [\n            parseCssNumberOrAngle(m[1]),\n            parseCssNumberOrPercentage(m[2], 100),\n            parseCssNumberOrPercentage(m[3], 100),\n            parseCssNumberOrPercentage(m[4], 1)\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) || isNaN(comps[3])) return null;\n        return comps;\n    }\n    function createHslaColorParser(type) {\n        return (text)=>{\n            const comps = parseHslaColorComponents(text);\n            return comps ? new Color(comps, 'hsl', type) : null;\n        };\n    }\n    function parseHexRgbColorComponents(text) {\n        const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n        if (mRgb) return [\n            parseInt(mRgb[1] + mRgb[1], 16),\n            parseInt(mRgb[2] + mRgb[2], 16),\n            parseInt(mRgb[3] + mRgb[3], 16)\n        ];\n        const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n        if (mRrggbb) return [\n            parseInt(mRrggbb[1], 16),\n            parseInt(mRrggbb[2], 16),\n            parseInt(mRrggbb[3], 16)\n        ];\n        return null;\n    }\n    function parseHexRgbColor(text) {\n        const comps = parseHexRgbColorComponents(text);\n        return comps ? new Color(comps, 'rgb', 'int') : null;\n    }\n    function parseHexRgbaColorComponents(text) {\n        const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n        if (mRgb) return [\n            parseInt(mRgb[1] + mRgb[1], 16),\n            parseInt(mRgb[2] + mRgb[2], 16),\n            parseInt(mRgb[3] + mRgb[3], 16),\n            mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1)\n        ];\n        const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n        if (mRrggbb) return [\n            parseInt(mRrggbb[1], 16),\n            parseInt(mRrggbb[2], 16),\n            parseInt(mRrggbb[3], 16),\n            mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1)\n        ];\n        return null;\n    }\n    function parseHexRgbaColor(text) {\n        const comps = parseHexRgbaColorComponents(text);\n        return comps ? new Color(comps, 'rgb', 'int') : null;\n    }\n    function parseObjectRgbColorComponents(text) {\n        const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n        if (!m) return null;\n        const comps = [\n            parseFloat(m[1]),\n            parseFloat(m[2]),\n            parseFloat(m[3])\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) return null;\n        return comps;\n    }\n    function createObjectRgbColorParser(type) {\n        return (text)=>{\n            const comps = parseObjectRgbColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseObjectRgbaColorComponents(text) {\n        const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*a\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n        if (!m) return null;\n        const comps = [\n            parseFloat(m[1]),\n            parseFloat(m[2]),\n            parseFloat(m[3]),\n            parseFloat(m[4])\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) || isNaN(comps[3])) return null;\n        return comps;\n    }\n    function createObjectRgbaColorParser(type) {\n        return (text)=>{\n            const comps = parseObjectRgbaColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    const PARSER_AND_RESULT = [\n        {\n            parser: parseHexRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'hex'\n            }\n        },\n        {\n            parser: parseHexRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'hex'\n            }\n        },\n        {\n            parser: parseFunctionalRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'func'\n            }\n        },\n        {\n            parser: parseFunctionalRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'func'\n            }\n        },\n        {\n            parser: parseHslColorComponents,\n            result: {\n                alpha: false,\n                mode: 'hsl',\n                notation: 'func'\n            }\n        },\n        {\n            parser: parseHslaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'hsl',\n                notation: 'func'\n            }\n        },\n        {\n            parser: parseObjectRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'object'\n            }\n        },\n        {\n            parser: parseObjectRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'object'\n            }\n        }\n    ];\n    function detectStringColor(text) {\n        return PARSER_AND_RESULT.reduce((prev, { parser: parser, result: detection })=>{\n            if (prev) return prev;\n            return parser(text) ? detection : null;\n        }, null);\n    }\n    function detectStringColorFormat(text, type = 'int') {\n        const r = detectStringColor(text);\n        if (!r) return null;\n        if (r.notation === 'hex' && type !== 'float') return Object.assign(Object.assign({}, r), {\n            type: 'int'\n        });\n        if (r.notation === 'func') return Object.assign(Object.assign({}, r), {\n            type: type\n        });\n        return null;\n    }\n    const TYPE_TO_PARSERS = {\n        int: [\n            parseHexRgbColor,\n            parseHexRgbaColor,\n            createFunctionalRgbColorParser('int'),\n            createFunctionalRgbaColorParser('int'),\n            createHslColorParser('int'),\n            createHslaColorParser('int'),\n            createObjectRgbColorParser('int'),\n            createObjectRgbaColorParser('int')\n        ],\n        float: [\n            createFunctionalRgbColorParser('float'),\n            createFunctionalRgbaColorParser('float'),\n            createHslColorParser('float'),\n            createHslaColorParser('float'),\n            createObjectRgbColorParser('float'),\n            createObjectRgbaColorParser('float')\n        ]\n    };\n    function createColorStringBindingReader(type) {\n        const parsers = TYPE_TO_PARSERS[type];\n        return (value)=>{\n            if (typeof value !== 'string') return Color.black(type);\n            const result = parsers.reduce((prev, parser)=>{\n                if (prev) return prev;\n                return parser(value);\n            }, null);\n            return result !== null && result !== void 0 ? result : Color.black(type);\n        };\n    }\n    function createColorStringParser(type) {\n        const parsers = TYPE_TO_PARSERS[type];\n        return (value)=>{\n            return parsers.reduce((prev, parser)=>{\n                if (prev) return prev;\n                return parser(value);\n            }, null);\n        };\n    }\n    function zerofill(comp) {\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? `0${hex}` : hex;\n    }\n    function colorToHexRgbString(value, prefix = '#') {\n        const hexes = removeAlphaComponent(value.getComponents('rgb')).map(zerofill).join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToHexRgbaString(value, prefix = '#') {\n        const rgbaComps = value.getComponents('rgb');\n        const hexes = [\n            rgbaComps[0],\n            rgbaComps[1],\n            rgbaComps[2],\n            rgbaComps[3] * 255\n        ].map(zerofill).join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToFunctionalRgbString(value, opt_type) {\n        const formatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\n        const comps = removeAlphaComponent(value.getComponents('rgb', opt_type)).map((comp)=>formatter(comp));\n        return `rgb(${comps.join(', ')})`;\n    }\n    function createFunctionalRgbColorFormatter(type) {\n        return (value)=>{\n            return colorToFunctionalRgbString(value, type);\n        };\n    }\n    function colorToFunctionalRgbaString(value, opt_type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\n        const comps = value.getComponents('rgb', opt_type).map((comp, index)=>{\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return `rgba(${comps.join(', ')})`;\n    }\n    function createFunctionalRgbaColorFormatter(type) {\n        return (value)=>{\n            return colorToFunctionalRgbaString(value, type);\n        };\n    }\n    function colorToFunctionalHslString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage\n        ];\n        const comps = removeAlphaComponent(value.getComponents('hsl')).map((comp, index)=>formatters[index](comp));\n        return `hsl(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslaString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2)\n        ];\n        const comps = value.getComponents('hsl').map((comp, index)=>formatters[index](comp));\n        return `hsla(${comps.join(', ')})`;\n    }\n    function colorToObjectRgbString(value, type) {\n        const formatter = createNumberFormatter(type === 'float' ? 2 : 0);\n        const names = [\n            'r',\n            'g',\n            'b'\n        ];\n        const comps = removeAlphaComponent(value.getComponents('rgb', type)).map((comp, index)=>`${names[index]}: ${formatter(comp)}`);\n        return `{${comps.join(', ')}}`;\n    }\n    function createObjectRgbColorFormatter(type) {\n        return (value)=>colorToObjectRgbString(value, type);\n    }\n    function colorToObjectRgbaString(value, type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(type === 'float' ? 2 : 0);\n        const names = [\n            'r',\n            'g',\n            'b',\n            'a'\n        ];\n        const comps = value.getComponents('rgb', type).map((comp, index)=>{\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return `${names[index]}: ${formatter(comp)}`;\n        });\n        return `{${comps.join(', ')}}`;\n    }\n    function createObjectRgbaColorFormatter(type) {\n        return (value)=>colorToObjectRgbaString(value, type);\n    }\n    const FORMAT_AND_STRINGIFIERS = [\n        {\n            format: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'hex',\n                type: 'int'\n            },\n            stringifier: colorToHexRgbString\n        },\n        {\n            format: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'hex',\n                type: 'int'\n            },\n            stringifier: colorToHexRgbaString\n        },\n        {\n            format: {\n                alpha: false,\n                mode: 'hsl',\n                notation: 'func',\n                type: 'int'\n            },\n            stringifier: colorToFunctionalHslString\n        },\n        {\n            format: {\n                alpha: true,\n                mode: 'hsl',\n                notation: 'func',\n                type: 'int'\n            },\n            stringifier: colorToFunctionalHslaString\n        },\n        ...[\n            'int',\n            'float'\n        ].reduce((prev, type)=>{\n            return [\n                ...prev,\n                {\n                    format: {\n                        alpha: false,\n                        mode: 'rgb',\n                        notation: 'func',\n                        type: type\n                    },\n                    stringifier: createFunctionalRgbColorFormatter(type)\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: 'rgb',\n                        notation: 'func',\n                        type: type\n                    },\n                    stringifier: createFunctionalRgbaColorFormatter(type)\n                },\n                {\n                    format: {\n                        alpha: false,\n                        mode: 'rgb',\n                        notation: 'object',\n                        type: type\n                    },\n                    stringifier: createObjectRgbColorFormatter(type)\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: 'rgb',\n                        notation: 'object',\n                        type: type\n                    },\n                    stringifier: createObjectRgbaColorFormatter(type)\n                }\n            ];\n        }, [])\n    ];\n    function findColorStringifier(format) {\n        return FORMAT_AND_STRINGIFIERS.reduce((prev, fas)=>{\n            if (prev) return prev;\n            return equalsStringColorFormat(fas.format, format) ? fas.stringifier : null;\n        }, null);\n    }\n    const className$a = ClassName('apl');\n    class APaletteView {\n        constructor(doc, config){\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$a('b'));\n            this.element.appendChild(barElem);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$a('c'));\n            barElem.appendChild(colorElem);\n            this.colorElem_ = colorElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$a('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$a('p'));\n            this.markerElem_.appendChild(previewElem);\n            this.previewElem_ = previewElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const rgbaComps = c.getComponents('rgb');\n            const leftColor = new Color([\n                rgbaComps[0],\n                rgbaComps[1],\n                rgbaComps[2],\n                0\n            ], 'rgb');\n            const rightColor = new Color([\n                rgbaComps[0],\n                rgbaComps[1],\n                rgbaComps[2],\n                255\n            ], 'rgb');\n            const gradientComps = [\n                'to right',\n                colorToFunctionalRgbaString(leftColor),\n                colorToFunctionalRgbaString(rightColor)\n            ];\n            this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n            const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n    class APaletteController {\n        constructor(doc, config){\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new APaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) return;\n            const alpha = d.point.x / d.bounds.width;\n            const c = this.value.rawValue;\n            const [h, s, v] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([\n                h,\n                s,\n                v,\n                alpha\n            ], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) return;\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([\n                h,\n                s,\n                v,\n                a + step\n            ], 'hsv'), {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) return;\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true\n            });\n        }\n    }\n    const className$9 = ClassName('coltxt');\n    function createModeSelectElement(doc) {\n        const selectElem = doc.createElement('select');\n        const items = [\n            {\n                text: 'RGB',\n                value: 'rgb'\n            },\n            {\n                text: 'HSL',\n                value: 'hsl'\n            },\n            {\n                text: 'HSV',\n                value: 'hsv'\n            }\n        ];\n        selectElem.appendChild(items.reduce((frag, item)=>{\n            const optElem = doc.createElement('option');\n            optElem.textContent = item.text;\n            optElem.value = item.value;\n            frag.appendChild(optElem);\n            return frag;\n        }, doc.createDocumentFragment()));\n        return selectElem;\n    }\n    class ColorTextView {\n        constructor(doc, config){\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            config.viewProps.bindClassModifiers(this.element);\n            const modeElem = doc.createElement('div');\n            modeElem.classList.add(className$9('m'));\n            this.modeElem_ = createModeSelectElement(doc);\n            this.modeElem_.classList.add(className$9('ms'));\n            modeElem.appendChild(this.modeSelectElement);\n            config.viewProps.bindDisabled(this.modeElem_);\n            const modeMarkerElem = doc.createElement('div');\n            modeMarkerElem.classList.add(className$9('mm'));\n            modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            modeElem.appendChild(modeMarkerElem);\n            this.element.appendChild(modeElem);\n            const textsElem = doc.createElement('div');\n            textsElem.classList.add(className$9('w'));\n            this.element.appendChild(textsElem);\n            this.textsElem_ = textsElem;\n            this.textViews_ = config.textViews;\n            this.applyTextViews_();\n            bindValue(config.colorMode, (mode)=>{\n                this.modeElem_.value = mode;\n            });\n        }\n        get modeSelectElement() {\n            return this.modeElem_;\n        }\n        get textViews() {\n            return this.textViews_;\n        }\n        set textViews(textViews) {\n            this.textViews_ = textViews;\n            this.applyTextViews_();\n        }\n        applyTextViews_() {\n            removeChildElements(this.textsElem_);\n            const doc = this.element.ownerDocument;\n            this.textViews_.forEach((v)=>{\n                const compElem = doc.createElement('div');\n                compElem.classList.add(className$9('c'));\n                compElem.appendChild(v.element);\n                this.textsElem_.appendChild(compElem);\n            });\n        }\n    }\n    function createFormatter$2(type) {\n        return createNumberFormatter(type === 'float' ? 2 : 0);\n    }\n    function createConstraint$5(mode, type, index) {\n        const max = getColorMaxComponents(mode, type)[index];\n        return new DefiniteRangeConstraint({\n            min: 0,\n            max: max\n        });\n    }\n    function createComponentController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === 2 ? 'lst' : 'mid',\n            baseStep: getBaseStepForColor(false),\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                draggingScale: config.colorType === 'float' ? 0.01 : 1,\n                formatter: createFormatter$2(config.colorType)\n            }),\n            value: createValue(0, {\n                constraint: createConstraint$5(config.colorMode, config.colorType, index)\n            }),\n            viewProps: config.viewProps\n        });\n    }\n    class ColorTextController {\n        constructor(doc, config){\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n            this.colorType_ = config.colorType;\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.colorMode = createValue(this.value.rawValue.mode);\n            this.ccs_ = this.createComponentControllers_(doc);\n            this.view = new ColorTextView(doc, {\n                colorMode: this.colorMode,\n                textViews: [\n                    this.ccs_[0].view,\n                    this.ccs_[1].view,\n                    this.ccs_[2].view\n                ],\n                viewProps: this.viewProps\n            });\n            this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n        }\n        createComponentControllers_(doc) {\n            const cc = {\n                colorMode: this.colorMode.rawValue,\n                colorType: this.colorType_,\n                parser: this.parser_,\n                viewProps: this.viewProps\n            };\n            const ccs = [\n                createComponentController(doc, cc, 0),\n                createComponentController(doc, cc, 1),\n                createComponentController(doc, cc, 2)\n            ];\n            ccs.forEach((cs, index)=>{\n                connectValues({\n                    primary: this.value,\n                    secondary: cs.value,\n                    forward: (p)=>{\n                        return p.rawValue.getComponents(this.colorMode.rawValue, this.colorType_)[index];\n                    },\n                    backward: (p, s)=>{\n                        const pickedMode = this.colorMode.rawValue;\n                        const comps = p.rawValue.getComponents(pickedMode, this.colorType_);\n                        comps[index] = s.rawValue;\n                        return new Color(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode, this.colorType_);\n                    }\n                });\n            });\n            return ccs;\n        }\n        onModeSelectChange_(ev) {\n            const selectElem = ev.currentTarget;\n            this.colorMode.rawValue = selectElem.value;\n            this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n            this.view.textViews = [\n                this.ccs_[0].view,\n                this.ccs_[1].view,\n                this.ccs_[2].view\n            ];\n        }\n    }\n    const className$8 = ClassName('hpl');\n    class HPaletteView {\n        constructor(doc, config){\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$8('c'));\n            this.element.appendChild(colorElem);\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$8('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const [h] = c.getComponents('hsv');\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([\n                h,\n                100,\n                100\n            ], 'hsv'));\n            const left = mapRange(h, 0, 360, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n    class HPaletteController {\n        constructor(doc, config){\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new HPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) return;\n            const hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 360);\n            const c = this.value.rawValue;\n            const [, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([\n                hue,\n                s,\n                v,\n                a\n            ], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) return;\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([\n                h + step,\n                s,\n                v,\n                a\n            ], 'hsv'), {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) return;\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true\n            });\n        }\n    }\n    const className$7 = ClassName('svp');\n    const CANVAS_RESOL = 64;\n    class SvPaletteView {\n        constructor(doc, config){\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const canvasElem = doc.createElement('canvas');\n            canvasElem.height = CANVAS_RESOL;\n            canvasElem.width = CANVAS_RESOL;\n            canvasElem.classList.add(className$7('c'));\n            this.element.appendChild(canvasElem);\n            this.canvasElement = canvasElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$7('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const ctx = getCanvasContext(this.canvasElement);\n            if (!ctx) return;\n            const c = this.value.rawValue;\n            const hsvComps = c.getComponents('hsv');\n            const width = this.canvasElement.width;\n            const height = this.canvasElement.height;\n            const imgData = ctx.getImageData(0, 0, width, height);\n            const data = imgData.data;\n            for(let iy = 0; iy < height; iy++)for(let ix = 0; ix < width; ix++){\n                const s = mapRange(ix, 0, width, 0, 100);\n                const v = mapRange(iy, 0, height, 100, 0);\n                const rgbComps = hsvToRgbInt(hsvComps[0], s, v);\n                const i = (iy * width + ix) * 4;\n                data[i] = rgbComps[0];\n                data[i + 1] = rgbComps[1];\n                data[i + 2] = rgbComps[2];\n                data[i + 3] = 255;\n            }\n            ctx.putImageData(imgData, 0, 0);\n            const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n            const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n            this.markerElem_.style.top = `${top}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n    class SvPaletteController {\n        constructor(doc, config){\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SvPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) return;\n            const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n            const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n            const [h, , , a] = this.value.rawValue.getComponents('hsv');\n            this.value.setRawValue(new Color([\n                h,\n                saturation,\n                value,\n                a\n            ], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) ev.preventDefault();\n            const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) return;\n            this.value.setRawValue(new Color([\n                h,\n                s + ds,\n                v + dv,\n                a\n            ], 'hsv'), {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onKeyUp_(ev) {\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) return;\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true\n            });\n        }\n    }\n    class ColorPickerController {\n        constructor(doc, config){\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.hPaletteC_ = new HPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.svPaletteC_ = new SvPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.alphaIcs_ = config.supportsAlpha ? {\n                palette: new APaletteController(doc, {\n                    value: this.value,\n                    viewProps: this.viewProps\n                }),\n                text: new NumberTextController(doc, {\n                    parser: parseNumber,\n                    baseStep: 0.1,\n                    props: ValueMap.fromObject({\n                        draggingScale: 0.01,\n                        formatter: createNumberFormatter(2)\n                    }),\n                    value: createValue(0, {\n                        constraint: new DefiniteRangeConstraint({\n                            min: 0,\n                            max: 1\n                        })\n                    }),\n                    viewProps: this.viewProps\n                })\n            } : null;\n            if (this.alphaIcs_) connectValues({\n                primary: this.value,\n                secondary: this.alphaIcs_.text.value,\n                forward: (p)=>{\n                    return p.rawValue.getComponents()[3];\n                },\n                backward: (p, s)=>{\n                    const comps = p.rawValue.getComponents();\n                    comps[3] = s.rawValue;\n                    return new Color(comps, p.rawValue.mode);\n                }\n            });\n            this.textC_ = new ColorTextController(doc, {\n                colorType: config.colorType,\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.view = new ColorPickerView(doc, {\n                alphaViews: this.alphaIcs_ ? {\n                    palette: this.alphaIcs_.palette.view,\n                    text: this.alphaIcs_.text.view\n                } : null,\n                hPaletteView: this.hPaletteC_.view,\n                supportsAlpha: config.supportsAlpha,\n                svPaletteView: this.svPaletteC_.view,\n                textView: this.textC_.view,\n                viewProps: this.viewProps\n            });\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n    const className$6 = ClassName('colsw');\n    class ColorSwatchView {\n        constructor(doc, config){\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$6('sw'));\n            this.element.appendChild(swatchElem);\n            this.swatchElem_ = swatchElem;\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$6('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            this.update_();\n        }\n        update_() {\n            const value = this.value.rawValue;\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n    class ColorSwatchController {\n        constructor(doc, config){\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ColorSwatchView(doc, {\n                value: this.value,\n                viewProps: this.viewProps\n            });\n        }\n    }\n    class ColorController {\n        constructor(doc, config){\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.swatchC_ = new ColorSwatchController(doc, {\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            const buttonElem = this.swatchC_.view.buttonElement;\n            buttonElem.addEventListener('blur', this.onButtonBlur_);\n            buttonElem.addEventListener('click', this.onButtonClick_);\n            this.textC_ = new TextController(doc, {\n                parser: config.parser,\n                props: ValueMap.fromObject({\n                    formatter: config.formatter\n                }),\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.view = new ColorView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout\n            });\n            this.view.swatchElement.appendChild(this.swatchC_.view.element);\n            this.view.textElement.appendChild(this.textC_.view.element);\n            this.popC_ = config.pickerLayout === 'popup' ? new PopupController(doc, {\n                viewProps: this.viewProps\n            }) : null;\n            const pickerC = new ColorPickerController(doc, {\n                colorType: config.colorType,\n                supportsAlpha: config.supportsAlpha,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            pickerC.view.allFocusableElements.forEach((elem)=>{\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(pickerC.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p)=>p.rawValue,\n                    backward: (_, s)=>s.rawValue\n                });\n            } else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        get textController() {\n            return this.textC_;\n        }\n        onButtonBlur_(e) {\n            if (!this.popC_) return;\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) this.popC_.shows.rawValue = false;\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) this.pickerC_.view.allFocusableElements[0].focus();\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) return;\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) return;\n            if (nextTarget && nextTarget === this.swatchC_.view.buttonElement && !supportsTouch(elem.ownerDocument)) return;\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') this.popC_.shows.rawValue = false;\n            } else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') this.swatchC_.view.buttonElement.focus();\n            }\n        }\n    }\n    function colorFromObject(value, opt_type) {\n        if (Color.isColorObject(value)) return Color.fromObject(value, opt_type);\n        return Color.black(opt_type);\n    }\n    function colorToRgbNumber(value) {\n        return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp)=>{\n            return result << 8 | Math.floor(comp) & 0xff;\n        }, 0);\n    }\n    function colorToRgbaNumber(value) {\n        return value.getComponents('rgb').reduce((result, comp, index)=>{\n            const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n            return result << 8 | hex;\n        }, 0) >>> 0;\n    }\n    function numberToRgbColor(num) {\n        return new Color([\n            num >> 16 & 0xff,\n            num >> 8 & 0xff,\n            num & 0xff\n        ], 'rgb');\n    }\n    function numberToRgbaColor(num) {\n        return new Color([\n            num >> 24 & 0xff,\n            num >> 16 & 0xff,\n            num >> 8 & 0xff,\n            mapRange(num & 0xff, 0, 255, 0, 1)\n        ], 'rgb');\n    }\n    function colorFromRgbNumber(value) {\n        if (typeof value !== 'number') return Color.black();\n        return numberToRgbColor(value);\n    }\n    function colorFromRgbaNumber(value) {\n        if (typeof value !== 'number') return Color.black();\n        return numberToRgbaColor(value);\n    }\n    function createColorStringWriter(format) {\n        const stringify = findColorStringifier(format);\n        return stringify ? (target, value)=>{\n            writePrimitive(target, stringify(value));\n        } : null;\n    }\n    function createColorNumberWriter(supportsAlpha) {\n        const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n        return (target, value)=>{\n            writePrimitive(target, colorToNumber(value));\n        };\n    }\n    function writeRgbaColorObject(target, value, opt_type) {\n        const obj = value.toRgbaObject(opt_type);\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n        target.writeProperty('a', obj.a);\n    }\n    function writeRgbColorObject(target, value, opt_type) {\n        const obj = value.toRgbaObject(opt_type);\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n    }\n    function createColorObjectWriter(supportsAlpha, opt_type) {\n        return (target, inValue)=>{\n            if (supportsAlpha) writeRgbaColorObject(target, inValue, opt_type);\n            else writeRgbColorObject(target, inValue, opt_type);\n        };\n    }\n    function shouldSupportAlpha$1(inputParams) {\n        var _a;\n        if ((inputParams === null || inputParams === void 0 ? void 0 : inputParams.alpha) || ((_a = inputParams === null || inputParams === void 0 ? void 0 : inputParams.color) === null || _a === void 0 ? void 0 : _a.alpha)) return true;\n        return false;\n    }\n    function createFormatter$1(supportsAlpha) {\n        return supportsAlpha ? (v)=>colorToHexRgbaString(v, '0x') : (v)=>colorToHexRgbString(v, '0x');\n    }\n    function isForColor(params) {\n        if ('color' in params) return true;\n        if ('view' in params && params.view === 'color') return true;\n        return false;\n    }\n    const NumberColorInputPlugin = {\n        id: 'input-color-number',\n        type: 'input',\n        accept: (value, params)=>{\n            if (typeof value !== 'number') return null;\n            if (!isForColor(params)) return null;\n            const result = parseColorInputParams(params);\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (args)=>{\n                return shouldSupportAlpha$1(args.params) ? colorFromRgbaNumber : colorFromRgbNumber;\n            },\n            equals: Color.equals,\n            writer: (args)=>{\n                return createColorNumberWriter(shouldSupportAlpha$1(args.params));\n            }\n        },\n        controller: (args)=>{\n            const supportsAlpha = shouldSupportAlpha$1(args.params);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                colorType: 'int',\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createFormatter$1(supportsAlpha),\n                parser: createColorStringParser('int'),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    function shouldSupportAlpha(initialValue) {\n        return Color.isRgbaColorObject(initialValue);\n    }\n    function createColorObjectReader(opt_type) {\n        return (value)=>{\n            return colorFromObject(value, opt_type);\n        };\n    }\n    function createColorObjectFormatter(supportsAlpha, type) {\n        return (value)=>{\n            if (supportsAlpha) return colorToObjectRgbaString(value, type);\n            return colorToObjectRgbString(value, type);\n        };\n    }\n    const ObjectColorInputPlugin = {\n        id: 'input-color-object',\n        type: 'input',\n        accept: (value, params)=>{\n            if (!Color.isColorObject(value)) return null;\n            const result = parseColorInputParams(params);\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (args)=>createColorObjectReader(extractColorType(args.params)),\n            equals: Color.equals,\n            writer: (args)=>createColorObjectWriter(shouldSupportAlpha(args.initialValue), extractColorType(args.params))\n        },\n        controller: (args)=>{\n            var _a;\n            const supportsAlpha = Color.isRgbaColorObject(args.initialValue);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            const type = (_a = extractColorType(args.params)) !== null && _a !== void 0 ? _a : 'int';\n            return new ColorController(args.document, {\n                colorType: type,\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createColorObjectFormatter(supportsAlpha, type),\n                parser: createColorStringParser(type),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    const StringColorInputPlugin = {\n        id: 'input-color-string',\n        type: 'input',\n        accept: (value, params)=>{\n            if (typeof value !== 'string') return null;\n            if ('view' in params && params.view === 'text') return null;\n            const format = detectStringColorFormat(value, extractColorType(params));\n            if (!format) return null;\n            const stringifier = findColorStringifier(format);\n            if (!stringifier) return null;\n            const result = parseColorInputParams(params);\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (args)=>{\n                var _a;\n                return createColorStringBindingReader((_a = extractColorType(args.params)) !== null && _a !== void 0 ? _a : 'int');\n            },\n            equals: Color.equals,\n            writer: (args)=>{\n                const format = detectStringColorFormat(args.initialValue, extractColorType(args.params));\n                if (!format) throw TpError.shouldNeverHappen();\n                const writer = createColorStringWriter(format);\n                if (!writer) throw TpError.notBindable();\n                return writer;\n            }\n        },\n        controller: (args)=>{\n            const format = detectStringColorFormat(args.initialValue, extractColorType(args.params));\n            if (!format) throw TpError.shouldNeverHappen();\n            const stringifier = findColorStringifier(format);\n            if (!stringifier) throw TpError.shouldNeverHappen();\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                colorType: format.type,\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: stringifier,\n                parser: createColorStringParser(format.type),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: format.alpha,\n                value: args.value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    class PointNdConstraint {\n        constructor(config){\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_.toComponents(value).map((comp, index)=>{\n                var _a, _b;\n                return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp;\n            });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n    const className$5 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config){\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            this.textViews.forEach((v)=>{\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$5('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint\n            }),\n            viewProps: config.viewProps\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config){\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index)=>createAxisController(doc, config, index));\n            this.acs_.forEach((c, index)=>{\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p)=>{\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s)=>{\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    }\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac)=>ac.view)\n            });\n        }\n    }\n    function createStepConstraint(params, initialValue) {\n        if ('step' in params && !isEmpty(params.step)) return new StepConstraint(params.step, initialValue);\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (!isEmpty(params.max) && !isEmpty(params.min)) return new DefiniteRangeConstraint({\n            max: params.max,\n            min: params.min\n        });\n        if (!isEmpty(params.max) || !isEmpty(params.min)) return new RangeConstraint({\n            max: params.max,\n            min: params.min\n        });\n        return null;\n    }\n    function findNumberRange(c) {\n        const drc = findConstraint(c, DefiniteRangeConstraint);\n        if (drc) return [\n            drc.values.get('min'),\n            drc.values.get('max')\n        ];\n        const rc = findConstraint(c, RangeConstraint);\n        if (rc) return [\n            rc.minValue,\n            rc.maxValue\n        ];\n        return [\n            undefined,\n            undefined\n        ];\n    }\n    function createConstraint$4(params, initialValue) {\n        const constraints = [];\n        const sc = createStepConstraint(params, initialValue);\n        if (sc) constraints.push(sc);\n        const rc = createRangeConstraint(params);\n        if (rc) constraints.push(rc);\n        const lc = createListConstraint(params.options);\n        if (lc) constraints.push(lc);\n        return new CompositeConstraint(constraints);\n    }\n    const NumberInputPlugin = {\n        id: 'input-number',\n        type: 'input',\n        accept: (value, params)=>{\n            if (typeof value !== 'number') return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                options: p.optional.custom(parseListOptions),\n                step: p.optional.number\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (_args)=>numberFromUnknown,\n            constraint: (args)=>createConstraint$4(args.params, args.initialValue),\n            writer: (_args)=>writePrimitive\n        },\n        controller: (args)=>{\n            var _a;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) return new ListController(args.document, {\n                props: new ValueMap({\n                    options: lc.values.value('options')\n                }),\n                value: value,\n                viewProps: args.viewProps\n            });\n            const formatter = (_a = 'format' in args.params ? args.params.format : undefined) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(c, value.rawValue));\n            const drc = c && findConstraint(c, DefiniteRangeConstraint);\n            if (drc) return new SliderTextController(args.document, {\n                baseStep: getBaseStep(c),\n                parser: parseNumber,\n                sliderProps: new ValueMap({\n                    maxValue: drc.values.value('max'),\n                    minValue: drc.values.value('min')\n                }),\n                textProps: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                    formatter: formatter\n                }),\n                value: value,\n                viewProps: args.viewProps\n            });\n            return new NumberTextController(args.document, {\n                baseStep: getBaseStep(c),\n                parser: parseNumber,\n                props: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                    formatter: formatter\n                }),\n                value: value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    class Point2d {\n        constructor(x = 0, y = 0){\n            this.x = x;\n            this.y = y;\n        }\n        getComponents() {\n            return [\n                this.x,\n                this.y\n            ];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) return false;\n            const x = obj.x;\n            const y = obj.y;\n            if (typeof x !== 'number' || typeof y !== 'number') return false;\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y\n            };\n        }\n    }\n    const Point2dAssembly = {\n        toComponents: (p)=>p.getComponents(),\n        fromComponents: (comps)=>new Point2d(...comps)\n    };\n    const className$4 = ClassName('p2d');\n    class Point2dView {\n        constructor(doc, config){\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.expanded, valueToClassName(this.element, className$4(undefined, 'expanded')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$4('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$4('b'));\n            buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n            config.viewProps.bindDisabled(buttonElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$4('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$4('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            } else this.pickerElement = null;\n        }\n    }\n    const className$3 = ClassName('p2dp');\n    class Point2dPickerView {\n        constructor(doc, config){\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.invertsY_ = config.invertsY;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            if (config.layout === 'popup') this.element.classList.add(className$3(undefined, 'p'));\n            config.viewProps.bindClassModifiers(this.element);\n            const padElem = doc.createElement('div');\n            padElem.classList.add(className$3('p'));\n            config.viewProps.bindTabIndex(padElem);\n            this.element.appendChild(padElem);\n            this.padElement = padElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$3('g'));\n            this.padElement.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n            xAxisElem.classList.add(className$3('ax'));\n            xAxisElem.setAttributeNS(null, 'x1', '0');\n            xAxisElem.setAttributeNS(null, 'y1', '50%');\n            xAxisElem.setAttributeNS(null, 'x2', '100%');\n            xAxisElem.setAttributeNS(null, 'y2', '50%');\n            this.svgElem_.appendChild(xAxisElem);\n            const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n            yAxisElem.classList.add(className$3('ax'));\n            yAxisElem.setAttributeNS(null, 'x1', '50%');\n            yAxisElem.setAttributeNS(null, 'y1', '0');\n            yAxisElem.setAttributeNS(null, 'x2', '50%');\n            yAxisElem.setAttributeNS(null, 'y2', '100%');\n            this.svgElem_.appendChild(yAxisElem);\n            const lineElem = doc.createElementNS(SVG_NS, 'line');\n            lineElem.classList.add(className$3('l'));\n            lineElem.setAttributeNS(null, 'x1', '50%');\n            lineElem.setAttributeNS(null, 'y1', '50%');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$3('m'));\n            this.padElement.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        get allFocusableElements() {\n            return [\n                this.padElement\n            ];\n        }\n        update_() {\n            const [x, y] = this.value.rawValue.getComponents();\n            const max = this.maxValue_;\n            const px = mapRange(x, -max, +max, 0, 100);\n            const py = mapRange(y, -max, +max, 0, 100);\n            const ipy = this.invertsY_ ? 100 - py : py;\n            this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n            this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n            this.markerElem_.style.left = `${px}%`;\n            this.markerElem_.style.top = `${ipy}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n        onFoldableChange_() {\n            this.update_();\n        }\n    }\n    function computeOffset(ev, baseSteps, invertsY) {\n        return [\n            getStepForKey(baseSteps[0], getHorizontalStepKeys(ev)),\n            getStepForKey(baseSteps[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1)\n        ];\n    }\n    class Point2dPickerController {\n        constructor(doc, config){\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n            this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.baseSteps_ = config.baseSteps;\n            this.maxValue_ = config.maxValue;\n            this.invertsY_ = config.invertsY;\n            this.view = new Point2dPickerView(doc, {\n                invertsY: this.invertsY_,\n                layout: config.layout,\n                maxValue: this.maxValue_,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.ptHandler_ = new PointerHandler(this.view.padElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n            this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) return;\n            const max = this.maxValue_;\n            const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n            const py = mapRange(this.invertsY_ ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n            this.value.setRawValue(new Point2d(px, py), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true\n            });\n        }\n        onPadKeyDown_(ev) {\n            if (isArrowKey(ev.key)) ev.preventDefault();\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) return;\n            this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPadKeyUp_(ev) {\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) return;\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true\n            });\n        }\n    }\n    class Point2dController {\n        constructor(doc, config){\n            var _a, _b;\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.popC_ = config.pickerLayout === 'popup' ? new PopupController(doc, {\n                viewProps: this.viewProps\n            }) : null;\n            const padC = new Point2dPickerController(doc, {\n                baseSteps: [\n                    config.axes[0].baseStep,\n                    config.axes[1].baseStep\n                ],\n                invertsY: config.invertsY,\n                layout: config.pickerLayout,\n                maxValue: config.maxValue,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            padC.view.allFocusableElements.forEach((elem)=>{\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = padC;\n            this.textC_ = new PointNdTextController(doc, {\n                assembly: Point2dAssembly,\n                axes: config.axes,\n                parser: config.parser,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.view = new Point2dView(doc, {\n                expanded: this.foldable_.value('expanded'),\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps\n            });\n            this.view.textElement.appendChild(this.textC_.view.element);\n            (_a = this.view.buttonElement) === null || _a === void 0 || _a.addEventListener('blur', this.onPadButtonBlur_);\n            (_b = this.view.buttonElement) === null || _b === void 0 || _b.addEventListener('click', this.onPadButtonClick_);\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p)=>p.rawValue,\n                    backward: (_, s)=>s.rawValue\n                });\n            } else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onPadButtonBlur_(e) {\n            if (!this.popC_) return;\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) this.popC_.shows.rawValue = false;\n        }\n        onPadButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) this.pickerC_.view.allFocusableElements[0].focus();\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) return;\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) return;\n            if (nextTarget && nextTarget === this.view.buttonElement && !supportsTouch(elem.ownerDocument)) return;\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') this.popC_.shows.rawValue = false;\n            } else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') this.view.buttonElement.focus();\n            }\n        }\n    }\n    class Point3d {\n        constructor(x = 0, y = 0, z = 0){\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        getComponents() {\n            return [\n                this.x,\n                this.y,\n                this.z\n            ];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) return false;\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            if (typeof x !== 'number' || typeof y !== 'number' || typeof z !== 'number') return false;\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z\n            };\n        }\n    }\n    const Point3dAssembly = {\n        toComponents: (p)=>p.getComponents(),\n        fromComponents: (comps)=>new Point3d(...comps)\n    };\n    function point3dFromUnknown(value) {\n        return Point3d.isObject(value) ? new Point3d(value.x, value.y, value.z) : new Point3d();\n    }\n    function writePoint3d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n    }\n    function createConstraint$3(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point3dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\n                createDimensionConstraint('z' in params ? params.z : undefined, initialValue.z)\n            ]\n        });\n    }\n    function createAxis$2(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue))\n            })\n        };\n    }\n    const Point3dInputPlugin = {\n        id: 'input-point3d',\n        type: 'input',\n        accept: (value, params)=>{\n            if (!Point3d.isObject(value)) return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams)\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (_args)=>point3dFromUnknown,\n            constraint: (args)=>createConstraint$3(args.params, args.initialValue),\n            equals: Point3d.equals,\n            writer: (_args)=>writePoint3d\n        },\n        controller: (args)=>{\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) throw TpError.shouldNeverHappen();\n            return new PointNdTextController(args.document, {\n                assembly: Point3dAssembly,\n                axes: [\n                    createAxis$2(value.rawValue.x, c.components[0]),\n                    createAxis$2(value.rawValue.y, c.components[1]),\n                    createAxis$2(value.rawValue.z, c.components[2])\n                ],\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    class Point4d {\n        constructor(x = 0, y = 0, z = 0, w = 0){\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            this.w = w;\n        }\n        getComponents() {\n            return [\n                this.x,\n                this.y,\n                this.z,\n                this.w\n            ];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) return false;\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            const w = obj.w;\n            if (typeof x !== 'number' || typeof y !== 'number' || typeof z !== 'number' || typeof w !== 'number') return false;\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n                w: this.w\n            };\n        }\n    }\n    const Point4dAssembly = {\n        toComponents: (p)=>p.getComponents(),\n        fromComponents: (comps)=>new Point4d(...comps)\n    };\n    function point4dFromUnknown(value) {\n        return Point4d.isObject(value) ? new Point4d(value.x, value.y, value.z, value.w) : new Point4d();\n    }\n    function writePoint4d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n        target.writeProperty('w', value.w);\n    }\n    function createConstraint$2(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point4dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\n                createDimensionConstraint('z' in params ? params.z : undefined, initialValue.z),\n                createDimensionConstraint('w' in params ? params.w : undefined, initialValue.w)\n            ]\n        });\n    }\n    function createAxis$1(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue))\n            })\n        };\n    }\n    const Point4dInputPlugin = {\n        id: 'input-point4d',\n        type: 'input',\n        accept: (value, params)=>{\n            if (!Point4d.isObject(value)) return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n                w: p.optional.custom(parsePointDimensionParams)\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (_args)=>point4dFromUnknown,\n            constraint: (args)=>createConstraint$2(args.params, args.initialValue),\n            equals: Point4d.equals,\n            writer: (_args)=>writePoint4d\n        },\n        controller: (args)=>{\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) throw TpError.shouldNeverHappen();\n            return new PointNdTextController(args.document, {\n                assembly: Point4dAssembly,\n                axes: value.rawValue.getComponents().map((comp, index)=>createAxis$1(comp, c.components[index])),\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    function createConstraint$1(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) constraints.push(lc);\n        return new CompositeConstraint(constraints);\n    }\n    const StringInputPlugin = {\n        id: 'input-string',\n        type: 'input',\n        accept: (value, params)=>{\n            if (typeof value !== 'string') return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions)\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (_args)=>stringFromUnknown,\n            constraint: (args)=>createConstraint$1(args.params),\n            writer: (_args)=>writePrimitive\n        },\n        controller: (args)=>{\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) return new ListController(doc, {\n                props: new ValueMap({\n                    options: lc.values.value('options')\n                }),\n                value: value,\n                viewProps: args.viewProps\n            });\n            return new TextController(doc, {\n                parser: (v)=>v,\n                props: ValueMap.fromObject({\n                    formatter: formatString\n                }),\n                value: value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3\n        }\n    };\n    const className$2 = ClassName('mll');\n    class MultiLogView {\n        constructor(doc, config){\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            config.viewProps.bindClassModifiers(this.element);\n            const textareaElem = doc.createElement('textarea');\n            textareaElem.classList.add(className$2('i'));\n            textareaElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            textareaElem.readOnly = true;\n            config.viewProps.bindDisabled(textareaElem);\n            this.element.appendChild(textareaElem);\n            this.textareaElem_ = textareaElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const elem = this.textareaElem_;\n            const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n            const lines = [];\n            this.value.rawValue.forEach((value)=>{\n                if (value !== undefined) lines.push(this.formatter_(value));\n            });\n            elem.textContent = lines.join('\\n');\n            if (shouldScroll) elem.scrollTop = elem.scrollHeight;\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n    class MultiLogController {\n        constructor(doc, config){\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new MultiLogView(doc, {\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n        }\n    }\n    const className$1 = ClassName('sgl');\n    class SingleLogView {\n        constructor(doc, config){\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$1('i'));\n            inputElem.readOnly = true;\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const values = this.value.rawValue;\n            const lastValue = values[values.length - 1];\n            this.inputElement.value = lastValue !== undefined ? this.formatter_(lastValue) : '';\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n    class SingleLogController {\n        constructor(doc, config){\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SingleLogView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n        }\n    }\n    const BooleanMonitorPlugin = {\n        id: 'monitor-bool',\n        type: 'monitor',\n        accept: (value, params)=>{\n            if (typeof value !== 'boolean') return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (_args)=>boolFromUnknown\n        },\n        controller: (args)=>{\n            var _a;\n            if (args.value.rawValue.length === 1) return new SingleLogController(args.document, {\n                formatter: BooleanFormatter,\n                value: args.value,\n                viewProps: args.viewProps\n            });\n            return new MultiLogController(args.document, {\n                formatter: BooleanFormatter,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: args.value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    const className = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config){\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.props_ = config.props;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.props_.get('minValue');\n            const max = this.props_.get('maxValue');\n            const points = [];\n            this.value.rawValue.forEach((v, index)=>{\n                if (v === undefined) return;\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([\n                    x,\n                    y\n                ].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.rawValue];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.rawValue, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className('t', 'a'))) {\n                tooltipElem.classList.add(className('t', 'a'), className('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n    class GraphLogController {\n        constructor(doc, config){\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.props_ = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = createValue(-1);\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                props: this.props_,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            } else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.rawValue = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.rawValue = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.rawValue = -1;\n                return;\n            }\n            this.cursor_.rawValue = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.rawValue = -1;\n        }\n    }\n    function createFormatter(params) {\n        return 'format' in params && !isEmpty(params.format) ? params.format : createNumberFormatter(2);\n    }\n    function createTextMonitor(args) {\n        var _a;\n        if (args.value.rawValue.length === 1) return new SingleLogController(args.document, {\n            formatter: createFormatter(args.params),\n            value: args.value,\n            viewProps: args.viewProps\n        });\n        return new MultiLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            value: args.value,\n            viewProps: args.viewProps\n        });\n    }\n    function createGraphMonitor(args) {\n        var _a, _b, _c;\n        return new GraphLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            props: ValueMap.fromObject({\n                maxValue: (_b = 'max' in args.params ? args.params.max : null) !== null && _b !== void 0 ? _b : 100,\n                minValue: (_c = 'min' in args.params ? args.params.min : null) !== null && _c !== void 0 ? _c : 0\n            }),\n            value: args.value,\n            viewProps: args.viewProps\n        });\n    }\n    function shouldShowGraph(params) {\n        return 'view' in params && params.view === 'graph';\n    }\n    const NumberMonitorPlugin = {\n        id: 'monitor-number',\n        type: 'monitor',\n        accept: (value, params)=>{\n            if (typeof value !== 'number') return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n                view: p.optional.string\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            defaultBufferSize: (params)=>shouldShowGraph(params) ? 64 : 1,\n            reader: (_args)=>numberFromUnknown\n        },\n        controller: (args)=>{\n            if (shouldShowGraph(args.params)) return createGraphMonitor(args);\n            return createTextMonitor(args);\n        }\n    };\n    const StringMonitorPlugin = {\n        id: 'monitor-string',\n        type: 'monitor',\n        accept: (value, params)=>{\n            if (typeof value !== 'string') return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n                multiline: p.optional.boolean\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (_args)=>stringFromUnknown\n        },\n        controller: (args)=>{\n            var _a;\n            const value = args.value;\n            const multiline = value.rawValue.length > 1 || 'multiline' in args.params && args.params.multiline;\n            if (multiline) return new MultiLogController(args.document, {\n                formatter: formatString,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: value,\n                viewProps: args.viewProps\n            });\n            return new SingleLogController(args.document, {\n                formatter: formatString,\n                value: value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    function createInputBindingController(plugin, args) {\n        var _a;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) return null;\n        const p = ParamsParsers;\n        const valueArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params\n        };\n        const reader = plugin.binding.reader(valueArgs);\n        const constraint = plugin.binding.constraint ? plugin.binding.constraint(valueArgs) : undefined;\n        const value = createValue(reader(result.initialValue), {\n            constraint: constraint,\n            equals: plugin.binding.equals\n        });\n        const binding = new InputBinding({\n            reader: reader,\n            target: args.target,\n            value: value,\n            writer: plugin.binding.writer(valueArgs)\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            constraint: constraint,\n            document: args.document,\n            initialValue: result.initialValue,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden\n            })\n        });\n        return new InputBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: 'label' in args.params ? (_a = p.optional.string(args.params.label).value) !== null && _a !== void 0 ? _a : null : args.target.key\n            }),\n            valueController: controller\n        });\n    }\n    function createTicker(document, interval) {\n        return interval === 0 ? new ManualTicker() : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    function createMonitorBindingController(plugin, args) {\n        var _a, _b, _c;\n        const p = ParamsParsers;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) return null;\n        const bindingArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params\n        };\n        const reader = plugin.binding.reader(bindingArgs);\n        const bufferSize = (_b = (_a = p.optional.number(args.params.bufferSize).value) !== null && _a !== void 0 ? _a : plugin.binding.defaultBufferSize && plugin.binding.defaultBufferSize(result.params)) !== null && _b !== void 0 ? _b : 1;\n        const interval = p.optional.number(args.params.interval).value;\n        const binding = new MonitorBinding({\n            reader: reader,\n            target: args.target,\n            ticker: createTicker(args.document, interval),\n            value: initializeBuffer(bufferSize)\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            document: args.document,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden\n            })\n        });\n        return new MonitorBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: 'label' in args.params ? (_c = p.optional.string(args.params.label).value) !== null && _c !== void 0 ? _c : null : args.target.key\n            }),\n            valueController: controller\n        });\n    }\n    class PluginPool {\n        constructor(){\n            this.pluginsMap_ = {\n                blades: [],\n                inputs: [],\n                monitors: []\n            };\n        }\n        getAll() {\n            return [\n                ...this.pluginsMap_.blades,\n                ...this.pluginsMap_.inputs,\n                ...this.pluginsMap_.monitors\n            ];\n        }\n        register(r) {\n            if (r.type === 'blade') this.pluginsMap_.blades.unshift(r);\n            else if (r.type === 'input') this.pluginsMap_.inputs.unshift(r);\n            else if (r.type === 'monitor') this.pluginsMap_.monitors.unshift(r);\n        }\n        createInput(document, target, params) {\n            const initialValue = target.read();\n            if (isEmpty(initialValue)) throw new TpError({\n                context: {\n                    key: target.key\n                },\n                type: 'nomatchingcontroller'\n            });\n            const bc = this.pluginsMap_.inputs.reduce((result, plugin)=>result !== null && result !== void 0 ? result : createInputBindingController(plugin, {\n                    document: document,\n                    target: target,\n                    params: params\n                }), null);\n            if (bc) return bc;\n            throw new TpError({\n                context: {\n                    key: target.key\n                },\n                type: 'nomatchingcontroller'\n            });\n        }\n        createMonitor(document, target, params) {\n            const bc = this.pluginsMap_.monitors.reduce((result, plugin)=>result !== null && result !== void 0 ? result : createMonitorBindingController(plugin, {\n                    document: document,\n                    params: params,\n                    target: target\n                }), null);\n            if (bc) return bc;\n            throw new TpError({\n                context: {\n                    key: target.key\n                },\n                type: 'nomatchingcontroller'\n            });\n        }\n        createBlade(document, params) {\n            const bc = this.pluginsMap_.blades.reduce((result, plugin)=>result !== null && result !== void 0 ? result : createBladeController(plugin, {\n                    document: document,\n                    params: params\n                }), null);\n            if (!bc) throw new TpError({\n                type: 'nomatchingview',\n                context: {\n                    params: params\n                }\n            });\n            return bc;\n        }\n        createBladeApi(bc) {\n            if (bc instanceof InputBindingController) return new InputBindingApi(bc);\n            if (bc instanceof MonitorBindingController) return new MonitorBindingApi(bc);\n            if (bc instanceof RackController) return new RackApi(bc, this);\n            const api = this.pluginsMap_.blades.reduce((result, plugin)=>result !== null && result !== void 0 ? result : plugin.api({\n                    controller: bc,\n                    pool: this\n                }), null);\n            if (!api) throw TpError.shouldNeverHappen();\n            return api;\n        }\n    }\n    function createDefaultPluginPool() {\n        const pool = new PluginPool();\n        [\n            Point2dInputPlugin,\n            Point3dInputPlugin,\n            Point4dInputPlugin,\n            StringInputPlugin,\n            NumberInputPlugin,\n            StringColorInputPlugin,\n            ObjectColorInputPlugin,\n            NumberColorInputPlugin,\n            BooleanInputPlugin,\n            BooleanMonitorPlugin,\n            StringMonitorPlugin,\n            NumberMonitorPlugin,\n            ButtonBladePlugin,\n            FolderBladePlugin,\n            SeparatorBladePlugin,\n            TabBladePlugin\n        ].forEach((p)=>{\n            pool.register(p);\n        });\n        return pool;\n    }\n    function point2dFromUnknown(value) {\n        return Point2d.isObject(value) ? new Point2d(value.x, value.y) : new Point2d();\n    }\n    function writePoint2d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n    }\n    function createDimensionConstraint(params, initialValue) {\n        if (!params) return undefined;\n        const constraints = [];\n        const cs = createStepConstraint(params, initialValue);\n        if (cs) constraints.push(cs);\n        const rs = createRangeConstraint(params);\n        if (rs) constraints.push(rs);\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point2dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y)\n            ]\n        });\n    }\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\n        const [min, max] = constraint ? findNumberRange(constraint) : [];\n        if (!isEmpty(min) || !isEmpty(max)) return Math.max(Math.abs(min !== null && min !== void 0 ? min : 0), Math.abs(max !== null && max !== void 0 ? max : 0));\n        const step = getBaseStep(constraint);\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n    }\n    function getSuitableMaxValue(initialValue, constraint) {\n        const xc = constraint instanceof PointNdConstraint ? constraint.components[0] : undefined;\n        const yc = constraint instanceof PointNdConstraint ? constraint.components[1] : undefined;\n        const xr = getSuitableMaxDimensionValue(xc, initialValue.x);\n        const yr = getSuitableMaxDimensionValue(yc, initialValue.y);\n        return Math.max(xr, yr);\n    }\n    function createAxis(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue))\n            })\n        };\n    }\n    function shouldInvertY(params) {\n        if (!('y' in params)) return false;\n        const yParams = params.y;\n        if (!yParams) return false;\n        return 'inverted' in yParams ? !!yParams.inverted : false;\n    }\n    const Point2dInputPlugin = {\n        id: 'input-point2d',\n        type: 'input',\n        accept: (value, params)=>{\n            if (!Point2d.isObject(value)) return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                expanded: p.optional.boolean,\n                picker: p.optional.custom(parsePickerLayout),\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.object({\n                    inverted: p.optional.boolean,\n                    max: p.optional.number,\n                    min: p.optional.number,\n                    step: p.optional.number\n                })\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (_args)=>point2dFromUnknown,\n            constraint: (args)=>createConstraint(args.params, args.initialValue),\n            equals: Point2d.equals,\n            writer: (_args)=>writePoint2d\n        },\n        controller: (args)=>{\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) throw TpError.shouldNeverHappen();\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new Point2dController(doc, {\n                axes: [\n                    createAxis(value.rawValue.x, c.components[0]),\n                    createAxis(value.rawValue.y, c.components[1])\n                ],\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                invertsY: shouldInvertY(args.params),\n                maxValue: getSuitableMaxValue(value.rawValue, c),\n                parser: parseNumber,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                value: value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    class ListApi extends BladeApi {\n        constructor(controller){\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev)=>{\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue)\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get options() {\n            return this.controller_.valueController.props.get('options');\n        }\n        set options(options) {\n            this.controller_.valueController.props.set('options', options);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev)=>{\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n    class SliderApi extends BladeApi {\n        constructor(controller){\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev)=>{\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue)\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get maxValue() {\n            return this.controller_.valueController.sliderController.props.get('maxValue');\n        }\n        set maxValue(maxValue) {\n            this.controller_.valueController.sliderController.props.set('maxValue', maxValue);\n        }\n        get minValue() {\n            return this.controller_.valueController.sliderController.props.get('minValue');\n        }\n        set minValue(minValue) {\n            this.controller_.valueController.sliderController.props.set('minValue', minValue);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev)=>{\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n    class TextApi extends BladeApi {\n        constructor(controller){\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev)=>{\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue)\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get formatter() {\n            return this.controller_.valueController.props.get('formatter');\n        }\n        set formatter(formatter) {\n            this.controller_.valueController.props.set('formatter', formatter);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev)=>{\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n    const ListBladePlugin = function() {\n        return {\n            id: 'list',\n            type: 'blade',\n            accept (params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    options: p.required.custom(parseListOptions),\n                    value: p.required.raw,\n                    view: p.required.constant('list'),\n                    label: p.optional.string\n                });\n                return result ? {\n                    params: result\n                } : null;\n            },\n            controller (args) {\n                const lc = new ListConstraint(normalizeListOptions(args.params.options));\n                const value = createValue(args.params.value, {\n                    constraint: lc\n                });\n                const ic = new ListController(args.document, {\n                    props: new ValueMap({\n                        options: lc.values.value('options')\n                    }),\n                    value: value,\n                    viewProps: args.viewProps\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label\n                    }),\n                    valueController: ic\n                });\n            },\n            api (args) {\n                if (!(args.controller instanceof LabeledValueController)) return null;\n                if (!(args.controller.valueController instanceof ListController)) return null;\n                return new ListApi(args.controller);\n            }\n        };\n    }();\n    /**\n     * @hidden\n     */ function exportPresetJson(targets) {\n        return targets.reduce((result, target)=>{\n            return Object.assign(result, {\n                [target.presetKey]: target.read()\n            });\n        }, {});\n    }\n    /**\n     * @hidden\n     */ function importPresetJson(bindings, preset) {\n        bindings.forEach((binding)=>{\n            const value = preset[binding.target.presetKey];\n            if (value !== undefined) binding.writer(binding.target, binding.reader(value));\n        });\n    }\n    class RootApi extends FolderApi {\n        /**\n         * @hidden\n         */ constructor(controller, pool){\n            super(controller, pool);\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        /**\n         * Imports a preset of all inputs.\n         * @param preset The preset object to import.\n         */ importPreset(preset) {\n            const bindings = this.controller_.rackController.rack.find(InputBindingController).map((ibc)=>{\n                return ibc.binding;\n            });\n            importPresetJson(bindings, preset);\n            this.refresh();\n        }\n        /**\n         * Exports a preset of all inputs.\n         * @return An exported preset object.\n         */ exportPreset() {\n            const targets = this.controller_.rackController.rack.find(InputBindingController).map((ibc)=>{\n                return ibc.binding.target;\n            });\n            return exportPresetJson(targets);\n        }\n        /**\n         * Refreshes all bindings of the pane.\n         */ refresh() {\n            // Force-read all input bindings\n            this.controller_.rackController.rack.find(InputBindingController).forEach((ibc)=>{\n                ibc.binding.read();\n            });\n            // Force-read all monitor bindings\n            this.controller_.rackController.rack.find(MonitorBindingController).forEach((mbc)=>{\n                mbc.binding.read();\n            });\n        }\n    }\n    class RootController extends FolderController {\n        constructor(doc, config){\n            super(doc, {\n                expanded: config.expanded,\n                blade: config.blade,\n                props: config.props,\n                root: true,\n                viewProps: config.viewProps\n            });\n        }\n    }\n    const SliderBladePlugin = {\n        id: 'slider',\n        type: 'blade',\n        accept (params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                max: p.required.number,\n                min: p.required.number,\n                view: p.required.constant('slider'),\n                format: p.optional.function,\n                label: p.optional.string,\n                value: p.optional.number\n            });\n            return result ? {\n                params: result\n            } : null;\n        },\n        controller (args) {\n            var _a, _b;\n            const initialValue = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n            const drc = new DefiniteRangeConstraint({\n                max: args.params.max,\n                min: args.params.min\n            });\n            const vc = new SliderTextController(args.document, {\n                baseStep: 1,\n                parser: parseNumber,\n                sliderProps: new ValueMap({\n                    maxValue: drc.values.value('max'),\n                    minValue: drc.values.value('min')\n                }),\n                textProps: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(undefined, initialValue),\n                    formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString\n                }),\n                value: createValue(initialValue, {\n                    constraint: drc\n                }),\n                viewProps: args.viewProps\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label\n                }),\n                valueController: vc\n            });\n        },\n        api (args) {\n            if (!(args.controller instanceof LabeledValueController)) return null;\n            if (!(args.controller.valueController instanceof SliderTextController)) return null;\n            return new SliderApi(args.controller);\n        }\n    };\n    const TextBladePlugin = function() {\n        return {\n            id: 'text',\n            type: 'blade',\n            accept (params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    parse: p.required.function,\n                    value: p.required.raw,\n                    view: p.required.constant('text'),\n                    format: p.optional.function,\n                    label: p.optional.string\n                });\n                return result ? {\n                    params: result\n                } : null;\n            },\n            controller (args) {\n                var _a;\n                const ic = new TextController(args.document, {\n                    parser: args.params.parse,\n                    props: ValueMap.fromObject({\n                        formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : (v)=>String(v)\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label\n                    }),\n                    valueController: ic\n                });\n            },\n            api (args) {\n                if (!(args.controller instanceof LabeledValueController)) return null;\n                if (!(args.controller.valueController instanceof TextController)) return null;\n                return new TextApi(args.controller);\n            }\n        };\n    }();\n    function createDefaultWrapperElement(doc) {\n        const elem = doc.createElement('div');\n        elem.classList.add(ClassName('dfw')());\n        if (doc.body) doc.body.appendChild(elem);\n        return elem;\n    }\n    function embedStyle(doc, id, css) {\n        if (doc.querySelector(`style[data-tp-style=${id}]`)) return;\n        const styleElem = doc.createElement('style');\n        styleElem.dataset.tpStyle = id;\n        styleElem.textContent = css;\n        doc.head.appendChild(styleElem);\n    }\n    /**\n     * The root pane of Tweakpane.\n     */ class Pane extends RootApi {\n        constructor(opt_config){\n            var _a, _b;\n            const config = opt_config !== null && opt_config !== void 0 ? opt_config : {};\n            const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n            const pool = createDefaultPluginPool();\n            const rootController = new RootController(doc, {\n                expanded: config.expanded,\n                blade: createBlade(),\n                props: ValueMap.fromObject({\n                    title: config.title\n                }),\n                viewProps: ViewProps.create()\n            });\n            super(rootController, pool);\n            this.pool_ = pool;\n            this.containerElem_ = (_b = config.container) !== null && _b !== void 0 ? _b : createDefaultWrapperElement(doc);\n            this.containerElem_.appendChild(this.element);\n            this.doc_ = doc;\n            this.usesDefaultWrapper_ = !config.container;\n            this.setUpDefaultPlugins_();\n        }\n        get document() {\n            if (!this.doc_) throw TpError.alreadyDisposed();\n            return this.doc_;\n        }\n        dispose() {\n            const containerElem = this.containerElem_;\n            if (!containerElem) throw TpError.alreadyDisposed();\n            if (this.usesDefaultWrapper_) {\n                const parentElem = containerElem.parentElement;\n                if (parentElem) parentElem.removeChild(containerElem);\n            }\n            this.containerElem_ = null;\n            this.doc_ = null;\n            super.dispose();\n        }\n        registerPlugin(bundle) {\n            const plugins = 'plugin' in bundle ? [\n                bundle.plugin\n            ] : 'plugins' in bundle ? bundle.plugins : [];\n            plugins.forEach((p)=>{\n                this.pool_.register(p);\n                this.embedPluginStyle_(p);\n            });\n        }\n        embedPluginStyle_(plugin) {\n            if (plugin.css) embedStyle(this.document, `plugin-${plugin.id}`, plugin.css);\n        }\n        setUpDefaultPlugins_() {\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            embedStyle(this.document, 'default', '.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:\"\";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:\"\";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:\"\";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}');\n            this.pool_.getAll().forEach((plugin)=>{\n                this.embedPluginStyle_(plugin);\n            });\n            this.registerPlugin({\n                plugins: [\n                    SliderBladePlugin,\n                    ListBladePlugin,\n                    TabBladePlugin,\n                    TextBladePlugin\n                ]\n            });\n        }\n    }\n    const VERSION = new Semver('3.1.10');\n    exports1.BladeApi = BladeApi;\n    exports1.ButtonApi = ButtonApi;\n    exports1.FolderApi = FolderApi;\n    exports1.InputBindingApi = InputBindingApi;\n    exports1.ListApi = ListApi;\n    exports1.MonitorBindingApi = MonitorBindingApi;\n    exports1.Pane = Pane;\n    exports1.SeparatorApi = SeparatorApi;\n    exports1.SliderApi = SliderApi;\n    exports1.TabApi = TabApi;\n    exports1.TabPageApi = TabPageApi;\n    exports1.TextApi = TextApi;\n    exports1.TpChangeEvent = TpChangeEvent;\n    exports1.VERSION = VERSION;\n    Object.defineProperty(exports1, '__esModule', {\n        value: true\n    });\n});\n\n\nvar $2725bdcb11510985$exports = {};\n// A library of seedable RNGs implemented in Javascript.\n//\n// Usage:\n//\n// var seedrandom = require('seedrandom');\n// var random = seedrandom(1); // or any seed.\n// var x = random();       // 0 <= x < 1.  Every bit is random.\n// var x = random.quick(); // 0 <= x < 1.  32 bits of randomness.\n// alea, a 53-bit multiply-with-carry generator by Johannes Baage.\n// Period: ~2^116\n// Reported to pass all BigCrush tests.\n\nvar $cmoHh = parcelRequire(\"cmoHh\");\n\nvar $euRi5 = parcelRequire(\"euRi5\");\n\nvar $hDsEw = parcelRequire(\"hDsEw\");\n\nvar $3J2Zm = parcelRequire(\"3J2Zm\");\n\nvar $6Px8M = parcelRequire(\"6Px8M\");\n\nvar $lDm0S = parcelRequire(\"lDm0S\");\nvar $d7e73366feb50558$exports = {};\n\n/*\nCopyright 2019 David Bau.\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/ (function(global, pool, math) {\n    //\n    // The following constants are related to IEEE 754 limits.\n    //\n    var width = 256, chunks = 6, digits = 52, rngname = 'random', startdenom = math.pow(width, chunks), significance = math.pow(2, digits), overflow = significance * 2, mask = width - 1, nodecrypto; // node.js crypto module, initialized at the bottom.\n    //\n    // seedrandom()\n    // This is the seedrandom function described above.\n    //\n    function seedrandom(seed, options, callback) {\n        var key = [];\n        options = options == true ? {\n            entropy: true\n        } : options || {};\n        // Flatten the seed string or build one from local entropy if needed.\n        var shortseed = mixkey(flatten(options.entropy ? [\n            seed,\n            tostring(pool)\n        ] : seed == null ? autoseed() : seed, 3), key);\n        // Use the seed to initialize an ARC4 generator.\n        var arc4 = new ARC4(key);\n        // This function returns a random double in [0, 1) that contains\n        // randomness in every bit of the mantissa of the IEEE 754 value.\n        var prng = function() {\n            var n = arc4.g(chunks), d = startdenom, x = 0; //   and no 'extra last byte'.\n            while(n < significance){\n                n = (n + x) * width; //   shifting numerator and\n                d *= width; //   denominator and generating a\n                x = arc4.g(1); //   new least-significant-byte.\n            }\n            while(n >= overflow){\n                n /= 2; //   last byte, shift everything\n                d /= 2; //   right using integer math until\n                x >>>= 1; //   we have exactly the desired bits.\n            }\n            return (n + x) / d; // Form the number within [0, 1).\n        };\n        prng.int32 = function() {\n            return arc4.g(4) | 0;\n        };\n        prng.quick = function() {\n            return arc4.g(4) / 0x100000000;\n        };\n        prng.double = prng;\n        // Mix the randomness into accumulated entropy.\n        mixkey(tostring(arc4.S), pool);\n        // Calling convention: what to return as a function of prng, seed, is_math.\n        return (options.pass || callback || function(prng, seed, is_math_call, state) {\n            if (state) {\n                // Load the arc4 state from the given state if it has an S array.\n                if (state.S) copy(state, arc4);\n                // Only provide the .state method if requested via options.state.\n                prng.state = function() {\n                    return copy(arc4, {});\n                };\n            }\n            // If called as a method of Math (Math.seedrandom()), mutate\n            // Math.random because that is how seedrandom.js has worked since v1.0.\n            if (is_math_call) {\n                math[rngname] = prng;\n                return seed;\n            } else return prng;\n        })(prng, shortseed, 'global' in options ? options.global : this == math, options.state);\n    }\n    //\n    // ARC4\n    //\n    // An ARC4 implementation.  The constructor takes a key in the form of\n    // an array of at most (width) integers that should be 0 <= x < (width).\n    //\n    // The g(count) method returns a pseudorandom integer that concatenates\n    // the next (count) outputs from ARC4.  Its return value is a number x\n    // that is in the range 0 <= x < (width ^ count).\n    //\n    function ARC4(key) {\n        var t, keylen = key.length, me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\n        // The empty key [] is treated as [0].\n        if (!keylen) key = [\n            keylen++\n        ];\n        // Set up S using the standard key scheduling algorithm.\n        while(i < width)s[i] = i++;\n        for(i = 0; i < width; i++){\n            s[i] = s[j = mask & j + key[i % keylen] + (t = s[i])];\n            s[j] = t;\n        }\n        // The \"g\" method returns the next (count) outputs as one number.\n        (me.g = function(count) {\n            // Using instance members instead of closure state nearly doubles speed.\n            var t, r = 0, i = me.i, j = me.j, s = me.S;\n            while(count--){\n                t = s[i = mask & i + 1];\n                r = r * width + s[mask & (s[i] = s[j = mask & j + t]) + (s[j] = t)];\n            }\n            me.i = i;\n            me.j = j;\n            return r;\n        // For robust unpredictability, the function call below automatically\n        // discards an initial batch of values.  This is called RC4-drop[256].\n        // See http://google.com/search?q=rsa+fluhrer+response&btnI\n        })(width);\n    }\n    //\n    // copy()\n    // Copies internal state of ARC4 to or from a plain object.\n    //\n    function copy(f, t) {\n        t.i = f.i;\n        t.j = f.j;\n        t.S = f.S.slice();\n        return t;\n    }\n    //\n    // flatten()\n    // Converts an object tree to nested arrays of strings.\n    //\n    function flatten(obj, depth) {\n        var result = [], typ = typeof obj, prop;\n        if (depth && typ == 'object') {\n            for(prop in obj)try {\n                result.push(flatten(obj[prop], depth - 1));\n            } catch (e) {}\n        }\n        return result.length ? result : typ == 'string' ? obj : obj + '\\0';\n    }\n    //\n    // mixkey()\n    // Mixes a string seed into a key that is an array of integers, and\n    // returns a shortened string seed that is equivalent to the result key.\n    //\n    function mixkey(seed, key) {\n        var stringseed = seed + '', smear, j = 0;\n        while(j < stringseed.length)key[mask & j] = mask & (smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++);\n        return tostring(key);\n    }\n    //\n    // autoseed()\n    // Returns an object for autoseeding, using window.crypto and Node crypto\n    // module if available.\n    //\n    function autoseed() {\n        try {\n            var out;\n            if (nodecrypto && (out = nodecrypto.randomBytes)) // The use of 'out' to remember randomBytes makes tight minified code.\n            out = out(width);\n            else {\n                out = new Uint8Array(width);\n                (global.crypto || global.msCrypto).getRandomValues(out);\n            }\n            return tostring(out);\n        } catch (e) {\n            var browser = global.navigator, plugins = browser && browser.plugins;\n            return [\n                +new Date,\n                global,\n                plugins,\n                global.screen,\n                tostring(pool)\n            ];\n        }\n    }\n    //\n    // tostring()\n    // Converts an array of charcodes to a string\n    //\n    function tostring(a) {\n        return String.fromCharCode.apply(0, a);\n    }\n    //\n    // When seedrandom.js is loaded, we immediately mix a few bits\n    // from the built-in RNG into the entropy pool.  Because we do\n    // not want to interfere with deterministic PRNG state later,\n    // seedrandom will not call math.random on its own again after\n    // initialization.\n    //\n    mixkey(math.random(), pool);\n    //\n    // Nodejs and AMD support: export the implementation as a module using\n    // either convention.\n    //\n    if ($d7e73366feb50558$exports) {\n        $d7e73366feb50558$exports = seedrandom;\n        // When in node.js, try using crypto package for autoseeding.\n        try {\n            nodecrypto = (parcelRequire(\"kjyEk\"));\n        } catch (ex) {}\n    } else if (typeof define == 'function' && define.amd) define(function() {\n        return seedrandom;\n    });\n    else // When included as a plain script, set up Math.seedrandom global.\n    math['seed' + rngname] = seedrandom;\n// End anonymous scope, and pass initial values.\n})(// global: `self` in browsers (including strict mode and web workers),\n// otherwise `this` in Node and other environments\ntypeof self !== 'undefined' ? self : $d7e73366feb50558$exports, [], Math // math: package containing random, pow, and seedrandom\n);\n\n\n$d7e73366feb50558$exports.alea = $cmoHh;\n$d7e73366feb50558$exports.xor128 = $euRi5;\n$d7e73366feb50558$exports.xorwow = $hDsEw;\n$d7e73366feb50558$exports.xorshift7 = $3J2Zm;\n$d7e73366feb50558$exports.xor4096 = $6Px8M;\n$d7e73366feb50558$exports.tychei = $lDm0S;\n$2725bdcb11510985$exports = $d7e73366feb50558$exports;\n\n\nconst $42aaec2867bae1b8$var$lerpColor = (color1, color2, t)=>{\n    const r = color1.r + t * (color2.r - color1.r);\n    const g = color1.g + t * (color2.g - color1.g);\n    const b = color1.b + t * (color2.b - color1.b);\n    return {\n        r: r,\n        g: g,\n        b: b\n    };\n};\nconst $42aaec2867bae1b8$var$targetWidthInches = 8;\nconst $42aaec2867bae1b8$var$targetHeightInches = 6;\nconst $42aaec2867bae1b8$var$inchesToPixels = (inches, targetDPI)=>{\n    return inches * targetDPI;\n};\nconst $42aaec2867bae1b8$var$targetDPI = 300;\nconst $42aaec2867bae1b8$var$settings = {\n    dimensions: [\n        $42aaec2867bae1b8$var$inchesToPixels($42aaec2867bae1b8$var$targetWidthInches, $42aaec2867bae1b8$var$targetDPI),\n        $42aaec2867bae1b8$var$inchesToPixels($42aaec2867bae1b8$var$targetHeightInches, $42aaec2867bae1b8$var$targetDPI)\n    ],\n    scaleToView: true,\n    animate: true,\n    context: '2d'\n};\nconst $42aaec2867bae1b8$var$params = {\n    layers: 7,\n    height: 0.75,\n    width: 0.05,\n    seed: 42,\n    colorSeed: 42,\n    r1: 60,\n    g1: 60,\n    b1: 60,\n    r2: 255,\n    g2: 255,\n    b2: 255,\n    backgroundR: 222,\n    backgroundG: 202,\n    backgroundB: 180\n};\nlet $42aaec2867bae1b8$var$shouldAnimate = false;\nlet $42aaec2867bae1b8$var$shouldRepaint = false;\nlet $42aaec2867bae1b8$var$useRandomColor = false;\nconst $42aaec2867bae1b8$var$sketch = ({ context: context, width: width, height: height })=>{\n    window.addEventListener('resize', ()=>{\n        $42aaec2867bae1b8$var$shouldRepaint = true;\n    // Redraw your canvas here\n    // canvas.width = window.innerWidth;\n    // canvas.height = window.innerHeight;\n    });\n    $42aaec2867bae1b8$var$generateBackground(context, width, height);\n    let skyline = new $42aaec2867bae1b8$var$Skyline(height, width, $42aaec2867bae1b8$var$params.layers, $42aaec2867bae1b8$var$params.width, $42aaec2867bae1b8$var$params.height, $42aaec2867bae1b8$var$params.seed, $42aaec2867bae1b8$var$params.colorSeed);\n    skyline.drawCanvas(context);\n    return ({ context: context, width: width, height: height })=>{\n        if ($42aaec2867bae1b8$var$shouldAnimate) {\n            $42aaec2867bae1b8$var$generateBackground(context, width, height);\n            skyline = new $42aaec2867bae1b8$var$Skyline(height, width, $42aaec2867bae1b8$var$params.layers, $42aaec2867bae1b8$var$params.width, $42aaec2867bae1b8$var$params.height, $42aaec2867bae1b8$var$params.seed, $42aaec2867bae1b8$var$params.colorSeed);\n            $42aaec2867bae1b8$var$shouldAnimate = false;\n            try {\n                skyline.drawCanvas(context, $42aaec2867bae1b8$var$params.colorSeed);\n            } catch (e) {\n                console.log(e);\n            }\n            return;\n        }\n        if ($42aaec2867bae1b8$var$shouldRepaint) {\n            $42aaec2867bae1b8$var$shouldRepaint = false;\n            $42aaec2867bae1b8$var$generateBackground(context, width, height);\n            skyline.drawCanvas(context, $42aaec2867bae1b8$var$params.colorSeed);\n        }\n    };\n};\nconst $42aaec2867bae1b8$var$createPane = ()=>{\n    const pane = new $c398a0ea03e027b6$exports.Pane();\n    let folder;\n    let mainFolder = pane.addFolder({\n        title: 'skyline-generator'\n    });\n    folder = mainFolder.addFolder({\n        title: 'Shape'\n    });\n    folder.addInput($42aaec2867bae1b8$var$params, 'layers', {\n        min: 2,\n        max: 20,\n        step: 1\n    }).on('change', (value)=>{\n        $42aaec2867bae1b8$var$shouldAnimate = true;\n    });\n    folder.addInput($42aaec2867bae1b8$var$params, 'height', {\n        min: 0.25,\n        max: 1.0,\n        step: 0.1\n    }).on('change', (value)=>{\n        $42aaec2867bae1b8$var$shouldAnimate = true;\n    });\n    folder.addInput($42aaec2867bae1b8$var$params, 'width', {\n        min: 0.05,\n        max: 0.2,\n        step: 0.01\n    }).on('change', (value)=>{\n        $42aaec2867bae1b8$var$shouldAnimate = true;\n    });\n    folder.addInput($42aaec2867bae1b8$var$params, 'seed', {\n        min: 0.0,\n        max: 45.0,\n        step: 1.0\n    }).on('change', (value)=>{\n        $42aaec2867bae1b8$var$shouldAnimate = true;\n    });\n    folder = mainFolder.addFolder({\n        title: 'Color'\n    });\n    // Add a button to the pane\n    folder.addButton({\n        title: 'Random color?'\n    }).on('click', (value)=>{\n        $42aaec2867bae1b8$var$useRandomColor = !$42aaec2867bae1b8$var$useRandomColor;\n        $42aaec2867bae1b8$var$shouldRepaint = true;\n    });\n    folder.addInput($42aaec2867bae1b8$var$params, 'colorSeed', {\n        min: 0.0,\n        max: 100.0,\n        step: 1.0\n    }).on('change', (value)=>{\n        $42aaec2867bae1b8$var$shouldRepaint = true;\n        $42aaec2867bae1b8$var$useRandomColor = true;\n    });\n    folder = mainFolder.addFolder({\n        title: 'Blended Colors'\n    });\n    folder = folder.addFolder({\n        title: 'Color 1'\n    });\n    folder.addInput($42aaec2867bae1b8$var$params, 'r1', {\n        min: 0,\n        max: 255,\n        step: 1,\n        label: 'Red'\n    }).on('change', ()=>{\n        $42aaec2867bae1b8$var$shouldRepaint = true;\n        $42aaec2867bae1b8$var$useRandomColor = false;\n    });\n    folder.addInput($42aaec2867bae1b8$var$params, 'g1', {\n        min: 0,\n        max: 255,\n        step: 1,\n        label: 'Green'\n    }).on('change', ()=>{\n        $42aaec2867bae1b8$var$shouldRepaint = true;\n        $42aaec2867bae1b8$var$useRandomColor = false;\n    });\n    folder.addInput($42aaec2867bae1b8$var$params, 'b1', {\n        min: 0,\n        max: 255,\n        step: 1,\n        label: 'Blue'\n    }).on('change', ()=>{\n        $42aaec2867bae1b8$var$shouldRepaint = true;\n        $42aaec2867bae1b8$var$useRandomColor = false;\n    });\n    folder = folder.addFolder({\n        title: 'Color2'\n    });\n    folder.addInput($42aaec2867bae1b8$var$params, 'r2', {\n        min: 0,\n        max: 255,\n        step: 1,\n        label: 'Red'\n    }).on('change', ()=>{\n        $42aaec2867bae1b8$var$shouldRepaint = true;\n        $42aaec2867bae1b8$var$useRandomColor = false;\n    });\n    folder.addInput($42aaec2867bae1b8$var$params, 'g2', {\n        min: 0,\n        max: 255,\n        step: 1,\n        label: 'Green'\n    }).on('change', ()=>{\n        $42aaec2867bae1b8$var$shouldRepaint = true;\n        $42aaec2867bae1b8$var$useRandomColor = false;\n    });\n    folder.addInput($42aaec2867bae1b8$var$params, 'b2', {\n        min: 0,\n        max: 255,\n        step: 1,\n        label: 'Blue'\n    }).on('change', ()=>{\n        $42aaec2867bae1b8$var$shouldRepaint = true;\n        $42aaec2867bae1b8$var$useRandomColor = false;\n    });\n    folder = mainFolder.addFolder({\n        title: 'Background Color'\n    });\n    folder.addInput($42aaec2867bae1b8$var$params, 'backgroundR', {\n        min: 0,\n        max: 255,\n        step: 1,\n        label: 'Red'\n    }).on('change', ()=>{\n        $42aaec2867bae1b8$var$shouldRepaint = true;\n    });\n    folder.addInput($42aaec2867bae1b8$var$params, 'backgroundG', {\n        min: 0,\n        max: 255,\n        step: 1,\n        label: 'Green'\n    }).on('change', ()=>{\n        $42aaec2867bae1b8$var$shouldRepaint = true;\n    });\n    folder.addInput($42aaec2867bae1b8$var$params, 'backgroundB', {\n        min: 0,\n        max: 255,\n        step: 1,\n        label: 'Blue'\n    }).on('change', ()=>{\n        $42aaec2867bae1b8$var$shouldRepaint = true;\n    });\n    // Add a button to the pane\n    mainFolder.addButton({\n        title: 'Download PNG'\n    }).on('click', ()=>{\n        $42aaec2867bae1b8$var$downloadCanvasAsPNG();\n    });\n    return pane;\n};\n$42aaec2867bae1b8$var$createPane();\nwindow.addEventListener('resize', ()=>{\n    $42aaec2867bae1b8$var$shouldRepaint = true;\n// Redraw your canvas here\n// canvas.width = window.innerWidth;\n// canvas.height = window.innerHeight;\n});\n//\n// //  Make the pane draggable\n// let isDragging = false;\n// let startX = 0;\n// let startY = 0;\n// // The element that you'll be dragging\n// const paneElement = pane.element; // This is the default container element of Tweakpane\n// let dragOffsetX = 0;\n// let dragOffsetY = 0;\n// paneElement.addEventListener('mousedown', function(e) {\n//   // Only start drag if the primary mouse button is pressed\n//   if (e.button !== 0) return;\n//   console.log({e, paneElement})\n//   isDragging = true;\n//   dragOffsetX = e.clientX - paneElement.getBoundingClientRect().left;\n//   dragOffsetY = e.clientY - paneElement.getBoundingClientRect().top;\n//   paneElement.style.cursor = 'grabbing';\n//   // Prevent default dragging behavior for images or text selections\n//   e.preventDefault();\n// });\n// document.addEventListener('mousemove', function(e) {\n//   if (!isDragging) return;\n//   paneElement.style.position = 'absolute';\n//   paneElement.style.left = e.clientX - dragOffsetX + 'px';\n//   paneElement.style.top = e.clientY - dragOffsetY + 'px';\n// });\n// document.addEventListener('mouseup', function() {\n//   if (isDragging) {\n//     isDragging = false;\n//     paneElement.style.cursor = 'grab';\n//   }\n// });\n$245d8981719bb01f$exports($42aaec2867bae1b8$var$sketch, $42aaec2867bae1b8$var$settings);\nclass $42aaec2867bae1b8$var$Building {\n    constructor(x, y, width, height){\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n}\nclass $42aaec2867bae1b8$var$Skyline {\n    buildings = [];\n    constructor(screenHeight, screenWidth, layers, widthMultiplier, heightMultiplier, seed){\n        this.seed = $2725bdcb11510985$exports(seed);\n        this.screenHeight = screenHeight;\n        this.screenWidth = screenWidth;\n        this.layers = layers;\n        this.allCells = [\n            ...Array(this.sizeX)\n        ].map((e)=>Array(this.sizeX).fill(this.originalCell));\n        this.minBuildingWidth = 50 * widthMultiplier;\n        this.maxBuildingWidth = screenWidth * widthMultiplier;\n        this.minBuildingHeight = 10 * heightMultiplier;\n        this.maxBuildingHeight = screenHeight * heightMultiplier;\n        this.generate();\n    }\n    generateLayer(heightRange, widthRange) {\n        const { minHeight: minHeight, maxHeight: maxHeight } = heightRange;\n        const { minWidth: minWidth, maxWidth: maxWidth } = widthRange;\n        const bldgs = [];\n        let x = 0;\n        while(x <= this.screenWidth){\n            const rW = this.seed();\n            const rH = this.seed();\n            const bWidth = $42aaec2867bae1b8$require$mapRange(rW, 0, 1.0, minWidth, maxWidth);\n            let bHeight = $42aaec2867bae1b8$require$mapRange(rH, 0, 1.0, minHeight, maxHeight);\n            const n = $42aaec2867bae1b8$require$noise1D(x, maxWidth * 0.2, maxHeight * 0.25);\n            bHeight += n;\n            const bldg = new $42aaec2867bae1b8$var$Building(x, 0, bWidth, bHeight);\n            bldgs.push(bldg);\n            x += bWidth;\n        }\n        return bldgs;\n    }\n    generate() {\n        this.buildings = [\n            ...Array(this.layers)\n        ].map((e, i)=>{\n            const multiplier = i / this.layers;\n            const heightRange = {\n                minHeight: this.minBuildingHeight * multiplier,\n                maxHeight: this.maxBuildingHeight * multiplier\n            };\n            const widthRange = {\n                minWidth: this.minBuildingWidth,\n                maxWidth: this.maxBuildingWidth\n            };\n            return this.generateLayer(heightRange, widthRange);\n        });\n    }\n    drawCanvas(context, colorSeed) {\n        this.colorSeed = $2725bdcb11510985$exports(colorSeed);\n        context.save();\n        const bldgs = this.buildings.slice().reverse();\n        bldgs.forEach((layer, index)=>{\n            const t = index / (this.buildings.length ?? 1);\n            const c = $42aaec2867bae1b8$var$lerpColor({\n                r: $42aaec2867bae1b8$var$params.r1,\n                g: $42aaec2867bae1b8$var$params.g1,\n                b: $42aaec2867bae1b8$var$params.b1\n            }, {\n                r: $42aaec2867bae1b8$var$params.r2,\n                g: $42aaec2867bae1b8$var$params.g2,\n                b: $42aaec2867bae1b8$var$params.b2\n            }, t);\n            const red = Math.floor(this.colorSeed() * 256);\n            const green = Math.floor(this.colorSeed() * 256);\n            const blue = Math.floor(this.colorSeed() * 256);\n            const color = $42aaec2867bae1b8$var$useRandomColor ? `rgb(${red}, ${green}, ${blue})` : `rgb(${c.r}, ${c.g}, ${c.b})`;\n            layer.forEach((x)=>this.drawBuilding(context, x, color, t));\n        });\n        context.restore();\n    }\n    drawBuilding(context, building, color, lightenPercent) {\n        context.lineWidth = 1;\n        context.strokeStyle = 'black';\n        context.fillStyle = color;\n        const vOffset = this.screenHeight - building.y;\n        context.strokeRect(building.x, vOffset, building.width, -building.height);\n        context.fillRect(building.x, vOffset, building.width, -building.height);\n        const baseStroke = 0.5;\n        const baseSpacing = 20;\n        let usableSpacing = Math.max(1, (1 - lightenPercent) * baseSpacing);\n        const horizontalPattern = $42aaec2867bae1b8$var$horizontalCanvasPattern(context, baseStroke, color, usableSpacing);\n        const verticalPattern = $42aaec2867bae1b8$var$verticalCanvasPattern(context, baseStroke, color, usableSpacing);\n        const pat = this.colorSeed() > 0.5 ? horizontalPattern : verticalPattern;\n        $42aaec2867bae1b8$var$renderHatch(context, building, this.screenHeight, pat);\n    }\n}\nconst $42aaec2867bae1b8$var$horizontalCanvasPattern = (context, baseStroke, color, spacing)=>{\n    // off-screen canvas\n    const canvasPattern = document.createElement('canvas');\n    canvasPattern.width = 10;\n    canvasPattern.height = 10;\n    const contextPattern = canvasPattern.getContext('2d');\n    if (contextPattern) {\n        // fill the off-screen canvas with white background\n        contextPattern.fillStyle = color;\n        contextPattern.fillRect(0, 0, canvasPattern.width, canvasPattern.height);\n        //stroke color for hatch pattern\n        contextPattern.strokeStyle = 'black';\n        let angle = -(Math.PI / 4);\n        angle = 0;\n        let lineWidth = baseStroke;\n        // lineWidth = Math.min(lineWidth, spacing * 0.8);\n        contextPattern.lineWidth = lineWidth;\n        //hatch pattern drawn to off-screen context\n        for(let y = 0; y < canvasPattern.height + spacing; y += spacing)for(let x = 0; x < canvasPattern.width + spacing; x += spacing){\n            contextPattern.beginPath();\n            const startX = x;\n            const startY = y;\n            contextPattern.moveTo(startX, startY);\n            contextPattern.lineTo(x + spacing * Math.cos(angle), y + spacing * Math.sin(angle));\n            contextPattern.stroke();\n        }\n    }\n    const pattern = context.createPattern(canvasPattern, 'repeat');\n    return pattern;\n};\nconst $42aaec2867bae1b8$var$verticalCanvasPattern = (context, baseStroke, color, spacing)=>{\n    // off-screen canvas\n    const canvasPattern = document.createElement('canvas');\n    canvasPattern.width = 10;\n    canvasPattern.height = 10;\n    const contextPattern = canvasPattern.getContext('2d');\n    if (contextPattern) {\n        // fill the off-screen canvas with white background\n        contextPattern.fillStyle = color;\n        contextPattern.fillRect(0, 0, canvasPattern.width, canvasPattern.height);\n        //stroke color for hatch pattern\n        contextPattern.strokeStyle = 'black';\n        let angle = -(Math.PI / 2);\n        let lineWidth = baseStroke;\n        //lineWidth = Math.min(lineWidth, spacing * 0.8);\n        contextPattern.lineWidth = lineWidth;\n        //hatch pattern drawn to off-screen context\n        for(let y = 0; y < canvasPattern.height + spacing; y += spacing)for(let x = 0; x < canvasPattern.width + spacing; x += spacing){\n            contextPattern.beginPath();\n            const startX = x;\n            const startY = y;\n            contextPattern.moveTo(startX, startY);\n            contextPattern.lineTo(x + spacing * Math.cos(angle), y + spacing * Math.sin(angle));\n            contextPattern.stroke();\n        }\n    }\n    const pattern = context.createPattern(canvasPattern, 'repeat');\n    return pattern;\n};\nconst $42aaec2867bae1b8$var$renderHatch = (context, building, screenHeight, canvasPattern)=>{\n    context.fillStyle = canvasPattern;\n    const vOffset = screenHeight - building.y;\n    context.fillRect(building.x, vOffset, building.width, -building.height);\n};\nconst $42aaec2867bae1b8$var$generateBackground = (context, width, height, color)=>{\n    const margin = 1 / 4;\n    // Fill rectangle\n    const backgroundColor = `rgb(${$42aaec2867bae1b8$var$params.backgroundR}, ${$42aaec2867bae1b8$var$params.backgroundG}, ${$42aaec2867bae1b8$var$params.backgroundB})`;\n    context.fillStyle = color ? color : backgroundColor;\n    context.fillRect(margin, margin, width - margin * 2, height - margin * 2);\n};\nfunction $42aaec2867bae1b8$var$downloadCanvasAsPNG() {\n    // Assuming your canvas-sketch canvas has an id or you can fetch it another way\n    const canvas = document.querySelector('canvas'); // Adjust selector as needed\n    if (!canvas) {\n        console.error('Canvas not found');\n        return;\n    }\n    // Create a PNG URL from the canvas\n    const imageURL = canvas.toDataURL('image/png').replace(\"image/png\", \"image/octet-stream\");\n    // Create a temporary link element and trigger the download\n    const downloadLink = document.createElement('a');\n    downloadLink.href = imageURL;\n    // You can set the default file name for the download like this\n    downloadLink.download = 'canvas-sketch-export.png';\n    // Append the link to the document, trigger click, and remove it\n    document.body.appendChild(downloadLink);\n    downloadLink.click();\n    document.body.removeChild(downloadLink);\n}\n\n\n//# sourceMappingURL=skyline-generator.715cfa00.js.map\n","// A port of an algorithm by Johannes Baage <baagoe@baagoe.com>, 2010\n// http://baagoe.com/en/RandomMusings/javascript/\n// https://github.com/nquinlan/better-random-numbers-for-javascript-mirror\n// Original work is under MIT license -\n\n// Copyright (C) 2010 by Johannes Baage <baagoe@baagoe.org>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n(function(global, module, define) {\n\nfunction Alea(seed) {\n  var me = this, mash = Mash();\n\n  me.next = function() {\n    var t = 2091639 * me.s0 + me.c * 2.3283064365386963e-10; // 2^-32\n    me.s0 = me.s1;\n    me.s1 = me.s2;\n    return me.s2 = t - (me.c = t | 0);\n  };\n\n  // Apply the seeding algorithm from Baagoe.\n  me.c = 1;\n  me.s0 = mash(' ');\n  me.s1 = mash(' ');\n  me.s2 = mash(' ');\n  me.s0 -= mash(seed);\n  if (me.s0 < 0) { me.s0 += 1; }\n  me.s1 -= mash(seed);\n  if (me.s1 < 0) { me.s1 += 1; }\n  me.s2 -= mash(seed);\n  if (me.s2 < 0) { me.s2 += 1; }\n  mash = null;\n}\n\nfunction copy(f, t) {\n  t.c = f.c;\n  t.s0 = f.s0;\n  t.s1 = f.s1;\n  t.s2 = f.s2;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new Alea(seed),\n      state = opts && opts.state,\n      prng = xg.next;\n  prng.int32 = function() { return (xg.next() * 0x100000000) | 0; }\n  prng.double = function() {\n    return prng() + (prng() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53\n  };\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nfunction Mash() {\n  var n = 0xefc8249d;\n\n  var mash = function(data) {\n    data = String(data);\n    for (var i = 0; i < data.length; i++) {\n      n += data.charCodeAt(i);\n      var h = 0.02519603282416938 * n;\n      n = h >>> 0;\n      h -= n;\n      h *= n;\n      n = h >>> 0;\n      h -= n;\n      n += h * 0x100000000; // 2^32\n    }\n    return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n  };\n\n  return mash;\n}\n\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.alea = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xor128\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n\n  // Set up generator function.\n  me.next = function() {\n    var t = me.x ^ (me.x << 11);\n    me.x = me.y;\n    me.y = me.z;\n    me.z = me.w;\n    return me.w ^= (me.w >>> 19) ^ t ^ (t >>> 8);\n  };\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor128 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xorwow\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var t = (me.x ^ (me.x >>> 2));\n    me.x = me.y; me.y = me.z; me.z = me.w; me.w = me.v;\n    return (me.d = (me.d + 362437 | 0)) +\n       (me.v = (me.v ^ (me.v << 4)) ^ (t ^ (t << 1))) | 0;\n  };\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n  me.v = 0;\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    if (k == strseed.length) {\n      me.d = me.x << 10 ^ me.x >>> 4;\n    }\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  t.v = f.v;\n  t.d = f.d;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorwow = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xorshift7\" algorithm by\n// Franois Panneton and Pierre L'ecuyer:\n// \"On the Xorgshift Random Number Generators\"\n// http://saluc.engr.uconn.edu/refs/crypto/rng/panneton05onthexorshift.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    // Update xor generator.\n    var X = me.x, i = me.i, t, v, w;\n    t = X[i]; t ^= (t >>> 7); v = t ^ (t << 24);\n    t = X[(i + 1) & 7]; v ^= t ^ (t >>> 10);\n    t = X[(i + 3) & 7]; v ^= t ^ (t >>> 3);\n    t = X[(i + 4) & 7]; v ^= t ^ (t << 7);\n    t = X[(i + 7) & 7]; t = t ^ (t << 13); v ^= t ^ (t << 9);\n    X[i] = v;\n    me.i = (i + 1) & 7;\n    return v;\n  };\n\n  function init(me, seed) {\n    var j, w, X = [];\n\n    if (seed === (seed | 0)) {\n      // Seed state array using a 32-bit integer.\n      w = X[0] = seed;\n    } else {\n      // Seed state using a string.\n      seed = '' + seed;\n      for (j = 0; j < seed.length; ++j) {\n        X[j & 7] = (X[j & 7] << 15) ^\n            (seed.charCodeAt(j) + X[(j + 1) & 7] << 13);\n      }\n    }\n    // Enforce an array length of 8, not all zeroes.\n    while (X.length < 8) X.push(0);\n    for (j = 0; j < 8 && X[j] === 0; ++j);\n    if (j == 8) w = X[7] = -1; else w = X[j];\n\n    me.x = X;\n    me.i = 0;\n\n    // Discard an initial 256 values.\n    for (j = 256; j > 0; --j) {\n      me.next();\n    }\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.x = f.x.slice();\n  t.i = f.i;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.x) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorshift7 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n","// A Javascript implementaion of Richard Brent's Xorgens xor4096 algorithm.\n//\n// This fast non-cryptographic random number generator is designed for\n// use in Monte-Carlo algorithms. It combines a long-period xorshift\n// generator with a Weyl generator, and it passes all common batteries\n// of stasticial tests for randomness while consuming only a few nanoseconds\n// for each prng generated.  For background on the generator, see Brent's\n// paper: \"Some long-period random number generators using shifts and xors.\"\n// http://arxiv.org/pdf/1004.3115v1.pdf\n//\n// Usage:\n//\n// var xor4096 = require('xor4096');\n// random = xor4096(1);                        // Seed with int32 or string.\n// assert.equal(random(), 0.1520436450538547); // (0, 1) range, 53 bits.\n// assert.equal(random.int32(), 1806534897);   // signed int32, 32 bits.\n//\n// For nonzero numeric keys, this impelementation provides a sequence\n// identical to that by Brent's xorgens 3 implementaion in C.  This\n// implementation also provides for initalizing the generator with\n// string seeds, or for saving and restoring the state of the generator.\n//\n// On Chrome, this prng benchmarks about 2.1 times slower than\n// Javascript's built-in Math.random().\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    var w = me.w,\n        X = me.X, i = me.i, t, v;\n    // Update Weyl generator.\n    me.w = w = (w + 0x61c88647) | 0;\n    // Update xor generator.\n    v = X[(i + 34) & 127];\n    t = X[i = ((i + 1) & 127)];\n    v ^= v << 13;\n    t ^= t << 17;\n    v ^= v >>> 15;\n    t ^= t >>> 12;\n    // Update Xor generator array state.\n    v = X[i] = v ^ t;\n    me.i = i;\n    // Result is the combination.\n    return (v + (w ^ (w >>> 16))) | 0;\n  };\n\n  function init(me, seed) {\n    var t, v, i, j, w, X = [], limit = 128;\n    if (seed === (seed | 0)) {\n      // Numeric seeds initialize v, which is used to generates X.\n      v = seed;\n      seed = null;\n    } else {\n      // String seeds are mixed into v and X one character at a time.\n      seed = seed + '\\0';\n      v = 0;\n      limit = Math.max(limit, seed.length);\n    }\n    // Initialize circular array and weyl value.\n    for (i = 0, j = -32; j < limit; ++j) {\n      // Put the unicode characters into the array, and shuffle them.\n      if (seed) v ^= seed.charCodeAt((j + 32) % seed.length);\n      // After 32 shuffles, take v as the starting w value.\n      if (j === 0) w = v;\n      v ^= v << 10;\n      v ^= v >>> 15;\n      v ^= v << 4;\n      v ^= v >>> 13;\n      if (j >= 0) {\n        w = (w + 0x61c88647) | 0;     // Weyl.\n        t = (X[j & 127] ^= (v + w));  // Combine xor and weyl to init array.\n        i = (0 == t) ? i + 1 : 0;     // Count zeroes.\n      }\n    }\n    // We have detected all zeroes; make the key nonzero.\n    if (i >= 128) {\n      X[(seed && seed.length || 0) & 127] = -1;\n    }\n    // Run the generator 512 times to further mix the state before using it.\n    // Factoring this as a function slows the main generator, so it is just\n    // unrolled here.  The weyl generator is not advanced while warming up.\n    i = 127;\n    for (j = 4 * 128; j > 0; --j) {\n      v = X[(i + 34) & 127];\n      t = X[i = ((i + 1) & 127)];\n      v ^= v << 13;\n      t ^= t << 17;\n      v ^= v >>> 15;\n      t ^= t >>> 12;\n      X[i] = v ^ t;\n    }\n    // Storing state as object members is faster than using closure variables.\n    me.w = w;\n    me.X = X;\n    me.i = i;\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.i = f.i;\n  t.w = f.w;\n  t.X = f.X.slice();\n  return t;\n};\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.X) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor4096 = impl;\n}\n\n})(\n  this,                                     // window object or global\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n","// A Javascript implementaion of the \"Tyche-i\" prng algorithm by\n// Samuel Neves and Filipe Araujo.\n// See https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var b = me.b, c = me.c, d = me.d, a = me.a;\n    b = (b << 25) ^ (b >>> 7) ^ c;\n    c = (c - d) | 0;\n    d = (d << 24) ^ (d >>> 8) ^ a;\n    a = (a - b) | 0;\n    me.b = b = (b << 20) ^ (b >>> 12) ^ c;\n    me.c = c = (c - d) | 0;\n    me.d = (d << 16) ^ (c >>> 16) ^ a;\n    return me.a = (a - b) | 0;\n  };\n\n  /* The following is non-inverted tyche, which has better internal\n   * bit diffusion, but which is about 25% slower than tyche-i in JS.\n  me.next = function() {\n    var a = me.a, b = me.b, c = me.c, d = me.d;\n    a = (me.a + me.b | 0) >>> 0;\n    d = me.d ^ a; d = d << 16 ^ d >>> 16;\n    c = me.c + d | 0;\n    b = me.b ^ c; b = b << 12 ^ d >>> 20;\n    me.a = a = a + b | 0;\n    d = d ^ a; me.d = d = d << 8 ^ d >>> 24;\n    me.c = c = c + d | 0;\n    b = b ^ c;\n    return me.b = (b << 7 ^ b >>> 25);\n  }\n  */\n\n  me.a = 0;\n  me.b = 0;\n  me.c = 2654435769 | 0;\n  me.d = 1367130551;\n\n  if (seed === Math.floor(seed)) {\n    // Integer seed.\n    me.a = (seed / 0x100000000) | 0;\n    me.b = seed | 0;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 20; k++) {\n    me.b ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.a = f.a;\n  t.b = f.b;\n  t.c = f.c;\n  t.d = f.d;\n  return t;\n};\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.tychei = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","\"use strict\";","const canvasSketch = require('canvas-sketch');\nconst { mapRange } = require('canvas-sketch-util/math');\nconst { noise1D } = require('canvas-sketch-util/random');\nconst Tweakpane = require('tweakpane');\nconst seedrandom = require('seedrandom');\n\nconst lerpColor = (color1, color2, t) => {\n    const r = color1.r + t * (color2.r - color1.r);\n    const g = color1.g + t * (color2.g - color1.g);\n    const b = color1.b + t * (color2.b - color1.b);\n    return { r, g, b };\n};\n\nconst targetWidthInches = 8;\nconst targetHeightInches = 6;\n\nconst inchesToPixels = (inches, targetDPI) => {\n    return inches * targetDPI;\n}\n\nconst targetDPI = 300;\nconst settings = {\n    dimensions: [inchesToPixels(targetWidthInches, targetDPI), inchesToPixels(targetHeightInches, targetDPI)],\n    scaleToView: true,\n    animate: true,\n    context: '2d'\n};\n\nconst params = {\n    layers: 7,\n    height: 0.75,\n    width: 0.05,\n    seed: 42,\n    colorSeed: 42,\n    r1: 60,\n    g1: 60,\n    b1: 60,\n    r2: 255,\n    g2: 255,\n    b2: 255,\n    backgroundR: 222,\n    backgroundG: 202,\n    backgroundB: 180\n}\n\nlet shouldAnimate = false;\nlet shouldRepaint = false;\nlet useRandomColor = false;\n\n\n\nconst sketch = ({ context, width, height }) => {\n\n    window.addEventListener('resize', () => {\n    shouldRepaint = true;\n    // Redraw your canvas here\n    // canvas.width = window.innerWidth;\n    // canvas.height = window.innerHeight;\n });\n\n    generateBackground(context, width, height)\n    let skyline = new Skyline(height, width, params.layers, params.width, params.height, params.seed, params.colorSeed);\n    skyline.drawCanvas(context);\n\n    return ({ context, width, height}) => {\n        if (shouldAnimate) {\n            generateBackground(context, width, height)\n            skyline = new Skyline(height, width, params.layers, params.width, params.height, params.seed, params.colorSeed);\n            shouldAnimate = false;\n\n            try {\n                skyline.drawCanvas(context, params.colorSeed);\n            }\n            catch (e) {\n                console.log(e);\n            }\n            return;\n        }\n\n        if(shouldRepaint){\n            shouldRepaint = false;       \n            generateBackground(context, width, height)\n            skyline.drawCanvas(context, params.colorSeed);\n        }\n    };\n};\n\nconst createPane = () => {\n    const pane = new Tweakpane.Pane();\n    let folder;\n\n    let mainFolder = pane.addFolder({ title: 'skyline-generator' })\n\n    folder = mainFolder.addFolder({ title: 'Shape' });\n    folder.addInput(params, 'layers', { min: 2, max: 20, step: 1 }).on('change', (value) => {\n        shouldAnimate = true;\n    });\n    folder.addInput(params, 'height', { min: 0.25, max: 1.0, step: 0.1 }).on('change', (value) => {\n        shouldAnimate = true;\n    });\n\n    folder.addInput(params, 'width', { min: 0.05, max: 0.2, step: 0.01 }).on('change', (value) => {\n        shouldAnimate = true;\n    });\n\n    folder.addInput(params, 'seed', { min: 0.0, max: 45.0, step: 1.0 }).on('change', (value) => {\n        shouldAnimate = true;\n    });\n\n    folder = mainFolder.addFolder({ title: 'Color' });\n\n    // Add a button to the pane\n    folder.addButton({ title: 'Random color?' }).on('click', (value) => {\n        useRandomColor = !useRandomColor;\n        shouldRepaint = true;\n    });\n\n    folder.addInput(params, 'colorSeed', { min: 0.0, max: 100.0, step: 1.0 }).on('change', (value) => {\n        shouldRepaint = true; \n        useRandomColor = true;\n    });\n\n\n    folder = mainFolder.addFolder({ title: 'Blended Colors' });\n    folder = folder.addFolder({ title: 'Color 1' });\n\n    folder.addInput(params, 'r1', { min: 0, max: 255, step: 1, label: 'Red' }).on('change', () => {\n        shouldRepaint = true;\n        useRandomColor = false;\n    });\n    folder.addInput(params, 'g1', { min: 0, max: 255, step: 1, label: 'Green' }).on('change', () => {\n        shouldRepaint = true;\n        useRandomColor = false;\n    });\n    folder.addInput(params, 'b1', { min: 0, max: 255, step: 1, label: 'Blue' }).on('change', () => {\n        shouldRepaint = true;\n        useRandomColor = false;\n    });\n\n\n    folder = folder.addFolder({ title: 'Color2' });\n\n    folder.addInput(params, 'r2', { min: 0, max: 255, step: 1, label: 'Red' }).on('change', () => {\n        shouldRepaint = true;\n        useRandomColor = false;\n    });\n    folder.addInput(params, 'g2', { min: 0, max: 255, step: 1, label: 'Green' }).on('change', () => {\n        shouldRepaint = true;\n        useRandomColor = false;\n    });\n    folder.addInput(params, 'b2', { min: 0, max: 255, step: 1, label: 'Blue' }).on('change', () => {\n        shouldRepaint = true;\n        useRandomColor = false;\n    });\n\n    folder = mainFolder.addFolder({ title: 'Background Color' });\n\n    folder.addInput(params, 'backgroundR', { min: 0, max: 255, step: 1, label: 'Red' }).on('change', () => {\n        shouldRepaint = true;\n    });\n    folder.addInput(params, 'backgroundG', { min: 0, max: 255, step: 1, label: 'Green' }).on('change', () => {\n        shouldRepaint = true;\n    });\n    folder.addInput(params, 'backgroundB', { min: 0, max: 255, step: 1, label: 'Blue' }).on('change', () => {\n        shouldRepaint = true;\n    });\n\n    // Add a button to the pane\n    mainFolder.addButton({ title: 'Download PNG' }).on('click', () => {\n        downloadCanvasAsPNG();\n    });\n\n    return pane;\n}\n\ncreatePane();\n\nwindow.addEventListener('resize', () => {\n    shouldRepaint = true;\n    // Redraw your canvas here\n    // canvas.width = window.innerWidth;\n    // canvas.height = window.innerHeight;\n });\n//\n// //  Make the pane draggable\n// let isDragging = false;\n// let startX = 0;\n// let startY = 0;\n\n// // The element that you'll be dragging\n// const paneElement = pane.element; // This is the default container element of Tweakpane\n\n// let dragOffsetX = 0;\n// let dragOffsetY = 0;\n\n// paneElement.addEventListener('mousedown', function(e) {\n//   // Only start drag if the primary mouse button is pressed\n//   if (e.button !== 0) return;\n\n//   console.log({e, paneElement})\n\n//   isDragging = true;\n//   dragOffsetX = e.clientX - paneElement.getBoundingClientRect().left;\n//   dragOffsetY = e.clientY - paneElement.getBoundingClientRect().top;\n//   paneElement.style.cursor = 'grabbing';\n\n//   // Prevent default dragging behavior for images or text selections\n//   e.preventDefault();\n// });\n\n// document.addEventListener('mousemove', function(e) {\n//   if (!isDragging) return;\n//   paneElement.style.position = 'absolute';\n//   paneElement.style.left = e.clientX - dragOffsetX + 'px';\n//   paneElement.style.top = e.clientY - dragOffsetY + 'px';\n// });\n\n// document.addEventListener('mouseup', function() {\n//   if (isDragging) {\n//     isDragging = false;\n//     paneElement.style.cursor = 'grab';\n//   }\n// });\n\ncanvasSketch(sketch, settings);\n\nclass Building {\n    constructor(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n}\nclass Skyline {\n\n    buildings = [];\n    constructor(screenHeight, screenWidth, layers, widthMultiplier, heightMultiplier, seed) {\n        this.seed = seedrandom(seed);\n        this.screenHeight = screenHeight;\n        this.screenWidth = screenWidth;\n        this.layers = layers;\n\n        this.allCells = [...Array(this.sizeX)].map(e => Array(this.sizeX).fill(this.originalCell));\n\n        this.minBuildingWidth = 50 * widthMultiplier;\n        this.maxBuildingWidth = screenWidth * widthMultiplier;\n\n        this.minBuildingHeight = 10 * heightMultiplier;\n        this.maxBuildingHeight = screenHeight * heightMultiplier;\n\n        this.generate();\n    }\n\n    generateLayer(heightRange, widthRange) {\n\n        const { minHeight, maxHeight } = heightRange;\n        const { minWidth, maxWidth } = widthRange;\n        const bldgs = [];\n\n        let x = 0;\n        while (x <= this.screenWidth) {\n            const rW = this.seed();\n            const rH = this.seed();\n            const bWidth = mapRange(rW, 0, 1.0, minWidth, maxWidth);\n            let bHeight = mapRange(rH, 0, 1.0, minHeight, maxHeight);\n\n            const n = (noise1D(x, maxWidth * 0.2, maxHeight * 0.25));\n            bHeight += n;\n            const bldg = new Building(x, 0, bWidth, bHeight);\n            bldgs.push(bldg);\n            x += bWidth;\n        }\n        return bldgs;\n    }\n\n    generate() {\n        this.buildings = [...Array(this.layers)].map((e, i) => {\n            const multiplier = i / (this.layers);\n            const heightRange = { minHeight: this.minBuildingHeight * multiplier, maxHeight: this.maxBuildingHeight * multiplier }\n            const widthRange = { minWidth: this.minBuildingWidth, maxWidth: this.maxBuildingWidth }\n            return this.generateLayer(heightRange, widthRange);\n        });\n    }\n\n    drawCanvas(context, colorSeed) {\n        this.colorSeed = seedrandom(colorSeed)\n        context.save();\n\n        const bldgs = this.buildings.slice().reverse();\n        bldgs.forEach((layer, index) => {\n\n            const t = index / (this.buildings.length ?? 1)\n            const c = lerpColor(\n                { r: params.r1, g: params.g1, b: params.b1 },\n                { r: params.r2, g: params.g2, b: params.b2 },\n                t\n            );\n\n            const red = Math.floor(this.colorSeed() * 256);\n            const green = Math.floor(this.colorSeed() * 256);\n            const blue = Math.floor(this.colorSeed() * 256);\n\n            const color = useRandomColor\n                ? `rgb(${red}, ${green}, ${blue})`\n                : `rgb(${c.r}, ${c.g}, ${c.b})`;\n            layer.forEach(x => this.drawBuilding(context, x, color, t))\n        })\n\n        context.restore();\n    }\n\n    drawBuilding(context, building, color, lightenPercent) {\n        context.lineWidth = 1\n        context.strokeStyle = 'black'\n        context.fillStyle = color\n\n        const vOffset = this.screenHeight - building.y\n        context.strokeRect(building.x, vOffset, building.width, -building.height);\n        context.fillRect(building.x, vOffset, building.width, -building.height);\n\n        const baseStroke = 0.5;\n        const baseSpacing = 20;\n        let usableSpacing = Math.max(1, (1 - lightenPercent) * baseSpacing);\n        const horizontalPattern = horizontalCanvasPattern(context, baseStroke, color, usableSpacing)\n        const verticalPattern = verticalCanvasPattern(context, baseStroke, color, usableSpacing)\n        const pat = this.colorSeed() > 0.5  ? horizontalPattern : verticalPattern;\n        renderHatch(context, building, this.screenHeight, pat)\n    }\n}\n\nconst horizontalCanvasPattern = (context, baseStroke, color, spacing) => {\n    // off-screen canvas\n    const canvasPattern = document.createElement('canvas');\n    canvasPattern.width = 10;\n    canvasPattern.height = 10;\n    const contextPattern = canvasPattern.getContext('2d');\n    if (contextPattern) {\n        // fill the off-screen canvas with white background\n        contextPattern.fillStyle = color;\n        contextPattern.fillRect(0, 0, canvasPattern.width, canvasPattern.height);\n        //stroke color for hatch pattern\n        contextPattern.strokeStyle = 'black';\n        let angle = -(Math.PI / 4);\n        angle = 0\n        let lineWidth = baseStroke\n        // lineWidth = Math.min(lineWidth, spacing * 0.8);\n        contextPattern.lineWidth = lineWidth;\n\n        //hatch pattern drawn to off-screen context\n        for (let y = 0; y < canvasPattern.height + spacing; y += spacing) {\n            for (let x = 0; x < canvasPattern.width + spacing; x += spacing) {\n                contextPattern.beginPath();\n                const startX = x;\n                const startY = y;\n                contextPattern.moveTo(startX, startY);\n                contextPattern.lineTo(x + spacing * Math.cos(angle), y + spacing * Math.sin(angle));\n                contextPattern.stroke();\n            }\n        }\n    }\n\n    const pattern = context.createPattern(canvasPattern, 'repeat');\n    return pattern;\n}\n\nconst verticalCanvasPattern = (context, baseStroke, color, spacing) => {\n    // off-screen canvas\n    const canvasPattern = document.createElement('canvas');\n    canvasPattern.width = 10;\n    canvasPattern.height = 10;\n    const contextPattern = canvasPattern.getContext('2d');\n    if (contextPattern) {\n        // fill the off-screen canvas with white background\n        contextPattern.fillStyle = color;\n        contextPattern.fillRect(0, 0, canvasPattern.width, canvasPattern.height);\n\n        //stroke color for hatch pattern\n        contextPattern.strokeStyle = 'black';\n        let angle = -(Math.PI / 2);\n        let lineWidth = baseStroke\n        //lineWidth = Math.min(lineWidth, spacing * 0.8);\n        contextPattern.lineWidth = lineWidth;\n\n        //hatch pattern drawn to off-screen context\n        for (let y = 0; y < canvasPattern.height + spacing; y += spacing) {\n            for (let x = 0; x < canvasPattern.width + spacing; x += spacing) {\n                contextPattern.beginPath();\n                const startX = x;\n                const startY = y;\n                contextPattern.moveTo(startX, startY);\n                contextPattern.lineTo(x + spacing * Math.cos(angle), y + spacing * Math.sin(angle));\n                contextPattern.stroke();\n            }\n        }\n    }\n\n    const pattern = context.createPattern(canvasPattern, 'repeat');\n    return pattern;\n}\nconst renderHatch = (\n    context,\n    building,\n    screenHeight,\n    canvasPattern\n) => {\n    context.fillStyle = canvasPattern;\n    const vOffset = screenHeight - building.y\n    context.fillRect(building.x, vOffset, building.width, -building.height);\n};\n\nconst generateBackground = (context, width, height, color) => {\n    const margin = 1 / 4;\n\n    // Fill rectangle\n    const backgroundColor = `rgb(${params.backgroundR}, ${params.backgroundG}, ${params.backgroundB})`;\n    context.fillStyle = color ? color : backgroundColor;\n    context.fillRect(margin, margin, width - margin * 2, height - margin * 2);\n};\n\n\nfunction downloadCanvasAsPNG() {\n    // Assuming your canvas-sketch canvas has an id or you can fetch it another way\n    const canvas = document.querySelector('canvas'); // Adjust selector as needed\n    if (!canvas) {\n        console.error('Canvas not found');\n        return;\n    }\n\n    // Create a PNG URL from the canvas\n    const imageURL = canvas.toDataURL('image/png').replace(\"image/png\", \"image/octet-stream\");\n\n    // Create a temporary link element and trigger the download\n    const downloadLink = document.createElement('a');\n    downloadLink.href = imageURL;\n\n    // You can set the default file name for the download like this\n    downloadLink.download = 'canvas-sketch-export.png';\n\n    // Append the link to the document, trigger click, and remove it\n    document.body.appendChild(downloadLink);\n    downloadLink.click();\n    document.body.removeChild(downloadLink);\n}\n\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.canvasSketch = factory());\n}(this, (function () {\n\n\t/*\n\tobject-assign\n\t(c) Sindre Sorhus\n\t@license MIT\n\t*/\n\t/* eslint-disable no-unused-vars */\n\tvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\n\tfunction toObject(val) {\n\t\tif (val === null || val === undefined) {\n\t\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t\t}\n\n\t\treturn Object(val);\n\t}\n\n\tfunction shouldUseNative() {\n\t\ttry {\n\t\t\tif (!Object.assign) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\t\ttest1[5] = 'de';\n\t\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test2 = {};\n\t\t\tfor (var i = 0; i < 10; i++) {\n\t\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t\t}\n\t\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\t\treturn test2[n];\n\t\t\t});\n\t\t\tif (order2.join('') !== '0123456789') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test3 = {};\n\t\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\t\ttest3[letter] = letter;\n\t\t\t});\n\t\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t} catch (err) {\n\t\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tvar objectAssign = shouldUseNative() ? Object.assign : function (target, source) {\n\t\tvar from;\n\t\tvar to = toObject(target);\n\t\tvar symbols;\n\n\t\tfor (var s = 1; s < arguments.length; s++) {\n\t\t\tfrom = Object(arguments[s]);\n\n\t\t\tfor (var key in from) {\n\t\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\t\tto[key] = from[key];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (getOwnPropertySymbols) {\n\t\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn to;\n\t};\n\n\tvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\tfunction createCommonjsModule(fn, module) {\n\t\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n\t}\n\n\tvar browser =\n\t  commonjsGlobal.performance &&\n\t  commonjsGlobal.performance.now ? function now() {\n\t    return performance.now()\n\t  } : Date.now || function now() {\n\t    return +new Date\n\t  };\n\n\tvar isPromise_1 = isPromise;\n\n\tfunction isPromise(obj) {\n\t  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n\t}\n\n\tvar isDom = isNode;\n\n\tfunction isNode (val) {\n\t  return (!val || typeof val !== 'object')\n\t    ? false\n\t    : (typeof window === 'object' && typeof window.Node === 'object')\n\t      ? (val instanceof window.Node)\n\t      : (typeof val.nodeType === 'number') &&\n\t        (typeof val.nodeName === 'string')\n\t}\n\n\tfunction getClientAPI() {\n\t    return typeof window !== \"undefined\" && window[\"canvas-sketch-cli\"];\n\t}\n\n\tfunction defined() {\n\t    var arguments$1 = arguments;\n\n\t    for (var i = 0;i < arguments.length; i++) {\n\t        if (arguments$1[i] != null) {\n\t            return arguments$1[i];\n\t        }\n\t    }\n\t    return undefined;\n\t}\n\n\tfunction isBrowser() {\n\t    return typeof document !== \"undefined\";\n\t}\n\n\tfunction isWebGLContext(ctx) {\n\t    return ctx && typeof ctx.clear === \"function\" && typeof ctx.clearColor === \"function\" && typeof ctx.bufferData === \"function\";\n\t}\n\n\tfunction is2DContext(ctx) {\n\t    return ctx && typeof ctx.save === \"function\" && typeof ctx.scale === \"function\" && typeof ctx.restore === \"function\";\n\t}\n\n\tfunction isCanvas(element) {\n\t    return isDom(element) && /canvas/i.test(element.nodeName) && typeof element.getContext === \"function\";\n\t}\n\n\tvar keys = createCommonjsModule(function (module, exports) {\n\texports = module.exports = typeof Object.keys === 'function'\n\t  ? Object.keys : shim;\n\n\texports.shim = shim;\n\tfunction shim (obj) {\n\t  var keys = [];\n\t  for (var key in obj) keys.push(key);\n\t  return keys;\n\t}\n\t});\n\tvar keys_1 = keys.shim;\n\n\tvar is_arguments = createCommonjsModule(function (module, exports) {\n\tvar supportsArgumentsClass = (function(){\n\t  return Object.prototype.toString.call(arguments)\n\t})() == '[object Arguments]';\n\n\texports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\n\texports.supported = supported;\n\tfunction supported(object) {\n\t  return Object.prototype.toString.call(object) == '[object Arguments]';\n\t}\n\texports.unsupported = unsupported;\n\tfunction unsupported(object){\n\t  return object &&\n\t    typeof object == 'object' &&\n\t    typeof object.length == 'number' &&\n\t    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n\t    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n\t    false;\n\t}});\n\tvar is_arguments_1 = is_arguments.supported;\n\tvar is_arguments_2 = is_arguments.unsupported;\n\n\tvar deepEqual_1 = createCommonjsModule(function (module) {\n\tvar pSlice = Array.prototype.slice;\n\n\n\n\tvar deepEqual = module.exports = function (actual, expected, opts) {\n\t  if (!opts) opts = {};\n\t  // 7.1. All identical values are equivalent, as determined by ===.\n\t  if (actual === expected) {\n\t    return true;\n\n\t  } else if (actual instanceof Date && expected instanceof Date) {\n\t    return actual.getTime() === expected.getTime();\n\n\t  // 7.3. Other pairs that do not both pass typeof value == 'object',\n\t  // equivalence is determined by ==.\n\t  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n\t    return opts.strict ? actual === expected : actual == expected;\n\n\t  // 7.4. For all other Object pairs, including Array objects, equivalence is\n\t  // determined by having the same number of owned properties (as verified\n\t  // with Object.prototype.hasOwnProperty.call), the same set of keys\n\t  // (although not necessarily the same order), equivalent values for every\n\t  // corresponding key, and an identical 'prototype' property. Note: this\n\t  // accounts for both named and indexed properties on Arrays.\n\t  } else {\n\t    return objEquiv(actual, expected, opts);\n\t  }\n\t};\n\n\tfunction isUndefinedOrNull(value) {\n\t  return value === null || value === undefined;\n\t}\n\n\tfunction isBuffer (x) {\n\t  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n\t  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n\t    return false;\n\t  }\n\t  if (x.length > 0 && typeof x[0] !== 'number') return false;\n\t  return true;\n\t}\n\n\tfunction objEquiv(a, b, opts) {\n\t  var i, key;\n\t  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n\t    return false;\n\t  // an identical 'prototype' property.\n\t  if (a.prototype !== b.prototype) return false;\n\t  //~~~I've managed to break Object.keys through screwy arguments passing.\n\t  //   Converting to array solves the problem.\n\t  if (is_arguments(a)) {\n\t    if (!is_arguments(b)) {\n\t      return false;\n\t    }\n\t    a = pSlice.call(a);\n\t    b = pSlice.call(b);\n\t    return deepEqual(a, b, opts);\n\t  }\n\t  if (isBuffer(a)) {\n\t    if (!isBuffer(b)) {\n\t      return false;\n\t    }\n\t    if (a.length !== b.length) return false;\n\t    for (i = 0; i < a.length; i++) {\n\t      if (a[i] !== b[i]) return false;\n\t    }\n\t    return true;\n\t  }\n\t  try {\n\t    var ka = keys(a),\n\t        kb = keys(b);\n\t  } catch (e) {//happens when one is a string literal and the other isn't\n\t    return false;\n\t  }\n\t  // having the same number of owned properties (keys incorporates\n\t  // hasOwnProperty)\n\t  if (ka.length != kb.length)\n\t    return false;\n\t  //the same set of keys (although not necessarily the same order),\n\t  ka.sort();\n\t  kb.sort();\n\t  //~~~cheap key test\n\t  for (i = ka.length - 1; i >= 0; i--) {\n\t    if (ka[i] != kb[i])\n\t      return false;\n\t  }\n\t  //equivalent values for every corresponding key, and\n\t  //~~~possibly expensive deep test\n\t  for (i = ka.length - 1; i >= 0; i--) {\n\t    key = ka[i];\n\t    if (!deepEqual(a[key], b[key], opts)) return false;\n\t  }\n\t  return typeof a === typeof b;\n\t}\n\t});\n\n\tvar dateformat = createCommonjsModule(function (module, exports) {\n\t/*\n\t * Date Format 1.2.3\n\t * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\n\t * MIT license\n\t *\n\t * Includes enhancements by Scott Trenda <scott.trenda.net>\n\t * and Kris Kowal <cixar.com/~kris.kowal/>\n\t *\n\t * Accepts a date, a mask, or a date and a mask.\n\t * Returns a formatted version of the given date.\n\t * The date defaults to the current date/time.\n\t * The mask defaults to dateFormat.masks.default.\n\t */\n\n\t(function(global) {\n\n\t  var dateFormat = (function() {\n\t      var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZWN]|\"[^\"]*\"|'[^']*'/g;\n\t      var timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g;\n\t      var timezoneClip = /[^-+\\dA-Z]/g;\n\t  \n\t      // Regexes and supporting functions are cached through closure\n\t      return function (date, mask, utc, gmt) {\n\t  \n\t        // You can't provide utc if you skip other args (use the 'UTC:' mask prefix)\n\t        if (arguments.length === 1 && kindOf(date) === 'string' && !/\\d/.test(date)) {\n\t          mask = date;\n\t          date = undefined;\n\t        }\n\t  \n\t        date = date || new Date;\n\t  \n\t        if(!(date instanceof Date)) {\n\t          date = new Date(date);\n\t        }\n\t  \n\t        if (isNaN(date)) {\n\t          throw TypeError('Invalid date');\n\t        }\n\t  \n\t        mask = String(dateFormat.masks[mask] || mask || dateFormat.masks['default']);\n\t  \n\t        // Allow setting the utc/gmt argument via the mask\n\t        var maskSlice = mask.slice(0, 4);\n\t        if (maskSlice === 'UTC:' || maskSlice === 'GMT:') {\n\t          mask = mask.slice(4);\n\t          utc = true;\n\t          if (maskSlice === 'GMT:') {\n\t            gmt = true;\n\t          }\n\t        }\n\t  \n\t        var _ = utc ? 'getUTC' : 'get';\n\t        var d = date[_ + 'Date']();\n\t        var D = date[_ + 'Day']();\n\t        var m = date[_ + 'Month']();\n\t        var y = date[_ + 'FullYear']();\n\t        var H = date[_ + 'Hours']();\n\t        var M = date[_ + 'Minutes']();\n\t        var s = date[_ + 'Seconds']();\n\t        var L = date[_ + 'Milliseconds']();\n\t        var o = utc ? 0 : date.getTimezoneOffset();\n\t        var W = getWeek(date);\n\t        var N = getDayOfWeek(date);\n\t        var flags = {\n\t          d:    d,\n\t          dd:   pad(d),\n\t          ddd:  dateFormat.i18n.dayNames[D],\n\t          dddd: dateFormat.i18n.dayNames[D + 7],\n\t          m:    m + 1,\n\t          mm:   pad(m + 1),\n\t          mmm:  dateFormat.i18n.monthNames[m],\n\t          mmmm: dateFormat.i18n.monthNames[m + 12],\n\t          yy:   String(y).slice(2),\n\t          yyyy: y,\n\t          h:    H % 12 || 12,\n\t          hh:   pad(H % 12 || 12),\n\t          H:    H,\n\t          HH:   pad(H),\n\t          M:    M,\n\t          MM:   pad(M),\n\t          s:    s,\n\t          ss:   pad(s),\n\t          l:    pad(L, 3),\n\t          L:    pad(Math.round(L / 10)),\n\t          t:    H < 12 ? dateFormat.i18n.timeNames[0] : dateFormat.i18n.timeNames[1],\n\t          tt:   H < 12 ? dateFormat.i18n.timeNames[2] : dateFormat.i18n.timeNames[3],\n\t          T:    H < 12 ? dateFormat.i18n.timeNames[4] : dateFormat.i18n.timeNames[5],\n\t          TT:   H < 12 ? dateFormat.i18n.timeNames[6] : dateFormat.i18n.timeNames[7],\n\t          Z:    gmt ? 'GMT' : utc ? 'UTC' : (String(date).match(timezone) || ['']).pop().replace(timezoneClip, ''),\n\t          o:    (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n\t          S:    ['th', 'st', 'nd', 'rd'][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10],\n\t          W:    W,\n\t          N:    N\n\t        };\n\t  \n\t        return mask.replace(token, function (match) {\n\t          if (match in flags) {\n\t            return flags[match];\n\t          }\n\t          return match.slice(1, match.length - 1);\n\t        });\n\t      };\n\t    })();\n\n\t  dateFormat.masks = {\n\t    'default':               'ddd mmm dd yyyy HH:MM:ss',\n\t    'shortDate':             'm/d/yy',\n\t    'mediumDate':            'mmm d, yyyy',\n\t    'longDate':              'mmmm d, yyyy',\n\t    'fullDate':              'dddd, mmmm d, yyyy',\n\t    'shortTime':             'h:MM TT',\n\t    'mediumTime':            'h:MM:ss TT',\n\t    'longTime':              'h:MM:ss TT Z',\n\t    'isoDate':               'yyyy-mm-dd',\n\t    'isoTime':               'HH:MM:ss',\n\t    'isoDateTime':           'yyyy-mm-dd\\'T\\'HH:MM:sso',\n\t    'isoUtcDateTime':        'UTC:yyyy-mm-dd\\'T\\'HH:MM:ss\\'Z\\'',\n\t    'expiresHeaderFormat':   'ddd, dd mmm yyyy HH:MM:ss Z'\n\t  };\n\n\t  // Internationalization strings\n\t  dateFormat.i18n = {\n\t    dayNames: [\n\t      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat',\n\t      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n\t    ],\n\t    monthNames: [\n\t      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec',\n\t      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\n\t    ],\n\t    timeNames: [\n\t      'a', 'p', 'am', 'pm', 'A', 'P', 'AM', 'PM'\n\t    ]\n\t  };\n\n\tfunction pad(val, len) {\n\t  val = String(val);\n\t  len = len || 2;\n\t  while (val.length < len) {\n\t    val = '0' + val;\n\t  }\n\t  return val;\n\t}\n\n\t/**\n\t * Get the ISO 8601 week number\n\t * Based on comments from\n\t * http://techblog.procurios.nl/k/n618/news/view/33796/14863/Calculate-ISO-8601-week-and-year-in-javascript.html\n\t *\n\t * @param  {Object} `date`\n\t * @return {Number}\n\t */\n\tfunction getWeek(date) {\n\t  // Remove time components of date\n\t  var targetThursday = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n\n\t  // Change date to Thursday same week\n\t  targetThursday.setDate(targetThursday.getDate() - ((targetThursday.getDay() + 6) % 7) + 3);\n\n\t  // Take January 4th as it is always in week 1 (see ISO 8601)\n\t  var firstThursday = new Date(targetThursday.getFullYear(), 0, 4);\n\n\t  // Change date to Thursday same week\n\t  firstThursday.setDate(firstThursday.getDate() - ((firstThursday.getDay() + 6) % 7) + 3);\n\n\t  // Check if daylight-saving-time-switch occurred and correct for it\n\t  var ds = targetThursday.getTimezoneOffset() - firstThursday.getTimezoneOffset();\n\t  targetThursday.setHours(targetThursday.getHours() - ds);\n\n\t  // Number of weeks between target Thursday and first Thursday\n\t  var weekDiff = (targetThursday - firstThursday) / (86400000*7);\n\t  return 1 + Math.floor(weekDiff);\n\t}\n\n\t/**\n\t * Get ISO-8601 numeric representation of the day of the week\n\t * 1 (for Monday) through 7 (for Sunday)\n\t * \n\t * @param  {Object} `date`\n\t * @return {Number}\n\t */\n\tfunction getDayOfWeek(date) {\n\t  var dow = date.getDay();\n\t  if(dow === 0) {\n\t    dow = 7;\n\t  }\n\t  return dow;\n\t}\n\n\t/**\n\t * kind-of shortcut\n\t * @param  {*} val\n\t * @return {String}\n\t */\n\tfunction kindOf(val) {\n\t  if (val === null) {\n\t    return 'null';\n\t  }\n\n\t  if (val === undefined) {\n\t    return 'undefined';\n\t  }\n\n\t  if (typeof val !== 'object') {\n\t    return typeof val;\n\t  }\n\n\t  if (Array.isArray(val)) {\n\t    return 'array';\n\t  }\n\n\t  return {}.toString.call(val)\n\t    .slice(8, -1).toLowerCase();\n\t}\n\n\n\t  if (typeof undefined === 'function' && undefined.amd) {\n\t    undefined(function () {\n\t      return dateFormat;\n\t    });\n\t  } else {\n\t    module.exports = dateFormat;\n\t  }\n\t})(commonjsGlobal);\n\t});\n\n\t/*!\n\t * repeat-string <https://github.com/jonschlinkert/repeat-string>\n\t *\n\t * Copyright (c) 2014-2015, Jon Schlinkert.\n\t * Licensed under the MIT License.\n\t */\n\n\t/**\n\t * Results cache\n\t */\n\n\tvar res = '';\n\tvar cache;\n\n\t/**\n\t * Expose `repeat`\n\t */\n\n\tvar repeatString = repeat;\n\n\t/**\n\t * Repeat the given `string` the specified `number`\n\t * of times.\n\t *\n\t * **Example:**\n\t *\n\t * ```js\n\t * var repeat = require('repeat-string');\n\t * repeat('A', 5);\n\t * //=> AAAAA\n\t * ```\n\t *\n\t * @param {String} `string` The string to repeat\n\t * @param {Number} `number` The number of times to repeat the string\n\t * @return {String} Repeated string\n\t * @api public\n\t */\n\n\tfunction repeat(str, num) {\n\t  if (typeof str !== 'string') {\n\t    throw new TypeError('expected a string');\n\t  }\n\n\t  // cover common, quick use cases\n\t  if (num === 1) return str;\n\t  if (num === 2) return str + str;\n\n\t  var max = str.length * num;\n\t  if (cache !== str || typeof cache === 'undefined') {\n\t    cache = str;\n\t    res = '';\n\t  } else if (res.length >= max) {\n\t    return res.substr(0, max);\n\t  }\n\n\t  while (max > res.length && num > 1) {\n\t    if (num & 1) {\n\t      res += str;\n\t    }\n\n\t    num >>= 1;\n\t    str += str;\n\t  }\n\n\t  res += str;\n\t  res = res.substr(0, max);\n\t  return res;\n\t}\n\n\tvar padLeft = function padLeft(str, num, ch) {\n\t  str = str.toString();\n\n\t  if (typeof num === 'undefined') {\n\t    return str;\n\t  }\n\n\t  if (ch === 0) {\n\t    ch = '0';\n\t  } else if (ch) {\n\t    ch = ch.toString();\n\t  } else {\n\t    ch = ' ';\n\t  }\n\n\t  return repeatString(ch, num - str.length) + str;\n\t};\n\n\tvar noop = function () {};\n\tvar link;\n\tvar defaultExts = {\n\t    extension: '',\n\t    prefix: '',\n\t    suffix: ''\n\t};\n\tvar supportedEncodings = ['image/png','image/jpeg','image/webp'];\n\tfunction stream(isStart, opts) {\n\t    if ( opts === void 0 ) opts = {};\n\n\t    return new Promise(function (resolve, reject) {\n\t        opts = objectAssign({}, defaultExts, opts);\n\t        var filename = resolveFilename(Object.assign({}, opts, {\n\t            extension: '',\n\t            frame: undefined\n\t        }));\n\t        var func = isStart ? 'streamStart' : 'streamEnd';\n\t        var client = getClientAPI();\n\t        if (client && client.output && typeof client[func] === 'function') {\n\t            return client[func](objectAssign({}, opts, {\n\t                filename: filename\n\t            })).then(function (ev) { return resolve(ev); });\n\t        } else {\n\t            return resolve({\n\t                filename: filename,\n\t                client: false\n\t            });\n\t        }\n\t    });\n\t}\n\n\tfunction streamStart(opts) {\n\t    if ( opts === void 0 ) opts = {};\n\n\t    return stream(true, opts);\n\t}\n\n\tfunction streamEnd(opts) {\n\t    if ( opts === void 0 ) opts = {};\n\n\t    return stream(false, opts);\n\t}\n\n\tfunction exportCanvas(canvas, opt) {\n\t    if ( opt === void 0 ) opt = {};\n\n\t    var encoding = opt.encoding || 'image/png';\n\t    if (!supportedEncodings.includes(encoding)) \n\t        { throw new Error((\"Invalid canvas encoding \" + encoding)); }\n\t    var extension = (encoding.split('/')[1] || '').replace(/jpeg/i, 'jpg');\n\t    if (extension) \n\t        { extension = (\".\" + extension).toLowerCase(); }\n\t    return {\n\t        extension: extension,\n\t        type: encoding,\n\t        dataURL: canvas.toDataURL(encoding, opt.encodingQuality)\n\t    };\n\t}\n\n\tfunction createBlobFromDataURL(dataURL) {\n\t    return new Promise(function (resolve) {\n\t        var splitIndex = dataURL.indexOf(',');\n\t        if (splitIndex === -1) {\n\t            resolve(new window.Blob());\n\t            return;\n\t        }\n\t        var base64 = dataURL.slice(splitIndex + 1);\n\t        var byteString = window.atob(base64);\n\t        var type = dataURL.slice(0, splitIndex);\n\t        var mimeMatch = /data:([^;]+)/.exec(type);\n\t        var mime = (mimeMatch ? mimeMatch[1] : '') || undefined;\n\t        var ab = new ArrayBuffer(byteString.length);\n\t        var ia = new Uint8Array(ab);\n\t        for (var i = 0;i < byteString.length; i++) {\n\t            ia[i] = byteString.charCodeAt(i);\n\t        }\n\t        resolve(new window.Blob([ab], {\n\t            type: mime\n\t        }));\n\t    });\n\t}\n\n\tfunction saveDataURL(dataURL, opts) {\n\t    if ( opts === void 0 ) opts = {};\n\n\t    return createBlobFromDataURL(dataURL).then(function (blob) { return saveBlob(blob, opts); });\n\t}\n\n\tfunction saveBlob(blob, opts) {\n\t    if ( opts === void 0 ) opts = {};\n\n\t    return new Promise(function (resolve) {\n\t        opts = objectAssign({}, defaultExts, opts);\n\t        var filename = opts.filename;\n\t        var client = getClientAPI();\n\t        if (client && typeof client.saveBlob === 'function' && client.output) {\n\t            return client.saveBlob(blob, objectAssign({}, opts, {\n\t                filename: filename\n\t            })).then(function (ev) { return resolve(ev); });\n\t        } else {\n\t            if (!link) {\n\t                link = document.createElement('a');\n\t                link.style.visibility = 'hidden';\n\t                link.target = '_blank';\n\t            }\n\t            link.download = filename;\n\t            link.href = window.URL.createObjectURL(blob);\n\t            document.body.appendChild(link);\n\t            link.onclick = (function () {\n\t                link.onclick = noop;\n\t                setTimeout(function () {\n\t                    window.URL.revokeObjectURL(blob);\n\t                    if (link.parentElement) \n\t                        { link.parentElement.removeChild(link); }\n\t                    link.removeAttribute('href');\n\t                    resolve({\n\t                        filename: filename,\n\t                        client: false\n\t                    });\n\t                });\n\t            });\n\t            link.click();\n\t        }\n\t    });\n\t}\n\n\tfunction saveFile(data, opts) {\n\t    if ( opts === void 0 ) opts = {};\n\n\t    var parts = Array.isArray(data) ? data : [data];\n\t    var blob = new window.Blob(parts, {\n\t        type: opts.type || ''\n\t    });\n\t    return saveBlob(blob, opts);\n\t}\n\n\tfunction getTimeStamp() {\n\t    var dateFormatStr = \"yyyy.mm.dd-HH.MM.ss\";\n\t    return dateformat(new Date(), dateFormatStr);\n\t}\n\n\tfunction resolveFilename(opt) {\n\t    if ( opt === void 0 ) opt = {};\n\n\t    opt = objectAssign({}, opt);\n\t    if (typeof opt.file === 'function') {\n\t        return opt.file(opt);\n\t    } else if (opt.file) {\n\t        return opt.file;\n\t    }\n\t    var frame = null;\n\t    var extension = '';\n\t    if (typeof opt.extension === 'string') \n\t        { extension = opt.extension; }\n\t    if (typeof opt.frame === 'number') {\n\t        var totalFrames;\n\t        if (typeof opt.totalFrames === 'number') {\n\t            totalFrames = opt.totalFrames;\n\t        } else {\n\t            totalFrames = Math.max(10000, opt.frame);\n\t        }\n\t        frame = padLeft(String(opt.frame), String(totalFrames).length, '0');\n\t    }\n\t    var layerStr = isFinite(opt.totalLayers) && isFinite(opt.layer) && opt.totalLayers > 1 ? (\"\" + (opt.layer)) : '';\n\t    if (frame != null) {\n\t        return [layerStr,frame].filter(Boolean).join('-') + extension;\n\t    } else {\n\t        var defaultFileName = opt.timeStamp;\n\t        return [opt.prefix,opt.name || defaultFileName,layerStr,opt.hash,opt.suffix].filter(Boolean).join('-') + extension;\n\t    }\n\t}\n\n\tvar commonTypos = {\n\t    dimension: 'dimensions',\n\t    animated: 'animate',\n\t    animating: 'animate',\n\t    unit: 'units',\n\t    P5: 'p5',\n\t    pixellated: 'pixelated',\n\t    looping: 'loop',\n\t    pixelPerInch: 'pixels'\n\t};\n\tvar allKeys = ['dimensions','units','pixelsPerInch','orientation','scaleToFit',\n\t    'scaleToView','bleed','pixelRatio','exportPixelRatio','maxPixelRatio','scaleContext',\n\t    'resizeCanvas','styleCanvas','canvas','context','attributes','parent','file',\n\t    'name','prefix','suffix','animate','playing','loop','duration','totalFrames',\n\t    'fps','playbackRate','timeScale','frame','time','flush','pixelated','hotkeys',\n\t    'p5','id','scaleToFitPadding','data','params','encoding','encodingQuality'];\n\tvar checkSettings = function (settings) {\n\t    var keys = Object.keys(settings);\n\t    keys.forEach(function (key) {\n\t        if (key in commonTypos) {\n\t            var actual = commonTypos[key];\n\t            console.warn((\"[canvas-sketch] Could not recognize the setting \\\"\" + key + \"\\\", did you mean \\\"\" + actual + \"\\\"?\"));\n\t        } else if (!allKeys.includes(key)) {\n\t            console.warn((\"[canvas-sketch] Could not recognize the setting \\\"\" + key + \"\\\"\"));\n\t        }\n\t    });\n\t};\n\n\tfunction keyboardShortcuts (opt) {\n\t    if ( opt === void 0 ) opt = {};\n\n\t    var handler = function (ev) {\n\t        if (!opt.enabled()) \n\t            { return; }\n\t        var client = getClientAPI();\n\t        if (ev.keyCode === 83 && !ev.altKey && (ev.metaKey || ev.ctrlKey)) {\n\t            ev.preventDefault();\n\t            opt.save(ev);\n\t        } else if (ev.keyCode === 32) {\n\t            opt.togglePlay(ev);\n\t        } else if (client && !ev.altKey && ev.keyCode === 75 && (ev.metaKey || ev.ctrlKey)) {\n\t            ev.preventDefault();\n\t            opt.commit(ev);\n\t        }\n\t    };\n\t    var attach = function () {\n\t        window.addEventListener('keydown', handler);\n\t    };\n\t    var detach = function () {\n\t        window.removeEventListener('keydown', handler);\n\t    };\n\t    return {\n\t        attach: attach,\n\t        detach: detach\n\t    };\n\t}\n\n\tvar defaultUnits = 'mm';\n\tvar data = [['postcard',101.6,152.4],['poster-small',280,430],['poster',460,610],\n\t    ['poster-large',610,910],['business-card',50.8,88.9],['2r',64,89],['3r',89,127],\n\t    ['4r',102,152],['5r',127,178],['6r',152,203],['8r',203,254],['10r',254,305],['11r',\n\t    279,356],['12r',305,381],['a0',841,1189],['a1',594,841],['a2',420,594],['a3',\n\t    297,420],['a4',210,297],['a5',148,210],['a6',105,148],['a7',74,105],['a8',52,\n\t    74],['a9',37,52],['a10',26,37],['2a0',1189,1682],['4a0',1682,2378],['b0',1000,\n\t    1414],['b1',707,1000],['b1+',720,1020],['b2',500,707],['b2+',520,720],['b3',353,\n\t    500],['b4',250,353],['b5',176,250],['b6',125,176],['b7',88,125],['b8',62,88],\n\t    ['b9',44,62],['b10',31,44],['b11',22,32],['b12',16,22],['c0',917,1297],['c1',\n\t    648,917],['c2',458,648],['c3',324,458],['c4',229,324],['c5',162,229],['c6',114,\n\t    162],['c7',81,114],['c8',57,81],['c9',40,57],['c10',28,40],['c11',22,32],['c12',\n\t    16,22],['half-letter',5.5,8.5,'in'],['letter',8.5,11,'in'],['legal',8.5,14,'in'],\n\t    ['junior-legal',5,8,'in'],['ledger',11,17,'in'],['tabloid',11,17,'in'],['ansi-a',\n\t    8.5,11.0,'in'],['ansi-b',11.0,17.0,'in'],['ansi-c',17.0,22.0,'in'],['ansi-d',\n\t    22.0,34.0,'in'],['ansi-e',34.0,44.0,'in'],['arch-a',9,12,'in'],['arch-b',12,18,\n\t    'in'],['arch-c',18,24,'in'],['arch-d',24,36,'in'],['arch-e',36,48,'in'],['arch-e1',\n\t    30,42,'in'],['arch-e2',26,38,'in'],['arch-e3',27,39,'in']];\n\tvar paperSizes = data.reduce(function (dict, preset) {\n\t    var item = {\n\t        units: preset[3] || defaultUnits,\n\t        dimensions: [preset[1],preset[2]]\n\t    };\n\t    dict[preset[0]] = item;\n\t    dict[preset[0].replace(/-/g, ' ')] = item;\n\t    return dict;\n\t}, {})\n\n\tvar defined$1 = function () {\n\t    for (var i = 0; i < arguments.length; i++) {\n\t        if (arguments[i] !== undefined) return arguments[i];\n\t    }\n\t};\n\n\tvar units = [ 'mm', 'cm', 'm', 'pc', 'pt', 'in', 'ft', 'px' ];\n\n\tvar conversions = {\n\t  // metric\n\t  m: {\n\t    system: 'metric',\n\t    factor: 1\n\t  },\n\t  cm: {\n\t    system: 'metric',\n\t    factor: 1 / 100\n\t  },\n\t  mm: {\n\t    system: 'metric',\n\t    factor: 1 / 1000\n\t  },\n\t  // imperial\n\t  pt: {\n\t    system: 'imperial',\n\t    factor: 1 / 72\n\t  },\n\t  pc: {\n\t    system: 'imperial',\n\t    factor: 1 / 6\n\t  },\n\t  in: {\n\t    system: 'imperial',\n\t    factor: 1\n\t  },\n\t  ft: {\n\t    system: 'imperial',\n\t    factor: 12\n\t  }\n\t};\n\n\tconst anchors = {\n\t  metric: {\n\t    unit: 'm',\n\t    ratio: 1 / 0.0254\n\t  },\n\t  imperial: {\n\t    unit: 'in',\n\t    ratio: 0.0254\n\t  }\n\t};\n\n\tfunction round (value, decimals) {\n\t  return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);\n\t}\n\n\tfunction convertDistance (value, fromUnit, toUnit, opts) {\n\t  if (typeof value !== 'number' || !isFinite(value)) throw new Error('Value must be a finite number');\n\t  if (!fromUnit || !toUnit) throw new Error('Must specify from and to units');\n\n\t  opts = opts || {};\n\t  var pixelsPerInch = defined$1(opts.pixelsPerInch, 96);\n\t  var precision = opts.precision;\n\t  var roundPixel = opts.roundPixel !== false;\n\n\t  fromUnit = fromUnit.toLowerCase();\n\t  toUnit = toUnit.toLowerCase();\n\n\t  if (units.indexOf(fromUnit) === -1) throw new Error('Invalid from unit \"' + fromUnit + '\", must be one of: ' + units.join(', '));\n\t  if (units.indexOf(toUnit) === -1) throw new Error('Invalid from unit \"' + toUnit + '\", must be one of: ' + units.join(', '));\n\n\t  if (fromUnit === toUnit) {\n\t    // We don't need to convert from A to B since they are the same already\n\t    return value;\n\t  }\n\n\t  var toFactor = 1;\n\t  var fromFactor = 1;\n\t  var isToPixel = false;\n\n\t  if (fromUnit === 'px') {\n\t    fromFactor = 1 / pixelsPerInch;\n\t    fromUnit = 'in';\n\t  }\n\t  if (toUnit === 'px') {\n\t    isToPixel = true;\n\t    toFactor = pixelsPerInch;\n\t    toUnit = 'in';\n\t  }\n\n\t  var fromUnitData = conversions[fromUnit];\n\t  var toUnitData = conversions[toUnit];\n\n\t  // source to anchor inside source's system\n\t  var anchor = value * fromUnitData.factor * fromFactor;\n\n\t  // if systems differ, convert one to another\n\t  if (fromUnitData.system !== toUnitData.system) {\n\t    // regular 'm' to 'in' and so forth\n\t    anchor *= anchors[fromUnitData.system].ratio;\n\t  }\n\n\t  var result = anchor / toUnitData.factor * toFactor;\n\t  if (isToPixel && roundPixel) {\n\t    result = Math.round(result);\n\t  } else if (typeof precision === 'number' && isFinite(precision)) {\n\t    result = round(result, precision);\n\t  }\n\t  return result;\n\t}\n\n\tvar convertLength = convertDistance;\n\tvar units_1 = units;\n\tconvertLength.units = units_1;\n\n\tfunction getDimensionsFromPreset(dimensions, unitsTo, pixelsPerInch) {\n\t    if ( unitsTo === void 0 ) unitsTo = 'px';\n\t    if ( pixelsPerInch === void 0 ) pixelsPerInch = 72;\n\n\t    if (typeof dimensions === 'string') {\n\t        var key = dimensions.toLowerCase();\n\t        if (!(key in paperSizes)) {\n\t            throw new Error((\"The dimension preset \\\"\" + dimensions + \"\\\" is not supported or could not be found; try using a4, a3, postcard, letter, etc.\"));\n\t        }\n\t        var preset = paperSizes[key];\n\t        return preset.dimensions.map(function (d) { return convertDistance$1(d, preset.units, unitsTo, pixelsPerInch); });\n\t    } else {\n\t        return dimensions;\n\t    }\n\t}\n\n\tfunction convertDistance$1(dimension, unitsFrom, unitsTo, pixelsPerInch) {\n\t    if ( unitsFrom === void 0 ) unitsFrom = 'px';\n\t    if ( unitsTo === void 0 ) unitsTo = 'px';\n\t    if ( pixelsPerInch === void 0 ) pixelsPerInch = 72;\n\n\t    return convertLength(dimension, unitsFrom, unitsTo, {\n\t        pixelsPerInch: pixelsPerInch,\n\t        precision: 4,\n\t        roundPixel: true\n\t    });\n\t}\n\n\tfunction checkIfHasDimensions(settings) {\n\t    if (!settings.dimensions) \n\t        { return false; }\n\t    if (typeof settings.dimensions === 'string') \n\t        { return true; }\n\t    if (Array.isArray(settings.dimensions) && settings.dimensions.length >= 2) \n\t        { return true; }\n\t    return false;\n\t}\n\n\tfunction getParentSize(props, settings) {\n\t    if (!isBrowser()) {\n\t        return [300,150];\n\t    }\n\t    var element = settings.parent || window;\n\t    if (element === window || element === document || element === document.body) {\n\t        return [window.innerWidth,window.innerHeight];\n\t    } else {\n\t        var ref = element.getBoundingClientRect();\n\t        var width = ref.width;\n\t        var height = ref.height;\n\t        return [width,height];\n\t    }\n\t}\n\n\tfunction resizeCanvas(props, settings) {\n\t    var width, height;\n\t    var styleWidth, styleHeight;\n\t    var canvasWidth, canvasHeight;\n\t    var browser = isBrowser();\n\t    var dimensions = settings.dimensions;\n\t    var hasDimensions = checkIfHasDimensions(settings);\n\t    var exporting = props.exporting;\n\t    var scaleToFit = hasDimensions ? settings.scaleToFit !== false : false;\n\t    var scaleToView = !exporting && hasDimensions ? settings.scaleToView : true;\n\t    if (!browser) \n\t        { scaleToFit = (scaleToView = false); }\n\t    var units = settings.units;\n\t    var pixelsPerInch = typeof settings.pixelsPerInch === 'number' && isFinite(settings.pixelsPerInch) ? settings.pixelsPerInch : 72;\n\t    var bleed = defined(settings.bleed, 0);\n\t    var devicePixelRatio = browser ? window.devicePixelRatio : 1;\n\t    var basePixelRatio = scaleToView ? devicePixelRatio : 1;\n\t    var pixelRatio, exportPixelRatio;\n\t    if (typeof settings.pixelRatio === 'number' && isFinite(settings.pixelRatio)) {\n\t        pixelRatio = settings.pixelRatio;\n\t        exportPixelRatio = defined(settings.exportPixelRatio, pixelRatio);\n\t    } else {\n\t        if (hasDimensions) {\n\t            pixelRatio = basePixelRatio;\n\t            exportPixelRatio = defined(settings.exportPixelRatio, 1);\n\t        } else {\n\t            pixelRatio = devicePixelRatio;\n\t            exportPixelRatio = defined(settings.exportPixelRatio, pixelRatio);\n\t        }\n\t    }\n\t    if (typeof settings.maxPixelRatio === 'number' && isFinite(settings.maxPixelRatio)) {\n\t        pixelRatio = Math.min(settings.maxPixelRatio, pixelRatio);\n\t    }\n\t    if (exporting) {\n\t        pixelRatio = exportPixelRatio;\n\t    }\n\t    var ref = getParentSize(props, settings);\n\t    var parentWidth = ref[0];\n\t    var parentHeight = ref[1];\n\t    var trimWidth, trimHeight;\n\t    if (hasDimensions) {\n\t        var result = getDimensionsFromPreset(dimensions, units, pixelsPerInch);\n\t        var highest = Math.max(result[0], result[1]);\n\t        var lowest = Math.min(result[0], result[1]);\n\t        if (settings.orientation) {\n\t            var landscape = settings.orientation === 'landscape';\n\t            width = landscape ? highest : lowest;\n\t            height = landscape ? lowest : highest;\n\t        } else {\n\t            width = result[0];\n\t            height = result[1];\n\t        }\n\t        trimWidth = width;\n\t        trimHeight = height;\n\t        width += bleed * 2;\n\t        height += bleed * 2;\n\t    } else {\n\t        width = parentWidth;\n\t        height = parentHeight;\n\t        trimWidth = width;\n\t        trimHeight = height;\n\t    }\n\t    var realWidth = width;\n\t    var realHeight = height;\n\t    if (hasDimensions && units) {\n\t        realWidth = convertDistance$1(width, units, 'px', pixelsPerInch);\n\t        realHeight = convertDistance$1(height, units, 'px', pixelsPerInch);\n\t    }\n\t    styleWidth = Math.round(realWidth);\n\t    styleHeight = Math.round(realHeight);\n\t    if (scaleToFit && !exporting && hasDimensions) {\n\t        var aspect = width / height;\n\t        var windowAspect = parentWidth / parentHeight;\n\t        var scaleToFitPadding = defined(settings.scaleToFitPadding, 40);\n\t        var maxWidth = Math.round(parentWidth - scaleToFitPadding * 2);\n\t        var maxHeight = Math.round(parentHeight - scaleToFitPadding * 2);\n\t        if (styleWidth > maxWidth || styleHeight > maxHeight) {\n\t            if (windowAspect > aspect) {\n\t                styleHeight = maxHeight;\n\t                styleWidth = Math.round(styleHeight * aspect);\n\t            } else {\n\t                styleWidth = maxWidth;\n\t                styleHeight = Math.round(styleWidth / aspect);\n\t            }\n\t        }\n\t    }\n\t    canvasWidth = scaleToView ? Math.round(pixelRatio * styleWidth) : Math.round(pixelRatio * realWidth);\n\t    canvasHeight = scaleToView ? Math.round(pixelRatio * styleHeight) : Math.round(pixelRatio * realHeight);\n\t    var viewportWidth = scaleToView ? Math.round(styleWidth) : Math.round(realWidth);\n\t    var viewportHeight = scaleToView ? Math.round(styleHeight) : Math.round(realHeight);\n\t    var scaleX = canvasWidth / width;\n\t    var scaleY = canvasHeight / height;\n\t    return {\n\t        bleed: bleed,\n\t        pixelRatio: pixelRatio,\n\t        width: width,\n\t        height: height,\n\t        dimensions: [width,height],\n\t        units: units || 'px',\n\t        scaleX: scaleX,\n\t        scaleY: scaleY,\n\t        pixelsPerInch: pixelsPerInch,\n\t        viewportWidth: viewportWidth,\n\t        viewportHeight: viewportHeight,\n\t        canvasWidth: canvasWidth,\n\t        canvasHeight: canvasHeight,\n\t        trimWidth: trimWidth,\n\t        trimHeight: trimHeight,\n\t        styleWidth: styleWidth,\n\t        styleHeight: styleHeight\n\t    };\n\t}\n\n\tvar getCanvasContext_1 = getCanvasContext;\n\tfunction getCanvasContext (type, opts) {\n\t  if (typeof type !== 'string') {\n\t    throw new TypeError('must specify type string')\n\t  }\n\n\t  opts = opts || {};\n\n\t  if (typeof document === 'undefined' && !opts.canvas) {\n\t    return null // check for Node\n\t  }\n\n\t  var canvas = opts.canvas || document.createElement('canvas');\n\t  if (typeof opts.width === 'number') {\n\t    canvas.width = opts.width;\n\t  }\n\t  if (typeof opts.height === 'number') {\n\t    canvas.height = opts.height;\n\t  }\n\n\t  var attribs = opts;\n\t  var gl;\n\t  try {\n\t    var names = [ type ];\n\t    // prefix GL contexts\n\t    if (type.indexOf('webgl') === 0) {\n\t      names.push('experimental-' + type);\n\t    }\n\n\t    for (var i = 0; i < names.length; i++) {\n\t      gl = canvas.getContext(names[i], attribs);\n\t      if (gl) return gl\n\t    }\n\t  } catch (e) {\n\t    gl = null;\n\t  }\n\t  return (gl || null) // ensure null on fail\n\t}\n\n\tfunction createCanvasElement() {\n\t    if (!isBrowser()) {\n\t        throw new Error('It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.');\n\t    }\n\t    return document.createElement('canvas');\n\t}\n\n\tfunction createCanvas(settings) {\n\t    if ( settings === void 0 ) settings = {};\n\n\t    var context, canvas;\n\t    var ownsCanvas = false;\n\t    if (settings.canvas !== false) {\n\t        context = settings.context;\n\t        if (!context || typeof context === 'string') {\n\t            var newCanvas = settings.canvas;\n\t            if (!newCanvas) {\n\t                newCanvas = createCanvasElement();\n\t                ownsCanvas = true;\n\t            }\n\t            var type = context || '2d';\n\t            if (typeof newCanvas.getContext !== 'function') {\n\t                throw new Error(\"The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?\");\n\t            }\n\t            context = getCanvasContext_1(type, objectAssign({}, settings.attributes, {\n\t                canvas: newCanvas\n\t            }));\n\t            if (!context) {\n\t                throw new Error((\"Failed at canvas.getContext('\" + type + \"') - the browser may not support this context, or a different context may already be in use with this canvas.\"));\n\t            }\n\t        }\n\t        canvas = context.canvas;\n\t        if (settings.canvas && canvas !== settings.canvas) {\n\t            throw new Error('The { canvas } and { context } settings must point to the same underlying canvas element');\n\t        }\n\t        if (settings.pixelated) {\n\t            context.imageSmoothingEnabled = false;\n\t            context.mozImageSmoothingEnabled = false;\n\t            context.oImageSmoothingEnabled = false;\n\t            context.webkitImageSmoothingEnabled = false;\n\t            context.msImageSmoothingEnabled = false;\n\t            canvas.style['image-rendering'] = 'pixelated';\n\t        }\n\t    }\n\t    return {\n\t        canvas: canvas,\n\t        context: context,\n\t        ownsCanvas: ownsCanvas\n\t    };\n\t}\n\n\tvar SketchManager = function SketchManager() {\n\t    var this$1 = this;\n\n\t    this._settings = {};\n\t    this._props = {};\n\t    this._sketch = undefined;\n\t    this._raf = null;\n\t    this._recordTimeout = null;\n\t    this._lastRedrawResult = undefined;\n\t    this._isP5Resizing = false;\n\t    this._keyboardShortcuts = keyboardShortcuts({\n\t        enabled: function () { return this$1.settings.hotkeys !== false; },\n\t        save: function (ev) {\n\t            if (ev.shiftKey) {\n\t                if (this$1.props.recording) {\n\t                    this$1.endRecord();\n\t                    this$1.run();\n\t                } else \n\t                    { this$1.record(); }\n\t            } else if (!this$1.props.recording) {\n\t                this$1.exportFrame();\n\t            }\n\t        },\n\t        togglePlay: function () {\n\t            if (this$1.props.playing) \n\t                { this$1.pause(); }\n\t             else \n\t                { this$1.play(); }\n\t        },\n\t        commit: function (ev) {\n\t            this$1.exportFrame({\n\t                commit: true\n\t            });\n\t        }\n\t    });\n\t    this._animateHandler = (function () { return this$1.animate(); });\n\t    this._resizeHandler = (function () {\n\t        var changed = this$1.resize();\n\t        if (changed) {\n\t            this$1.render();\n\t        }\n\t    });\n\t};\n\n\tvar prototypeAccessors = { sketch: { configurable: true },settings: { configurable: true },props: { configurable: true } };\n\tprototypeAccessors.sketch.get = function () {\n\t    return this._sketch;\n\t};\n\tprototypeAccessors.settings.get = function () {\n\t    return this._settings;\n\t};\n\tprototypeAccessors.props.get = function () {\n\t    return this._props;\n\t};\n\tSketchManager.prototype._computePlayhead = function _computePlayhead (currentTime, duration) {\n\t    var hasDuration = typeof duration === \"number\" && isFinite(duration);\n\t    return hasDuration ? currentTime / duration : 0;\n\t};\n\tSketchManager.prototype._computeFrame = function _computeFrame (playhead, time, totalFrames, fps) {\n\t    return isFinite(totalFrames) && totalFrames > 1 ? Math.floor(playhead * (totalFrames - 1)) : Math.floor(fps * time);\n\t};\n\tSketchManager.prototype._computeCurrentFrame = function _computeCurrentFrame () {\n\t    return this._computeFrame(this.props.playhead, this.props.time, this.props.totalFrames, this.props.fps);\n\t};\n\tSketchManager.prototype._getSizeProps = function _getSizeProps () {\n\t    var props = this.props;\n\t    return {\n\t        width: props.width,\n\t        height: props.height,\n\t        pixelRatio: props.pixelRatio,\n\t        canvasWidth: props.canvasWidth,\n\t        canvasHeight: props.canvasHeight,\n\t        viewportWidth: props.viewportWidth,\n\t        viewportHeight: props.viewportHeight\n\t    };\n\t};\n\tSketchManager.prototype.run = function run () {\n\t    if (!this.sketch) \n\t        { throw new Error(\"should wait until sketch is loaded before trying to play()\"); }\n\t    if (this.settings.playing !== false) {\n\t        this.play();\n\t    }\n\t    if (typeof this.sketch.dispose === \"function\") {\n\t        console.warn(\"In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()\");\n\t    }\n\t    if (!this.props.started) {\n\t        this._signalBegin();\n\t        this.props.started = true;\n\t    }\n\t    this.tick();\n\t    this.render();\n\t    return this;\n\t};\n\tSketchManager.prototype._cancelTimeouts = function _cancelTimeouts () {\n\t    if (this._raf != null && typeof window !== \"undefined\" && typeof window.cancelAnimationFrame === \"function\") {\n\t        window.cancelAnimationFrame(this._raf);\n\t        this._raf = null;\n\t    }\n\t    if (this._recordTimeout != null) {\n\t        clearTimeout(this._recordTimeout);\n\t        this._recordTimeout = null;\n\t    }\n\t};\n\tSketchManager.prototype.play = function play () {\n\t    var animate = this.settings.animate;\n\t    if (\"animation\" in this.settings) {\n\t        animate = true;\n\t        console.warn(\"[canvas-sketch] { animation } has been renamed to { animate }\");\n\t    }\n\t    if (!animate) \n\t        { return; }\n\t    if (!isBrowser()) {\n\t        console.error(\"[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported\");\n\t        return;\n\t    }\n\t    if (this.props.playing) \n\t        { return; }\n\t    if (!this.props.started) {\n\t        this._signalBegin();\n\t        this.props.started = true;\n\t    }\n\t    this.props.playing = true;\n\t    this._cancelTimeouts();\n\t    this._lastTime = browser();\n\t    this._raf = window.requestAnimationFrame(this._animateHandler);\n\t};\n\tSketchManager.prototype.pause = function pause () {\n\t    if (this.props.recording) \n\t        { this.endRecord(); }\n\t    this.props.playing = false;\n\t    this._cancelTimeouts();\n\t};\n\tSketchManager.prototype.togglePlay = function togglePlay () {\n\t    if (this.props.playing) \n\t        { this.pause(); }\n\t     else \n\t        { this.play(); }\n\t};\n\tSketchManager.prototype.stop = function stop () {\n\t    this.pause();\n\t    this.props.frame = 0;\n\t    this.props.playhead = 0;\n\t    this.props.time = 0;\n\t    this.props.deltaTime = 0;\n\t    this.props.started = false;\n\t    this.render();\n\t};\n\tSketchManager.prototype.record = function record () {\n\t        var this$1 = this;\n\n\t    if (this.props.recording) \n\t        { return; }\n\t    if (!isBrowser()) {\n\t        console.error(\"[canvas-sketch] WARN: Recording from Node.js is not yet supported\");\n\t        return;\n\t    }\n\t    this.stop();\n\t    this.props.playing = true;\n\t    this.props.recording = true;\n\t    var exportOpts = this._createExportOptions({\n\t        sequence: true\n\t    });\n\t    var frameInterval = 1 / this.props.fps;\n\t    this._cancelTimeouts();\n\t    var tick = function () {\n\t        if (!this$1.props.recording) \n\t            { return Promise.resolve(); }\n\t        this$1.props.deltaTime = frameInterval;\n\t        this$1.tick();\n\t        return this$1.exportFrame(exportOpts).then(function () {\n\t            if (!this$1.props.recording) \n\t                { return; }\n\t            this$1.props.deltaTime = 0;\n\t            this$1.props.frame++;\n\t            if (this$1.props.frame < this$1.props.totalFrames) {\n\t                this$1.props.time += frameInterval;\n\t                this$1.props.playhead = this$1._computePlayhead(this$1.props.time, this$1.props.duration);\n\t                this$1._recordTimeout = setTimeout(tick, 0);\n\t            } else {\n\t                console.log(\"Finished recording\");\n\t                this$1._signalEnd();\n\t                this$1.endRecord();\n\t                this$1.stop();\n\t                this$1.run();\n\t            }\n\t        });\n\t    };\n\t    if (!this.props.started) {\n\t        this._signalBegin();\n\t        this.props.started = true;\n\t    }\n\t    if (this.sketch && typeof this.sketch.beginRecord === \"function\") {\n\t        this._wrapContextScale(function (props) { return this$1.sketch.beginRecord(props); });\n\t    }\n\t    streamStart(exportOpts).catch(function (err) {\n\t        console.error(err);\n\t    }).then(function (response) {\n\t        this$1._raf = window.requestAnimationFrame(tick);\n\t    });\n\t};\n\tSketchManager.prototype._signalBegin = function _signalBegin () {\n\t        var this$1 = this;\n\n\t    if (this.sketch && typeof this.sketch.begin === \"function\") {\n\t        this._wrapContextScale(function (props) { return this$1.sketch.begin(props); });\n\t    }\n\t};\n\tSketchManager.prototype._signalEnd = function _signalEnd () {\n\t        var this$1 = this;\n\n\t    if (this.sketch && typeof this.sketch.end === \"function\") {\n\t        this._wrapContextScale(function (props) { return this$1.sketch.end(props); });\n\t    }\n\t};\n\tSketchManager.prototype.endRecord = function endRecord () {\n\t        var this$1 = this;\n\n\t    var wasRecording = this.props.recording;\n\t    this._cancelTimeouts();\n\t    this.props.recording = false;\n\t    this.props.deltaTime = 0;\n\t    this.props.playing = false;\n\t    return streamEnd().catch(function (err) {\n\t        console.error(err);\n\t    }).then(function () {\n\t        if (wasRecording && this$1.sketch && typeof this$1.sketch.endRecord === \"function\") {\n\t            this$1._wrapContextScale(function (props) { return this$1.sketch.endRecord(props); });\n\t        }\n\t    });\n\t};\n\tSketchManager.prototype._createExportOptions = function _createExportOptions (opt) {\n\t        if ( opt === void 0 ) opt = {};\n\n\t    return {\n\t        sequence: opt.sequence,\n\t        save: opt.save,\n\t        fps: this.props.fps,\n\t        frame: opt.sequence ? this.props.frame : undefined,\n\t        file: this.settings.file,\n\t        name: this.settings.name,\n\t        prefix: this.settings.prefix,\n\t        suffix: this.settings.suffix,\n\t        encoding: this.settings.encoding,\n\t        encodingQuality: this.settings.encodingQuality,\n\t        timeStamp: opt.timeStamp || getTimeStamp(),\n\t        totalFrames: isFinite(this.props.totalFrames) ? Math.max(0, this.props.totalFrames) : 1000\n\t    };\n\t};\n\tSketchManager.prototype.exportFrame = function exportFrame (opt) {\n\t        var this$1 = this;\n\t        if ( opt === void 0 ) opt = {};\n\n\t    if (!this.sketch) \n\t        { return Promise.all([]); }\n\t    if (typeof this.sketch.preExport === \"function\") {\n\t        this.sketch.preExport();\n\t    }\n\t    var exportOpts = this._createExportOptions(opt);\n\t    var client = getClientAPI();\n\t    var p = Promise.resolve();\n\t    if (client && opt.commit && typeof client.commit === \"function\") {\n\t        var commitOpts = objectAssign({}, exportOpts);\n\t        var hash = client.commit(commitOpts);\n\t        if (isPromise_1(hash)) \n\t            { p = hash; }\n\t         else \n\t            { p = Promise.resolve(hash); }\n\t    }\n\t    return p.then(function (hash) { return this$1._doExportFrame(objectAssign({}, exportOpts, {\n\t        hash: hash || \"\"\n\t    })); }).then(function (result) {\n\t        if (result.length === 1) \n\t            { return result[0]; }\n\t         else \n\t            { return result; }\n\t    });\n\t};\n\tSketchManager.prototype._doExportFrame = function _doExportFrame (exportOpts) {\n\t        var this$1 = this;\n\t        if ( exportOpts === void 0 ) exportOpts = {};\n\n\t    this._props.exporting = true;\n\t    this.resize();\n\t    var drawResult = this.render();\n\t    var canvas = this.props.canvas;\n\t    if (typeof drawResult === \"undefined\") {\n\t        drawResult = [canvas];\n\t    }\n\t    drawResult = [].concat(drawResult).filter(Boolean);\n\t    drawResult = drawResult.map(function (result) {\n\t        var hasDataObject = typeof result === \"object\" && result && (\"data\" in result || \"dataURL\" in result);\n\t        var data = hasDataObject ? result.data : result;\n\t        var opts = hasDataObject ? objectAssign({}, result, {\n\t            data: data\n\t        }) : {\n\t            data: data\n\t        };\n\t        if (isCanvas(data)) {\n\t            var encoding = opts.encoding || exportOpts.encoding;\n\t            var encodingQuality = defined(opts.encodingQuality, exportOpts.encodingQuality, 0.95);\n\t            var ref = exportCanvas(data, {\n\t                encoding: encoding,\n\t                encodingQuality: encodingQuality\n\t            });\n\t                var dataURL = ref.dataURL;\n\t                var extension = ref.extension;\n\t                var type = ref.type;\n\t            return Object.assign(opts, {\n\t                dataURL: dataURL,\n\t                extension: extension,\n\t                type: type\n\t            });\n\t        } else {\n\t            return opts;\n\t        }\n\t    });\n\t    this._props.exporting = false;\n\t    this.resize();\n\t    this.render();\n\t    return Promise.all(drawResult.map(function (result, i, layerList) {\n\t        var curOpt = objectAssign({\n\t            extension: \"\",\n\t            prefix: \"\",\n\t            suffix: \"\"\n\t        }, exportOpts, result, {\n\t            layer: i,\n\t            totalLayers: layerList.length\n\t        });\n\t        var saveParam = exportOpts.save === false ? false : result.save;\n\t        curOpt.save = saveParam !== false;\n\t        curOpt.filename = resolveFilename(curOpt);\n\t        delete curOpt.encoding;\n\t        delete curOpt.encodingQuality;\n\t        for (var k in curOpt) {\n\t            if (typeof curOpt[k] === \"undefined\") \n\t                { delete curOpt[k]; }\n\t        }\n\t        var savePromise = Promise.resolve({});\n\t        if (curOpt.save) {\n\t            var data = curOpt.data;\n\t            if (curOpt.dataURL) {\n\t                var dataURL = curOpt.dataURL;\n\t                savePromise = saveDataURL(dataURL, curOpt);\n\t            } else {\n\t                savePromise = saveFile(data, curOpt);\n\t            }\n\t        }\n\t        return savePromise.then(function (saveResult) { return Object.assign({}, curOpt, saveResult); });\n\t    })).then(function (ev) {\n\t        var savedEvents = ev.filter(function (e) { return e.save; });\n\t        if (savedEvents.length > 0) {\n\t            var eventWithOutput = savedEvents.find(function (e) { return e.outputName; });\n\t            var isClient = savedEvents.some(function (e) { return e.client; });\n\t            var isStreaming = savedEvents.some(function (e) { return e.stream; });\n\t            var item;\n\t            if (savedEvents.length > 1) \n\t                { item = savedEvents.length; }\n\t             else if (eventWithOutput) \n\t                { item = (eventWithOutput.outputName) + \"/\" + (savedEvents[0].filename); }\n\t             else \n\t                { item = \"\" + (savedEvents[0].filename); }\n\t            var ofSeq = \"\";\n\t            if (exportOpts.sequence) {\n\t                var hasTotalFrames = isFinite(this$1.props.totalFrames);\n\t                ofSeq = hasTotalFrames ? (\" (frame \" + (exportOpts.frame + 1) + \" / \" + (this$1.props.totalFrames) + \")\") : (\" (frame \" + (exportOpts.frame) + \")\");\n\t            } else if (savedEvents.length > 1) {\n\t                ofSeq = \" files\";\n\t            }\n\t            var client = isClient ? \"canvas-sketch-cli\" : \"canvas-sketch\";\n\t            var action = isStreaming ? \"Streaming into\" : \"Exported\";\n\t            console.log((\"%c[\" + client + \"]%c \" + action + \" %c\" + item + \"%c\" + ofSeq), \"color: #8e8e8e;\", \"color: initial;\", \"font-weight: bold;\", \"font-weight: initial;\");\n\t        }\n\t        if (typeof this$1.sketch.postExport === \"function\") {\n\t            this$1.sketch.postExport();\n\t        }\n\t        return ev;\n\t    });\n\t};\n\tSketchManager.prototype._wrapContextScale = function _wrapContextScale (cb) {\n\t    this._preRender();\n\t    cb(this.props);\n\t    this._postRender();\n\t};\n\tSketchManager.prototype._preRender = function _preRender () {\n\t    var props = this.props;\n\t    if (is2DContext(props.context) && !props.p5) {\n\t        props.context.save();\n\t        if (this.settings.scaleContext !== false) {\n\t            props.context.scale(props.scaleX, props.scaleY);\n\t        }\n\t    } else if (props.p5) {\n\t        props.p5.scale(props.scaleX / props.pixelRatio, props.scaleY / props.pixelRatio);\n\t    }\n\t};\n\tSketchManager.prototype._postRender = function _postRender () {\n\t    var props = this.props;\n\t    if (is2DContext(props.context) && !props.p5) {\n\t        props.context.restore();\n\t    }\n\t    if (props.gl && this.settings.flush !== false && !props.p5) {\n\t        props.gl.flush();\n\t    }\n\t};\n\tSketchManager.prototype.tick = function tick () {\n\t    if (this.sketch && typeof this.sketch.tick === \"function\") {\n\t        this._preRender();\n\t        this.sketch.tick(this.props);\n\t        this._postRender();\n\t    }\n\t};\n\tSketchManager.prototype.render = function render () {\n\t    if (this.props.p5) {\n\t        this._lastRedrawResult = undefined;\n\t        this.props.p5.redraw();\n\t        return this._lastRedrawResult;\n\t    } else {\n\t        return this.submitDrawCall();\n\t    }\n\t};\n\tSketchManager.prototype.submitDrawCall = function submitDrawCall () {\n\t    if (!this.sketch) \n\t        { return; }\n\t    var props = this.props;\n\t    this._preRender();\n\t    var drawResult;\n\t    if (typeof this.sketch === \"function\") {\n\t        drawResult = this.sketch(props);\n\t    } else if (typeof this.sketch.render === \"function\") {\n\t        drawResult = this.sketch.render(props);\n\t    }\n\t    this._postRender();\n\t    return drawResult;\n\t};\n\tSketchManager.prototype.update = function update (opt) {\n\t        var this$1 = this;\n\t        if ( opt === void 0 ) opt = {};\n\n\t    var notYetSupported = [\"animate\"];\n\t    Object.keys(opt).forEach(function (key) {\n\t        if (notYetSupported.indexOf(key) >= 0) {\n\t            throw new Error((\"Sorry, the { \" + key + \" } option is not yet supported with update().\"));\n\t        }\n\t    });\n\t    var oldCanvas = this._settings.canvas;\n\t    var oldContext = this._settings.context;\n\t    for (var key in opt) {\n\t        var value = opt[key];\n\t        if (typeof value !== \"undefined\") {\n\t            this$1._settings[key] = value;\n\t        }\n\t    }\n\t    var timeOpts = Object.assign({}, this._settings, opt);\n\t    if (\"time\" in opt && \"frame\" in opt) \n\t        { throw new Error(\"You should specify { time } or { frame } but not both\"); }\n\t     else if (\"time\" in opt) \n\t        { delete timeOpts.frame; }\n\t     else if (\"frame\" in opt) \n\t        { delete timeOpts.time; }\n\t    if (\"duration\" in opt && \"totalFrames\" in opt) \n\t        { throw new Error(\"You should specify { duration } or { totalFrames } but not both\"); }\n\t     else if (\"duration\" in opt) \n\t        { delete timeOpts.totalFrames; }\n\t     else if (\"totalFrames\" in opt) \n\t        { delete timeOpts.duration; }\n\t    if (\"data\" in opt) \n\t        { this._props.data = opt.data; }\n\t    var timeProps = this.getTimeProps(timeOpts);\n\t    Object.assign(this._props, timeProps);\n\t    if (oldCanvas !== this._settings.canvas || oldContext !== this._settings.context) {\n\t        var ref = createCanvas(this._settings);\n\t            var canvas = ref.canvas;\n\t            var context = ref.context;\n\t        this.props.canvas = canvas;\n\t        this.props.context = context;\n\t        this._setupGLKey();\n\t        this._appendCanvasIfNeeded();\n\t    }\n\t    if (opt.p5 && typeof opt.p5 !== \"function\") {\n\t        this.props.p5 = opt.p5;\n\t        this.props.p5.draw = (function () {\n\t            if (this$1._isP5Resizing) \n\t                { return; }\n\t            this$1._lastRedrawResult = this$1.submitDrawCall();\n\t        });\n\t    }\n\t    if (\"playing\" in opt) {\n\t        if (opt.playing) \n\t            { this.play(); }\n\t         else \n\t            { this.pause(); }\n\t    }\n\t    checkSettings(this._settings);\n\t    this.resize();\n\t    this.render();\n\t    return this.props;\n\t};\n\tSketchManager.prototype.resize = function resize () {\n\t    var oldSizes = this._getSizeProps();\n\t    var settings = this.settings;\n\t    var props = this.props;\n\t    var newProps = resizeCanvas(props, settings);\n\t    Object.assign(this._props, newProps);\n\t    var ref = this.props;\n\t        var pixelRatio = ref.pixelRatio;\n\t        var canvasWidth = ref.canvasWidth;\n\t        var canvasHeight = ref.canvasHeight;\n\t        var styleWidth = ref.styleWidth;\n\t        var styleHeight = ref.styleHeight;\n\t    var canvas = this.props.canvas;\n\t    if (canvas && settings.resizeCanvas !== false) {\n\t        if (props.p5) {\n\t            if (canvas.width !== canvasWidth || canvas.height !== canvasHeight) {\n\t                this._isP5Resizing = true;\n\t                props.p5.pixelDensity(pixelRatio);\n\t                props.p5.resizeCanvas(canvasWidth / pixelRatio, canvasHeight / pixelRatio, false);\n\t                this._isP5Resizing = false;\n\t            }\n\t        } else {\n\t            if (canvas.width !== canvasWidth) \n\t                { canvas.width = canvasWidth; }\n\t            if (canvas.height !== canvasHeight) \n\t                { canvas.height = canvasHeight; }\n\t        }\n\t        if (isBrowser() && settings.styleCanvas !== false) {\n\t            canvas.style.width = styleWidth + \"px\";\n\t            canvas.style.height = styleHeight + \"px\";\n\t        }\n\t    }\n\t    var newSizes = this._getSizeProps();\n\t    var changed = !deepEqual_1(oldSizes, newSizes);\n\t    if (changed) {\n\t        this._sizeChanged();\n\t    }\n\t    return changed;\n\t};\n\tSketchManager.prototype._sizeChanged = function _sizeChanged () {\n\t    if (this.sketch && typeof this.sketch.resize === \"function\") {\n\t        this.sketch.resize(this.props);\n\t    }\n\t};\n\tSketchManager.prototype.animate = function animate () {\n\t    if (!this.props.playing) \n\t        { return; }\n\t    if (!isBrowser()) {\n\t        console.error(\"[canvas-sketch] WARN: Animation in Node.js is not yet supported\");\n\t        return;\n\t    }\n\t    this._raf = window.requestAnimationFrame(this._animateHandler);\n\t    var now = browser();\n\t    var fps = this.props.fps;\n\t    var frameIntervalMS = 1000 / fps;\n\t    var deltaTimeMS = now - this._lastTime;\n\t    var duration = this.props.duration;\n\t    var hasDuration = typeof duration === \"number\" && isFinite(duration);\n\t    var isNewFrame = true;\n\t    var playbackRate = this.settings.playbackRate;\n\t    if (playbackRate === \"fixed\") {\n\t        deltaTimeMS = frameIntervalMS;\n\t    } else if (playbackRate === \"throttle\") {\n\t        if (deltaTimeMS > frameIntervalMS) {\n\t            now = now - deltaTimeMS % frameIntervalMS;\n\t            this._lastTime = now;\n\t        } else {\n\t            isNewFrame = false;\n\t        }\n\t    } else {\n\t        this._lastTime = now;\n\t    }\n\t    var deltaTime = deltaTimeMS / 1000;\n\t    var newTime = this.props.time + deltaTime * this.props.timeScale;\n\t    if (newTime < 0 && hasDuration) {\n\t        newTime = duration + newTime;\n\t    }\n\t    var isFinished = false;\n\t    var isLoopStart = false;\n\t    var looping = this.settings.loop !== false;\n\t    if (hasDuration && newTime >= duration) {\n\t        if (looping) {\n\t            isNewFrame = true;\n\t            newTime = newTime % duration;\n\t            isLoopStart = true;\n\t        } else {\n\t            isNewFrame = false;\n\t            newTime = duration;\n\t            isFinished = true;\n\t        }\n\t        this._signalEnd();\n\t    }\n\t    if (isNewFrame) {\n\t        this.props.deltaTime = deltaTime;\n\t        this.props.time = newTime;\n\t        this.props.playhead = this._computePlayhead(newTime, duration);\n\t        var lastFrame = this.props.frame;\n\t        this.props.frame = this._computeCurrentFrame();\n\t        if (isLoopStart) \n\t            { this._signalBegin(); }\n\t        if (lastFrame !== this.props.frame) \n\t            { this.tick(); }\n\t        this.render();\n\t        this.props.deltaTime = 0;\n\t    }\n\t    if (isFinished) {\n\t        this.pause();\n\t    }\n\t};\n\tSketchManager.prototype.dispatch = function dispatch (cb) {\n\t    if (typeof cb !== \"function\") \n\t        { throw new Error(\"must pass function into dispatch()\"); }\n\t    cb(this.props);\n\t    this.render();\n\t};\n\tSketchManager.prototype.mount = function mount () {\n\t    this._appendCanvasIfNeeded();\n\t};\n\tSketchManager.prototype.unmount = function unmount () {\n\t    if (isBrowser()) {\n\t        window.removeEventListener(\"resize\", this._resizeHandler);\n\t        this._keyboardShortcuts.detach();\n\t    }\n\t    if (this.props.canvas.parentElement) {\n\t        this.props.canvas.parentElement.removeChild(this.props.canvas);\n\t    }\n\t};\n\tSketchManager.prototype._appendCanvasIfNeeded = function _appendCanvasIfNeeded () {\n\t    if (!isBrowser()) \n\t        { return; }\n\t    if (this.settings.parent !== false && this.props.canvas && !this.props.canvas.parentElement) {\n\t        var defaultParent = this.settings.parent || document.body;\n\t        defaultParent.appendChild(this.props.canvas);\n\t    }\n\t};\n\tSketchManager.prototype._setupGLKey = function _setupGLKey () {\n\t    if (this.props.context) {\n\t        if (isWebGLContext(this.props.context)) {\n\t            this._props.gl = this.props.context;\n\t        } else {\n\t            delete this._props.gl;\n\t        }\n\t    }\n\t};\n\tSketchManager.prototype.getTimeProps = function getTimeProps (settings) {\n\t        if ( settings === void 0 ) settings = {};\n\n\t    var duration = settings.duration;\n\t    var totalFrames = settings.totalFrames;\n\t    var timeScale = defined(settings.timeScale, 1);\n\t    var fps = defined(settings.fps, 24);\n\t    var hasDuration = typeof duration === \"number\" && isFinite(duration);\n\t    var hasTotalFrames = typeof totalFrames === \"number\" && isFinite(totalFrames);\n\t    var totalFramesFromDuration = hasDuration ? Math.floor(fps * duration) : undefined;\n\t    var durationFromTotalFrames = hasTotalFrames ? totalFrames / fps : undefined;\n\t    if (hasDuration && hasTotalFrames && totalFramesFromDuration !== totalFrames) {\n\t        throw new Error(\"You should specify either duration or totalFrames, but not both. Or, they must match exactly.\");\n\t    }\n\t    if (typeof settings.dimensions === \"undefined\" && typeof settings.units !== \"undefined\") {\n\t        console.warn(\"You've specified a { units } setting but no { dimension }, so the units will be ignored.\");\n\t    }\n\t    totalFrames = defined(totalFrames, totalFramesFromDuration, Infinity);\n\t    duration = defined(duration, durationFromTotalFrames, Infinity);\n\t    var startTime = settings.time;\n\t    var startFrame = settings.frame;\n\t    var hasStartTime = typeof startTime === \"number\" && isFinite(startTime);\n\t    var hasStartFrame = typeof startFrame === \"number\" && isFinite(startFrame);\n\t    var time = 0;\n\t    var frame = 0;\n\t    var playhead = 0;\n\t    if (hasStartTime && hasStartFrame) {\n\t        throw new Error(\"You should specify either start frame or time, but not both.\");\n\t    } else if (hasStartTime) {\n\t        time = startTime;\n\t        playhead = this._computePlayhead(time, duration);\n\t        frame = this._computeFrame(playhead, time, totalFrames, fps);\n\t    } else if (hasStartFrame) {\n\t        frame = startFrame;\n\t        time = frame / fps;\n\t        playhead = this._computePlayhead(time, duration);\n\t    }\n\t    return {\n\t        playhead: playhead,\n\t        time: time,\n\t        frame: frame,\n\t        duration: duration,\n\t        totalFrames: totalFrames,\n\t        fps: fps,\n\t        timeScale: timeScale\n\t    };\n\t};\n\tSketchManager.prototype.setup = function setup (settings) {\n\t        var this$1 = this;\n\t        if ( settings === void 0 ) settings = {};\n\n\t    if (this.sketch) \n\t        { throw new Error(\"Multiple setup() calls not yet supported.\"); }\n\t    this._settings = Object.assign({}, settings, this._settings);\n\t    checkSettings(this._settings);\n\t    var ref = createCanvas(this._settings);\n\t        var context = ref.context;\n\t        var canvas = ref.canvas;\n\t    var timeProps = this.getTimeProps(this._settings);\n\t    this._props = Object.assign({}, timeProps,\n\t        {canvas: canvas,\n\t        context: context,\n\t        deltaTime: 0,\n\t        started: false,\n\t        exporting: false,\n\t        playing: false,\n\t        recording: false,\n\t        settings: this.settings,\n\t        data: this.settings.data,\n\t        render: function () { return this$1.render(); },\n\t        togglePlay: function () { return this$1.togglePlay(); },\n\t        dispatch: function (cb) { return this$1.dispatch(cb); },\n\t        tick: function () { return this$1.tick(); },\n\t        resize: function () { return this$1.resize(); },\n\t        update: function (opt) { return this$1.update(opt); },\n\t        exportFrame: function (opt) { return this$1.exportFrame(opt); },\n\t        record: function () { return this$1.record(); },\n\t        play: function () { return this$1.play(); },\n\t        pause: function () { return this$1.pause(); },\n\t        stop: function () { return this$1.stop(); }});\n\t    this._setupGLKey();\n\t    this.resize();\n\t};\n\tSketchManager.prototype.loadAndRun = function loadAndRun (canvasSketch, newSettings) {\n\t        var this$1 = this;\n\n\t    return this.load(canvasSketch, newSettings).then(function () {\n\t        this$1.run();\n\t        return this$1;\n\t    });\n\t};\n\tSketchManager.prototype.unload = function unload () {\n\t        var this$1 = this;\n\n\t    this.pause();\n\t    if (!this.sketch) \n\t        { return; }\n\t    if (typeof this.sketch.unload === \"function\") {\n\t        this._wrapContextScale(function (props) { return this$1.sketch.unload(props); });\n\t    }\n\t    this._sketch = null;\n\t};\n\tSketchManager.prototype.destroy = function destroy () {\n\t    this.unload();\n\t    this.unmount();\n\t};\n\tSketchManager.prototype.load = function load (createSketch, newSettings) {\n\t        var this$1 = this;\n\n\t    if (typeof createSketch !== \"function\") {\n\t        throw new Error(\"The function must take in a function as the first parameter. Example:\\n  canvasSketcher(() => { ... }, settings)\");\n\t    }\n\t    if (this.sketch) {\n\t        this.unload();\n\t    }\n\t    if (typeof newSettings !== \"undefined\") {\n\t        this.update(newSettings);\n\t    }\n\t    this._preRender();\n\t    var preload = Promise.resolve();\n\t    if (this.settings.p5) {\n\t        if (!isBrowser()) {\n\t            throw new Error(\"[canvas-sketch] ERROR: Using p5.js in Node.js is not supported\");\n\t        }\n\t        preload = new Promise(function (resolve) {\n\t            var P5Constructor = this$1.settings.p5;\n\t            var preload;\n\t            if (P5Constructor.p5) {\n\t                preload = P5Constructor.preload;\n\t                P5Constructor = P5Constructor.p5;\n\t            }\n\t            var p5Sketch = function (p5) {\n\t                if (preload) \n\t                    { p5.preload = (function () { return preload(p5); }); }\n\t                p5.setup = (function () {\n\t                    var props = this$1.props;\n\t                    var isGL = this$1.settings.context === \"webgl\";\n\t                    var renderer = isGL ? p5.WEBGL : p5.P2D;\n\t                    p5.noLoop();\n\t                    p5.pixelDensity(props.pixelRatio);\n\t                    p5.createCanvas(props.viewportWidth, props.viewportHeight, renderer);\n\t                    if (isGL && this$1.settings.attributes) {\n\t                        p5.setAttributes(this$1.settings.attributes);\n\t                    }\n\t                    this$1.update({\n\t                        p5: p5,\n\t                        canvas: p5.canvas,\n\t                        context: p5._renderer.drawingContext\n\t                    });\n\t                    resolve();\n\t                });\n\t            };\n\t            if (typeof P5Constructor === \"function\") {\n\t                new P5Constructor(p5Sketch);\n\t            } else {\n\t                if (typeof window.createCanvas !== \"function\") {\n\t                    throw new Error(\"{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?\\nnew p5(); // <-- attaches to global scope\");\n\t                }\n\t                p5Sketch(window);\n\t            }\n\t        });\n\t    }\n\t    return preload.then(function () {\n\t        var loader = createSketch(this$1.props);\n\t        if (!isPromise_1(loader)) {\n\t            loader = Promise.resolve(loader);\n\t        }\n\t        return loader;\n\t    }).then(function (sketch) {\n\t        if (!sketch) \n\t            { sketch = {}; }\n\t        this$1._sketch = sketch;\n\t        if (isBrowser()) {\n\t            this$1._keyboardShortcuts.attach();\n\t            window.addEventListener(\"resize\", this$1._resizeHandler);\n\t        }\n\t        this$1._postRender();\n\t        this$1._sizeChanged();\n\t        return this$1;\n\t    }).catch(function (err) {\n\t        console.warn(\"Could not start sketch, the async loading function rejected with an error:\\n    Error: \" + err.message);\n\t        throw err;\n\t    });\n\t};\n\n\tObject.defineProperties( SketchManager.prototype, prototypeAccessors );\n\n\tvar CACHE = 'hot-id-cache';\n\tvar runtimeCollisions = [];\n\tfunction isHotReload() {\n\t    var client = getClientAPI();\n\t    return client && client.hot;\n\t}\n\n\tfunction cacheGet(id) {\n\t    var client = getClientAPI();\n\t    if (!client) \n\t        { return undefined; }\n\t    client[CACHE] = client[CACHE] || {};\n\t    return client[CACHE][id];\n\t}\n\n\tfunction cachePut(id, data) {\n\t    var client = getClientAPI();\n\t    if (!client) \n\t        { return undefined; }\n\t    client[CACHE] = client[CACHE] || {};\n\t    client[CACHE][id] = data;\n\t}\n\n\tfunction getTimeProp(oldManager, newSettings) {\n\t    return newSettings.animate ? {\n\t        time: oldManager.props.time\n\t    } : undefined;\n\t}\n\n\tfunction canvasSketch(sketch, settings) {\n\t    if ( settings === void 0 ) settings = {};\n\n\t    if (settings.p5) {\n\t        if (settings.canvas || settings.context && typeof settings.context !== 'string') {\n\t            throw new Error(\"In { p5 } mode, you can't pass your own canvas or context, unless the context is a \\\"webgl\\\" or \\\"2d\\\" string\");\n\t        }\n\t        var context = typeof settings.context === 'string' ? settings.context : false;\n\t        settings = Object.assign({}, settings, {\n\t            canvas: false,\n\t            context: context\n\t        });\n\t    }\n\t    var isHot = isHotReload();\n\t    var hotID;\n\t    if (isHot) {\n\t        hotID = defined(settings.id, '$__DEFAULT_CANVAS_SKETCH_ID__$');\n\t    }\n\t    var isInjecting = isHot && typeof hotID === 'string';\n\t    if (isInjecting && runtimeCollisions.includes(hotID)) {\n\t        console.warn(\"Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. \", hotID);\n\t        isInjecting = false;\n\t    }\n\t    var preload = Promise.resolve();\n\t    if (isInjecting) {\n\t        runtimeCollisions.push(hotID);\n\t        var previousData = cacheGet(hotID);\n\t        if (previousData) {\n\t            var next = function () {\n\t                var newProps = getTimeProp(previousData.manager, settings);\n\t                previousData.manager.destroy();\n\t                return newProps;\n\t            };\n\t            preload = previousData.load.then(next).catch(next);\n\t        }\n\t    }\n\t    return preload.then(function (newProps) {\n\t        var manager = new SketchManager();\n\t        var result;\n\t        if (sketch) {\n\t            settings = Object.assign({}, settings, newProps);\n\t            manager.setup(settings);\n\t            manager.mount();\n\t            result = manager.loadAndRun(sketch);\n\t        } else {\n\t            result = Promise.resolve(manager);\n\t        }\n\t        if (isInjecting) {\n\t            cachePut(hotID, {\n\t                load: result,\n\t                manager: manager\n\t            });\n\t        }\n\t        return result;\n\t    });\n\t}\n\n\tcanvasSketch.canvasSketch = canvasSketch;\n\tcanvasSketch.PaperSizes = paperSizes;\n\n\treturn canvasSketch;\n\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FudmFzLXNrZXRjaC51bWQuanMiLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9vYmplY3QtYXNzaWduL2luZGV4LmpzIiwiLi4vbm9kZV9tb2R1bGVzL3JpZ2h0LW5vdy9icm93c2VyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL2lzLXByb21pc2UvaW5kZXguanMiLCIuLi9ub2RlX21vZHVsZXMvaXMtZG9tL2luZGV4LmpzIiwiLi4vbGliL3V0aWwuanMiLCIuLi9ub2RlX21vZHVsZXMvZGVlcC1lcXVhbC9saWIva2V5cy5qcyIsIi4uL25vZGVfbW9kdWxlcy9kZWVwLWVxdWFsL2xpYi9pc19hcmd1bWVudHMuanMiLCIuLi9ub2RlX21vZHVsZXMvZGVlcC1lcXVhbC9pbmRleC5qcyIsIi4uL25vZGVfbW9kdWxlcy9kYXRlZm9ybWF0L2xpYi9kYXRlZm9ybWF0LmpzIiwiLi4vbm9kZV9tb2R1bGVzL3JlcGVhdC1zdHJpbmcvaW5kZXguanMiLCIuLi9ub2RlX21vZHVsZXMvcGFkLWxlZnQvaW5kZXguanMiLCIuLi9saWIvc2F2ZS5qcyIsIi4uL2xpYi9hY2Nlc3NpYmlsaXR5LmpzIiwiLi4vbGliL2NvcmUva2V5Ym9hcmRTaG9ydGN1dHMuanMiLCIuLi9saWIvcGFwZXItc2l6ZXMuanMiLCIuLi9ub2RlX21vZHVsZXMvZGVmaW5lZC9pbmRleC5qcyIsIi4uL25vZGVfbW9kdWxlcy9jb252ZXJ0LWxlbmd0aC9jb252ZXJ0LWxlbmd0aC5qcyIsIi4uL2xpYi9kaXN0YW5jZXMuanMiLCIuLi9saWIvY29yZS9yZXNpemVDYW52YXMuanMiLCIuLi9ub2RlX21vZHVsZXMvZ2V0LWNhbnZhcy1jb250ZXh0L2luZGV4LmpzIiwiLi4vbGliL2NvcmUvY3JlYXRlQ2FudmFzLmpzIiwiLi4vbGliL2NvcmUvU2tldGNoTWFuYWdlci5qcyIsIi4uL2xpYi9jYW52YXMtc2tldGNoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5vYmplY3QtYXNzaWduXG4oYykgU2luZHJlIFNvcmh1c1xuQGxpY2Vuc2UgTUlUXG4qL1xuXG4ndXNlIHN0cmljdCc7XG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xudmFyIGdldE93blByb3BlcnR5U3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIHByb3BJc0VudW1lcmFibGUgPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xuXG5mdW5jdGlvbiB0b09iamVjdCh2YWwpIHtcblx0aWYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZCkge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdC5hc3NpZ24gY2Fubm90IGJlIGNhbGxlZCB3aXRoIG51bGwgb3IgdW5kZWZpbmVkJyk7XG5cdH1cblxuXHRyZXR1cm4gT2JqZWN0KHZhbCk7XG59XG5cbmZ1bmN0aW9uIHNob3VsZFVzZU5hdGl2ZSgpIHtcblx0dHJ5IHtcblx0XHRpZiAoIU9iamVjdC5hc3NpZ24pIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBEZXRlY3QgYnVnZ3kgcHJvcGVydHkgZW51bWVyYXRpb24gb3JkZXIgaW4gb2xkZXIgVjggdmVyc2lvbnMuXG5cblx0XHQvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD00MTE4XG5cdFx0dmFyIHRlc3QxID0gbmV3IFN0cmluZygnYWJjJyk7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ldy13cmFwcGVyc1xuXHRcdHRlc3QxWzVdID0gJ2RlJztcblx0XHRpZiAoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGVzdDEpWzBdID09PSAnNScpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMDU2XG5cdFx0dmFyIHRlc3QyID0ge307XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG5cdFx0XHR0ZXN0MlsnXycgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGkpXSA9IGk7XG5cdFx0fVxuXHRcdHZhciBvcmRlcjIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0ZXN0MikubWFwKGZ1bmN0aW9uIChuKSB7XG5cdFx0XHRyZXR1cm4gdGVzdDJbbl07XG5cdFx0fSk7XG5cdFx0aWYgKG9yZGVyMi5qb2luKCcnKSAhPT0gJzAxMjM0NTY3ODknKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MzA1NlxuXHRcdHZhciB0ZXN0MyA9IHt9O1xuXHRcdCdhYmNkZWZnaGlqa2xtbm9wcXJzdCcuc3BsaXQoJycpLmZvckVhY2goZnVuY3Rpb24gKGxldHRlcikge1xuXHRcdFx0dGVzdDNbbGV0dGVyXSA9IGxldHRlcjtcblx0XHR9KTtcblx0XHRpZiAoT2JqZWN0LmtleXMoT2JqZWN0LmFzc2lnbih7fSwgdGVzdDMpKS5qb2luKCcnKSAhPT1cblx0XHRcdFx0J2FiY2RlZmdoaWprbG1ub3BxcnN0Jykge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHJldHVybiB0cnVlO1xuXHR9IGNhdGNoIChlcnIpIHtcblx0XHQvLyBXZSBkb24ndCBleHBlY3QgYW55IG9mIHRoZSBhYm92ZSB0byB0aHJvdywgYnV0IGJldHRlciB0byBiZSBzYWZlLlxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNob3VsZFVzZU5hdGl2ZSgpID8gT2JqZWN0LmFzc2lnbiA6IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSkge1xuXHR2YXIgZnJvbTtcblx0dmFyIHRvID0gdG9PYmplY3QodGFyZ2V0KTtcblx0dmFyIHN5bWJvbHM7XG5cblx0Zm9yICh2YXIgcyA9IDE7IHMgPCBhcmd1bWVudHMubGVuZ3RoOyBzKyspIHtcblx0XHRmcm9tID0gT2JqZWN0KGFyZ3VtZW50c1tzXSk7XG5cblx0XHRmb3IgKHZhciBrZXkgaW4gZnJvbSkge1xuXHRcdFx0aWYgKGhhc093blByb3BlcnR5LmNhbGwoZnJvbSwga2V5KSkge1xuXHRcdFx0XHR0b1trZXldID0gZnJvbVtrZXldO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChnZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcblx0XHRcdHN5bWJvbHMgPSBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZnJvbSk7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHN5bWJvbHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKHByb3BJc0VudW1lcmFibGUuY2FsbChmcm9tLCBzeW1ib2xzW2ldKSkge1xuXHRcdFx0XHRcdHRvW3N5bWJvbHNbaV1dID0gZnJvbVtzeW1ib2xzW2ldXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0bztcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9XG4gIGdsb2JhbC5wZXJmb3JtYW5jZSAmJlxuICBnbG9iYWwucGVyZm9ybWFuY2Uubm93ID8gZnVuY3Rpb24gbm93KCkge1xuICAgIHJldHVybiBwZXJmb3JtYW5jZS5ub3coKVxuICB9IDogRGF0ZS5ub3cgfHwgZnVuY3Rpb24gbm93KCkge1xuICAgIHJldHVybiArbmV3IERhdGVcbiAgfVxuIiwibW9kdWxlLmV4cG9ydHMgPSBpc1Byb21pc2U7XG5cbmZ1bmN0aW9uIGlzUHJvbWlzZShvYmopIHtcbiAgcmV0dXJuICEhb2JqICYmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyB8fCB0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKSAmJiB0eXBlb2Ygb2JqLnRoZW4gPT09ICdmdW5jdGlvbic7XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGlzTm9kZVxuXG5mdW5jdGlvbiBpc05vZGUgKHZhbCkge1xuICByZXR1cm4gKCF2YWwgfHwgdHlwZW9mIHZhbCAhPT0gJ29iamVjdCcpXG4gICAgPyBmYWxzZVxuICAgIDogKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHR5cGVvZiB3aW5kb3cuTm9kZSA9PT0gJ29iamVjdCcpXG4gICAgICA/ICh2YWwgaW5zdGFuY2VvZiB3aW5kb3cuTm9kZSlcbiAgICAgIDogKHR5cGVvZiB2YWwubm9kZVR5cGUgPT09ICdudW1iZXInKSAmJlxuICAgICAgICAodHlwZW9mIHZhbC5ub2RlTmFtZSA9PT0gJ3N0cmluZycpXG59XG4iLCIvLyBUT0RPOiBXZSBjYW4gcmVtb3ZlIGEgaHVnZSBjaHVuayBvZiBidW5kbGUgc2l6ZSBieSB1c2luZyBhIHNtYWxsZXJcbi8vIHV0aWxpdHkgbW9kdWxlIGZvciBjb252ZXJ0aW5nIHVuaXRzLlxuaW1wb3J0IGlzRE9NIGZyb20gXCJpcy1kb21cIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldENsaWVudEFQSSgpIHtcbiAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93W1wiY2FudmFzLXNrZXRjaC1jbGlcIl07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVkKCkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChhcmd1bWVudHNbaV0gIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGFyZ3VtZW50c1tpXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcbiAgcmV0dXJuIHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzV2ViR0xDb250ZXh0KGN0eCkge1xuICByZXR1cm4gKFxuICAgIGN0eCAmJlxuICAgIHR5cGVvZiBjdHguY2xlYXIgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgIHR5cGVvZiBjdHguY2xlYXJDb2xvciA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgdHlwZW9mIGN0eC5idWZmZXJEYXRhID09PSBcImZ1bmN0aW9uXCJcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzMkRDb250ZXh0KGN0eCkge1xuICByZXR1cm4gKFxuICAgIGN0eCAmJlxuICAgIHR5cGVvZiBjdHguc2F2ZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgdHlwZW9mIGN0eC5zY2FsZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgdHlwZW9mIGN0eC5yZXN0b3JlID09PSBcImZ1bmN0aW9uXCJcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ2FudmFzKGVsZW1lbnQpIHtcbiAgcmV0dXJuIChcbiAgICBpc0RPTShlbGVtZW50KSAmJlxuICAgIC9jYW52YXMvaS50ZXN0KGVsZW1lbnQubm9kZU5hbWUpICYmXG4gICAgdHlwZW9mIGVsZW1lbnQuZ2V0Q29udGV4dCA9PT0gXCJmdW5jdGlvblwiXG4gICk7XG59XG4iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSB0eXBlb2YgT2JqZWN0LmtleXMgPT09ICdmdW5jdGlvbidcbiAgPyBPYmplY3Qua2V5cyA6IHNoaW07XG5cbmV4cG9ydHMuc2hpbSA9IHNoaW07XG5mdW5jdGlvbiBzaGltIChvYmopIHtcbiAgdmFyIGtleXMgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikga2V5cy5wdXNoKGtleSk7XG4gIHJldHVybiBrZXlzO1xufVxuIiwidmFyIHN1cHBvcnRzQXJndW1lbnRzQ2xhc3MgPSAoZnVuY3Rpb24oKXtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudHMpXG59KSgpID09ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xuXG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBzdXBwb3J0c0FyZ3VtZW50c0NsYXNzID8gc3VwcG9ydGVkIDogdW5zdXBwb3J0ZWQ7XG5cbmV4cG9ydHMuc3VwcG9ydGVkID0gc3VwcG9ydGVkO1xuZnVuY3Rpb24gc3VwcG9ydGVkKG9iamVjdCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCkgPT0gJ1tvYmplY3QgQXJndW1lbnRzXSc7XG59O1xuXG5leHBvcnRzLnVuc3VwcG9ydGVkID0gdW5zdXBwb3J0ZWQ7XG5mdW5jdGlvbiB1bnN1cHBvcnRlZChvYmplY3Qpe1xuICByZXR1cm4gb2JqZWN0ICYmXG4gICAgdHlwZW9mIG9iamVjdCA9PSAnb2JqZWN0JyAmJlxuICAgIHR5cGVvZiBvYmplY3QubGVuZ3RoID09ICdudW1iZXInICYmXG4gICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgJ2NhbGxlZScpICYmXG4gICAgIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChvYmplY3QsICdjYWxsZWUnKSB8fFxuICAgIGZhbHNlO1xufTtcbiIsInZhciBwU2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG52YXIgb2JqZWN0S2V5cyA9IHJlcXVpcmUoJy4vbGliL2tleXMuanMnKTtcbnZhciBpc0FyZ3VtZW50cyA9IHJlcXVpcmUoJy4vbGliL2lzX2FyZ3VtZW50cy5qcycpO1xuXG52YXIgZGVlcEVxdWFsID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYWN0dWFsLCBleHBlY3RlZCwgb3B0cykge1xuICBpZiAoIW9wdHMpIG9wdHMgPSB7fTtcbiAgLy8gNy4xLiBBbGwgaWRlbnRpY2FsIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgYXMgZGV0ZXJtaW5lZCBieSA9PT0uXG4gIGlmIChhY3R1YWwgPT09IGV4cGVjdGVkKSB7XG4gICAgcmV0dXJuIHRydWU7XG5cbiAgfSBlbHNlIGlmIChhY3R1YWwgaW5zdGFuY2VvZiBEYXRlICYmIGV4cGVjdGVkIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgIHJldHVybiBhY3R1YWwuZ2V0VGltZSgpID09PSBleHBlY3RlZC5nZXRUaW1lKCk7XG5cbiAgLy8gNy4zLiBPdGhlciBwYWlycyB0aGF0IGRvIG5vdCBib3RoIHBhc3MgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnLFxuICAvLyBlcXVpdmFsZW5jZSBpcyBkZXRlcm1pbmVkIGJ5ID09LlxuICB9IGVsc2UgaWYgKCFhY3R1YWwgfHwgIWV4cGVjdGVkIHx8IHR5cGVvZiBhY3R1YWwgIT0gJ29iamVjdCcgJiYgdHlwZW9mIGV4cGVjdGVkICE9ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIG9wdHMuc3RyaWN0ID8gYWN0dWFsID09PSBleHBlY3RlZCA6IGFjdHVhbCA9PSBleHBlY3RlZDtcblxuICAvLyA3LjQuIEZvciBhbGwgb3RoZXIgT2JqZWN0IHBhaXJzLCBpbmNsdWRpbmcgQXJyYXkgb2JqZWN0cywgZXF1aXZhbGVuY2UgaXNcbiAgLy8gZGV0ZXJtaW5lZCBieSBoYXZpbmcgdGhlIHNhbWUgbnVtYmVyIG9mIG93bmVkIHByb3BlcnRpZXMgKGFzIHZlcmlmaWVkXG4gIC8vIHdpdGggT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKSwgdGhlIHNhbWUgc2V0IG9mIGtleXNcbiAgLy8gKGFsdGhvdWdoIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBvcmRlciksIGVxdWl2YWxlbnQgdmFsdWVzIGZvciBldmVyeVxuICAvLyBjb3JyZXNwb25kaW5nIGtleSwgYW5kIGFuIGlkZW50aWNhbCAncHJvdG90eXBlJyBwcm9wZXJ0eS4gTm90ZTogdGhpc1xuICAvLyBhY2NvdW50cyBmb3IgYm90aCBuYW1lZCBhbmQgaW5kZXhlZCBwcm9wZXJ0aWVzIG9uIEFycmF5cy5cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gb2JqRXF1aXYoYWN0dWFsLCBleHBlY3RlZCwgb3B0cyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNVbmRlZmluZWRPck51bGwodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGlzQnVmZmVyICh4KSB7XG4gIGlmICgheCB8fCB0eXBlb2YgeCAhPT0gJ29iamVjdCcgfHwgdHlwZW9mIHgubGVuZ3RoICE9PSAnbnVtYmVyJykgcmV0dXJuIGZhbHNlO1xuICBpZiAodHlwZW9mIHguY29weSAhPT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgeC5zbGljZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoeC5sZW5ndGggPiAwICYmIHR5cGVvZiB4WzBdICE9PSAnbnVtYmVyJykgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gb2JqRXF1aXYoYSwgYiwgb3B0cykge1xuICB2YXIgaSwga2V5O1xuICBpZiAoaXNVbmRlZmluZWRPck51bGwoYSkgfHwgaXNVbmRlZmluZWRPck51bGwoYikpXG4gICAgcmV0dXJuIGZhbHNlO1xuICAvLyBhbiBpZGVudGljYWwgJ3Byb3RvdHlwZScgcHJvcGVydHkuXG4gIGlmIChhLnByb3RvdHlwZSAhPT0gYi5wcm90b3R5cGUpIHJldHVybiBmYWxzZTtcbiAgLy9+fn5JJ3ZlIG1hbmFnZWQgdG8gYnJlYWsgT2JqZWN0LmtleXMgdGhyb3VnaCBzY3Jld3kgYXJndW1lbnRzIHBhc3NpbmcuXG4gIC8vICAgQ29udmVydGluZyB0byBhcnJheSBzb2x2ZXMgdGhlIHByb2JsZW0uXG4gIGlmIChpc0FyZ3VtZW50cyhhKSkge1xuICAgIGlmICghaXNBcmd1bWVudHMoYikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgYSA9IHBTbGljZS5jYWxsKGEpO1xuICAgIGIgPSBwU2xpY2UuY2FsbChiKTtcbiAgICByZXR1cm4gZGVlcEVxdWFsKGEsIGIsIG9wdHMpO1xuICB9XG4gIGlmIChpc0J1ZmZlcihhKSkge1xuICAgIGlmICghaXNCdWZmZXIoYikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAoaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoYVtpXSAhPT0gYltpXSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICB0cnkge1xuICAgIHZhciBrYSA9IG9iamVjdEtleXMoYSksXG4gICAgICAgIGtiID0gb2JqZWN0S2V5cyhiKTtcbiAgfSBjYXRjaCAoZSkgey8vaGFwcGVucyB3aGVuIG9uZSBpcyBhIHN0cmluZyBsaXRlcmFsIGFuZCB0aGUgb3RoZXIgaXNuJ3RcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gaGF2aW5nIHRoZSBzYW1lIG51bWJlciBvZiBvd25lZCBwcm9wZXJ0aWVzIChrZXlzIGluY29ycG9yYXRlc1xuICAvLyBoYXNPd25Qcm9wZXJ0eSlcbiAgaWYgKGthLmxlbmd0aCAhPSBrYi5sZW5ndGgpXG4gICAgcmV0dXJuIGZhbHNlO1xuICAvL3RoZSBzYW1lIHNldCBvZiBrZXlzIChhbHRob3VnaCBub3QgbmVjZXNzYXJpbHkgdGhlIHNhbWUgb3JkZXIpLFxuICBrYS5zb3J0KCk7XG4gIGtiLnNvcnQoKTtcbiAgLy9+fn5jaGVhcCBrZXkgdGVzdFxuICBmb3IgKGkgPSBrYS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGlmIChrYVtpXSAhPSBrYltpXSlcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvL2VxdWl2YWxlbnQgdmFsdWVzIGZvciBldmVyeSBjb3JyZXNwb25kaW5nIGtleSwgYW5kXG4gIC8vfn5+cG9zc2libHkgZXhwZW5zaXZlIGRlZXAgdGVzdFxuICBmb3IgKGkgPSBrYS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGtleSA9IGthW2ldO1xuICAgIGlmICghZGVlcEVxdWFsKGFba2V5XSwgYltrZXldLCBvcHRzKSkgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0eXBlb2YgYSA9PT0gdHlwZW9mIGI7XG59XG4iLCIvKlxuICogRGF0ZSBGb3JtYXQgMS4yLjNcbiAqIChjKSAyMDA3LTIwMDkgU3RldmVuIExldml0aGFuIDxzdGV2ZW5sZXZpdGhhbi5jb20+XG4gKiBNSVQgbGljZW5zZVxuICpcbiAqIEluY2x1ZGVzIGVuaGFuY2VtZW50cyBieSBTY290dCBUcmVuZGEgPHNjb3R0LnRyZW5kYS5uZXQ+XG4gKiBhbmQgS3JpcyBLb3dhbCA8Y2l4YXIuY29tL35rcmlzLmtvd2FsLz5cbiAqXG4gKiBBY2NlcHRzIGEgZGF0ZSwgYSBtYXNrLCBvciBhIGRhdGUgYW5kIGEgbWFzay5cbiAqIFJldHVybnMgYSBmb3JtYXR0ZWQgdmVyc2lvbiBvZiB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSBkYXRlIGRlZmF1bHRzIHRvIHRoZSBjdXJyZW50IGRhdGUvdGltZS5cbiAqIFRoZSBtYXNrIGRlZmF1bHRzIHRvIGRhdGVGb3JtYXQubWFza3MuZGVmYXVsdC5cbiAqL1xuXG4oZnVuY3Rpb24oZ2xvYmFsKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgZGF0ZUZvcm1hdCA9IChmdW5jdGlvbigpIHtcbiAgICAgIHZhciB0b2tlbiA9IC9kezEsNH18bXsxLDR9fHl5KD86eXkpP3woW0hoTXNUdF0pXFwxP3xbTGxvU1pXTl18XCJbXlwiXSpcInwnW14nXSonL2c7XG4gICAgICB2YXIgdGltZXpvbmUgPSAvXFxiKD86W1BNQ0VBXVtTRFBdVHwoPzpQYWNpZmljfE1vdW50YWlufENlbnRyYWx8RWFzdGVybnxBdGxhbnRpYykgKD86U3RhbmRhcmR8RGF5bGlnaHR8UHJldmFpbGluZykgVGltZXwoPzpHTVR8VVRDKSg/OlstK11cXGR7NH0pPylcXGIvZztcbiAgICAgIHZhciB0aW1lem9uZUNsaXAgPSAvW14tK1xcZEEtWl0vZztcbiAgXG4gICAgICAvLyBSZWdleGVzIGFuZCBzdXBwb3J0aW5nIGZ1bmN0aW9ucyBhcmUgY2FjaGVkIHRocm91Z2ggY2xvc3VyZVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRlLCBtYXNrLCB1dGMsIGdtdCkge1xuICBcbiAgICAgICAgLy8gWW91IGNhbid0IHByb3ZpZGUgdXRjIGlmIHlvdSBza2lwIG90aGVyIGFyZ3MgKHVzZSB0aGUgJ1VUQzonIG1hc2sgcHJlZml4KVxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiBraW5kT2YoZGF0ZSkgPT09ICdzdHJpbmcnICYmICEvXFxkLy50ZXN0KGRhdGUpKSB7XG4gICAgICAgICAgbWFzayA9IGRhdGU7XG4gICAgICAgICAgZGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgZGF0ZSA9IGRhdGUgfHwgbmV3IERhdGU7XG4gIFxuICAgICAgICBpZighKGRhdGUgaW5zdGFuY2VvZiBEYXRlKSkge1xuICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgaWYgKGlzTmFOKGRhdGUpKSB7XG4gICAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdJbnZhbGlkIGRhdGUnKTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgbWFzayA9IFN0cmluZyhkYXRlRm9ybWF0Lm1hc2tzW21hc2tdIHx8IG1hc2sgfHwgZGF0ZUZvcm1hdC5tYXNrc1snZGVmYXVsdCddKTtcbiAgXG4gICAgICAgIC8vIEFsbG93IHNldHRpbmcgdGhlIHV0Yy9nbXQgYXJndW1lbnQgdmlhIHRoZSBtYXNrXG4gICAgICAgIHZhciBtYXNrU2xpY2UgPSBtYXNrLnNsaWNlKDAsIDQpO1xuICAgICAgICBpZiAobWFza1NsaWNlID09PSAnVVRDOicgfHwgbWFza1NsaWNlID09PSAnR01UOicpIHtcbiAgICAgICAgICBtYXNrID0gbWFzay5zbGljZSg0KTtcbiAgICAgICAgICB1dGMgPSB0cnVlO1xuICAgICAgICAgIGlmIChtYXNrU2xpY2UgPT09ICdHTVQ6Jykge1xuICAgICAgICAgICAgZ210ID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgXG4gICAgICAgIHZhciBfID0gdXRjID8gJ2dldFVUQycgOiAnZ2V0JztcbiAgICAgICAgdmFyIGQgPSBkYXRlW18gKyAnRGF0ZSddKCk7XG4gICAgICAgIHZhciBEID0gZGF0ZVtfICsgJ0RheSddKCk7XG4gICAgICAgIHZhciBtID0gZGF0ZVtfICsgJ01vbnRoJ10oKTtcbiAgICAgICAgdmFyIHkgPSBkYXRlW18gKyAnRnVsbFllYXInXSgpO1xuICAgICAgICB2YXIgSCA9IGRhdGVbXyArICdIb3VycyddKCk7XG4gICAgICAgIHZhciBNID0gZGF0ZVtfICsgJ01pbnV0ZXMnXSgpO1xuICAgICAgICB2YXIgcyA9IGRhdGVbXyArICdTZWNvbmRzJ10oKTtcbiAgICAgICAgdmFyIEwgPSBkYXRlW18gKyAnTWlsbGlzZWNvbmRzJ10oKTtcbiAgICAgICAgdmFyIG8gPSB1dGMgPyAwIDogZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpO1xuICAgICAgICB2YXIgVyA9IGdldFdlZWsoZGF0ZSk7XG4gICAgICAgIHZhciBOID0gZ2V0RGF5T2ZXZWVrKGRhdGUpO1xuICAgICAgICB2YXIgZmxhZ3MgPSB7XG4gICAgICAgICAgZDogICAgZCxcbiAgICAgICAgICBkZDogICBwYWQoZCksXG4gICAgICAgICAgZGRkOiAgZGF0ZUZvcm1hdC5pMThuLmRheU5hbWVzW0RdLFxuICAgICAgICAgIGRkZGQ6IGRhdGVGb3JtYXQuaTE4bi5kYXlOYW1lc1tEICsgN10sXG4gICAgICAgICAgbTogICAgbSArIDEsXG4gICAgICAgICAgbW06ICAgcGFkKG0gKyAxKSxcbiAgICAgICAgICBtbW06ICBkYXRlRm9ybWF0LmkxOG4ubW9udGhOYW1lc1ttXSxcbiAgICAgICAgICBtbW1tOiBkYXRlRm9ybWF0LmkxOG4ubW9udGhOYW1lc1ttICsgMTJdLFxuICAgICAgICAgIHl5OiAgIFN0cmluZyh5KS5zbGljZSgyKSxcbiAgICAgICAgICB5eXl5OiB5LFxuICAgICAgICAgIGg6ICAgIEggJSAxMiB8fCAxMixcbiAgICAgICAgICBoaDogICBwYWQoSCAlIDEyIHx8IDEyKSxcbiAgICAgICAgICBIOiAgICBILFxuICAgICAgICAgIEhIOiAgIHBhZChIKSxcbiAgICAgICAgICBNOiAgICBNLFxuICAgICAgICAgIE1NOiAgIHBhZChNKSxcbiAgICAgICAgICBzOiAgICBzLFxuICAgICAgICAgIHNzOiAgIHBhZChzKSxcbiAgICAgICAgICBsOiAgICBwYWQoTCwgMyksXG4gICAgICAgICAgTDogICAgcGFkKE1hdGgucm91bmQoTCAvIDEwKSksXG4gICAgICAgICAgdDogICAgSCA8IDEyID8gZGF0ZUZvcm1hdC5pMThuLnRpbWVOYW1lc1swXSA6IGRhdGVGb3JtYXQuaTE4bi50aW1lTmFtZXNbMV0sXG4gICAgICAgICAgdHQ6ICAgSCA8IDEyID8gZGF0ZUZvcm1hdC5pMThuLnRpbWVOYW1lc1syXSA6IGRhdGVGb3JtYXQuaTE4bi50aW1lTmFtZXNbM10sXG4gICAgICAgICAgVDogICAgSCA8IDEyID8gZGF0ZUZvcm1hdC5pMThuLnRpbWVOYW1lc1s0XSA6IGRhdGVGb3JtYXQuaTE4bi50aW1lTmFtZXNbNV0sXG4gICAgICAgICAgVFQ6ICAgSCA8IDEyID8gZGF0ZUZvcm1hdC5pMThuLnRpbWVOYW1lc1s2XSA6IGRhdGVGb3JtYXQuaTE4bi50aW1lTmFtZXNbN10sXG4gICAgICAgICAgWjogICAgZ210ID8gJ0dNVCcgOiB1dGMgPyAnVVRDJyA6IChTdHJpbmcoZGF0ZSkubWF0Y2godGltZXpvbmUpIHx8IFsnJ10pLnBvcCgpLnJlcGxhY2UodGltZXpvbmVDbGlwLCAnJyksXG4gICAgICAgICAgbzogICAgKG8gPiAwID8gJy0nIDogJysnKSArIHBhZChNYXRoLmZsb29yKE1hdGguYWJzKG8pIC8gNjApICogMTAwICsgTWF0aC5hYnMobykgJSA2MCwgNCksXG4gICAgICAgICAgUzogICAgWyd0aCcsICdzdCcsICduZCcsICdyZCddW2QgJSAxMCA+IDMgPyAwIDogKGQgJSAxMDAgLSBkICUgMTAgIT0gMTApICogZCAlIDEwXSxcbiAgICAgICAgICBXOiAgICBXLFxuICAgICAgICAgIE46ICAgIE5cbiAgICAgICAgfTtcbiAgXG4gICAgICAgIHJldHVybiBtYXNrLnJlcGxhY2UodG9rZW4sIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgICAgIGlmIChtYXRjaCBpbiBmbGFncykge1xuICAgICAgICAgICAgcmV0dXJuIGZsYWdzW21hdGNoXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG1hdGNoLnNsaWNlKDEsIG1hdGNoLmxlbmd0aCAtIDEpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSkoKTtcblxuICBkYXRlRm9ybWF0Lm1hc2tzID0ge1xuICAgICdkZWZhdWx0JzogICAgICAgICAgICAgICAnZGRkIG1tbSBkZCB5eXl5IEhIOk1NOnNzJyxcbiAgICAnc2hvcnREYXRlJzogICAgICAgICAgICAgJ20vZC95eScsXG4gICAgJ21lZGl1bURhdGUnOiAgICAgICAgICAgICdtbW0gZCwgeXl5eScsXG4gICAgJ2xvbmdEYXRlJzogICAgICAgICAgICAgICdtbW1tIGQsIHl5eXknLFxuICAgICdmdWxsRGF0ZSc6ICAgICAgICAgICAgICAnZGRkZCwgbW1tbSBkLCB5eXl5JyxcbiAgICAnc2hvcnRUaW1lJzogICAgICAgICAgICAgJ2g6TU0gVFQnLFxuICAgICdtZWRpdW1UaW1lJzogICAgICAgICAgICAnaDpNTTpzcyBUVCcsXG4gICAgJ2xvbmdUaW1lJzogICAgICAgICAgICAgICdoOk1NOnNzIFRUIFonLFxuICAgICdpc29EYXRlJzogICAgICAgICAgICAgICAneXl5eS1tbS1kZCcsXG4gICAgJ2lzb1RpbWUnOiAgICAgICAgICAgICAgICdISDpNTTpzcycsXG4gICAgJ2lzb0RhdGVUaW1lJzogICAgICAgICAgICd5eXl5LW1tLWRkXFwnVFxcJ0hIOk1NOnNzbycsXG4gICAgJ2lzb1V0Y0RhdGVUaW1lJzogICAgICAgICdVVEM6eXl5eS1tbS1kZFxcJ1RcXCdISDpNTTpzc1xcJ1pcXCcnLFxuICAgICdleHBpcmVzSGVhZGVyRm9ybWF0JzogICAnZGRkLCBkZCBtbW0geXl5eSBISDpNTTpzcyBaJ1xuICB9O1xuXG4gIC8vIEludGVybmF0aW9uYWxpemF0aW9uIHN0cmluZ3NcbiAgZGF0ZUZvcm1hdC5pMThuID0ge1xuICAgIGRheU5hbWVzOiBbXG4gICAgICAnU3VuJywgJ01vbicsICdUdWUnLCAnV2VkJywgJ1RodScsICdGcmknLCAnU2F0JyxcbiAgICAgICdTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSdcbiAgICBdLFxuICAgIG1vbnRoTmFtZXM6IFtcbiAgICAgICdKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RlYycsXG4gICAgICAnSmFudWFyeScsICdGZWJydWFyeScsICdNYXJjaCcsICdBcHJpbCcsICdNYXknLCAnSnVuZScsICdKdWx5JywgJ0F1Z3VzdCcsICdTZXB0ZW1iZXInLCAnT2N0b2JlcicsICdOb3ZlbWJlcicsICdEZWNlbWJlcidcbiAgICBdLFxuICAgIHRpbWVOYW1lczogW1xuICAgICAgJ2EnLCAncCcsICdhbScsICdwbScsICdBJywgJ1AnLCAnQU0nLCAnUE0nXG4gICAgXVxuICB9O1xuXG5mdW5jdGlvbiBwYWQodmFsLCBsZW4pIHtcbiAgdmFsID0gU3RyaW5nKHZhbCk7XG4gIGxlbiA9IGxlbiB8fCAyO1xuICB3aGlsZSAodmFsLmxlbmd0aCA8IGxlbikge1xuICAgIHZhbCA9ICcwJyArIHZhbDtcbiAgfVxuICByZXR1cm4gdmFsO1xufVxuXG4vKipcbiAqIEdldCB0aGUgSVNPIDg2MDEgd2VlayBudW1iZXJcbiAqIEJhc2VkIG9uIGNvbW1lbnRzIGZyb21cbiAqIGh0dHA6Ly90ZWNoYmxvZy5wcm9jdXJpb3Mubmwvay9uNjE4L25ld3Mvdmlldy8zMzc5Ni8xNDg2My9DYWxjdWxhdGUtSVNPLTg2MDEtd2Vlay1hbmQteWVhci1pbi1qYXZhc2NyaXB0Lmh0bWxcbiAqXG4gKiBAcGFyYW0gIHtPYmplY3R9IGBkYXRlYFxuICogQHJldHVybiB7TnVtYmVyfVxuICovXG5mdW5jdGlvbiBnZXRXZWVrKGRhdGUpIHtcbiAgLy8gUmVtb3ZlIHRpbWUgY29tcG9uZW50cyBvZiBkYXRlXG4gIHZhciB0YXJnZXRUaHVyc2RheSA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpLCBkYXRlLmdldERhdGUoKSk7XG5cbiAgLy8gQ2hhbmdlIGRhdGUgdG8gVGh1cnNkYXkgc2FtZSB3ZWVrXG4gIHRhcmdldFRodXJzZGF5LnNldERhdGUodGFyZ2V0VGh1cnNkYXkuZ2V0RGF0ZSgpIC0gKCh0YXJnZXRUaHVyc2RheS5nZXREYXkoKSArIDYpICUgNykgKyAzKTtcblxuICAvLyBUYWtlIEphbnVhcnkgNHRoIGFzIGl0IGlzIGFsd2F5cyBpbiB3ZWVrIDEgKHNlZSBJU08gODYwMSlcbiAgdmFyIGZpcnN0VGh1cnNkYXkgPSBuZXcgRGF0ZSh0YXJnZXRUaHVyc2RheS5nZXRGdWxsWWVhcigpLCAwLCA0KTtcblxuICAvLyBDaGFuZ2UgZGF0ZSB0byBUaHVyc2RheSBzYW1lIHdlZWtcbiAgZmlyc3RUaHVyc2RheS5zZXREYXRlKGZpcnN0VGh1cnNkYXkuZ2V0RGF0ZSgpIC0gKChmaXJzdFRodXJzZGF5LmdldERheSgpICsgNikgJSA3KSArIDMpO1xuXG4gIC8vIENoZWNrIGlmIGRheWxpZ2h0LXNhdmluZy10aW1lLXN3aXRjaCBvY2N1cnJlZCBhbmQgY29ycmVjdCBmb3IgaXRcbiAgdmFyIGRzID0gdGFyZ2V0VGh1cnNkYXkuZ2V0VGltZXpvbmVPZmZzZXQoKSAtIGZpcnN0VGh1cnNkYXkuZ2V0VGltZXpvbmVPZmZzZXQoKTtcbiAgdGFyZ2V0VGh1cnNkYXkuc2V0SG91cnModGFyZ2V0VGh1cnNkYXkuZ2V0SG91cnMoKSAtIGRzKTtcblxuICAvLyBOdW1iZXIgb2Ygd2Vla3MgYmV0d2VlbiB0YXJnZXQgVGh1cnNkYXkgYW5kIGZpcnN0IFRodXJzZGF5XG4gIHZhciB3ZWVrRGlmZiA9ICh0YXJnZXRUaHVyc2RheSAtIGZpcnN0VGh1cnNkYXkpIC8gKDg2NDAwMDAwKjcpO1xuICByZXR1cm4gMSArIE1hdGguZmxvb3Iod2Vla0RpZmYpO1xufVxuXG4vKipcbiAqIEdldCBJU08tODYwMSBudW1lcmljIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBkYXkgb2YgdGhlIHdlZWtcbiAqIDEgKGZvciBNb25kYXkpIHRocm91Z2ggNyAoZm9yIFN1bmRheSlcbiAqIFxuICogQHBhcmFtICB7T2JqZWN0fSBgZGF0ZWBcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqL1xuZnVuY3Rpb24gZ2V0RGF5T2ZXZWVrKGRhdGUpIHtcbiAgdmFyIGRvdyA9IGRhdGUuZ2V0RGF5KCk7XG4gIGlmKGRvdyA9PT0gMCkge1xuICAgIGRvdyA9IDc7XG4gIH1cbiAgcmV0dXJuIGRvdztcbn1cblxuLyoqXG4gKiBraW5kLW9mIHNob3J0Y3V0XG4gKiBAcGFyYW0gIHsqfSB2YWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24ga2luZE9mKHZhbCkge1xuICBpZiAodmFsID09PSBudWxsKSB7XG4gICAgcmV0dXJuICdudWxsJztcbiAgfVxuXG4gIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAndW5kZWZpbmVkJztcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiB0eXBlb2YgdmFsO1xuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgIHJldHVybiAnYXJyYXknO1xuICB9XG5cbiAgcmV0dXJuIHt9LnRvU3RyaW5nLmNhbGwodmFsKVxuICAgIC5zbGljZSg4LCAtMSkudG9Mb3dlckNhc2UoKTtcbn07XG5cblxuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGRhdGVGb3JtYXQ7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBkYXRlRm9ybWF0O1xuICB9IGVsc2Uge1xuICAgIGdsb2JhbC5kYXRlRm9ybWF0ID0gZGF0ZUZvcm1hdDtcbiAgfVxufSkodGhpcyk7XG4iLCIvKiFcbiAqIHJlcGVhdC1zdHJpbmcgPGh0dHBzOi8vZ2l0aHViLmNvbS9qb25zY2hsaW5rZXJ0L3JlcGVhdC1zdHJpbmc+XG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTUsIEpvbiBTY2hsaW5rZXJ0LlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBSZXN1bHRzIGNhY2hlXG4gKi9cblxudmFyIHJlcyA9ICcnO1xudmFyIGNhY2hlO1xuXG4vKipcbiAqIEV4cG9zZSBgcmVwZWF0YFxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gcmVwZWF0O1xuXG4vKipcbiAqIFJlcGVhdCB0aGUgZ2l2ZW4gYHN0cmluZ2AgdGhlIHNwZWNpZmllZCBgbnVtYmVyYFxuICogb2YgdGltZXMuXG4gKlxuICogKipFeGFtcGxlOioqXG4gKlxuICogYGBganNcbiAqIHZhciByZXBlYXQgPSByZXF1aXJlKCdyZXBlYXQtc3RyaW5nJyk7XG4gKiByZXBlYXQoJ0EnLCA1KTtcbiAqIC8vPT4gQUFBQUFcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBgc3RyaW5nYCBUaGUgc3RyaW5nIHRvIHJlcGVhdFxuICogQHBhcmFtIHtOdW1iZXJ9IGBudW1iZXJgIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gcmVwZWF0IHRoZSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ30gUmVwZWF0ZWQgc3RyaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIHJlcGVhdChzdHIsIG51bSkge1xuICBpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleHBlY3RlZCBhIHN0cmluZycpO1xuICB9XG5cbiAgLy8gY292ZXIgY29tbW9uLCBxdWljayB1c2UgY2FzZXNcbiAgaWYgKG51bSA9PT0gMSkgcmV0dXJuIHN0cjtcbiAgaWYgKG51bSA9PT0gMikgcmV0dXJuIHN0ciArIHN0cjtcblxuICB2YXIgbWF4ID0gc3RyLmxlbmd0aCAqIG51bTtcbiAgaWYgKGNhY2hlICE9PSBzdHIgfHwgdHlwZW9mIGNhY2hlID09PSAndW5kZWZpbmVkJykge1xuICAgIGNhY2hlID0gc3RyO1xuICAgIHJlcyA9ICcnO1xuICB9IGVsc2UgaWYgKHJlcy5sZW5ndGggPj0gbWF4KSB7XG4gICAgcmV0dXJuIHJlcy5zdWJzdHIoMCwgbWF4KTtcbiAgfVxuXG4gIHdoaWxlIChtYXggPiByZXMubGVuZ3RoICYmIG51bSA+IDEpIHtcbiAgICBpZiAobnVtICYgMSkge1xuICAgICAgcmVzICs9IHN0cjtcbiAgICB9XG5cbiAgICBudW0gPj49IDE7XG4gICAgc3RyICs9IHN0cjtcbiAgfVxuXG4gIHJlcyArPSBzdHI7XG4gIHJlcyA9IHJlcy5zdWJzdHIoMCwgbWF4KTtcbiAgcmV0dXJuIHJlcztcbn1cbiIsIi8qIVxuICogcGFkLWxlZnQgPGh0dHBzOi8vZ2l0aHViLmNvbS9qb25zY2hsaW5rZXJ0L3BhZC1sZWZ0PlxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE1LCBKb24gU2NobGlua2VydC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciByZXBlYXQgPSByZXF1aXJlKCdyZXBlYXQtc3RyaW5nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFkTGVmdChzdHIsIG51bSwgY2gpIHtcbiAgc3RyID0gc3RyLnRvU3RyaW5nKCk7XG5cbiAgaWYgKHR5cGVvZiBudW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxuXG4gIGlmIChjaCA9PT0gMCkge1xuICAgIGNoID0gJzAnO1xuICB9IGVsc2UgaWYgKGNoKSB7XG4gICAgY2ggPSBjaC50b1N0cmluZygpO1xuICB9IGVsc2Uge1xuICAgIGNoID0gJyAnO1xuICB9XG5cbiAgcmV0dXJuIHJlcGVhdChjaCwgbnVtIC0gc3RyLmxlbmd0aCkgKyBzdHI7XG59O1xuIiwiaW1wb3J0IGRhdGVmb3JtYXQgZnJvbSAnZGF0ZWZvcm1hdCc7XG5pbXBvcnQgYXNzaWduIGZyb20gJ29iamVjdC1hc3NpZ24nO1xuaW1wb3J0IHBhZExlZnQgZnJvbSAncGFkLWxlZnQnO1xuaW1wb3J0IHsgZ2V0Q2xpZW50QVBJIH0gZnJvbSAnLi91dGlsJztcblxuY29uc3Qgbm9vcCA9ICgpID0+IHt9O1xubGV0IGxpbms7XG5sZXQgZGVmYXVsdEV4dHMgPSB7IGV4dGVuc2lvbjogJycsIHByZWZpeDogJycsIHN1ZmZpeDogJycgfTtcblxuLy8gQWx0ZXJuYXRpdmUgc29sdXRpb24gZm9yIHNhdmluZyBmaWxlcyxcbi8vIGEgYml0IHNsb3dlciBhbmQgZG9lcyBub3Qgd29yayBpbiBTYWZhcmlcbi8vIGZ1bmN0aW9uIGZldGNoQmxvYkZyb21EYXRhVVJMIChkYXRhVVJMKSB7XG4vLyAgIHJldHVybiB3aW5kb3cuZmV0Y2goZGF0YVVSTCkudGhlbihyZXMgPT4gcmVzLmJsb2IoKSk7XG4vLyB9XG5cbmNvbnN0IHN1cHBvcnRlZEVuY29kaW5ncyA9IFtcbiAgJ2ltYWdlL3BuZycsXG4gICdpbWFnZS9qcGVnJyxcbiAgJ2ltYWdlL3dlYnAnXG5dO1xuXG5mdW5jdGlvbiBzdHJlYW0gKGlzU3RhcnQsIG9wdHMgPSB7fSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIG9wdHMgPSBhc3NpZ24oe30sIGRlZmF1bHRFeHRzLCBvcHRzKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IHJlc29sdmVGaWxlbmFtZShPYmplY3QuYXNzaWduKHt9LCBvcHRzLCB7XG4gICAgICBleHRlbnNpb246ICcnLFxuICAgICAgZnJhbWU6IHVuZGVmaW5lZFxuICAgIH0pKTtcbiAgICBjb25zdCBmdW5jID0gaXNTdGFydCA/ICdzdHJlYW1TdGFydCcgOiAnc3RyZWFtRW5kJztcbiAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnRBUEkoKTtcbiAgICBpZiAoY2xpZW50ICYmIGNsaWVudC5vdXRwdXQgJiYgdHlwZW9mIGNsaWVudFtmdW5jXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGNsaWVudFtmdW5jXShhc3NpZ24oe30sIG9wdHMsIHsgZmlsZW5hbWUgfSkpXG4gICAgICAgIC50aGVuKGV2ID0+IHJlc29sdmUoZXYpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJlc29sdmUoeyBmaWxlbmFtZSwgY2xpZW50OiBmYWxzZSB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RyZWFtU3RhcnQgKG9wdHMgPSB7fSkge1xuICByZXR1cm4gc3RyZWFtKHRydWUsIG9wdHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RyZWFtRW5kIChvcHRzID0ge30pIHtcbiAgcmV0dXJuIHN0cmVhbShmYWxzZSwgb3B0cyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHBvcnRDYW52YXMgKGNhbnZhcywgb3B0ID0ge30pIHtcbiAgY29uc3QgZW5jb2RpbmcgPSBvcHQuZW5jb2RpbmcgfHwgJ2ltYWdlL3BuZyc7XG4gIGlmICghc3VwcG9ydGVkRW5jb2RpbmdzLmluY2x1ZGVzKGVuY29kaW5nKSkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGNhbnZhcyBlbmNvZGluZyAke2VuY29kaW5nfWApO1xuICBsZXQgZXh0ZW5zaW9uID0gKGVuY29kaW5nLnNwbGl0KCcvJylbMV0gfHwgJycpLnJlcGxhY2UoL2pwZWcvaSwgJ2pwZycpO1xuICBpZiAoZXh0ZW5zaW9uKSBleHRlbnNpb24gPSBgLiR7ZXh0ZW5zaW9ufWAudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIHtcbiAgICBleHRlbnNpb24sXG4gICAgdHlwZTogZW5jb2RpbmcsXG4gICAgZGF0YVVSTDogY2FudmFzLnRvRGF0YVVSTChlbmNvZGluZywgb3B0LmVuY29kaW5nUXVhbGl0eSlcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQmxvYkZyb21EYXRhVVJMIChkYXRhVVJMKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIGNvbnN0IHNwbGl0SW5kZXggPSBkYXRhVVJMLmluZGV4T2YoJywnKTtcbiAgICBpZiAoc3BsaXRJbmRleCA9PT0gLTEpIHtcbiAgICAgIHJlc29sdmUobmV3IHdpbmRvdy5CbG9iKCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBiYXNlNjQgPSBkYXRhVVJMLnNsaWNlKHNwbGl0SW5kZXggKyAxKTtcbiAgICBjb25zdCBieXRlU3RyaW5nID0gd2luZG93LmF0b2IoYmFzZTY0KTtcbiAgICBjb25zdCB0eXBlID0gZGF0YVVSTC5zbGljZSgwLCBzcGxpdEluZGV4KTtcbiAgICBjb25zdCBtaW1lTWF0Y2ggPSAvZGF0YTooW147XSspLy5leGVjKHR5cGUpO1xuICAgIGNvbnN0IG1pbWUgPSAobWltZU1hdGNoID8gbWltZU1hdGNoWzFdIDogJycpIHx8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBhYiA9IG5ldyBBcnJheUJ1ZmZlcihieXRlU3RyaW5nLmxlbmd0aCk7XG4gICAgY29uc3QgaWEgPSBuZXcgVWludDhBcnJheShhYik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlU3RyaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpYVtpXSA9IGJ5dGVTdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcmVzb2x2ZShuZXcgd2luZG93LkJsb2IoWyBhYiBdLCB7IHR5cGU6IG1pbWUgfSkpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVEYXRhVVJMIChkYXRhVVJMLCBvcHRzID0ge30pIHtcbiAgcmV0dXJuIGNyZWF0ZUJsb2JGcm9tRGF0YVVSTChkYXRhVVJMKVxuICAgIC50aGVuKGJsb2IgPT4gc2F2ZUJsb2IoYmxvYiwgb3B0cykpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2F2ZUJsb2IgKGJsb2IsIG9wdHMgPSB7fSkge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgb3B0cyA9IGFzc2lnbih7fSwgZGVmYXVsdEV4dHMsIG9wdHMpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gb3B0cy5maWxlbmFtZTtcblxuICAgIGNvbnN0IGNsaWVudCA9IGdldENsaWVudEFQSSgpO1xuICAgIGlmIChjbGllbnQgJiYgdHlwZW9mIGNsaWVudC5zYXZlQmxvYiA9PT0gJ2Z1bmN0aW9uJyAmJiBjbGllbnQub3V0cHV0KSB7XG4gICAgICAvLyBuYXRpdmUgc2F2aW5nIHVzaW5nIGEgQ0xJIHRvb2xcbiAgICAgIHJldHVybiBjbGllbnQuc2F2ZUJsb2IoYmxvYiwgYXNzaWduKHt9LCBvcHRzLCB7IGZpbGVuYW1lIH0pKVxuICAgICAgICAudGhlbihldiA9PiByZXNvbHZlKGV2KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGZvcmNlIGRvd25sb2FkXG4gICAgICBpZiAoIWxpbmspIHtcbiAgICAgICAgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgbGluay5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgIGxpbmsudGFyZ2V0ID0gJ19ibGFuayc7XG4gICAgICB9XG4gICAgICBsaW5rLmRvd25sb2FkID0gZmlsZW5hbWU7XG4gICAgICBsaW5rLmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICBsaW5rLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIGxpbmsub25jbGljayA9IG5vb3A7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgIGlmIChsaW5rLnBhcmVudEVsZW1lbnQpIGxpbmsucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChsaW5rKTtcbiAgICAgICAgICBsaW5rLnJlbW92ZUF0dHJpYnV0ZSgnaHJlZicpO1xuICAgICAgICAgIHJlc29sdmUoeyBmaWxlbmFtZSwgY2xpZW50OiBmYWxzZSB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgbGluay5jbGljaygpO1xuICAgIH1cbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYXZlRmlsZSAoZGF0YSwgb3B0cyA9IHt9KSB7XG4gIGNvbnN0IHBhcnRzID0gQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbIGRhdGEgXTtcbiAgY29uc3QgYmxvYiA9IG5ldyB3aW5kb3cuQmxvYihwYXJ0cywgeyB0eXBlOiBvcHRzLnR5cGUgfHwgJycgfSk7XG4gIHJldHVybiBzYXZlQmxvYihibG9iLCBvcHRzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRpbWVTdGFtcCAoKSB7XG4gIGNvbnN0IGRhdGVGb3JtYXRTdHIgPSBgeXl5eS5tbS5kZC1ISC5NTS5zc2A7XG4gIHJldHVybiBkYXRlZm9ybWF0KG5ldyBEYXRlKCksIGRhdGVGb3JtYXRTdHIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdEZpbGUgKHByZWZpeCA9ICcnLCBzdWZmaXggPSAnJywgZXh0KSB7XG4gIC8vIGNvbnN0IGRhdGVGb3JtYXRTdHIgPSBgeXl5eS5tbS5kZC1ISC5NTS5zc2A7XG4gIGNvbnN0IGRhdGVGb3JtYXRTdHIgPSBgeXl5eS1tbS1kZCAnYXQnIGguTU0uc3MgVFRgO1xuICByZXR1cm4gYCR7cHJlZml4fSR7ZGF0ZWZvcm1hdChuZXcgRGF0ZSgpLCBkYXRlRm9ybWF0U3RyKX0ke3N1ZmZpeH0ke2V4dH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZUZpbGVuYW1lIChvcHQgPSB7fSkge1xuICBvcHQgPSBhc3NpZ24oe30sIG9wdCk7XG5cbiAgLy8gQ3VzdG9tIGZpbGVuYW1lIGZ1bmN0aW9uXG4gIGlmICh0eXBlb2Ygb3B0LmZpbGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gb3B0LmZpbGUob3B0KTtcbiAgfSBlbHNlIGlmIChvcHQuZmlsZSkge1xuICAgIHJldHVybiBvcHQuZmlsZTtcbiAgfVxuXG4gIGxldCBmcmFtZSA9IG51bGw7XG4gIGxldCBleHRlbnNpb24gPSAnJztcbiAgaWYgKHR5cGVvZiBvcHQuZXh0ZW5zaW9uID09PSAnc3RyaW5nJykgZXh0ZW5zaW9uID0gb3B0LmV4dGVuc2lvbjtcblxuICBpZiAodHlwZW9mIG9wdC5mcmFtZSA9PT0gJ251bWJlcicpIHtcbiAgICBsZXQgdG90YWxGcmFtZXM7XG4gICAgaWYgKHR5cGVvZiBvcHQudG90YWxGcmFtZXMgPT09ICdudW1iZXInKSB7XG4gICAgICB0b3RhbEZyYW1lcyA9IG9wdC50b3RhbEZyYW1lcztcbiAgICB9IGVsc2Uge1xuICAgICAgdG90YWxGcmFtZXMgPSBNYXRoLm1heCgxMDAwMCwgb3B0LmZyYW1lKTtcbiAgICB9XG4gICAgZnJhbWUgPSBwYWRMZWZ0KFN0cmluZyhvcHQuZnJhbWUpLCBTdHJpbmcodG90YWxGcmFtZXMpLmxlbmd0aCwgJzAnKTtcbiAgfVxuXG4gIGNvbnN0IGxheWVyU3RyID0gaXNGaW5pdGUob3B0LnRvdGFsTGF5ZXJzKSAmJiBpc0Zpbml0ZShvcHQubGF5ZXIpICYmIG9wdC50b3RhbExheWVycyA+IDEgPyBgJHtvcHQubGF5ZXJ9YCA6ICcnO1xuICBpZiAoZnJhbWUgIT0gbnVsbCkge1xuICAgIHJldHVybiBbIGxheWVyU3RyLCBmcmFtZSBdLmZpbHRlcihCb29sZWFuKS5qb2luKCctJykgKyBleHRlbnNpb247XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgZGVmYXVsdEZpbGVOYW1lID0gb3B0LnRpbWVTdGFtcDtcbiAgICByZXR1cm4gWyBvcHQucHJlZml4LCBvcHQubmFtZSB8fCBkZWZhdWx0RmlsZU5hbWUsIGxheWVyU3RyLCBvcHQuaGFzaCwgb3B0LnN1ZmZpeCBdLmZpbHRlcihCb29sZWFuKS5qb2luKCctJykgKyBleHRlbnNpb247XG4gIH1cbn1cbiIsIi8vIEhhbmRsZSBzb21lIGNvbW1vbiB0eXBvc1xuY29uc3QgY29tbW9uVHlwb3MgPSB7XG4gIGRpbWVuc2lvbjogJ2RpbWVuc2lvbnMnLFxuICBhbmltYXRlZDogJ2FuaW1hdGUnLFxuICBhbmltYXRpbmc6ICdhbmltYXRlJyxcbiAgdW5pdDogJ3VuaXRzJyxcbiAgUDU6ICdwNScsXG4gIHBpeGVsbGF0ZWQ6ICdwaXhlbGF0ZWQnLFxuICBsb29waW5nOiAnbG9vcCcsXG4gIHBpeGVsUGVySW5jaDogJ3BpeGVscydcbn07XG5cbi8vIEhhbmRsZSBhbGwgb3RoZXIgdHlwb3NcbmNvbnN0IGFsbEtleXMgPSBbXG4gICdkaW1lbnNpb25zJywgJ3VuaXRzJywgJ3BpeGVsc1BlckluY2gnLCAnb3JpZW50YXRpb24nLFxuICAnc2NhbGVUb0ZpdCcsICdzY2FsZVRvVmlldycsICdibGVlZCcsICdwaXhlbFJhdGlvJyxcbiAgJ2V4cG9ydFBpeGVsUmF0aW8nLCAnbWF4UGl4ZWxSYXRpbycsICdzY2FsZUNvbnRleHQnLFxuICAncmVzaXplQ2FudmFzJywgJ3N0eWxlQ2FudmFzJywgJ2NhbnZhcycsICdjb250ZXh0JywgJ2F0dHJpYnV0ZXMnLFxuICAncGFyZW50JywgJ2ZpbGUnLCAnbmFtZScsICdwcmVmaXgnLCAnc3VmZml4JywgJ2FuaW1hdGUnLCAncGxheWluZycsXG4gICdsb29wJywgJ2R1cmF0aW9uJywgJ3RvdGFsRnJhbWVzJywgJ2ZwcycsICdwbGF5YmFja1JhdGUnLCAndGltZVNjYWxlJyxcbiAgJ2ZyYW1lJywgJ3RpbWUnLCAnZmx1c2gnLCAncGl4ZWxhdGVkJywgJ2hvdGtleXMnLCAncDUnLCAnaWQnLFxuICAnc2NhbGVUb0ZpdFBhZGRpbmcnLCAnZGF0YScsICdwYXJhbXMnLCAnZW5jb2RpbmcnLCAnZW5jb2RpbmdRdWFsaXR5J1xuXTtcblxuLy8gVGhpcyBpcyBmYWlybHkgb3BpbmlvbmF0ZWQgYW5kIGZvcmNlcyB1c2VycyB0byB1c2UgdGhlICdkYXRhJyBwYXJhbWV0ZXJcbi8vIGlmIHRoZXkgd2FudCB0byBwYXNzIGFsb25nIG5vbi1zZXR0aW5nIG9iamVjdHMuLi5cbmV4cG9ydCBjb25zdCBjaGVja1NldHRpbmdzID0gKHNldHRpbmdzKSA9PiB7XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhzZXR0aW5ncyk7XG4gIGtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgIGlmIChrZXkgaW4gY29tbW9uVHlwb3MpIHtcbiAgICAgIGNvbnN0IGFjdHVhbCA9IGNvbW1vblR5cG9zW2tleV07XG4gICAgICBjb25zb2xlLndhcm4oYFtjYW52YXMtc2tldGNoXSBDb3VsZCBub3QgcmVjb2duaXplIHRoZSBzZXR0aW5nIFwiJHtrZXl9XCIsIGRpZCB5b3UgbWVhbiBcIiR7YWN0dWFsfVwiP2ApO1xuICAgIH0gZWxzZSBpZiAoIWFsbEtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgY29uc29sZS53YXJuKGBbY2FudmFzLXNrZXRjaF0gQ291bGQgbm90IHJlY29nbml6ZSB0aGUgc2V0dGluZyBcIiR7a2V5fVwiYCk7XG4gICAgfVxuICB9KTtcbn07XG4iLCJpbXBvcnQgeyBnZXRDbGllbnRBUEkgfSBmcm9tICcuLi91dGlsJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKG9wdCA9IHt9KSB7XG4gIGNvbnN0IGhhbmRsZXIgPSBldiA9PiB7XG4gICAgaWYgKCFvcHQuZW5hYmxlZCgpKSByZXR1cm47XG5cbiAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnRBUEkoKTtcbiAgICBpZiAoZXYua2V5Q29kZSA9PT0gODMgJiYgIWV2LmFsdEtleSAmJiAoZXYubWV0YUtleSB8fCBldi5jdHJsS2V5KSkge1xuICAgICAgLy8gQ21kICsgU1xuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgIG9wdC5zYXZlKGV2KTtcbiAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT09IDMyKSB7XG4gICAgICAvLyBTcGFjZVxuICAgICAgLy8gVE9ETzogd2hhdCB0byBkbyB3aXRoIHRoaXM/IGtlZXAgaXQsIG9yIHJlbW92ZSBpdD9cbiAgICAgIG9wdC50b2dnbGVQbGF5KGV2KTtcbiAgICB9IGVsc2UgaWYgKGNsaWVudCAmJiAhZXYuYWx0S2V5ICYmIGV2LmtleUNvZGUgPT09IDc1ICYmIChldi5tZXRhS2V5IHx8IGV2LmN0cmxLZXkpKSB7XG4gICAgICAvLyBDbWQgKyBLLCBvbmx5IHdoZW4gY2FudmFzLXNrZXRjaC1jbGkgaXMgdXNlZFxuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgIG9wdC5jb21taXQoZXYpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBhdHRhY2ggPSAoKSA9PiB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVyKTtcbiAgfTtcblxuICBjb25zdCBkZXRhY2ggPSAoKSA9PiB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVyKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGF0dGFjaCxcbiAgICBkZXRhY2hcbiAgfTtcbn1cbiIsImNvbnN0IGRlZmF1bHRVbml0cyA9ICdtbSc7XG5cbmNvbnN0IGRhdGEgPSBbXG4gIC8vIENvbW1vbiBQYXBlciBTaXplc1xuICAvLyAoTW9zdGx5IE5vcnRoLUFtZXJpY2FuIGJhc2VkKVxuICBbICdwb3N0Y2FyZCcsIDEwMS42LCAxNTIuNCBdLFxuICBbICdwb3N0ZXItc21hbGwnLCAyODAsIDQzMCBdLFxuICBbICdwb3N0ZXInLCA0NjAsIDYxMCBdLFxuICBbICdwb3N0ZXItbGFyZ2UnLCA2MTAsIDkxMCBdLFxuICBbICdidXNpbmVzcy1jYXJkJywgNTAuOCwgODguOSBdLFxuXG4gIC8vIFBob3RvZ3JhcGhpYyBQcmludCBQYXBlciBTaXplc1xuICBbICcycicsIDY0LCA4OSBdLFxuICBbICczcicsIDg5LCAxMjcgXSxcbiAgWyAnNHInLCAxMDIsIDE1MiBdLFxuICBbICc1cicsIDEyNywgMTc4IF0sIC8vIDXigLN4N+KAs1xuICBbICc2cicsIDE1MiwgMjAzIF0sIC8vIDbigLN4OOKAs1xuICBbICc4cicsIDIwMywgMjU0IF0sIC8vIDjigLN4MTDigLNcbiAgWyAnMTByJywgMjU0LCAzMDUgXSwgLy8gMTDigLN4MTLigLNcbiAgWyAnMTFyJywgMjc5LCAzNTYgXSwgLy8gMTHigLN4MTTigLNcbiAgWyAnMTJyJywgMzA1LCAzODEgXSxcblxuICAvLyBTdGFuZGFyZCBQYXBlciBTaXplc1xuICBbICdhMCcsIDg0MSwgMTE4OSBdLFxuICBbICdhMScsIDU5NCwgODQxIF0sXG4gIFsgJ2EyJywgNDIwLCA1OTQgXSxcbiAgWyAnYTMnLCAyOTcsIDQyMCBdLFxuICBbICdhNCcsIDIxMCwgMjk3IF0sXG4gIFsgJ2E1JywgMTQ4LCAyMTAgXSxcbiAgWyAnYTYnLCAxMDUsIDE0OCBdLFxuICBbICdhNycsIDc0LCAxMDUgXSxcbiAgWyAnYTgnLCA1MiwgNzQgXSxcbiAgWyAnYTknLCAzNywgNTIgXSxcbiAgWyAnYTEwJywgMjYsIDM3IF0sXG4gIFsgJzJhMCcsIDExODksIDE2ODIgXSxcbiAgWyAnNGEwJywgMTY4MiwgMjM3OCBdLFxuICBbICdiMCcsIDEwMDAsIDE0MTQgXSxcbiAgWyAnYjEnLCA3MDcsIDEwMDAgXSxcbiAgWyAnYjErJywgNzIwLCAxMDIwIF0sXG4gIFsgJ2IyJywgNTAwLCA3MDcgXSxcbiAgWyAnYjIrJywgNTIwLCA3MjAgXSxcbiAgWyAnYjMnLCAzNTMsIDUwMCBdLFxuICBbICdiNCcsIDI1MCwgMzUzIF0sXG4gIFsgJ2I1JywgMTc2LCAyNTAgXSxcbiAgWyAnYjYnLCAxMjUsIDE3NiBdLFxuICBbICdiNycsIDg4LCAxMjUgXSxcbiAgWyAnYjgnLCA2MiwgODggXSxcbiAgWyAnYjknLCA0NCwgNjIgXSxcbiAgWyAnYjEwJywgMzEsIDQ0IF0sXG4gIFsgJ2IxMScsIDIyLCAzMiBdLFxuICBbICdiMTInLCAxNiwgMjIgXSxcbiAgWyAnYzAnLCA5MTcsIDEyOTcgXSxcbiAgWyAnYzEnLCA2NDgsIDkxNyBdLFxuICBbICdjMicsIDQ1OCwgNjQ4IF0sXG4gIFsgJ2MzJywgMzI0LCA0NTggXSxcbiAgWyAnYzQnLCAyMjksIDMyNCBdLFxuICBbICdjNScsIDE2MiwgMjI5IF0sXG4gIFsgJ2M2JywgMTE0LCAxNjIgXSxcbiAgWyAnYzcnLCA4MSwgMTE0IF0sXG4gIFsgJ2M4JywgNTcsIDgxIF0sXG4gIFsgJ2M5JywgNDAsIDU3IF0sXG4gIFsgJ2MxMCcsIDI4LCA0MCBdLFxuICBbICdjMTEnLCAyMiwgMzIgXSxcbiAgWyAnYzEyJywgMTYsIDIyIF0sXG5cbiAgLy8gVXNlIGluY2hlcyBmb3IgTm9ydGggQW1lcmljYW4gc2l6ZXMsXG4gIC8vIGFzIGl0IHByb2R1Y2VzIGxlc3MgZmxvYXQgcHJlY2lzaW9uIGVycm9yc1xuICBbICdoYWxmLWxldHRlcicsIDUuNSwgOC41LCAnaW4nIF0sXG4gIFsgJ2xldHRlcicsIDguNSwgMTEsICdpbicgXSxcbiAgWyAnbGVnYWwnLCA4LjUsIDE0LCAnaW4nIF0sXG4gIFsgJ2p1bmlvci1sZWdhbCcsIDUsIDgsICdpbicgXSxcbiAgWyAnbGVkZ2VyJywgMTEsIDE3LCAnaW4nIF0sXG4gIFsgJ3RhYmxvaWQnLCAxMSwgMTcsICdpbicgXSxcbiAgWyAnYW5zaS1hJywgOC41LCAxMS4wLCAnaW4nIF0sXG4gIFsgJ2Fuc2ktYicsIDExLjAsIDE3LjAsICdpbicgXSxcbiAgWyAnYW5zaS1jJywgMTcuMCwgMjIuMCwgJ2luJyBdLFxuICBbICdhbnNpLWQnLCAyMi4wLCAzNC4wLCAnaW4nIF0sXG4gIFsgJ2Fuc2ktZScsIDM0LjAsIDQ0LjAsICdpbicgXSxcbiAgWyAnYXJjaC1hJywgOSwgMTIsICdpbicgXSxcbiAgWyAnYXJjaC1iJywgMTIsIDE4LCAnaW4nIF0sXG4gIFsgJ2FyY2gtYycsIDE4LCAyNCwgJ2luJyBdLFxuICBbICdhcmNoLWQnLCAyNCwgMzYsICdpbicgXSxcbiAgWyAnYXJjaC1lJywgMzYsIDQ4LCAnaW4nIF0sXG4gIFsgJ2FyY2gtZTEnLCAzMCwgNDIsICdpbicgXSxcbiAgWyAnYXJjaC1lMicsIDI2LCAzOCwgJ2luJyBdLFxuICBbICdhcmNoLWUzJywgMjcsIDM5LCAnaW4nIF1cbl07XG5cbmV4cG9ydCBkZWZhdWx0IGRhdGEucmVkdWNlKChkaWN0LCBwcmVzZXQpID0+IHtcbiAgY29uc3QgaXRlbSA9IHtcbiAgICB1bml0czogcHJlc2V0WzNdIHx8IGRlZmF1bHRVbml0cyxcbiAgICBkaW1lbnNpb25zOiBbIHByZXNldFsxXSwgcHJlc2V0WzJdIF1cbiAgfTtcbiAgZGljdFtwcmVzZXRbMF1dID0gaXRlbTtcbiAgZGljdFtwcmVzZXRbMF0ucmVwbGFjZSgvLS9nLCAnICcpXSA9IGl0ZW07XG4gIHJldHVybiBkaWN0O1xufSwge30pO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50c1tpXSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gYXJndW1lbnRzW2ldO1xuICAgIH1cbn07XG4iLCJ2YXIgZGVmaW5lZCA9IHJlcXVpcmUoJ2RlZmluZWQnKTtcbnZhciB1bml0cyA9IFsgJ21tJywgJ2NtJywgJ20nLCAncGMnLCAncHQnLCAnaW4nLCAnZnQnLCAncHgnIF07XG5cbnZhciBjb252ZXJzaW9ucyA9IHtcbiAgLy8gbWV0cmljXG4gIG06IHtcbiAgICBzeXN0ZW06ICdtZXRyaWMnLFxuICAgIGZhY3RvcjogMVxuICB9LFxuICBjbToge1xuICAgIHN5c3RlbTogJ21ldHJpYycsXG4gICAgZmFjdG9yOiAxIC8gMTAwXG4gIH0sXG4gIG1tOiB7XG4gICAgc3lzdGVtOiAnbWV0cmljJyxcbiAgICBmYWN0b3I6IDEgLyAxMDAwXG4gIH0sXG4gIC8vIGltcGVyaWFsXG4gIHB0OiB7XG4gICAgc3lzdGVtOiAnaW1wZXJpYWwnLFxuICAgIGZhY3RvcjogMSAvIDcyXG4gIH0sXG4gIHBjOiB7XG4gICAgc3lzdGVtOiAnaW1wZXJpYWwnLFxuICAgIGZhY3RvcjogMSAvIDZcbiAgfSxcbiAgaW46IHtcbiAgICBzeXN0ZW06ICdpbXBlcmlhbCcsXG4gICAgZmFjdG9yOiAxXG4gIH0sXG4gIGZ0OiB7XG4gICAgc3lzdGVtOiAnaW1wZXJpYWwnLFxuICAgIGZhY3RvcjogMTJcbiAgfVxufTtcblxuY29uc3QgYW5jaG9ycyA9IHtcbiAgbWV0cmljOiB7XG4gICAgdW5pdDogJ20nLFxuICAgIHJhdGlvOiAxIC8gMC4wMjU0XG4gIH0sXG4gIGltcGVyaWFsOiB7XG4gICAgdW5pdDogJ2luJyxcbiAgICByYXRpbzogMC4wMjU0XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHJvdW5kICh2YWx1ZSwgZGVjaW1hbHMpIHtcbiAgcmV0dXJuIE51bWJlcihNYXRoLnJvdW5kKHZhbHVlICsgJ2UnICsgZGVjaW1hbHMpICsgJ2UtJyArIGRlY2ltYWxzKTtcbn1cblxuZnVuY3Rpb24gY29udmVydERpc3RhbmNlICh2YWx1ZSwgZnJvbVVuaXQsIHRvVW5pdCwgb3B0cykge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJyB8fCAhaXNGaW5pdGUodmFsdWUpKSB0aHJvdyBuZXcgRXJyb3IoJ1ZhbHVlIG11c3QgYmUgYSBmaW5pdGUgbnVtYmVyJyk7XG4gIGlmICghZnJvbVVuaXQgfHwgIXRvVW5pdCkgdGhyb3cgbmV3IEVycm9yKCdNdXN0IHNwZWNpZnkgZnJvbSBhbmQgdG8gdW5pdHMnKTtcblxuICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgdmFyIHBpeGVsc1BlckluY2ggPSBkZWZpbmVkKG9wdHMucGl4ZWxzUGVySW5jaCwgOTYpO1xuICB2YXIgcHJlY2lzaW9uID0gb3B0cy5wcmVjaXNpb247XG4gIHZhciByb3VuZFBpeGVsID0gb3B0cy5yb3VuZFBpeGVsICE9PSBmYWxzZTtcblxuICBmcm9tVW5pdCA9IGZyb21Vbml0LnRvTG93ZXJDYXNlKCk7XG4gIHRvVW5pdCA9IHRvVW5pdC50b0xvd2VyQ2FzZSgpO1xuXG4gIGlmICh1bml0cy5pbmRleE9mKGZyb21Vbml0KSA9PT0gLTEpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBmcm9tIHVuaXQgXCInICsgZnJvbVVuaXQgKyAnXCIsIG11c3QgYmUgb25lIG9mOiAnICsgdW5pdHMuam9pbignLCAnKSk7XG4gIGlmICh1bml0cy5pbmRleE9mKHRvVW5pdCkgPT09IC0xKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZnJvbSB1bml0IFwiJyArIHRvVW5pdCArICdcIiwgbXVzdCBiZSBvbmUgb2Y6ICcgKyB1bml0cy5qb2luKCcsICcpKTtcblxuICBpZiAoZnJvbVVuaXQgPT09IHRvVW5pdCkge1xuICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gY29udmVydCBmcm9tIEEgdG8gQiBzaW5jZSB0aGV5IGFyZSB0aGUgc2FtZSBhbHJlYWR5XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgdmFyIHRvRmFjdG9yID0gMTtcbiAgdmFyIGZyb21GYWN0b3IgPSAxO1xuICB2YXIgaXNUb1BpeGVsID0gZmFsc2U7XG5cbiAgaWYgKGZyb21Vbml0ID09PSAncHgnKSB7XG4gICAgZnJvbUZhY3RvciA9IDEgLyBwaXhlbHNQZXJJbmNoO1xuICAgIGZyb21Vbml0ID0gJ2luJztcbiAgfVxuICBpZiAodG9Vbml0ID09PSAncHgnKSB7XG4gICAgaXNUb1BpeGVsID0gdHJ1ZTtcbiAgICB0b0ZhY3RvciA9IHBpeGVsc1BlckluY2g7XG4gICAgdG9Vbml0ID0gJ2luJztcbiAgfVxuXG4gIHZhciBmcm9tVW5pdERhdGEgPSBjb252ZXJzaW9uc1tmcm9tVW5pdF07XG4gIHZhciB0b1VuaXREYXRhID0gY29udmVyc2lvbnNbdG9Vbml0XTtcblxuICAvLyBzb3VyY2UgdG8gYW5jaG9yIGluc2lkZSBzb3VyY2UncyBzeXN0ZW1cbiAgdmFyIGFuY2hvciA9IHZhbHVlICogZnJvbVVuaXREYXRhLmZhY3RvciAqIGZyb21GYWN0b3I7XG5cbiAgLy8gaWYgc3lzdGVtcyBkaWZmZXIsIGNvbnZlcnQgb25lIHRvIGFub3RoZXJcbiAgaWYgKGZyb21Vbml0RGF0YS5zeXN0ZW0gIT09IHRvVW5pdERhdGEuc3lzdGVtKSB7XG4gICAgLy8gcmVndWxhciAnbScgdG8gJ2luJyBhbmQgc28gZm9ydGhcbiAgICBhbmNob3IgKj0gYW5jaG9yc1tmcm9tVW5pdERhdGEuc3lzdGVtXS5yYXRpbztcbiAgfVxuXG4gIHZhciByZXN1bHQgPSBhbmNob3IgLyB0b1VuaXREYXRhLmZhY3RvciAqIHRvRmFjdG9yO1xuICBpZiAoaXNUb1BpeGVsICYmIHJvdW5kUGl4ZWwpIHtcbiAgICByZXN1bHQgPSBNYXRoLnJvdW5kKHJlc3VsdCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHByZWNpc2lvbiA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUocHJlY2lzaW9uKSkge1xuICAgIHJlc3VsdCA9IHJvdW5kKHJlc3VsdCwgcHJlY2lzaW9uKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnZlcnREaXN0YW5jZTtcbm1vZHVsZS5leHBvcnRzLnVuaXRzID0gdW5pdHM7XG4iLCJpbXBvcnQgcGFwZXJTaXplcyBmcm9tICcuL3BhcGVyLXNpemVzJztcbmltcG9ydCBjb252ZXJ0TGVuZ3RoIGZyb20gJ2NvbnZlcnQtbGVuZ3RoJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldERpbWVuc2lvbnNGcm9tUHJlc2V0IChkaW1lbnNpb25zLCB1bml0c1RvID0gJ3B4JywgcGl4ZWxzUGVySW5jaCA9IDcyKSB7XG4gIGlmICh0eXBlb2YgZGltZW5zaW9ucyA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCBrZXkgPSBkaW1lbnNpb25zLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKCEoa2V5IGluIHBhcGVyU2l6ZXMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBkaW1lbnNpb24gcHJlc2V0IFwiJHtkaW1lbnNpb25zfVwiIGlzIG5vdCBzdXBwb3J0ZWQgb3IgY291bGQgbm90IGJlIGZvdW5kOyB0cnkgdXNpbmcgYTQsIGEzLCBwb3N0Y2FyZCwgbGV0dGVyLCBldGMuYClcbiAgICB9XG4gICAgY29uc3QgcHJlc2V0ID0gcGFwZXJTaXplc1trZXldO1xuICAgIHJldHVybiBwcmVzZXQuZGltZW5zaW9ucy5tYXAoZCA9PiB7XG4gICAgICByZXR1cm4gY29udmVydERpc3RhbmNlKGQsIHByZXNldC51bml0cywgdW5pdHNUbywgcGl4ZWxzUGVySW5jaCk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGRpbWVuc2lvbnM7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnREaXN0YW5jZSAoZGltZW5zaW9uLCB1bml0c0Zyb20gPSAncHgnLCB1bml0c1RvID0gJ3B4JywgcGl4ZWxzUGVySW5jaCA9IDcyKSB7XG4gIHJldHVybiBjb252ZXJ0TGVuZ3RoKGRpbWVuc2lvbiwgdW5pdHNGcm9tLCB1bml0c1RvLCB7XG4gICAgcGl4ZWxzUGVySW5jaCxcbiAgICBwcmVjaXNpb246IDQsXG4gICAgcm91bmRQaXhlbDogdHJ1ZVxuICB9KTtcbn1cbiIsImltcG9ydCB7IGdldERpbWVuc2lvbnNGcm9tUHJlc2V0LCBjb252ZXJ0RGlzdGFuY2UgfSBmcm9tICcuLi9kaXN0YW5jZXMnO1xuaW1wb3J0IHsgaXNCcm93c2VyLCBkZWZpbmVkIH0gZnJvbSAnLi4vdXRpbCc7XG5cbmZ1bmN0aW9uIGNoZWNrSWZIYXNEaW1lbnNpb25zIChzZXR0aW5ncykge1xuICBpZiAoIXNldHRpbmdzLmRpbWVuc2lvbnMpIHJldHVybiBmYWxzZTtcbiAgaWYgKHR5cGVvZiBzZXR0aW5ncy5kaW1lbnNpb25zID09PSAnc3RyaW5nJykgcmV0dXJuIHRydWU7XG4gIGlmIChBcnJheS5pc0FycmF5KHNldHRpbmdzLmRpbWVuc2lvbnMpICYmIHNldHRpbmdzLmRpbWVuc2lvbnMubGVuZ3RoID49IDIpIHJldHVybiB0cnVlO1xuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGdldFBhcmVudFNpemUgKHByb3BzLCBzZXR0aW5ncykge1xuICAvLyBXaGVuIG5vIHsgZGltZW5zaW9uIH0gaXMgcGFzc2VkIGluIG5vZGUsIHdlIGRlZmF1bHQgdG8gSFRNTCBjYW52YXMgc2l6ZVxuICBpZiAoIWlzQnJvd3NlcigpKSB7XG4gICAgcmV0dXJuIFsgMzAwLCAxNTAgXTtcbiAgfVxuXG4gIGxldCBlbGVtZW50ID0gc2V0dGluZ3MucGFyZW50IHx8IHdpbmRvdztcblxuICBpZiAoZWxlbWVudCA9PT0gd2luZG93IHx8XG4gICAgICBlbGVtZW50ID09PSBkb2N1bWVudCB8fFxuICAgICAgZWxlbWVudCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgIHJldHVybiBbIHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQgXTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIFsgd2lkdGgsIGhlaWdodCBdO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlc2l6ZUNhbnZhcyAocHJvcHMsIHNldHRpbmdzKSB7XG4gIGxldCB3aWR0aCwgaGVpZ2h0O1xuICBsZXQgc3R5bGVXaWR0aCwgc3R5bGVIZWlnaHQ7XG4gIGxldCBjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0O1xuXG4gIGNvbnN0IGJyb3dzZXIgPSBpc0Jyb3dzZXIoKTtcbiAgY29uc3QgZGltZW5zaW9ucyA9IHNldHRpbmdzLmRpbWVuc2lvbnM7XG4gIGNvbnN0IGhhc0RpbWVuc2lvbnMgPSBjaGVja0lmSGFzRGltZW5zaW9ucyhzZXR0aW5ncyk7XG4gIGNvbnN0IGV4cG9ydGluZyA9IHByb3BzLmV4cG9ydGluZztcbiAgbGV0IHNjYWxlVG9GaXQgPSBoYXNEaW1lbnNpb25zID8gc2V0dGluZ3Muc2NhbGVUb0ZpdCAhPT0gZmFsc2UgOiBmYWxzZTtcbiAgbGV0IHNjYWxlVG9WaWV3ID0gKCFleHBvcnRpbmcgJiYgaGFzRGltZW5zaW9ucykgPyBzZXR0aW5ncy5zY2FsZVRvVmlldyA6IHRydWU7XG4gIC8vIGluIG5vZGUsIGNhbmNlbCBib3RoIG9mIHRoZXNlIG9wdGlvbnNcbiAgaWYgKCFicm93c2VyKSBzY2FsZVRvRml0ID0gc2NhbGVUb1ZpZXcgPSBmYWxzZTtcbiAgY29uc3QgdW5pdHMgPSBzZXR0aW5ncy51bml0cztcbiAgY29uc3QgcGl4ZWxzUGVySW5jaCA9ICh0eXBlb2Ygc2V0dGluZ3MucGl4ZWxzUGVySW5jaCA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUoc2V0dGluZ3MucGl4ZWxzUGVySW5jaCkpID8gc2V0dGluZ3MucGl4ZWxzUGVySW5jaCA6IDcyO1xuICBjb25zdCBibGVlZCA9IGRlZmluZWQoc2V0dGluZ3MuYmxlZWQsIDApO1xuXG4gIGNvbnN0IGRldmljZVBpeGVsUmF0aW8gPSBicm93c2VyID8gd2luZG93LmRldmljZVBpeGVsUmF0aW8gOiAxO1xuICBjb25zdCBiYXNlUGl4ZWxSYXRpbyA9IHNjYWxlVG9WaWV3ID8gZGV2aWNlUGl4ZWxSYXRpbyA6IDE7XG5cbiAgbGV0IHBpeGVsUmF0aW8sIGV4cG9ydFBpeGVsUmF0aW87XG5cbiAgLy8gSWYgYSBwaXhlbCByYXRpbyBpcyBzcGVjaWZpZWQsIHdlIHdpbGwgdXNlIGl0LlxuICAvLyBPdGhlcndpc2U6XG4gIC8vICAtPiBJZiBkaW1lbnNpb24gaXMgc3BlY2lmaWVkLCB1c2UgYmFzZSByYXRpbyAoaS5lLiBzaXplIGZvciBleHBvcnQpXG4gIC8vICAtPiBJZiBubyBkaW1lbnNpb24gaXMgc3BlY2lmaWVkLCB1c2UgZGV2aWNlIHJhdGlvIChpLmUuIHNpemUgZm9yIHNjcmVlbilcbiAgaWYgKHR5cGVvZiBzZXR0aW5ncy5waXhlbFJhdGlvID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZShzZXR0aW5ncy5waXhlbFJhdGlvKSkge1xuICAgIC8vIFdoZW4geyBwaXhlbFJhdGlvIH0gaXMgc3BlY2lmaWVkLCBpdCdzIGFsc28gdXNlZCBhcyBkZWZhdWx0IGV4cG9ydFBpeGVsUmF0aW8uXG4gICAgcGl4ZWxSYXRpbyA9IHNldHRpbmdzLnBpeGVsUmF0aW87XG4gICAgZXhwb3J0UGl4ZWxSYXRpbyA9IGRlZmluZWQoc2V0dGluZ3MuZXhwb3J0UGl4ZWxSYXRpbywgcGl4ZWxSYXRpbyk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGhhc0RpbWVuc2lvbnMpIHtcbiAgICAgIC8vIFdoZW4gYSBkaW1lbnNpb24gaXMgc3BlY2lmaWVkLCB1c2UgdGhlIGJhc2UgcmF0aW8gcmF0aGVyIHRoYW4gc2NyZWVuIHJhdGlvXG4gICAgICBwaXhlbFJhdGlvID0gYmFzZVBpeGVsUmF0aW87XG4gICAgICAvLyBEZWZhdWx0IHRvIGEgcGl4ZWwgcmF0aW8gb2YgMSBzbyB0aGF0IHlvdSBlbmQgdXAgd2l0aCB0aGUgc2FtZSBkaW1lbnNpb25cbiAgICAgIC8vIHlvdSBzcGVjaWZpZWQsIGkuZS4gWyA1MDAsIDUwMCBdIGlzIGV4cG9ydGVkIGFzIDUwMHg1MDAgcHhcbiAgICAgIGV4cG9ydFBpeGVsUmF0aW8gPSBkZWZpbmVkKHNldHRpbmdzLmV4cG9ydFBpeGVsUmF0aW8sIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBObyBkaW1lbnNpb24gaXMgc3BlY2lmaWVkLCBhc3N1bWUgZnVsbC1zY3JlZW4gcmV0aW5hIHNpemluZ1xuICAgICAgcGl4ZWxSYXRpbyA9IGRldmljZVBpeGVsUmF0aW87XG4gICAgICAvLyBEZWZhdWx0IHRvIHNjcmVlbiBwaXhlbCByYXRpbywgc28gdGhhdCBpdCdzIGxpa2UgdGFraW5nIGEgZGV2aWNlIHNjcmVlbnNob3RcbiAgICAgIGV4cG9ydFBpeGVsUmF0aW8gPSBkZWZpbmVkKHNldHRpbmdzLmV4cG9ydFBpeGVsUmF0aW8sIHBpeGVsUmF0aW8pO1xuICAgIH1cbiAgfVxuXG4gIC8vIENsYW1wIHBpeGVsIHJhdGlvXG4gIGlmICh0eXBlb2Ygc2V0dGluZ3MubWF4UGl4ZWxSYXRpbyA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUoc2V0dGluZ3MubWF4UGl4ZWxSYXRpbykpIHtcbiAgICBwaXhlbFJhdGlvID0gTWF0aC5taW4oc2V0dGluZ3MubWF4UGl4ZWxSYXRpbywgcGl4ZWxSYXRpbyk7XG4gIH1cblxuICAvLyBIYW5kbGUgZXhwb3J0IHBpeGVsIHJhdGlvXG4gIGlmIChleHBvcnRpbmcpIHtcbiAgICBwaXhlbFJhdGlvID0gZXhwb3J0UGl4ZWxSYXRpbztcbiAgfVxuXG4gIC8vIHBhcmVudFdpZHRoID0gdHlwZW9mIHBhcmVudFdpZHRoID09PSAndW5kZWZpbmVkJyA/IGRlZmF1bHROb2RlU2l6ZVswXSA6IHBhcmVudFdpZHRoO1xuICAvLyBwYXJlbnRIZWlnaHQgPSB0eXBlb2YgcGFyZW50SGVpZ2h0ID09PSAndW5kZWZpbmVkJyA/IGRlZmF1bHROb2RlU2l6ZVsxXSA6IHBhcmVudEhlaWdodDtcblxuICBsZXQgWyBwYXJlbnRXaWR0aCwgcGFyZW50SGVpZ2h0IF0gPSBnZXRQYXJlbnRTaXplKHByb3BzLCBzZXR0aW5ncyk7XG4gIGxldCB0cmltV2lkdGgsIHRyaW1IZWlnaHQ7XG5cbiAgLy8gWW91IGNhbiBzcGVjaWZ5IGEgZGltZW5zaW9ucyBpbiBwaXhlbHMgb3IgY20vbS9pbi9ldGNcbiAgaWYgKGhhc0RpbWVuc2lvbnMpIHtcbiAgICBjb25zdCByZXN1bHQgPSBnZXREaW1lbnNpb25zRnJvbVByZXNldChkaW1lbnNpb25zLCB1bml0cywgcGl4ZWxzUGVySW5jaCk7XG4gICAgY29uc3QgaGlnaGVzdCA9IE1hdGgubWF4KHJlc3VsdFswXSwgcmVzdWx0WzFdKTtcbiAgICBjb25zdCBsb3dlc3QgPSBNYXRoLm1pbihyZXN1bHRbMF0sIHJlc3VsdFsxXSk7XG4gICAgaWYgKHNldHRpbmdzLm9yaWVudGF0aW9uKSB7XG4gICAgICBjb25zdCBsYW5kc2NhcGUgPSBzZXR0aW5ncy5vcmllbnRhdGlvbiA9PT0gJ2xhbmRzY2FwZSc7XG4gICAgICB3aWR0aCA9IGxhbmRzY2FwZSA/IGhpZ2hlc3QgOiBsb3dlc3Q7XG4gICAgICBoZWlnaHQgPSBsYW5kc2NhcGUgPyBsb3dlc3QgOiBoaWdoZXN0O1xuICAgIH0gZWxzZSB7XG4gICAgICB3aWR0aCA9IHJlc3VsdFswXTtcbiAgICAgIGhlaWdodCA9IHJlc3VsdFsxXTtcbiAgICB9XG5cbiAgICB0cmltV2lkdGggPSB3aWR0aDtcbiAgICB0cmltSGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgLy8gQXBwbHkgYmxlZWQgd2hpY2ggaXMgYXNzdW1lZCB0byBiZSBpbiB0aGUgc2FtZSB1bml0c1xuICAgIHdpZHRoICs9IGJsZWVkICogMjtcbiAgICBoZWlnaHQgKz0gYmxlZWQgKiAyO1xuICB9IGVsc2Uge1xuICAgIHdpZHRoID0gcGFyZW50V2lkdGg7XG4gICAgaGVpZ2h0ID0gcGFyZW50SGVpZ2h0O1xuICAgIHRyaW1XaWR0aCA9IHdpZHRoO1xuICAgIHRyaW1IZWlnaHQgPSBoZWlnaHQ7XG4gIH1cblxuICAvLyBSZWFsIHNpemUgaW4gcGl4ZWxzIGFmdGVyIFBQSSBpcyB0YWtlbiBpbnRvIGFjY291bnRcbiAgbGV0IHJlYWxXaWR0aCA9IHdpZHRoO1xuICBsZXQgcmVhbEhlaWdodCA9IGhlaWdodDtcbiAgaWYgKGhhc0RpbWVuc2lvbnMgJiYgdW5pdHMpIHtcbiAgICAvLyBDb252ZXJ0IHRvIGRpZ2l0YWwvcGl4ZWwgdW5pdHMgaWYgbmVjZXNzYXJ5XG4gICAgcmVhbFdpZHRoID0gY29udmVydERpc3RhbmNlKHdpZHRoLCB1bml0cywgJ3B4JywgcGl4ZWxzUGVySW5jaCk7XG4gICAgcmVhbEhlaWdodCA9IGNvbnZlcnREaXN0YW5jZShoZWlnaHQsIHVuaXRzLCAncHgnLCBwaXhlbHNQZXJJbmNoKTtcbiAgfVxuXG4gIC8vIEhvdyBiaWcgdG8gc2V0IHRoZSAndmlldycgb2YgdGhlIGNhbnZhcyBpbiB0aGUgYnJvd3NlciAoaS5lLiBzdHlsZSlcbiAgc3R5bGVXaWR0aCA9IE1hdGgucm91bmQocmVhbFdpZHRoKTtcbiAgc3R5bGVIZWlnaHQgPSBNYXRoLnJvdW5kKHJlYWxIZWlnaHQpO1xuXG4gIC8vIElmIHdlIHdpc2ggdG8gc2NhbGUgdGhlIHZpZXcgdG8gdGhlIGJyb3dzZXIgd2luZG93XG4gIGlmIChzY2FsZVRvRml0ICYmICFleHBvcnRpbmcgJiYgaGFzRGltZW5zaW9ucykge1xuICAgIGNvbnN0IGFzcGVjdCA9IHdpZHRoIC8gaGVpZ2h0O1xuICAgIGNvbnN0IHdpbmRvd0FzcGVjdCA9IHBhcmVudFdpZHRoIC8gcGFyZW50SGVpZ2h0O1xuICAgIGNvbnN0IHNjYWxlVG9GaXRQYWRkaW5nID0gZGVmaW5lZChzZXR0aW5ncy5zY2FsZVRvRml0UGFkZGluZywgNDApO1xuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5yb3VuZChwYXJlbnRXaWR0aCAtIHNjYWxlVG9GaXRQYWRkaW5nICogMik7XG4gICAgY29uc3QgbWF4SGVpZ2h0ID0gTWF0aC5yb3VuZChwYXJlbnRIZWlnaHQgLSBzY2FsZVRvRml0UGFkZGluZyAqIDIpO1xuICAgIGlmIChzdHlsZVdpZHRoID4gbWF4V2lkdGggfHwgc3R5bGVIZWlnaHQgPiBtYXhIZWlnaHQpIHtcbiAgICAgIGlmICh3aW5kb3dBc3BlY3QgPiBhc3BlY3QpIHtcbiAgICAgICAgc3R5bGVIZWlnaHQgPSBtYXhIZWlnaHQ7XG4gICAgICAgIHN0eWxlV2lkdGggPSBNYXRoLnJvdW5kKHN0eWxlSGVpZ2h0ICogYXNwZWN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0eWxlV2lkdGggPSBtYXhXaWR0aDtcbiAgICAgICAgc3R5bGVIZWlnaHQgPSBNYXRoLnJvdW5kKHN0eWxlV2lkdGggLyBhc3BlY3QpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNhbnZhc1dpZHRoID0gc2NhbGVUb1ZpZXcgPyBNYXRoLnJvdW5kKHBpeGVsUmF0aW8gKiBzdHlsZVdpZHRoKSA6IE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIHJlYWxXaWR0aCk7XG4gIGNhbnZhc0hlaWdodCA9IHNjYWxlVG9WaWV3ID8gTWF0aC5yb3VuZChwaXhlbFJhdGlvICogc3R5bGVIZWlnaHQpIDogTWF0aC5yb3VuZChwaXhlbFJhdGlvICogcmVhbEhlaWdodCk7XG5cbiAgY29uc3Qgdmlld3BvcnRXaWR0aCA9IHNjYWxlVG9WaWV3ID8gTWF0aC5yb3VuZChzdHlsZVdpZHRoKSA6IE1hdGgucm91bmQocmVhbFdpZHRoKTtcbiAgY29uc3Qgdmlld3BvcnRIZWlnaHQgPSBzY2FsZVRvVmlldyA/IE1hdGgucm91bmQoc3R5bGVIZWlnaHQpIDogTWF0aC5yb3VuZChyZWFsSGVpZ2h0KTtcblxuICBjb25zdCBzY2FsZVggPSBjYW52YXNXaWR0aCAvIHdpZHRoO1xuICBjb25zdCBzY2FsZVkgPSBjYW52YXNIZWlnaHQgLyBoZWlnaHQ7XG5cbiAgLy8gQXNzaWduIHRvIGN1cnJlbnQgcHJvcHNcbiAgcmV0dXJuIHtcbiAgICBibGVlZCxcbiAgICBwaXhlbFJhdGlvLFxuICAgIHdpZHRoLFxuICAgIGhlaWdodCxcbiAgICBkaW1lbnNpb25zOiBbIHdpZHRoLCBoZWlnaHQgXSxcbiAgICB1bml0czogdW5pdHMgfHwgJ3B4JyxcbiAgICBzY2FsZVgsXG4gICAgc2NhbGVZLFxuICAgIHBpeGVsc1BlckluY2gsXG4gICAgdmlld3BvcnRXaWR0aCxcbiAgICB2aWV3cG9ydEhlaWdodCxcbiAgICBjYW52YXNXaWR0aCxcbiAgICBjYW52YXNIZWlnaHQsXG4gICAgdHJpbVdpZHRoLFxuICAgIHRyaW1IZWlnaHQsXG4gICAgc3R5bGVXaWR0aCxcbiAgICBzdHlsZUhlaWdodFxuICB9O1xufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBnZXRDYW52YXNDb250ZXh0XG5mdW5jdGlvbiBnZXRDYW52YXNDb250ZXh0ICh0eXBlLCBvcHRzKSB7XG4gIGlmICh0eXBlb2YgdHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdtdXN0IHNwZWNpZnkgdHlwZSBzdHJpbmcnKVxuICB9XG5cbiAgb3B0cyA9IG9wdHMgfHwge31cblxuICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJyAmJiAhb3B0cy5jYW52YXMpIHtcbiAgICByZXR1cm4gbnVsbCAvLyBjaGVjayBmb3IgTm9kZVxuICB9XG5cbiAgdmFyIGNhbnZhcyA9IG9wdHMuY2FudmFzIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpXG4gIGlmICh0eXBlb2Ygb3B0cy53aWR0aCA9PT0gJ251bWJlcicpIHtcbiAgICBjYW52YXMud2lkdGggPSBvcHRzLndpZHRoXG4gIH1cbiAgaWYgKHR5cGVvZiBvcHRzLmhlaWdodCA9PT0gJ251bWJlcicpIHtcbiAgICBjYW52YXMuaGVpZ2h0ID0gb3B0cy5oZWlnaHRcbiAgfVxuXG4gIHZhciBhdHRyaWJzID0gb3B0c1xuICB2YXIgZ2xcbiAgdHJ5IHtcbiAgICB2YXIgbmFtZXMgPSBbIHR5cGUgXVxuICAgIC8vIHByZWZpeCBHTCBjb250ZXh0c1xuICAgIGlmICh0eXBlLmluZGV4T2YoJ3dlYmdsJykgPT09IDApIHtcbiAgICAgIG5hbWVzLnB1c2goJ2V4cGVyaW1lbnRhbC0nICsgdHlwZSlcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KG5hbWVzW2ldLCBhdHRyaWJzKVxuICAgICAgaWYgKGdsKSByZXR1cm4gZ2xcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBnbCA9IG51bGxcbiAgfVxuICByZXR1cm4gKGdsIHx8IG51bGwpIC8vIGVuc3VyZSBudWxsIG9uIGZhaWxcbn1cbiIsImltcG9ydCBhc3NpZ24gZnJvbSAnb2JqZWN0LWFzc2lnbic7XG5pbXBvcnQgZ2V0Q2FudmFzQ29udGV4dCBmcm9tICdnZXQtY2FudmFzLWNvbnRleHQnO1xuaW1wb3J0IHsgaXNCcm93c2VyIH0gZnJvbSAnLi4vdXRpbCc7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhbnZhc0VsZW1lbnQgKCkge1xuICBpZiAoIWlzQnJvd3NlcigpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJdCBhcHBlYXJzIHlvdSBhcmUgcnVuaW5nIGZyb20gTm9kZS5qcyBvciBhIG5vbi1icm93c2VyIGVudmlyb25tZW50LiBUcnkgcGFzc2luZyBpbiBhbiBleGlzdGluZyB7IGNhbnZhcyB9IGludGVyZmFjZSBpbnN0ZWFkLicpO1xuICB9XG4gIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlQ2FudmFzIChzZXR0aW5ncyA9IHt9KSB7XG4gIGxldCBjb250ZXh0LCBjYW52YXM7XG4gIGxldCBvd25zQ2FudmFzID0gZmFsc2U7XG4gIGlmIChzZXR0aW5ncy5jYW52YXMgIT09IGZhbHNlKSB7XG4gICAgLy8gRGV0ZXJtaW5lIHRoZSBjYW52YXMgYW5kIGNvbnRleHQgdG8gY3JlYXRlXG4gICAgY29udGV4dCA9IHNldHRpbmdzLmNvbnRleHQ7XG4gICAgaWYgKCFjb250ZXh0IHx8IHR5cGVvZiBjb250ZXh0ID09PSAnc3RyaW5nJykge1xuICAgICAgbGV0IG5ld0NhbnZhcyA9IHNldHRpbmdzLmNhbnZhcztcbiAgICAgIGlmICghbmV3Q2FudmFzKSB7XG4gICAgICAgIG5ld0NhbnZhcyA9IGNyZWF0ZUNhbnZhc0VsZW1lbnQoKTtcbiAgICAgICAgb3duc0NhbnZhcyA9IHRydWU7XG4gICAgICB9XG4gICAgICBjb25zdCB0eXBlID0gY29udGV4dCB8fCAnMmQnO1xuICAgICAgaWYgKHR5cGVvZiBuZXdDYW52YXMuZ2V0Q29udGV4dCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBzcGVjaWZpZWQgeyBjYW52YXMgfSBlbGVtZW50IGRvZXMgbm90IGhhdmUgYSBnZXRDb250ZXh0KCkgZnVuY3Rpb24sIG1heWJlIGl0IGlzIG5vdCBhIDxjYW52YXM+IHRhZz9gKTtcbiAgICAgIH1cbiAgICAgIGNvbnRleHQgPSBnZXRDYW52YXNDb250ZXh0KHR5cGUsIGFzc2lnbih7fSwgc2V0dGluZ3MuYXR0cmlidXRlcywgeyBjYW52YXM6IG5ld0NhbnZhcyB9KSk7XG4gICAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgYXQgY2FudmFzLmdldENvbnRleHQoJyR7dHlwZX0nKSAtIHRoZSBicm93c2VyIG1heSBub3Qgc3VwcG9ydCB0aGlzIGNvbnRleHQsIG9yIGEgZGlmZmVyZW50IGNvbnRleHQgbWF5IGFscmVhZHkgYmUgaW4gdXNlIHdpdGggdGhpcyBjYW52YXMuYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgLy8gRW5zdXJlIGNvbnRleHQgbWF0Y2hlcyB1c2VyJ3MgY2FudmFzIGV4cGVjdGF0aW9uc1xuICAgIGlmIChzZXR0aW5ncy5jYW52YXMgJiYgY2FudmFzICE9PSBzZXR0aW5ncy5jYW52YXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHsgY2FudmFzIH0gYW5kIHsgY29udGV4dCB9IHNldHRpbmdzIG11c3QgcG9pbnQgdG8gdGhlIHNhbWUgdW5kZXJseWluZyBjYW52YXMgZWxlbWVudCcpO1xuICAgIH1cblxuICAgIC8vIEFwcGx5IHBpeGVsYXRpb24gdG8gY2FudmFzIGlmIG5lY2Vzc2FyeSwgdGhpcyBpcyBtb3N0bHkgYSBjb252ZW5pZW5jZSB1dGlsaXR5XG4gICAgaWYgKHNldHRpbmdzLnBpeGVsYXRlZCkge1xuICAgICAgY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgIGNvbnRleHQubW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgICBjb250ZXh0Lm9JbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgIGNvbnRleHQud2Via2l0SW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgICBjb250ZXh0Lm1zSW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgICBjYW52YXMuc3R5bGVbJ2ltYWdlLXJlbmRlcmluZyddID0gJ3BpeGVsYXRlZCc7XG4gICAgfVxuICB9XG4gIHJldHVybiB7IGNhbnZhcywgY29udGV4dCwgb3duc0NhbnZhcyB9O1xufVxuIiwiaW1wb3J0IGFzc2lnbiBmcm9tIFwib2JqZWN0LWFzc2lnblwiO1xuaW1wb3J0IHJpZ2h0Tm93IGZyb20gXCJyaWdodC1ub3dcIjtcbmltcG9ydCBpc1Byb21pc2UgZnJvbSBcImlzLXByb21pc2VcIjtcbmltcG9ydCB7XG4gIGlzQnJvd3NlcixcbiAgZGVmaW5lZCxcbiAgaXNXZWJHTENvbnRleHQsXG4gIGlzMkRDb250ZXh0LFxuICBpc0NhbnZhcyxcbiAgZ2V0Q2xpZW50QVBJLFxufSBmcm9tIFwiLi4vdXRpbFwiO1xuaW1wb3J0IGRlZXBFcXVhbCBmcm9tIFwiZGVlcC1lcXVhbFwiO1xuaW1wb3J0IHtcbiAgcmVzb2x2ZUZpbGVuYW1lLFxuICBzYXZlRmlsZSxcbiAgc2F2ZURhdGFVUkwsXG4gIGdldFRpbWVTdGFtcCxcbiAgZXhwb3J0Q2FudmFzLFxuICBzdHJlYW1TdGFydCxcbiAgc3RyZWFtRW5kLFxufSBmcm9tIFwiLi4vc2F2ZVwiO1xuaW1wb3J0IHsgY2hlY2tTZXR0aW5ncyB9IGZyb20gXCIuLi9hY2Nlc3NpYmlsaXR5XCI7XG5cbmltcG9ydCBrZXlib2FyZFNob3J0Y3V0cyBmcm9tIFwiLi9rZXlib2FyZFNob3J0Y3V0c1wiO1xuaW1wb3J0IHJlc2l6ZUNhbnZhcyBmcm9tIFwiLi9yZXNpemVDYW52YXNcIjtcbmltcG9ydCBjcmVhdGVDYW52YXMgZnJvbSBcIi4vY3JlYXRlQ2FudmFzXCI7XG5cbmNsYXNzIFNrZXRjaE1hbmFnZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHt9O1xuICAgIHRoaXMuX3Byb3BzID0ge307XG4gICAgdGhpcy5fc2tldGNoID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3JhZiA9IG51bGw7XG4gICAgdGhpcy5fcmVjb3JkVGltZW91dCA9IG51bGw7XG5cbiAgICAvLyBTb21lIGhhY2t5IHRoaW5ncyByZXF1aXJlZCB0byBnZXQgYXJvdW5kIHA1LmpzIHN0cnVjdHVyZVxuICAgIHRoaXMuX2xhc3RSZWRyYXdSZXN1bHQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5faXNQNVJlc2l6aW5nID0gZmFsc2U7XG5cbiAgICB0aGlzLl9rZXlib2FyZFNob3J0Y3V0cyA9IGtleWJvYXJkU2hvcnRjdXRzKHtcbiAgICAgIGVuYWJsZWQ6ICgpID0+IHRoaXMuc2V0dGluZ3MuaG90a2V5cyAhPT0gZmFsc2UsXG4gICAgICBzYXZlOiAoZXYpID0+IHtcbiAgICAgICAgaWYgKGV2LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgaWYgKHRoaXMucHJvcHMucmVjb3JkaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmVuZFJlY29yZCgpO1xuICAgICAgICAgICAgdGhpcy5ydW4oKTtcbiAgICAgICAgICB9IGVsc2UgdGhpcy5yZWNvcmQoKTtcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5wcm9wcy5yZWNvcmRpbmcpIHtcbiAgICAgICAgICB0aGlzLmV4cG9ydEZyYW1lKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB0b2dnbGVQbGF5OiAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnBsYXlpbmcpIHRoaXMucGF1c2UoKTtcbiAgICAgICAgZWxzZSB0aGlzLnBsYXkoKTtcbiAgICAgIH0sXG4gICAgICBjb21taXQ6IChldikgPT4ge1xuICAgICAgICB0aGlzLmV4cG9ydEZyYW1lKHsgY29tbWl0OiB0cnVlIH0pO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuX2FuaW1hdGVIYW5kbGVyID0gKCkgPT4gdGhpcy5hbmltYXRlKCk7XG5cbiAgICB0aGlzLl9yZXNpemVIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgY29uc3QgY2hhbmdlZCA9IHRoaXMucmVzaXplKCk7XG4gICAgICAvLyBPbmx5IHJlLXJlbmRlciB3aGVuIHNpemUgYWN0dWFsbHkgY2hhbmdlc1xuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgZ2V0IHNrZXRjaCgpIHtcbiAgICByZXR1cm4gdGhpcy5fc2tldGNoO1xuICB9XG5cbiAgZ2V0IHNldHRpbmdzKCkge1xuICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncztcbiAgfVxuXG4gIGdldCBwcm9wcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvcHM7XG4gIH1cblxuICBfY29tcHV0ZVBsYXloZWFkKGN1cnJlbnRUaW1lLCBkdXJhdGlvbikge1xuICAgIGNvbnN0IGhhc0R1cmF0aW9uID0gdHlwZW9mIGR1cmF0aW9uID09PSBcIm51bWJlclwiICYmIGlzRmluaXRlKGR1cmF0aW9uKTtcbiAgICByZXR1cm4gaGFzRHVyYXRpb24gPyBjdXJyZW50VGltZSAvIGR1cmF0aW9uIDogMDtcbiAgfVxuXG4gIF9jb21wdXRlRnJhbWUocGxheWhlYWQsIHRpbWUsIHRvdGFsRnJhbWVzLCBmcHMpIHtcbiAgICByZXR1cm4gaXNGaW5pdGUodG90YWxGcmFtZXMpICYmIHRvdGFsRnJhbWVzID4gMVxuICAgICAgPyBNYXRoLmZsb29yKHBsYXloZWFkICogKHRvdGFsRnJhbWVzIC0gMSkpXG4gICAgICA6IE1hdGguZmxvb3IoZnBzICogdGltZSk7XG4gIH1cblxuICBfY29tcHV0ZUN1cnJlbnRGcmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fY29tcHV0ZUZyYW1lKFxuICAgICAgdGhpcy5wcm9wcy5wbGF5aGVhZCxcbiAgICAgIHRoaXMucHJvcHMudGltZSxcbiAgICAgIHRoaXMucHJvcHMudG90YWxGcmFtZXMsXG4gICAgICB0aGlzLnByb3BzLmZwc1xuICAgICk7XG4gIH1cblxuICBfZ2V0U2l6ZVByb3BzKCkge1xuICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wcztcbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGg6IHByb3BzLndpZHRoLFxuICAgICAgaGVpZ2h0OiBwcm9wcy5oZWlnaHQsXG4gICAgICBwaXhlbFJhdGlvOiBwcm9wcy5waXhlbFJhdGlvLFxuICAgICAgY2FudmFzV2lkdGg6IHByb3BzLmNhbnZhc1dpZHRoLFxuICAgICAgY2FudmFzSGVpZ2h0OiBwcm9wcy5jYW52YXNIZWlnaHQsXG4gICAgICB2aWV3cG9ydFdpZHRoOiBwcm9wcy52aWV3cG9ydFdpZHRoLFxuICAgICAgdmlld3BvcnRIZWlnaHQ6IHByb3BzLnZpZXdwb3J0SGVpZ2h0LFxuICAgIH07XG4gIH1cblxuICBydW4oKSB7XG4gICAgaWYgKCF0aGlzLnNrZXRjaClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJzaG91bGQgd2FpdCB1bnRpbCBza2V0Y2ggaXMgbG9hZGVkIGJlZm9yZSB0cnlpbmcgdG8gcGxheSgpXCJcbiAgICAgICk7XG5cbiAgICAvLyBTdGFydCBhbiBhbmltYXRpb24gZnJhbWUgbG9vcCBpZiBuZWNlc3NhcnlcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5wbGF5aW5nICE9PSBmYWxzZSkge1xuICAgICAgdGhpcy5wbGF5KCk7XG4gICAgfVxuXG4gICAgLy8gTGV0J3MgbGV0IHRoaXMgd2FybmluZyBoYW5nIGFyb3VuZCBmb3IgYSBmZXcgdmVyc2lvbnMuLi5cbiAgICBpZiAodHlwZW9mIHRoaXMuc2tldGNoLmRpc3Bvc2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcIkluIGNhbnZhcy1za2V0Y2hAMC4wLjIzIHRoZSBkaXNwb3NlKCkgZXZlbnQgaGFzIGJlZW4gcmVuYW1lZCB0byB1bmxvYWQoKVwiXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEluIGNhc2Ugd2UgYXJlbid0IHBsYXlpbmcgb3IgYW5pbWF0ZWQsIG1ha2Ugc3VyZSB3ZSBzdGlsbCB0cmlnZ2VyIGJlZ2luIG1lc3NhZ2UuLi5cbiAgICBpZiAoIXRoaXMucHJvcHMuc3RhcnRlZCkge1xuICAgICAgdGhpcy5fc2lnbmFsQmVnaW4oKTtcbiAgICAgIHRoaXMucHJvcHMuc3RhcnRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gUmVuZGVyIGFuIGluaXRpYWwgZnJhbWVcbiAgICB0aGlzLnRpY2soKTtcbiAgICB0aGlzLnJlbmRlcigpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgX2NhbmNlbFRpbWVvdXRzKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuX3JhZiAhPSBudWxsICYmXG4gICAgICB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICB0eXBlb2Ygd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID09PSBcImZ1bmN0aW9uXCJcbiAgICApIHtcbiAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9yYWYpO1xuICAgICAgdGhpcy5fcmFmID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3JlY29yZFRpbWVvdXQgIT0gbnVsbCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3JlY29yZFRpbWVvdXQpO1xuICAgICAgdGhpcy5fcmVjb3JkVGltZW91dCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgcGxheSgpIHtcbiAgICBsZXQgYW5pbWF0ZSA9IHRoaXMuc2V0dGluZ3MuYW5pbWF0ZTtcbiAgICBpZiAoXCJhbmltYXRpb25cIiBpbiB0aGlzLnNldHRpbmdzKSB7XG4gICAgICBhbmltYXRlID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJbY2FudmFzLXNrZXRjaF0geyBhbmltYXRpb24gfSBoYXMgYmVlbiByZW5hbWVkIHRvIHsgYW5pbWF0ZSB9XCJcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICghYW5pbWF0ZSkgcmV0dXJuO1xuICAgIGlmICghaXNCcm93c2VyKCkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiW2NhbnZhcy1za2V0Y2hdIFdBUk46IFVzaW5nIHsgYW5pbWF0ZSB9IGluIE5vZGUuanMgaXMgbm90IHlldCBzdXBwb3J0ZWRcIlxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMucHJvcHMucGxheWluZykgcmV0dXJuO1xuICAgIGlmICghdGhpcy5wcm9wcy5zdGFydGVkKSB7XG4gICAgICB0aGlzLl9zaWduYWxCZWdpbigpO1xuICAgICAgdGhpcy5wcm9wcy5zdGFydGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBjb25zb2xlLmxvZygncGxheScsIHRoaXMucHJvcHMudGltZSlcblxuICAgIC8vIFN0YXJ0IGEgcmVuZGVyIGxvb3BcbiAgICB0aGlzLnByb3BzLnBsYXlpbmcgPSB0cnVlO1xuICAgIHRoaXMuX2NhbmNlbFRpbWVvdXRzKCk7XG4gICAgdGhpcy5fbGFzdFRpbWUgPSByaWdodE5vdygpO1xuICAgIHRoaXMuX3JhZiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5fYW5pbWF0ZUhhbmRsZXIpO1xuICB9XG5cbiAgcGF1c2UoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMucmVjb3JkaW5nKSB0aGlzLmVuZFJlY29yZCgpO1xuICAgIHRoaXMucHJvcHMucGxheWluZyA9IGZhbHNlO1xuXG4gICAgdGhpcy5fY2FuY2VsVGltZW91dHMoKTtcbiAgfVxuXG4gIHRvZ2dsZVBsYXkoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMucGxheWluZykgdGhpcy5wYXVzZSgpO1xuICAgIGVsc2UgdGhpcy5wbGF5KCk7XG4gIH1cblxuICAvLyBTdG9wIGFuZCByZXNldCB0byBmcmFtZSB6ZXJvXG4gIHN0b3AoKSB7XG4gICAgdGhpcy5wYXVzZSgpO1xuICAgIHRoaXMucHJvcHMuZnJhbWUgPSAwO1xuICAgIHRoaXMucHJvcHMucGxheWhlYWQgPSAwO1xuICAgIHRoaXMucHJvcHMudGltZSA9IDA7XG4gICAgdGhpcy5wcm9wcy5kZWx0YVRpbWUgPSAwO1xuICAgIHRoaXMucHJvcHMuc3RhcnRlZCA9IGZhbHNlO1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICByZWNvcmQoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMucmVjb3JkaW5nKSByZXR1cm47XG4gICAgaWYgKCFpc0Jyb3dzZXIoKSkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgXCJbY2FudmFzLXNrZXRjaF0gV0FSTjogUmVjb3JkaW5nIGZyb20gTm9kZS5qcyBpcyBub3QgeWV0IHN1cHBvcnRlZFwiXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc3RvcCgpO1xuICAgIHRoaXMucHJvcHMucGxheWluZyA9IHRydWU7XG4gICAgdGhpcy5wcm9wcy5yZWNvcmRpbmcgPSB0cnVlO1xuXG4gICAgY29uc3QgZXhwb3J0T3B0cyA9IHRoaXMuX2NyZWF0ZUV4cG9ydE9wdGlvbnMoeyBzZXF1ZW5jZTogdHJ1ZSB9KTtcblxuICAgIGNvbnN0IGZyYW1lSW50ZXJ2YWwgPSAxIC8gdGhpcy5wcm9wcy5mcHM7XG4gICAgLy8gUmVuZGVyIGVhY2ggZnJhbWUgaW4gdGhlIHNlcXVlbmNlXG4gICAgdGhpcy5fY2FuY2VsVGltZW91dHMoKTtcbiAgICBjb25zdCB0aWNrID0gKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnByb3BzLnJlY29yZGluZykgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgdGhpcy5wcm9wcy5kZWx0YVRpbWUgPSBmcmFtZUludGVydmFsO1xuICAgICAgdGhpcy50aWNrKCk7XG4gICAgICByZXR1cm4gdGhpcy5leHBvcnRGcmFtZShleHBvcnRPcHRzKS50aGVuKCgpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLnJlY29yZGluZykgcmV0dXJuOyAvLyB3YXMgY2FuY2VsbGVkIGJlZm9yZVxuICAgICAgICB0aGlzLnByb3BzLmRlbHRhVGltZSA9IDA7XG4gICAgICAgIHRoaXMucHJvcHMuZnJhbWUrKztcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuZnJhbWUgPCB0aGlzLnByb3BzLnRvdGFsRnJhbWVzKSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy50aW1lICs9IGZyYW1lSW50ZXJ2YWw7XG4gICAgICAgICAgdGhpcy5wcm9wcy5wbGF5aGVhZCA9IHRoaXMuX2NvbXB1dGVQbGF5aGVhZChcbiAgICAgICAgICAgIHRoaXMucHJvcHMudGltZSxcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZHVyYXRpb25cbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMuX3JlY29yZFRpbWVvdXQgPSBzZXRUaW1lb3V0KHRpY2ssIDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmluaXNoZWQgcmVjb3JkaW5nXCIpO1xuICAgICAgICAgIHRoaXMuX3NpZ25hbEVuZCgpO1xuICAgICAgICAgIHRoaXMuZW5kUmVjb3JkKCk7XG4gICAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgICAgdGhpcy5ydW4oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIFRyaWdnZXIgYSBzdGFydCBldmVudCBiZWZvcmUgd2UgYmVnaW4gcmVjb3JkaW5nXG4gICAgaWYgKCF0aGlzLnByb3BzLnN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMuX3NpZ25hbEJlZ2luKCk7XG4gICAgICB0aGlzLnByb3BzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIFRyaWdnZXIgJ2JlZ2luIHJlY29yZCcgZXZlbnRcbiAgICBpZiAodGhpcy5za2V0Y2ggJiYgdHlwZW9mIHRoaXMuc2tldGNoLmJlZ2luUmVjb3JkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHRoaXMuX3dyYXBDb250ZXh0U2NhbGUoKHByb3BzKSA9PiB0aGlzLnNrZXRjaC5iZWdpblJlY29yZChwcm9wcykpO1xuICAgIH1cblxuICAgIC8vIEluaXRpYXRlIGEgc3RyZWFtaW5nIHN0YXJ0IGlmIG5lY2Vzc2FyeVxuICAgIHN0cmVhbVN0YXJ0KGV4cG9ydE9wdHMpXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHRoaXMuX3JhZiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljayk7XG4gICAgICB9KTtcbiAgfVxuXG4gIF9zaWduYWxCZWdpbigpIHtcbiAgICBpZiAodGhpcy5za2V0Y2ggJiYgdHlwZW9mIHRoaXMuc2tldGNoLmJlZ2luID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHRoaXMuX3dyYXBDb250ZXh0U2NhbGUoKHByb3BzKSA9PiB0aGlzLnNrZXRjaC5iZWdpbihwcm9wcykpO1xuICAgIH1cbiAgfVxuXG4gIF9zaWduYWxFbmQoKSB7XG4gICAgaWYgKHRoaXMuc2tldGNoICYmIHR5cGVvZiB0aGlzLnNrZXRjaC5lbmQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhpcy5fd3JhcENvbnRleHRTY2FsZSgocHJvcHMpID0+IHRoaXMuc2tldGNoLmVuZChwcm9wcykpO1xuICAgIH1cbiAgfVxuXG4gIGVuZFJlY29yZCgpIHtcbiAgICBjb25zdCB3YXNSZWNvcmRpbmcgPSB0aGlzLnByb3BzLnJlY29yZGluZztcblxuICAgIHRoaXMuX2NhbmNlbFRpbWVvdXRzKCk7XG4gICAgdGhpcy5wcm9wcy5yZWNvcmRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLnByb3BzLmRlbHRhVGltZSA9IDA7XG4gICAgdGhpcy5wcm9wcy5wbGF5aW5nID0gZmFsc2U7XG5cbiAgICAvLyB0ZWxsIENMSSB0aGF0IHN0cmVhbSBoYXMgZmluaXNoZWRcbiAgICByZXR1cm4gc3RyZWFtRW5kKClcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIC8vIFRyaWdnZXIgJ2VuZCByZWNvcmQnIGV2ZW50XG4gICAgICAgIGlmIChcbiAgICAgICAgICB3YXNSZWNvcmRpbmcgJiZcbiAgICAgICAgICB0aGlzLnNrZXRjaCAmJlxuICAgICAgICAgIHR5cGVvZiB0aGlzLnNrZXRjaC5lbmRSZWNvcmQgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLl93cmFwQ29udGV4dFNjYWxlKChwcm9wcykgPT4gdGhpcy5za2V0Y2guZW5kUmVjb3JkKHByb3BzKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgX2NyZWF0ZUV4cG9ydE9wdGlvbnMob3B0ID0ge30pIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2VxdWVuY2U6IG9wdC5zZXF1ZW5jZSxcbiAgICAgIHNhdmU6IG9wdC5zYXZlLFxuICAgICAgZnBzOiB0aGlzLnByb3BzLmZwcyxcbiAgICAgIGZyYW1lOiBvcHQuc2VxdWVuY2UgPyB0aGlzLnByb3BzLmZyYW1lIDogdW5kZWZpbmVkLFxuICAgICAgZmlsZTogdGhpcy5zZXR0aW5ncy5maWxlLFxuICAgICAgbmFtZTogdGhpcy5zZXR0aW5ncy5uYW1lLFxuICAgICAgcHJlZml4OiB0aGlzLnNldHRpbmdzLnByZWZpeCxcbiAgICAgIHN1ZmZpeDogdGhpcy5zZXR0aW5ncy5zdWZmaXgsXG4gICAgICBlbmNvZGluZzogdGhpcy5zZXR0aW5ncy5lbmNvZGluZyxcbiAgICAgIGVuY29kaW5nUXVhbGl0eTogdGhpcy5zZXR0aW5ncy5lbmNvZGluZ1F1YWxpdHksXG4gICAgICB0aW1lU3RhbXA6IG9wdC50aW1lU3RhbXAgfHwgZ2V0VGltZVN0YW1wKCksXG4gICAgICB0b3RhbEZyYW1lczogaXNGaW5pdGUodGhpcy5wcm9wcy50b3RhbEZyYW1lcylcbiAgICAgICAgPyBNYXRoLm1heCgwLCB0aGlzLnByb3BzLnRvdGFsRnJhbWVzKVxuICAgICAgICA6IDEwMDAsXG4gICAgfTtcbiAgfVxuXG4gIGV4cG9ydEZyYW1lKG9wdCA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLnNrZXRjaCkgcmV0dXJuIFByb21pc2UuYWxsKFtdKTtcbiAgICBpZiAodHlwZW9mIHRoaXMuc2tldGNoLnByZUV4cG9ydCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aGlzLnNrZXRjaC5wcmVFeHBvcnQoKTtcbiAgICB9XG5cbiAgICAvLyBPcHRpb25zIGZvciBleHBvcnQgZnVuY3Rpb25cbiAgICBsZXQgZXhwb3J0T3B0cyA9IHRoaXMuX2NyZWF0ZUV4cG9ydE9wdGlvbnMob3B0KTtcblxuICAgIGNvbnN0IGNsaWVudCA9IGdldENsaWVudEFQSSgpO1xuICAgIGxldCBwID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgaWYgKGNsaWVudCAmJiBvcHQuY29tbWl0ICYmIHR5cGVvZiBjbGllbnQuY29tbWl0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGNvbnN0IGNvbW1pdE9wdHMgPSBhc3NpZ24oe30sIGV4cG9ydE9wdHMpO1xuICAgICAgY29uc3QgaGFzaCA9IGNsaWVudC5jb21taXQoY29tbWl0T3B0cyk7XG4gICAgICBpZiAoaXNQcm9taXNlKGhhc2gpKSBwID0gaGFzaDtcbiAgICAgIGVsc2UgcCA9IFByb21pc2UucmVzb2x2ZShoYXNoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcFxuICAgICAgLnRoZW4oKGhhc2gpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RvRXhwb3J0RnJhbWUoXG4gICAgICAgICAgYXNzaWduKHt9LCBleHBvcnRPcHRzLCB7IGhhc2g6IGhhc2ggfHwgXCJcIiB9KVxuICAgICAgICApO1xuICAgICAgfSlcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgLy8gTW9zdCBjb21tb24gdXNlY2FzZSBpcyB0byBleHBvcnQgYSBzaW5nbGUgbGF5ZXIsXG4gICAgICAgIC8vIHNvIGxldCdzIG9wdGltaXplIHRoZSB1c2VyIGV4cGVyaWVuY2UgZm9yIHRoYXQuXG4gICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID09PSAxKSByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgICBlbHNlIHJldHVybiByZXN1bHQ7XG4gICAgICB9KTtcbiAgfVxuXG4gIF9kb0V4cG9ydEZyYW1lKGV4cG9ydE9wdHMgPSB7fSkge1xuICAgIHRoaXMuX3Byb3BzLmV4cG9ydGluZyA9IHRydWU7XG5cbiAgICAvLyBSZXNpemUgdG8gb3V0cHV0IHJlc29sdXRpb25cbiAgICB0aGlzLnJlc2l6ZSgpO1xuXG4gICAgLy8gRHJhdyBhdCB0aGlzIG91dHB1dCByZXNvbHV0aW9uXG4gICAgbGV0IGRyYXdSZXN1bHQgPSB0aGlzLnJlbmRlcigpO1xuXG4gICAgLy8gVGhlIHNlbGYgb3duZWQgY2FudmFzIChtYXkgYmUgdW5kZWZpbmVkLi4uISlcbiAgICBjb25zdCBjYW52YXMgPSB0aGlzLnByb3BzLmNhbnZhcztcblxuICAgIC8vIEdldCBsaXN0IG9mIHJlc3VsdHMgZnJvbSByZW5kZXJcbiAgICBpZiAodHlwZW9mIGRyYXdSZXN1bHQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGRyYXdSZXN1bHQgPSBbY2FudmFzXTtcbiAgICB9XG4gICAgZHJhd1Jlc3VsdCA9IFtdLmNvbmNhdChkcmF3UmVzdWx0KS5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICAvLyBUcmFuc2Zvcm0gdGhlIGNhbnZhcy9maWxlIGRlc2NyaXB0b3JzIGludG8gYSBjb25zaXN0ZW50IGZvcm1hdCxcbiAgICAvLyBhbmQgcHVsbCBvdXQgYW55IGRhdGEgVVJMcyBmcm9tIGNhbnZhcyBlbGVtZW50c1xuICAgIGRyYXdSZXN1bHQgPSBkcmF3UmVzdWx0Lm1hcCgocmVzdWx0KSA9PiB7XG4gICAgICBjb25zdCBoYXNEYXRhT2JqZWN0ID1cbiAgICAgICAgdHlwZW9mIHJlc3VsdCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICByZXN1bHQgJiZcbiAgICAgICAgKFwiZGF0YVwiIGluIHJlc3VsdCB8fCBcImRhdGFVUkxcIiBpbiByZXN1bHQpO1xuICAgICAgY29uc3QgZGF0YSA9IGhhc0RhdGFPYmplY3QgPyByZXN1bHQuZGF0YSA6IHJlc3VsdDtcbiAgICAgIGNvbnN0IG9wdHMgPSBoYXNEYXRhT2JqZWN0ID8gYXNzaWduKHt9LCByZXN1bHQsIHsgZGF0YSB9KSA6IHsgZGF0YSB9O1xuICAgICAgaWYgKGlzQ2FudmFzKGRhdGEpKSB7XG4gICAgICAgIGNvbnN0IGVuY29kaW5nID0gb3B0cy5lbmNvZGluZyB8fCBleHBvcnRPcHRzLmVuY29kaW5nO1xuICAgICAgICBjb25zdCBlbmNvZGluZ1F1YWxpdHkgPSBkZWZpbmVkKFxuICAgICAgICAgIG9wdHMuZW5jb2RpbmdRdWFsaXR5LFxuICAgICAgICAgIGV4cG9ydE9wdHMuZW5jb2RpbmdRdWFsaXR5LFxuICAgICAgICAgIDAuOTVcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgeyBkYXRhVVJMLCBleHRlbnNpb24sIHR5cGUgfSA9IGV4cG9ydENhbnZhcyhkYXRhLCB7XG4gICAgICAgICAgZW5jb2RpbmcsXG4gICAgICAgICAgZW5jb2RpbmdRdWFsaXR5LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob3B0cywgeyBkYXRhVVJMLCBleHRlbnNpb24sIHR5cGUgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gb3B0cztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIE5vdyByZXR1cm4gdG8gcmVndWxhciByZW5kZXJpbmcgbW9kZVxuICAgIHRoaXMuX3Byb3BzLmV4cG9ydGluZyA9IGZhbHNlO1xuICAgIHRoaXMucmVzaXplKCk7XG4gICAgdGhpcy5yZW5kZXIoKTtcblxuICAgIC8vIEFuZCBub3cgd2UgY2FuIHNhdmUgZWFjaCByZXN1bHRcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoXG4gICAgICBkcmF3UmVzdWx0Lm1hcCgocmVzdWx0LCBpLCBsYXllckxpc3QpID0+IHtcbiAgICAgICAgLy8gQnkgZGVmYXVsdCwgaWYgcmVuZGVyaW5nIG11bHRpcGxlIGxheWVycyB3ZSB3aWxsIGdpdmUgdGhlbSBpbmRpY2VzXG4gICAgICAgIGNvbnN0IGN1ck9wdCA9IGFzc2lnbihcbiAgICAgICAgICB7XG4gICAgICAgICAgICBleHRlbnNpb246IFwiXCIsXG4gICAgICAgICAgICBwcmVmaXg6IFwiXCIsXG4gICAgICAgICAgICBzdWZmaXg6IFwiXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBleHBvcnRPcHRzLFxuICAgICAgICAgIHJlc3VsdCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsYXllcjogaSxcbiAgICAgICAgICAgIHRvdGFsTGF5ZXJzOiBsYXllckxpc3QubGVuZ3RoLFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICAvLyBJZiBleHBvcnQgaXMgZXhwbGljaXRseSBub3Qgc2F2aW5nLCBtYWtlIHN1cmUgbm90aGluZyBzYXZlc1xuICAgICAgICAvLyBPdGhlcndpc2UgZGVmYXVsdCB0byB0aGUgbGF5ZXIgc2F2ZSBvcHRpb24sIG9yIGZhbGxiYWNrIHRvIHRydWVcbiAgICAgICAgY29uc3Qgc2F2ZVBhcmFtID0gZXhwb3J0T3B0cy5zYXZlID09PSBmYWxzZSA/IGZhbHNlIDogcmVzdWx0LnNhdmU7XG4gICAgICAgIGN1ck9wdC5zYXZlID0gc2F2ZVBhcmFtICE9PSBmYWxzZTtcblxuICAgICAgICAvLyBSZXNvbHZlIGEgZnVsbCBmaWxlbmFtZSBmcm9tIGFsbCB0aGUgb3B0aW9uc1xuICAgICAgICBjdXJPcHQuZmlsZW5hbWUgPSByZXNvbHZlRmlsZW5hbWUoY3VyT3B0KTtcblxuICAgICAgICAvLyBDbGVhbiB1cCBzb21lIHBhcmFtZXRlcnMgdGhhdCBtYXkgYmUgYW1iaWd1b3VzIHRvIHRoZSB1c2VyXG4gICAgICAgIGRlbGV0ZSBjdXJPcHQuZW5jb2Rpbmc7XG4gICAgICAgIGRlbGV0ZSBjdXJPcHQuZW5jb2RpbmdRdWFsaXR5O1xuXG4gICAgICAgIC8vIENsZWFuIGl0IHVwIGZ1cnRoZXIgYnkganVzdCByZW1vdmluZyB1bmRlZmluZWQgdmFsdWVzXG4gICAgICAgIGZvciAobGV0IGsgaW4gY3VyT3B0KSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBjdXJPcHRba10gPT09IFwidW5kZWZpbmVkXCIpIGRlbGV0ZSBjdXJPcHRba107XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc2F2ZVByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoe30pO1xuICAgICAgICBpZiAoY3VyT3B0LnNhdmUpIHtcbiAgICAgICAgICAvLyBXaGV0aGVyIHRvIGFjdHVhbGx5IHNhdmUgKGRvd25sb2FkKSB0aGlzIGZyYWdtZW50XG4gICAgICAgICAgY29uc3QgZGF0YSA9IGN1ck9wdC5kYXRhO1xuICAgICAgICAgIGlmIChjdXJPcHQuZGF0YVVSTCkge1xuICAgICAgICAgICAgY29uc3QgZGF0YVVSTCA9IGN1ck9wdC5kYXRhVVJMO1xuICAgICAgICAgICAgc2F2ZVByb21pc2UgPSBzYXZlRGF0YVVSTChkYXRhVVJMLCBjdXJPcHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzYXZlUHJvbWlzZSA9IHNhdmVGaWxlKGRhdGEsIGN1ck9wdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzYXZlUHJvbWlzZS50aGVuKChzYXZlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGN1ck9wdCwgc2F2ZVJlc3VsdCk7XG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICApLnRoZW4oKGV2KSA9PiB7XG4gICAgICBjb25zdCBzYXZlZEV2ZW50cyA9IGV2LmZpbHRlcigoZSkgPT4gZS5zYXZlKTtcbiAgICAgIGlmIChzYXZlZEV2ZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIExvZyB0aGUgc2F2ZWQgZXhwb3J0c1xuICAgICAgICBjb25zdCBldmVudFdpdGhPdXRwdXQgPSBzYXZlZEV2ZW50cy5maW5kKChlKSA9PiBlLm91dHB1dE5hbWUpO1xuICAgICAgICBjb25zdCBpc0NsaWVudCA9IHNhdmVkRXZlbnRzLnNvbWUoKGUpID0+IGUuY2xpZW50KTtcbiAgICAgICAgY29uc3QgaXNTdHJlYW1pbmcgPSBzYXZlZEV2ZW50cy5zb21lKChlKSA9PiBlLnN0cmVhbSk7XG4gICAgICAgIGxldCBpdGVtO1xuICAgICAgICAvLyBtYW55IGZpbGVzLCBqdXN0IGxvZyBob3cgbWFueSB3ZXJlIGV4cG9ydGVkXG4gICAgICAgIGlmIChzYXZlZEV2ZW50cy5sZW5ndGggPiAxKSBpdGVtID0gc2F2ZWRFdmVudHMubGVuZ3RoO1xuICAgICAgICAvLyBpbiBDTEksIHdlIGtub3cgZXhhY3QgcGF0aCBkaXJuYW1lXG4gICAgICAgIGVsc2UgaWYgKGV2ZW50V2l0aE91dHB1dClcbiAgICAgICAgICBpdGVtID0gYCR7ZXZlbnRXaXRoT3V0cHV0Lm91dHB1dE5hbWV9LyR7c2F2ZWRFdmVudHNbMF0uZmlsZW5hbWV9YDtcbiAgICAgICAgLy8gaW4gYnJvd3Nlciwgd2UgY2FuIG9ubHkga25vdyBpdCB3ZW50IHRvIFwiYnJvd3NlciBkb3dubG9hZCBmb2xkZXJcIlxuICAgICAgICBlbHNlIGl0ZW0gPSBgJHtzYXZlZEV2ZW50c1swXS5maWxlbmFtZX1gO1xuICAgICAgICBsZXQgb2ZTZXEgPSBcIlwiO1xuICAgICAgICBpZiAoZXhwb3J0T3B0cy5zZXF1ZW5jZSkge1xuICAgICAgICAgIGNvbnN0IGhhc1RvdGFsRnJhbWVzID0gaXNGaW5pdGUodGhpcy5wcm9wcy50b3RhbEZyYW1lcyk7XG4gICAgICAgICAgb2ZTZXEgPSBoYXNUb3RhbEZyYW1lc1xuICAgICAgICAgICAgPyBgIChmcmFtZSAke2V4cG9ydE9wdHMuZnJhbWUgKyAxfSAvICR7dGhpcy5wcm9wcy50b3RhbEZyYW1lc30pYFxuICAgICAgICAgICAgOiBgIChmcmFtZSAke2V4cG9ydE9wdHMuZnJhbWV9KWA7XG4gICAgICAgIH0gZWxzZSBpZiAoc2F2ZWRFdmVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIG9mU2VxID0gYCBmaWxlc2A7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2xpZW50ID0gaXNDbGllbnQgPyBcImNhbnZhcy1za2V0Y2gtY2xpXCIgOiBcImNhbnZhcy1za2V0Y2hcIjtcbiAgICAgICAgY29uc3QgYWN0aW9uID0gaXNTdHJlYW1pbmcgPyBcIlN0cmVhbWluZyBpbnRvXCIgOiBcIkV4cG9ydGVkXCI7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGAlY1ske2NsaWVudH1dJWMgJHthY3Rpb259ICVjJHtpdGVtfSVjJHtvZlNlcX1gLFxuICAgICAgICAgIFwiY29sb3I6ICM4ZThlOGU7XCIsXG4gICAgICAgICAgXCJjb2xvcjogaW5pdGlhbDtcIixcbiAgICAgICAgICBcImZvbnQtd2VpZ2h0OiBib2xkO1wiLFxuICAgICAgICAgIFwiZm9udC13ZWlnaHQ6IGluaXRpYWw7XCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5za2V0Y2gucG9zdEV4cG9ydCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRoaXMuc2tldGNoLnBvc3RFeHBvcnQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBldjtcbiAgICB9KTtcbiAgfVxuXG4gIF93cmFwQ29udGV4dFNjYWxlKGNiKSB7XG4gICAgdGhpcy5fcHJlUmVuZGVyKCk7XG4gICAgY2IodGhpcy5wcm9wcyk7XG4gICAgdGhpcy5fcG9zdFJlbmRlcigpO1xuICB9XG5cbiAgX3ByZVJlbmRlcigpIHtcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG5cbiAgICAvLyBTY2FsZSBjb250ZXh0IGZvciB1bml0IHNpemluZ1xuICAgIGlmIChpczJEQ29udGV4dChwcm9wcy5jb250ZXh0KSAmJiAhcHJvcHMucDUpIHtcbiAgICAgIHByb3BzLmNvbnRleHQuc2F2ZSgpO1xuICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc2NhbGVDb250ZXh0ICE9PSBmYWxzZSkge1xuICAgICAgICBwcm9wcy5jb250ZXh0LnNjYWxlKHByb3BzLnNjYWxlWCwgcHJvcHMuc2NhbGVZKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHByb3BzLnA1KSB7XG4gICAgICBwcm9wcy5wNS5zY2FsZShcbiAgICAgICAgcHJvcHMuc2NhbGVYIC8gcHJvcHMucGl4ZWxSYXRpbyxcbiAgICAgICAgcHJvcHMuc2NhbGVZIC8gcHJvcHMucGl4ZWxSYXRpb1xuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBfcG9zdFJlbmRlcigpIHtcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG5cbiAgICBpZiAoaXMyRENvbnRleHQocHJvcHMuY29udGV4dCkgJiYgIXByb3BzLnA1KSB7XG4gICAgICBwcm9wcy5jb250ZXh0LnJlc3RvcmUoKTtcbiAgICB9XG5cbiAgICAvLyBGbHVzaCBieSBkZWZhdWx0LCB0aGlzIG1heSBiZSByZXZpc2l0ZWQgYXQgYSBsYXRlciBwb2ludC5cbiAgICAvLyBXZSBkbyB0aGlzIHRvIGVuc3VyZSB0b0RhdGFVUkwgY2FuIGJlIGNhbGxlZCBpbW1lZGlhdGVseSBhZnRlci5cbiAgICAvLyBNb3N0IGxpa2VseSBicm93c2VycyBhbHJlYWR5IGhhbmRsZSB0aGlzLCBzbyB3ZSBtYXkgcmV2aXNpdCB0aGlzIGFuZFxuICAgIC8vIHJlbW92ZSBpdCBpZiBpdCBpbXByb3ZlcyBwZXJmb3JtYW5jZSB3aXRob3V0IGFueSB1c2FiaWxpdHkgaXNzdWVzLlxuICAgIGlmIChwcm9wcy5nbCAmJiB0aGlzLnNldHRpbmdzLmZsdXNoICE9PSBmYWxzZSAmJiAhcHJvcHMucDUpIHtcbiAgICAgIHByb3BzLmdsLmZsdXNoKCk7XG4gICAgfVxuICB9XG5cbiAgdGljaygpIHtcbiAgICBpZiAodGhpcy5za2V0Y2ggJiYgdHlwZW9mIHRoaXMuc2tldGNoLnRpY2sgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhpcy5fcHJlUmVuZGVyKCk7XG4gICAgICB0aGlzLnNrZXRjaC50aWNrKHRoaXMucHJvcHMpO1xuICAgICAgdGhpcy5fcG9zdFJlbmRlcigpO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5wNSkge1xuICAgICAgdGhpcy5fbGFzdFJlZHJhd1Jlc3VsdCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMucHJvcHMucDUucmVkcmF3KCk7XG4gICAgICByZXR1cm4gdGhpcy5fbGFzdFJlZHJhd1Jlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuc3VibWl0RHJhd0NhbGwoKTtcbiAgICB9XG4gIH1cblxuICBzdWJtaXREcmF3Q2FsbCgpIHtcbiAgICBpZiAoIXRoaXMuc2tldGNoKSByZXR1cm47XG5cbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgdGhpcy5fcHJlUmVuZGVyKCk7XG5cbiAgICBsZXQgZHJhd1Jlc3VsdDtcblxuICAgIGlmICh0eXBlb2YgdGhpcy5za2V0Y2ggPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgZHJhd1Jlc3VsdCA9IHRoaXMuc2tldGNoKHByb3BzKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLnNrZXRjaC5yZW5kZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgZHJhd1Jlc3VsdCA9IHRoaXMuc2tldGNoLnJlbmRlcihwcm9wcyk7XG4gICAgfVxuXG4gICAgdGhpcy5fcG9zdFJlbmRlcigpO1xuXG4gICAgcmV0dXJuIGRyYXdSZXN1bHQ7XG4gIH1cblxuICB1cGRhdGUob3B0ID0ge30pIHtcbiAgICAvLyBDdXJyZW50bHkgdXBkYXRlKCkgaXMgb25seSBmb2N1c2VkIG9uIHJlc2l6aW5nLFxuICAgIC8vIGJ1dCBsYXRlciB3ZSB3aWxsIHN1cHBvcnQgb3RoZXIgb3B0aW9ucyBsaWtlIHN3aXRjaGluZ1xuICAgIC8vIGZyYW1lcyBhbmQgc3VjaC5cbiAgICBjb25zdCBub3RZZXRTdXBwb3J0ZWQgPSBbXCJhbmltYXRlXCJdO1xuXG4gICAgT2JqZWN0LmtleXMob3B0KS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGlmIChub3RZZXRTdXBwb3J0ZWQuaW5kZXhPZihrZXkpID49IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBTb3JyeSwgdGhlIHsgJHtrZXl9IH0gb3B0aW9uIGlzIG5vdCB5ZXQgc3VwcG9ydGVkIHdpdGggdXBkYXRlKCkuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3Qgb2xkQ2FudmFzID0gdGhpcy5fc2V0dGluZ3MuY2FudmFzO1xuICAgIGNvbnN0IG9sZENvbnRleHQgPSB0aGlzLl9zZXR0aW5ncy5jb250ZXh0O1xuXG4gICAgLy8gTWVyZ2UgbmV3IG9wdGlvbnMgaW50byBzZXR0aW5nc1xuICAgIGZvciAobGV0IGtleSBpbiBvcHQpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gb3B0W2tleV07XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIC8vIGlnbm9yZSB1bmRlZmluZWRcbiAgICAgICAgdGhpcy5fc2V0dGluZ3Nba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1lcmdlIGluIHRpbWUgcHJvcHNcbiAgICBjb25zdCB0aW1lT3B0cyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX3NldHRpbmdzLCBvcHQpO1xuICAgIGlmIChcInRpbWVcIiBpbiBvcHQgJiYgXCJmcmFtZVwiIGluIG9wdClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBzaG91bGQgc3BlY2lmeSB7IHRpbWUgfSBvciB7IGZyYW1lIH0gYnV0IG5vdCBib3RoXCIpO1xuICAgIGVsc2UgaWYgKFwidGltZVwiIGluIG9wdCkgZGVsZXRlIHRpbWVPcHRzLmZyYW1lO1xuICAgIGVsc2UgaWYgKFwiZnJhbWVcIiBpbiBvcHQpIGRlbGV0ZSB0aW1lT3B0cy50aW1lO1xuICAgIGlmIChcImR1cmF0aW9uXCIgaW4gb3B0ICYmIFwidG90YWxGcmFtZXNcIiBpbiBvcHQpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiWW91IHNob3VsZCBzcGVjaWZ5IHsgZHVyYXRpb24gfSBvciB7IHRvdGFsRnJhbWVzIH0gYnV0IG5vdCBib3RoXCJcbiAgICAgICk7XG4gICAgZWxzZSBpZiAoXCJkdXJhdGlvblwiIGluIG9wdCkgZGVsZXRlIHRpbWVPcHRzLnRvdGFsRnJhbWVzO1xuICAgIGVsc2UgaWYgKFwidG90YWxGcmFtZXNcIiBpbiBvcHQpIGRlbGV0ZSB0aW1lT3B0cy5kdXJhdGlvbjtcblxuICAgIC8vIE1lcmdlIGluIHVzZXIgZGF0YSB3aXRob3V0IGNvcHlpbmdcbiAgICBpZiAoXCJkYXRhXCIgaW4gb3B0KSB0aGlzLl9wcm9wcy5kYXRhID0gb3B0LmRhdGE7XG5cbiAgICBjb25zdCB0aW1lUHJvcHMgPSB0aGlzLmdldFRpbWVQcm9wcyh0aW1lT3B0cyk7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLl9wcm9wcywgdGltZVByb3BzKTtcblxuICAgIC8vIElmIGVpdGhlciBjYW52YXMgb3IgY29udGV4dCBpcyBjaGFuZ2VkLCB3ZSBzaG91bGQgcmUtdXBkYXRlXG4gICAgaWYgKFxuICAgICAgb2xkQ2FudmFzICE9PSB0aGlzLl9zZXR0aW5ncy5jYW52YXMgfHxcbiAgICAgIG9sZENvbnRleHQgIT09IHRoaXMuX3NldHRpbmdzLmNvbnRleHRcbiAgICApIHtcbiAgICAgIGNvbnN0IHsgY2FudmFzLCBjb250ZXh0IH0gPSBjcmVhdGVDYW52YXModGhpcy5fc2V0dGluZ3MpO1xuXG4gICAgICB0aGlzLnByb3BzLmNhbnZhcyA9IGNhbnZhcztcbiAgICAgIHRoaXMucHJvcHMuY29udGV4dCA9IGNvbnRleHQ7XG5cbiAgICAgIC8vIERlbGV0ZSBvciBhZGQgYSAnZ2wnIHByb3AgZm9yIGNvbnZlbmllbmNlXG4gICAgICB0aGlzLl9zZXR1cEdMS2V5KCk7XG5cbiAgICAgIC8vIFJlLW1vdW50IHRoZSBuZXcgY2FudmFzIGlmIGl0IGhhcyBubyBwYXJlbnRcbiAgICAgIHRoaXMuX2FwcGVuZENhbnZhc0lmTmVlZGVkKCk7XG4gICAgfVxuXG4gICAgLy8gU3BlY2lhbCBjYXNlIHRvIHN1cHBvcnQgUDUuanNcbiAgICBpZiAob3B0LnA1ICYmIHR5cGVvZiBvcHQucDUgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhpcy5wcm9wcy5wNSA9IG9wdC5wNTtcbiAgICAgIHRoaXMucHJvcHMucDUuZHJhdyA9ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX2lzUDVSZXNpemluZykgcmV0dXJuO1xuICAgICAgICB0aGlzLl9sYXN0UmVkcmF3UmVzdWx0ID0gdGhpcy5zdWJtaXREcmF3Q2FsbCgpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgcGxheWluZyBzdGF0ZSBpZiBuZWNlc3NhcnlcbiAgICBpZiAoXCJwbGF5aW5nXCIgaW4gb3B0KSB7XG4gICAgICBpZiAob3B0LnBsYXlpbmcpIHRoaXMucGxheSgpO1xuICAgICAgZWxzZSB0aGlzLnBhdXNlKCk7XG4gICAgfVxuXG4gICAgY2hlY2tTZXR0aW5ncyh0aGlzLl9zZXR0aW5ncyk7XG5cbiAgICAvLyBEcmF3IG5ldyBmcmFtZVxuICAgIHRoaXMucmVzaXplKCk7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgICByZXR1cm4gdGhpcy5wcm9wcztcbiAgfVxuXG4gIHJlc2l6ZSgpIHtcbiAgICBjb25zdCBvbGRTaXplcyA9IHRoaXMuX2dldFNpemVQcm9wcygpO1xuXG4gICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzO1xuICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wcztcblxuICAgIC8vIFJlY29tcHV0ZSBuZXcgcHJvcGVydGllcyBiYXNlZCBvbiBjdXJyZW50IHNldHVwXG4gICAgY29uc3QgbmV3UHJvcHMgPSByZXNpemVDYW52YXMocHJvcHMsIHNldHRpbmdzKTtcblxuICAgIC8vIEFzc2lnbiB0byBjdXJyZW50IHByb3BzXG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLl9wcm9wcywgbmV3UHJvcHMpO1xuXG4gICAgLy8gTm93IHdlIGFjdHVhbGx5IHVwZGF0ZSB0aGUgY2FudmFzIHdpZHRoL2hlaWdodCBhbmQgc3R5bGUgcHJvcHNcbiAgICBjb25zdCB7IHBpeGVsUmF0aW8sIGNhbnZhc1dpZHRoLCBjYW52YXNIZWlnaHQsIHN0eWxlV2lkdGgsIHN0eWxlSGVpZ2h0IH0gPVxuICAgICAgdGhpcy5wcm9wcztcblxuICAgIC8vIFVwZGF0ZSBjYW52YXMgc2V0dGluZ3NcbiAgICBjb25zdCBjYW52YXMgPSB0aGlzLnByb3BzLmNhbnZhcztcbiAgICBpZiAoY2FudmFzICYmIHNldHRpbmdzLnJlc2l6ZUNhbnZhcyAhPT0gZmFsc2UpIHtcbiAgICAgIGlmIChwcm9wcy5wNSkge1xuICAgICAgICAvLyBQNS5qcyBzcGVjaWZpYyBlZGdlIGNhc2VcbiAgICAgICAgaWYgKGNhbnZhcy53aWR0aCAhPT0gY2FudmFzV2lkdGggfHwgY2FudmFzLmhlaWdodCAhPT0gY2FudmFzSGVpZ2h0KSB7XG4gICAgICAgICAgdGhpcy5faXNQNVJlc2l6aW5nID0gdHJ1ZTtcbiAgICAgICAgICAvLyBUaGlzIGNhdXNlcyBhIHJlLWRyYXcgOlxcIHNvIHdlIGlnbm9yZSBkcmF3cyBpbiB0aGUgbWVhbiB0aW1lLi4uIHNvcnRhIGhhY2t5XG4gICAgICAgICAgcHJvcHMucDUucGl4ZWxEZW5zaXR5KHBpeGVsUmF0aW8pO1xuICAgICAgICAgIHByb3BzLnA1LnJlc2l6ZUNhbnZhcyhcbiAgICAgICAgICAgIGNhbnZhc1dpZHRoIC8gcGl4ZWxSYXRpbyxcbiAgICAgICAgICAgIGNhbnZhc0hlaWdodCAvIHBpeGVsUmF0aW8sXG4gICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy5faXNQNVJlc2l6aW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvcmNlIGNhbnZhcyBzaXplXG4gICAgICAgIGlmIChjYW52YXMud2lkdGggIT09IGNhbnZhc1dpZHRoKSBjYW52YXMud2lkdGggPSBjYW52YXNXaWR0aDtcbiAgICAgICAgaWYgKGNhbnZhcy5oZWlnaHQgIT09IGNhbnZhc0hlaWdodCkgY2FudmFzLmhlaWdodCA9IGNhbnZhc0hlaWdodDtcbiAgICAgIH1cbiAgICAgIC8vIFVwZGF0ZSBjYW52YXMgc3R5bGVcbiAgICAgIGlmIChpc0Jyb3dzZXIoKSAmJiBzZXR0aW5ncy5zdHlsZUNhbnZhcyAhPT0gZmFsc2UpIHtcbiAgICAgICAgY2FudmFzLnN0eWxlLndpZHRoID0gYCR7c3R5bGVXaWR0aH1weGA7XG4gICAgICAgIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSBgJHtzdHlsZUhlaWdodH1weGA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbmV3U2l6ZXMgPSB0aGlzLl9nZXRTaXplUHJvcHMoKTtcbiAgICBsZXQgY2hhbmdlZCA9ICFkZWVwRXF1YWwob2xkU2l6ZXMsIG5ld1NpemVzKTtcbiAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgdGhpcy5fc2l6ZUNoYW5nZWQoKTtcbiAgICB9XG4gICAgcmV0dXJuIGNoYW5nZWQ7XG4gIH1cblxuICBfc2l6ZUNoYW5nZWQoKSB7XG4gICAgLy8gU2VuZCByZXNpemUgZXZlbnQgdG8gc2tldGNoXG4gICAgaWYgKHRoaXMuc2tldGNoICYmIHR5cGVvZiB0aGlzLnNrZXRjaC5yZXNpemUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhpcy5za2V0Y2gucmVzaXplKHRoaXMucHJvcHMpO1xuICAgIH1cbiAgfVxuXG4gIGFuaW1hdGUoKSB7XG4gICAgaWYgKCF0aGlzLnByb3BzLnBsYXlpbmcpIHJldHVybjtcbiAgICBpZiAoIWlzQnJvd3NlcigpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIltjYW52YXMtc2tldGNoXSBXQVJOOiBBbmltYXRpb24gaW4gTm9kZS5qcyBpcyBub3QgeWV0IHN1cHBvcnRlZFwiXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9yYWYgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGVIYW5kbGVyKTtcblxuICAgIGxldCBub3cgPSByaWdodE5vdygpO1xuXG4gICAgY29uc3QgZnBzID0gdGhpcy5wcm9wcy5mcHM7XG4gICAgY29uc3QgZnJhbWVJbnRlcnZhbE1TID0gMTAwMCAvIGZwcztcbiAgICBsZXQgZGVsdGFUaW1lTVMgPSBub3cgLSB0aGlzLl9sYXN0VGltZTtcblxuICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5wcm9wcy5kdXJhdGlvbjtcbiAgICBjb25zdCBoYXNEdXJhdGlvbiA9IHR5cGVvZiBkdXJhdGlvbiA9PT0gXCJudW1iZXJcIiAmJiBpc0Zpbml0ZShkdXJhdGlvbik7XG5cbiAgICBsZXQgaXNOZXdGcmFtZSA9IHRydWU7XG4gICAgY29uc3QgcGxheWJhY2tSYXRlID0gdGhpcy5zZXR0aW5ncy5wbGF5YmFja1JhdGU7XG4gICAgaWYgKHBsYXliYWNrUmF0ZSA9PT0gXCJmaXhlZFwiKSB7XG4gICAgICBkZWx0YVRpbWVNUyA9IGZyYW1lSW50ZXJ2YWxNUztcbiAgICB9IGVsc2UgaWYgKHBsYXliYWNrUmF0ZSA9PT0gXCJ0aHJvdHRsZVwiKSB7XG4gICAgICBpZiAoZGVsdGFUaW1lTVMgPiBmcmFtZUludGVydmFsTVMpIHtcbiAgICAgICAgbm93ID0gbm93IC0gKGRlbHRhVGltZU1TICUgZnJhbWVJbnRlcnZhbE1TKTtcbiAgICAgICAgdGhpcy5fbGFzdFRpbWUgPSBub3c7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpc05ld0ZyYW1lID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xhc3RUaW1lID0gbm93O1xuICAgIH1cblxuICAgIGNvbnN0IGRlbHRhVGltZSA9IGRlbHRhVGltZU1TIC8gMTAwMDtcbiAgICBsZXQgbmV3VGltZSA9IHRoaXMucHJvcHMudGltZSArIGRlbHRhVGltZSAqIHRoaXMucHJvcHMudGltZVNjYWxlO1xuXG4gICAgLy8gSGFuZGxlIHJldmVyc2UgdGltZSBzY2FsZVxuICAgIGlmIChuZXdUaW1lIDwgMCAmJiBoYXNEdXJhdGlvbikge1xuICAgICAgbmV3VGltZSA9IGR1cmF0aW9uICsgbmV3VGltZTtcbiAgICB9XG5cbiAgICAvLyBSZS1zdGFydCBhbmltYXRpb25cbiAgICBsZXQgaXNGaW5pc2hlZCA9IGZhbHNlO1xuICAgIGxldCBpc0xvb3BTdGFydCA9IGZhbHNlO1xuXG4gICAgY29uc3QgbG9vcGluZyA9IHRoaXMuc2V0dGluZ3MubG9vcCAhPT0gZmFsc2U7XG5cbiAgICBpZiAoaGFzRHVyYXRpb24gJiYgbmV3VGltZSA+PSBkdXJhdGlvbikge1xuICAgICAgLy8gUmUtc3RhcnQgYW5pbWF0aW9uXG4gICAgICBpZiAobG9vcGluZykge1xuICAgICAgICBpc05ld0ZyYW1lID0gdHJ1ZTtcbiAgICAgICAgbmV3VGltZSA9IG5ld1RpbWUgJSBkdXJhdGlvbjtcbiAgICAgICAgaXNMb29wU3RhcnQgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXNOZXdGcmFtZSA9IGZhbHNlO1xuICAgICAgICBuZXdUaW1lID0gZHVyYXRpb247XG4gICAgICAgIGlzRmluaXNoZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9zaWduYWxFbmQoKTtcbiAgICB9XG5cbiAgICBpZiAoaXNOZXdGcmFtZSkge1xuICAgICAgdGhpcy5wcm9wcy5kZWx0YVRpbWUgPSBkZWx0YVRpbWU7XG4gICAgICB0aGlzLnByb3BzLnRpbWUgPSBuZXdUaW1lO1xuICAgICAgdGhpcy5wcm9wcy5wbGF5aGVhZCA9IHRoaXMuX2NvbXB1dGVQbGF5aGVhZChuZXdUaW1lLCBkdXJhdGlvbik7XG4gICAgICBjb25zdCBsYXN0RnJhbWUgPSB0aGlzLnByb3BzLmZyYW1lO1xuICAgICAgdGhpcy5wcm9wcy5mcmFtZSA9IHRoaXMuX2NvbXB1dGVDdXJyZW50RnJhbWUoKTtcbiAgICAgIGlmIChpc0xvb3BTdGFydCkgdGhpcy5fc2lnbmFsQmVnaW4oKTtcbiAgICAgIGlmIChsYXN0RnJhbWUgIT09IHRoaXMucHJvcHMuZnJhbWUpIHRoaXMudGljaygpO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIHRoaXMucHJvcHMuZGVsdGFUaW1lID0gMDtcbiAgICB9XG5cbiAgICBpZiAoaXNGaW5pc2hlZCkge1xuICAgICAgdGhpcy5wYXVzZSgpO1xuICAgIH1cbiAgfVxuXG4gIGRpc3BhdGNoKGNiKSB7XG4gICAgaWYgKHR5cGVvZiBjYiAhPT0gXCJmdW5jdGlvblwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibXVzdCBwYXNzIGZ1bmN0aW9uIGludG8gZGlzcGF0Y2goKVwiKTtcbiAgICBjYih0aGlzLnByb3BzKTtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgbW91bnQoKSB7XG4gICAgdGhpcy5fYXBwZW5kQ2FudmFzSWZOZWVkZWQoKTtcbiAgfVxuXG4gIHVubW91bnQoKSB7XG4gICAgaWYgKGlzQnJvd3NlcigpKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLl9yZXNpemVIYW5kbGVyKTtcbiAgICAgIHRoaXMuX2tleWJvYXJkU2hvcnRjdXRzLmRldGFjaCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5wcm9wcy5jYW52YXMucGFyZW50RWxlbWVudCkge1xuICAgICAgdGhpcy5wcm9wcy5jYW52YXMucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLnByb3BzLmNhbnZhcyk7XG4gICAgfVxuICB9XG5cbiAgX2FwcGVuZENhbnZhc0lmTmVlZGVkKCkge1xuICAgIGlmICghaXNCcm93c2VyKCkpIHJldHVybjtcbiAgICBpZiAoXG4gICAgICB0aGlzLnNldHRpbmdzLnBhcmVudCAhPT0gZmFsc2UgJiZcbiAgICAgIHRoaXMucHJvcHMuY2FudmFzICYmXG4gICAgICAhdGhpcy5wcm9wcy5jYW52YXMucGFyZW50RWxlbWVudFxuICAgICkge1xuICAgICAgY29uc3QgZGVmYXVsdFBhcmVudCA9IHRoaXMuc2V0dGluZ3MucGFyZW50IHx8IGRvY3VtZW50LmJvZHk7XG4gICAgICBkZWZhdWx0UGFyZW50LmFwcGVuZENoaWxkKHRoaXMucHJvcHMuY2FudmFzKTtcbiAgICB9XG4gIH1cblxuICBfc2V0dXBHTEtleSgpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5jb250ZXh0KSB7XG4gICAgICBpZiAoaXNXZWJHTENvbnRleHQodGhpcy5wcm9wcy5jb250ZXh0KSkge1xuICAgICAgICB0aGlzLl9wcm9wcy5nbCA9IHRoaXMucHJvcHMuY29udGV4dDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9wcm9wcy5nbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRUaW1lUHJvcHMoc2V0dGluZ3MgPSB7fSkge1xuICAgIC8vIEdldCB0aW1pbmcgZGF0YVxuICAgIGxldCBkdXJhdGlvbiA9IHNldHRpbmdzLmR1cmF0aW9uO1xuICAgIGxldCB0b3RhbEZyYW1lcyA9IHNldHRpbmdzLnRvdGFsRnJhbWVzO1xuICAgIGNvbnN0IHRpbWVTY2FsZSA9IGRlZmluZWQoc2V0dGluZ3MudGltZVNjYWxlLCAxKTtcbiAgICBjb25zdCBmcHMgPSBkZWZpbmVkKHNldHRpbmdzLmZwcywgMjQpO1xuICAgIGNvbnN0IGhhc0R1cmF0aW9uID0gdHlwZW9mIGR1cmF0aW9uID09PSBcIm51bWJlclwiICYmIGlzRmluaXRlKGR1cmF0aW9uKTtcbiAgICBjb25zdCBoYXNUb3RhbEZyYW1lcyA9XG4gICAgICB0eXBlb2YgdG90YWxGcmFtZXMgPT09IFwibnVtYmVyXCIgJiYgaXNGaW5pdGUodG90YWxGcmFtZXMpO1xuXG4gICAgY29uc3QgdG90YWxGcmFtZXNGcm9tRHVyYXRpb24gPSBoYXNEdXJhdGlvblxuICAgICAgPyBNYXRoLmZsb29yKGZwcyAqIGR1cmF0aW9uKVxuICAgICAgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgZHVyYXRpb25Gcm9tVG90YWxGcmFtZXMgPSBoYXNUb3RhbEZyYW1lc1xuICAgICAgPyB0b3RhbEZyYW1lcyAvIGZwc1xuICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKFxuICAgICAgaGFzRHVyYXRpb24gJiZcbiAgICAgIGhhc1RvdGFsRnJhbWVzICYmXG4gICAgICB0b3RhbEZyYW1lc0Zyb21EdXJhdGlvbiAhPT0gdG90YWxGcmFtZXNcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJZb3Ugc2hvdWxkIHNwZWNpZnkgZWl0aGVyIGR1cmF0aW9uIG9yIHRvdGFsRnJhbWVzLCBidXQgbm90IGJvdGguIE9yLCB0aGV5IG11c3QgbWF0Y2ggZXhhY3RseS5cIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICB0eXBlb2Ygc2V0dGluZ3MuZGltZW5zaW9ucyA9PT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgdHlwZW9mIHNldHRpbmdzLnVuaXRzICE9PSBcInVuZGVmaW5lZFwiXG4gICAgKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBZb3UndmUgc3BlY2lmaWVkIGEgeyB1bml0cyB9IHNldHRpbmcgYnV0IG5vIHsgZGltZW5zaW9uIH0sIHNvIHRoZSB1bml0cyB3aWxsIGJlIGlnbm9yZWQuYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0b3RhbEZyYW1lcyA9IGRlZmluZWQodG90YWxGcmFtZXMsIHRvdGFsRnJhbWVzRnJvbUR1cmF0aW9uLCBJbmZpbml0eSk7XG4gICAgZHVyYXRpb24gPSBkZWZpbmVkKGR1cmF0aW9uLCBkdXJhdGlvbkZyb21Ub3RhbEZyYW1lcywgSW5maW5pdHkpO1xuXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gc2V0dGluZ3MudGltZTtcbiAgICBjb25zdCBzdGFydEZyYW1lID0gc2V0dGluZ3MuZnJhbWU7XG4gICAgY29uc3QgaGFzU3RhcnRUaW1lID0gdHlwZW9mIHN0YXJ0VGltZSA9PT0gXCJudW1iZXJcIiAmJiBpc0Zpbml0ZShzdGFydFRpbWUpO1xuICAgIGNvbnN0IGhhc1N0YXJ0RnJhbWUgPVxuICAgICAgdHlwZW9mIHN0YXJ0RnJhbWUgPT09IFwibnVtYmVyXCIgJiYgaXNGaW5pdGUoc3RhcnRGcmFtZSk7XG5cbiAgICAvLyBzdGFydCBhdCB6ZXJvIHVubGVzcyB1c2VyIHNwZWNpZmllcyBmcmFtZSBvciB0aW1lIChidXQgbm90IGJvdGggbWlzbWF0Y2hlZClcbiAgICBsZXQgdGltZSA9IDA7XG4gICAgbGV0IGZyYW1lID0gMDtcbiAgICBsZXQgcGxheWhlYWQgPSAwO1xuICAgIGlmIChoYXNTdGFydFRpbWUgJiYgaGFzU3RhcnRGcmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIllvdSBzaG91bGQgc3BlY2lmeSBlaXRoZXIgc3RhcnQgZnJhbWUgb3IgdGltZSwgYnV0IG5vdCBib3RoLlwiXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoaGFzU3RhcnRUaW1lKSB7XG4gICAgICAvLyBVc2VyIHNwZWNpZmllcyB0aW1lLCB3ZSBpbmZlciBmcmFtZXMgZnJvbSBGUFNcbiAgICAgIHRpbWUgPSBzdGFydFRpbWU7XG4gICAgICBwbGF5aGVhZCA9IHRoaXMuX2NvbXB1dGVQbGF5aGVhZCh0aW1lLCBkdXJhdGlvbik7XG4gICAgICBmcmFtZSA9IHRoaXMuX2NvbXB1dGVGcmFtZShwbGF5aGVhZCwgdGltZSwgdG90YWxGcmFtZXMsIGZwcyk7XG4gICAgfSBlbHNlIGlmIChoYXNTdGFydEZyYW1lKSB7XG4gICAgICAvLyBVc2VyIHNwZWNpZmllcyBmcmFtZSBudW1iZXIsIHdlIGluZmVyIHRpbWUgZnJvbSBGUFNcbiAgICAgIGZyYW1lID0gc3RhcnRGcmFtZTtcbiAgICAgIHRpbWUgPSBmcmFtZSAvIGZwcztcbiAgICAgIHBsYXloZWFkID0gdGhpcy5fY29tcHV0ZVBsYXloZWFkKHRpbWUsIGR1cmF0aW9uKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGxheWhlYWQsXG4gICAgICB0aW1lLFxuICAgICAgZnJhbWUsXG4gICAgICBkdXJhdGlvbixcbiAgICAgIHRvdGFsRnJhbWVzLFxuICAgICAgZnBzLFxuICAgICAgdGltZVNjYWxlLFxuICAgIH07XG4gIH1cblxuICBzZXR1cChzZXR0aW5ncyA9IHt9KSB7XG4gICAgaWYgKHRoaXMuc2tldGNoKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVsdGlwbGUgc2V0dXAoKSBjYWxscyBub3QgeWV0IHN1cHBvcnRlZC5cIik7XG5cbiAgICB0aGlzLl9zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIHNldHRpbmdzLCB0aGlzLl9zZXR0aW5ncyk7XG5cbiAgICBjaGVja1NldHRpbmdzKHRoaXMuX3NldHRpbmdzKTtcblxuICAgIC8vIEdldCBpbml0aWFsIGNhbnZhcyAmIGNvbnRleHRcbiAgICBjb25zdCB7IGNvbnRleHQsIGNhbnZhcyB9ID0gY3JlYXRlQ2FudmFzKHRoaXMuX3NldHRpbmdzKTtcblxuICAgIGNvbnN0IHRpbWVQcm9wcyA9IHRoaXMuZ2V0VGltZVByb3BzKHRoaXMuX3NldHRpbmdzKTtcblxuICAgIC8vIEluaXRpYWwgcmVuZGVyIHN0YXRlIGZlYXR1cmVzXG4gICAgdGhpcy5fcHJvcHMgPSB7XG4gICAgICAuLi50aW1lUHJvcHMsXG4gICAgICBjYW52YXMsXG4gICAgICBjb250ZXh0LFxuICAgICAgZGVsdGFUaW1lOiAwLFxuICAgICAgc3RhcnRlZDogZmFsc2UsXG4gICAgICBleHBvcnRpbmc6IGZhbHNlLFxuICAgICAgcGxheWluZzogZmFsc2UsXG4gICAgICByZWNvcmRpbmc6IGZhbHNlLFxuICAgICAgc2V0dGluZ3M6IHRoaXMuc2V0dGluZ3MsXG4gICAgICBkYXRhOiB0aGlzLnNldHRpbmdzLmRhdGEsXG5cbiAgICAgIC8vIEV4cG9ydCBzb21lIHNwZWNpZmljIGFjdGlvbnMgdG8gdGhlIHNrZXRjaFxuICAgICAgcmVuZGVyOiAoKSA9PiB0aGlzLnJlbmRlcigpLFxuICAgICAgdG9nZ2xlUGxheTogKCkgPT4gdGhpcy50b2dnbGVQbGF5KCksXG4gICAgICBkaXNwYXRjaDogKGNiKSA9PiB0aGlzLmRpc3BhdGNoKGNiKSxcbiAgICAgIHRpY2s6ICgpID0+IHRoaXMudGljaygpLFxuICAgICAgcmVzaXplOiAoKSA9PiB0aGlzLnJlc2l6ZSgpLFxuICAgICAgdXBkYXRlOiAob3B0KSA9PiB0aGlzLnVwZGF0ZShvcHQpLFxuICAgICAgZXhwb3J0RnJhbWU6IChvcHQpID0+IHRoaXMuZXhwb3J0RnJhbWUob3B0KSxcbiAgICAgIHJlY29yZDogKCkgPT4gdGhpcy5yZWNvcmQoKSxcbiAgICAgIHBsYXk6ICgpID0+IHRoaXMucGxheSgpLFxuICAgICAgcGF1c2U6ICgpID0+IHRoaXMucGF1c2UoKSxcbiAgICAgIHN0b3A6ICgpID0+IHRoaXMuc3RvcCgpLFxuICAgIH07XG5cbiAgICAvLyBGb3IgV2ViR0wgc2tldGNoZXMsIGEgZ2wgdmFyaWFibGUgcmVhZHMgYSBiaXQgYmV0dGVyXG4gICAgdGhpcy5fc2V0dXBHTEtleSgpO1xuXG4gICAgLy8gVHJpZ2dlciBpbml0aWFsIHJlc2l6ZSBub3cgc28gdGhhdCBjYW52YXMgaXMgYWxyZWFkeSBzaXplZFxuICAgIC8vIGJ5IHRoZSB0aW1lIHdlIGxvYWQgdGhlIHNrZXRjaFxuICAgIHRoaXMucmVzaXplKCk7XG4gIH1cblxuICBsb2FkQW5kUnVuKGNhbnZhc1NrZXRjaCwgbmV3U2V0dGluZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5sb2FkKGNhbnZhc1NrZXRjaCwgbmV3U2V0dGluZ3MpLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5ydW4oKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0pO1xuICB9XG5cbiAgdW5sb2FkKCkge1xuICAgIHRoaXMucGF1c2UoKTtcbiAgICBpZiAoIXRoaXMuc2tldGNoKSByZXR1cm47XG4gICAgaWYgKHR5cGVvZiB0aGlzLnNrZXRjaC51bmxvYWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhpcy5fd3JhcENvbnRleHRTY2FsZSgocHJvcHMpID0+IHRoaXMuc2tldGNoLnVubG9hZChwcm9wcykpO1xuICAgIH1cbiAgICB0aGlzLl9za2V0Y2ggPSBudWxsO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnVubG9hZCgpO1xuICAgIHRoaXMudW5tb3VudCgpO1xuICB9XG5cbiAgbG9hZChjcmVhdGVTa2V0Y2gsIG5ld1NldHRpbmdzKSB7XG4gICAgLy8gVXNlciBkaWRuJ3Qgc3BlY2lmeSBhIGZ1bmN0aW9uXG4gICAgaWYgKHR5cGVvZiBjcmVhdGVTa2V0Y2ggIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIlRoZSBmdW5jdGlvbiBtdXN0IHRha2UgaW4gYSBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyLiBFeGFtcGxlOlxcbiAgY2FudmFzU2tldGNoZXIoKCkgPT4geyAuLi4gfSwgc2V0dGluZ3MpXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2tldGNoKSB7XG4gICAgICB0aGlzLnVubG9hZCgpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbmV3U2V0dGluZ3MgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRoaXMudXBkYXRlKG5ld1NldHRpbmdzKTtcbiAgICB9XG5cbiAgICAvLyBUaGlzIGlzIGEgYml0IG9mIGEgdHJpY2t5IGNhc2U7IHdlIHNldCB1cCB0aGUgYXV0by1zY2FsaW5nIGhlcmVcbiAgICAvLyBpbiBjYXNlIHRoZSB1c2VyIGRlY2lkZXMgdG8gcmVuZGVyIGFueXRoaW5nIHRvIHRoZSBjb250ZXh0ICpiZWZvcmUqIHRoZVxuICAgIC8vIHJlbmRlcigpIGZ1bmN0aW9uLi4uIEhvd2V2ZXIsIHVzZXJzIHNob3VsZCBpbnN0ZWFkIHVzZSBiZWdpbigpIGZ1bmN0aW9uIGZvciB0aGF0LlxuICAgIHRoaXMuX3ByZVJlbmRlcigpO1xuXG4gICAgbGV0IHByZWxvYWQgPSBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgIC8vIEJlY2F1c2Ugb2YgUDUuanMncyB1bnVzdWFsIHN0cnVjdHVyZSwgd2UgaGF2ZSB0byBkbyBhIGJpdCBvZlxuICAgIC8vIGxpYnJhcnktc3BlY2lmaWMgY2hhbmdlcyB0byBzdXBwb3J0IGl0IHByb3Blcmx5LlxuICAgIGlmICh0aGlzLnNldHRpbmdzLnA1KSB7XG4gICAgICBpZiAoIWlzQnJvd3NlcigpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIltjYW52YXMtc2tldGNoXSBFUlJPUjogVXNpbmcgcDUuanMgaW4gTm9kZS5qcyBpcyBub3Qgc3VwcG9ydGVkXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHByZWxvYWQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBsZXQgUDVDb25zdHJ1Y3RvciA9IHRoaXMuc2V0dGluZ3MucDU7XG4gICAgICAgIGxldCBwcmVsb2FkO1xuICAgICAgICBpZiAoUDVDb25zdHJ1Y3Rvci5wNSkge1xuICAgICAgICAgIHByZWxvYWQgPSBQNUNvbnN0cnVjdG9yLnByZWxvYWQ7XG4gICAgICAgICAgUDVDb25zdHJ1Y3RvciA9IFA1Q29uc3RydWN0b3IucDU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGUgc2tldGNoIHNldHVwOyBkaXNhYmxlIGxvb3AsIHNldCBzaXppbmcsIGV0Yy5cbiAgICAgICAgY29uc3QgcDVTa2V0Y2ggPSAocDUpID0+IHtcbiAgICAgICAgICAvLyBIb29rIGluIHByZWxvYWQgaWYgbmVjZXNzYXJ5XG4gICAgICAgICAgaWYgKHByZWxvYWQpIHA1LnByZWxvYWQgPSAoKSA9PiBwcmVsb2FkKHA1KTtcbiAgICAgICAgICBwNS5zZXR1cCA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIGNvbnN0IGlzR0wgPSB0aGlzLnNldHRpbmdzLmNvbnRleHQgPT09IFwid2ViZ2xcIjtcbiAgICAgICAgICAgIGNvbnN0IHJlbmRlcmVyID0gaXNHTCA/IHA1LldFQkdMIDogcDUuUDJEO1xuICAgICAgICAgICAgcDUubm9Mb29wKCk7XG4gICAgICAgICAgICBwNS5waXhlbERlbnNpdHkocHJvcHMucGl4ZWxSYXRpbyk7XG4gICAgICAgICAgICBwNS5jcmVhdGVDYW52YXMoXG4gICAgICAgICAgICAgIHByb3BzLnZpZXdwb3J0V2lkdGgsXG4gICAgICAgICAgICAgIHByb3BzLnZpZXdwb3J0SGVpZ2h0LFxuICAgICAgICAgICAgICByZW5kZXJlclxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChpc0dMICYmIHRoaXMuc2V0dGluZ3MuYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICBwNS5zZXRBdHRyaWJ1dGVzKHRoaXMuc2V0dGluZ3MuYXR0cmlidXRlcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgICAgcDUsXG4gICAgICAgICAgICAgIGNhbnZhczogcDUuY2FudmFzLFxuICAgICAgICAgICAgICBjb250ZXh0OiBwNS5fcmVuZGVyZXIuZHJhd2luZ0NvbnRleHQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFN1cHBvcnQgZ2xvYmFsIGFuZCBpbnN0YW5jZSBQNS5qcyBtb2Rlc1xuICAgICAgICBpZiAodHlwZW9mIFA1Q29uc3RydWN0b3IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIG5ldyBQNUNvbnN0cnVjdG9yKHA1U2tldGNoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5jcmVhdGVDYW52YXMgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBcInsgcDUgfSBzZXR0aW5nIGlzIHBhc3NlZCBidXQgY2FuJ3QgZmluZCBwNS5qcyBpbiBnbG9iYWwgKHdpbmRvdykgc2NvcGUuIE1heWJlIHlvdSBkaWQgbm90IGNyZWF0ZSBpdCBnbG9iYWxseT9cXG5uZXcgcDUoKTsgLy8gPC0tIGF0dGFjaGVzIHRvIGdsb2JhbCBzY29wZVwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwNVNrZXRjaCh3aW5kb3cpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJlbG9hZFxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAvLyBMb2FkIHRoZSB1c2VyJ3Mgc2tldGNoXG4gICAgICAgIGxldCBsb2FkZXIgPSBjcmVhdGVTa2V0Y2godGhpcy5wcm9wcyk7XG4gICAgICAgIGlmICghaXNQcm9taXNlKGxvYWRlcikpIHtcbiAgICAgICAgICBsb2FkZXIgPSBQcm9taXNlLnJlc29sdmUobG9hZGVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbG9hZGVyO1xuICAgICAgfSlcbiAgICAgIC50aGVuKChza2V0Y2gpID0+IHtcbiAgICAgICAgaWYgKCFza2V0Y2gpIHNrZXRjaCA9IHt9O1xuICAgICAgICB0aGlzLl9za2V0Y2ggPSBza2V0Y2g7XG5cbiAgICAgICAgLy8gT25jZSB0aGUgc2tldGNoIGlzIGxvYWRlZCB3ZSBjYW4gYWRkIHRoZSBldmVudHNcbiAgICAgICAgaWYgKGlzQnJvd3NlcigpKSB7XG4gICAgICAgICAgdGhpcy5fa2V5Ym9hcmRTaG9ydGN1dHMuYXR0YWNoKCk7XG4gICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5fcmVzaXplSGFuZGxlcik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9wb3N0UmVuZGVyKCk7XG5cbiAgICAgICAgLy8gVGhlIGluaXRpYWwgcmVzaXplKCkgaW4gdGhlIGNvbnN0cnVjdG9yIHdpbGwgbm90IGhhdmVcbiAgICAgICAgLy8gdHJpZ2dlcmVkIGEgcmVzaXplKCkgZXZlbnQgb24gdGhlIHNrZXRjaCwgc2luY2UgaXQgd2FzIGJlZm9yZVxuICAgICAgICAvLyB0aGUgc2tldGNoIHdhcyBsb2FkZWQuIFNvIHdlIHNlbmQgdGhlIHNpZ25hbCBoZXJlLCBhbGxvd2luZ1xuICAgICAgICAvLyB1c2VycyB0byByZWFjdCB0byB0aGUgaW5pdGlhbCBzaXplIGJlZm9yZSBmaXJzdCByZW5kZXIuXG4gICAgICAgIHRoaXMuX3NpemVDaGFuZ2VkKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcIkNvdWxkIG5vdCBzdGFydCBza2V0Y2gsIHRoZSBhc3luYyBsb2FkaW5nIGZ1bmN0aW9uIHJlamVjdGVkIHdpdGggYW4gZXJyb3I6XFxuICAgIEVycm9yOiBcIiArXG4gICAgICAgICAgICBlcnIubWVzc2FnZVxuICAgICAgICApO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTa2V0Y2hNYW5hZ2VyO1xuIiwiaW1wb3J0IFNrZXRjaE1hbmFnZXIgZnJvbSAnLi9jb3JlL1NrZXRjaE1hbmFnZXInO1xuaW1wb3J0IFBhcGVyU2l6ZXMgZnJvbSAnLi9wYXBlci1zaXplcyc7XG5pbXBvcnQgeyBnZXRDbGllbnRBUEksIGRlZmluZWQgfSBmcm9tICcuL3V0aWwnO1xuXG5jb25zdCBDQUNIRSA9ICdob3QtaWQtY2FjaGUnO1xuY29uc3QgcnVudGltZUNvbGxpc2lvbnMgPSBbXTtcblxuZnVuY3Rpb24gaXNIb3RSZWxvYWQgKCkge1xuICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnRBUEkoKTtcbiAgcmV0dXJuIGNsaWVudCAmJiBjbGllbnQuaG90O1xufVxuXG5mdW5jdGlvbiBjYWNoZUdldCAoaWQpIHtcbiAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50QVBJKCk7XG4gIGlmICghY2xpZW50KSByZXR1cm4gdW5kZWZpbmVkO1xuICBjbGllbnRbQ0FDSEVdID0gY2xpZW50W0NBQ0hFXSB8fCB7fTtcbiAgcmV0dXJuIGNsaWVudFtDQUNIRV1baWRdO1xufVxuXG5mdW5jdGlvbiBjYWNoZVB1dCAoaWQsIGRhdGEpIHtcbiAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50QVBJKCk7XG4gIGlmICghY2xpZW50KSByZXR1cm4gdW5kZWZpbmVkO1xuICBjbGllbnRbQ0FDSEVdID0gY2xpZW50W0NBQ0hFXSB8fCB7fTtcbiAgY2xpZW50W0NBQ0hFXVtpZF0gPSBkYXRhO1xufVxuXG5mdW5jdGlvbiBnZXRUaW1lUHJvcCAob2xkTWFuYWdlciwgbmV3U2V0dGluZ3MpIHtcbiAgLy8gU3RhdGljIHNrZXRjaGVzIGlnbm9yZSB0aGUgdGltZSBwZXJzaXN0ZW5jeVxuICByZXR1cm4gbmV3U2V0dGluZ3MuYW5pbWF0ZSA/IHsgdGltZTogb2xkTWFuYWdlci5wcm9wcy50aW1lIH0gOiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGNhbnZhc1NrZXRjaCAoc2tldGNoLCBzZXR0aW5ncyA9IHt9KSB7XG4gIGlmIChzZXR0aW5ncy5wNSkge1xuICAgIGlmIChzZXR0aW5ncy5jYW52YXMgfHwgKHNldHRpbmdzLmNvbnRleHQgJiYgdHlwZW9mIHNldHRpbmdzLmNvbnRleHQgIT09ICdzdHJpbmcnKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbiB7IHA1IH0gbW9kZSwgeW91IGNhbid0IHBhc3MgeW91ciBvd24gY2FudmFzIG9yIGNvbnRleHQsIHVubGVzcyB0aGUgY29udGV4dCBpcyBhIFwid2ViZ2xcIiBvciBcIjJkXCIgc3RyaW5nYCk7XG4gICAgfVxuXG4gICAgLy8gRG8gbm90IGNyZWF0ZSBhIGNhbnZhcyBvbiBzdGFydHVwLCBzaW5jZSBQNS5qcyBkb2VzIHRoYXQgZm9yIHVzXG4gICAgY29uc3QgY29udGV4dCA9IHR5cGVvZiBzZXR0aW5ncy5jb250ZXh0ID09PSAnc3RyaW5nJyA/IHNldHRpbmdzLmNvbnRleHQgOiBmYWxzZTtcbiAgICBzZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIHNldHRpbmdzLCB7IGNhbnZhczogZmFsc2UsIGNvbnRleHQgfSk7XG4gIH1cblxuICBjb25zdCBpc0hvdCA9IGlzSG90UmVsb2FkKCk7XG4gIGxldCBob3RJRDtcbiAgaWYgKGlzSG90KSB7XG4gICAgLy8gVXNlIGEgbWFnaWMgbmFtZSBieSBkZWZhdWx0LCBmb3JjZSB1c2VyIHRvIGRlZmluZSBlYWNoIHNrZXRjaCBpZiB0aGV5XG4gICAgLy8gcmVxdWlyZSBtb3JlIHRoYW4gb25lIGluIGFuIGFwcGxpY2F0aW9uLiBPcGVuIHRvIG90aGVyIGlkZWFzIG9uIGhvdyB0byB0YWNrbGVcbiAgICAvLyB0aGlzIGFzIHdlbGwuLi5cbiAgICBob3RJRCA9IGRlZmluZWQoc2V0dGluZ3MuaWQsICckX19ERUZBVUxUX0NBTlZBU19TS0VUQ0hfSURfXyQnKTtcbiAgfVxuICBsZXQgaXNJbmplY3RpbmcgPSBpc0hvdCAmJiB0eXBlb2YgaG90SUQgPT09ICdzdHJpbmcnO1xuXG4gIGlmIChpc0luamVjdGluZyAmJiBydW50aW1lQ29sbGlzaW9ucy5pbmNsdWRlcyhob3RJRCkpIHtcbiAgICBjb25zb2xlLndhcm4oYFdhcm5pbmc6IFlvdSBoYXZlIG11bHRpcGxlIGNhbGxzIHRvIGNhbnZhc1NrZXRjaCgpIGluIC0taG90IG1vZGUuIFlvdSBtdXN0IHBhc3MgdW5pcXVlIHsgaWQgfSBzdHJpbmdzIGluIHNldHRpbmdzIHRvIGVuYWJsZSBob3QgcmVsb2FkIGFjcm9zcyBtdWx0aXBsZSBza2V0Y2hlcy4gYCwgaG90SUQpO1xuICAgIGlzSW5qZWN0aW5nID0gZmFsc2U7XG4gIH1cblxuICBsZXQgcHJlbG9hZCA9IFByb21pc2UucmVzb2x2ZSgpO1xuXG4gIGlmIChpc0luamVjdGluZykge1xuICAgIC8vIE1hcmsgdGhpcyBhcyBhbHJlYWR5IHNwb3R0ZWQgaW4gdGhpcyBydW50aW1lIGluc3RhbmNlXG4gICAgcnVudGltZUNvbGxpc2lvbnMucHVzaChob3RJRCk7XG5cbiAgICBjb25zdCBwcmV2aW91c0RhdGEgPSBjYWNoZUdldChob3RJRCk7XG4gICAgaWYgKHByZXZpb3VzRGF0YSkge1xuICAgICAgY29uc3QgbmV4dCA9ICgpID0+IHtcbiAgICAgICAgLy8gR3JhYiBuZXcgcHJvcHMgZnJvbSBvbGQgc2tldGNoIGluc3RhbmNlXG4gICAgICAgIGNvbnN0IG5ld1Byb3BzID0gZ2V0VGltZVByb3AocHJldmlvdXNEYXRhLm1hbmFnZXIsIHNldHRpbmdzKTtcbiAgICAgICAgLy8gRGVzdHJveSB0aGUgb2xkIGluc3RhbmNlXG4gICAgICAgIHByZXZpb3VzRGF0YS5tYW5hZ2VyLmRlc3Ryb3koKTtcbiAgICAgICAgLy8gUGFzcyBhbG9uZyBuZXcgcHJvcHNcbiAgICAgICAgcmV0dXJuIG5ld1Byb3BzO1xuICAgICAgfTtcblxuICAgICAgLy8gTW92ZSBhbG9uZyB0aGUgbmV4dCBkYXRhLi4uXG4gICAgICBwcmVsb2FkID0gcHJldmlvdXNEYXRhLmxvYWQudGhlbihuZXh0KS5jYXRjaChuZXh0KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcHJlbG9hZC50aGVuKG5ld1Byb3BzID0+IHtcbiAgICBjb25zdCBtYW5hZ2VyID0gbmV3IFNrZXRjaE1hbmFnZXIoKTtcbiAgICBsZXQgcmVzdWx0O1xuICAgIGlmIChza2V0Y2gpIHtcbiAgICAgIC8vIE1lcmdlIHdpdGggaW5jb21pbmcgZGF0YVxuICAgICAgc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBzZXR0aW5ncywgbmV3UHJvcHMpO1xuXG4gICAgICAvLyBBcHBseSBzZXR0aW5ncyBhbmQgY3JlYXRlIGEgY2FudmFzXG4gICAgICBtYW5hZ2VyLnNldHVwKHNldHRpbmdzKTtcblxuICAgICAgLy8gTW91bnQgdG8gRE9NXG4gICAgICBtYW5hZ2VyLm1vdW50KCk7XG5cbiAgICAgIC8vIGxvYWQgdGhlIHNrZXRjaCBmaXJzdFxuICAgICAgcmVzdWx0ID0gbWFuYWdlci5sb2FkQW5kUnVuKHNrZXRjaCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdCA9IFByb21pc2UucmVzb2x2ZShtYW5hZ2VyKTtcbiAgICB9XG4gICAgaWYgKGlzSW5qZWN0aW5nKSB7XG4gICAgICBjYWNoZVB1dChob3RJRCwgeyBsb2FkOiByZXN1bHQsIG1hbmFnZXIgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0pO1xufVxuXG4vLyBUT0RPOiBGaWd1cmUgb3V0IGEgbmljZSB3YXkgdG8gZXhwb3J0IHRoaW5ncy5cbmNhbnZhc1NrZXRjaC5jYW52YXNTa2V0Y2ggPSBjYW52YXNTa2V0Y2g7XG5jYW52YXNTa2V0Y2guUGFwZXJTaXplcyA9IFBhcGVyU2l6ZXM7XG5cbmV4cG9ydCBkZWZhdWx0IGNhbnZhc1NrZXRjaDtcbiJdLCJuYW1lcyI6WyJnbG9iYWwiLCJsZXQiLCJhcmd1bWVudHMiLCJpc0RPTSIsImlzQXJndW1lbnRzIiwib2JqZWN0S2V5cyIsImRlZmluZSIsInRoaXMiLCJyZXBlYXQiLCJjb25zdCIsImFzc2lnbiIsImRlZmluZWQiLCJjb252ZXJ0RGlzdGFuY2UiLCJnZXRDYW52YXNDb250ZXh0IiwicmlnaHROb3ciLCJpc1Byb21pc2UiLCJkZWVwRXF1YWwiLCJQYXBlclNpemVzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Q0FBQTs7Ozs7O0NBUUEsSUFBSSxxQkFBcUIsR0FBRyxNQUFNLENBQUMscUJBQXFCLENBQUM7Q0FDekQsSUFBSSxjQUFjLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUM7Q0FDckQsSUFBSSxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLG9CQUFvQixDQUFDOztDQUU3RCxTQUFTLFFBQVEsQ0FBQyxHQUFHLEVBQUU7RUFDdEIsSUFBSSxHQUFHLEtBQUssSUFBSSxJQUFJLEdBQUcsS0FBSyxTQUFTLEVBQUU7R0FDdEMsTUFBTSxJQUFJLFNBQVMsQ0FBQyx1REFBdUQsQ0FBQyxDQUFDO0dBQzdFOztFQUVELE9BQU8sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ25COztDQUVELFNBQVMsZUFBZSxHQUFHO0VBQzFCLElBQUk7R0FDSCxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRTtJQUNuQixPQUFPLEtBQUssQ0FBQztJQUNiOzs7OztHQUtELElBQUksS0FBSyxHQUFHLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFD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QUcsQ0FBQyxDQUFDLENBQUM7V0FDWixDQUFDLEtBQUssQ0FBQztXQUNQLEVBQUUsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDO1dBQ1osQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1dBQ2YsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztXQUM3QixDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7V0FDMUUsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1dBQzFFLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztXQUMxRSxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7V0FDMUUsQ0FBQyxLQUFLLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFLEVBQUUsQ0FBQztXQUN4RyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxH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QUFnQixJQUFLLEtBQ3ZCLENBQUUsZ0JBQWlCLEtBQU0sTUFHekIsQ0FBRSxLQUFNLEdBQUksSUFDWixDQUFFLEtBQU0sR0FBSTtLQUNaLENBQUUsS0FBTSxJQUFLLEtBQ2IsQ0FBRSxLQUFNLElBQUssS0FDYixDQUFFLEtBQU0sSUFBSyxLQUNiLENBQUUsS0FBTSxJQUFLLEtBQ2IsQ0FBRSxNQUFPLElBQUssS0FDZCxDQUFFO0tBQU8sSUFBSyxLQUNkLENBQUUsTUFBTyxJQUFLLEtBR2QsQ0FBRSxLQUFNLElBQUssTUFDYixDQUFFLEtBQU0sSUFBSyxLQUNiLENBQUUsS0FBTSxJQUFLLEtBQ2IsQ0FBRTtLQUFNLElBQUssS0FDYixDQUFFLEtBQU0sSUFBSyxLQUNiLENBQUUsS0FBTSxJQUFLLEtBQ2IsQ0FBRSxLQUFNLElBQUssS0FDYixDQUFFLEtBQU0sR0FBSSxLQUNaLENBQUUsS0FBTTtLQUFJLElBQ1osQ0FBRSxLQUFNLEdBQUksSUFDWixDQUFFLE1BQU8sR0FBSSxJQUNiLENBQUUsTUFBTyxLQUFNLE1BQ2YsQ0FBRSxNQUFPLEtBQU0sTUFDZixDQUFFLEtBQU07S0FBTSxNQUNkLENBQUUsS0FBTSxJQUFLLE1BQ2IsQ0FBRSxNQUFPLElBQUssTUFDZCxDQUFFLEtBQU0sSUFBSyxLQUNiLENBQUUsTUFBTyxJQUFLLEtBQ2QsQ0FBRSxLQUFNO0tBQUssS0FDYixDQUFFLEtBQU0sSUFBSyxLQUNiLENBQUUsS0FBTSxJQUFLLEtBQ2IsQ0FBRSxLQUFNLElBQUssS0FDYixDQUFFLEtBQU0sR0FBSSxLQUNaLENBQUUsS0FBTSxHQUFJO0tBQ1osQ0FBRSxLQUFNLEdBQUksSUFDWixDQUFFLE1BQU8sR0FBSSxJQUNiLENBQUUsTUFBTyxHQUFJLElBQ2IsQ0FBRSxNQUFPLEdBQUksSUFDYixDQUFFLEtBQU0sSUFBSyxNQUNiLENBQUU7S0FBTSxJQUFLLEtBQ2IsQ0FBRSxLQUFNLElBQUssS0FDYixDQUFFLEtBQU0sSUFBSyxLQUNiLENBQUUsS0FBTSxJQUFLLEtBQ2IsQ0FBRSxLQUFNLElBQUssS0FDYixD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\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","module.exports =\n  global.performance &&\n  global.performance.now ? function now() {\n    return performance.now()\n  } : Date.now || function now() {\n    return +new Date\n  }\n","module.exports = isPromise;\n\nfunction isPromise(obj) {\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n}\n","module.exports = isNode\n\nfunction isNode (val) {\n  return (!val || typeof val !== 'object')\n    ? false\n    : (typeof window === 'object' && typeof window.Node === 'object')\n      ? (val instanceof window.Node)\n      : (typeof val.nodeType === 'number') &&\n        (typeof val.nodeName === 'string')\n}\n","// TODO: We can remove a huge chunk of bundle size by using a smaller\n// utility module for converting units.\nimport isDOM from \"is-dom\";\n\nexport function getClientAPI() {\n  return typeof window !== \"undefined\" && window[\"canvas-sketch-cli\"];\n}\n\nexport function defined() {\n  for (let i = 0; i < arguments.length; i++) {\n    if (arguments[i] != null) {\n      return arguments[i];\n    }\n  }\n  return undefined;\n}\n\nexport function isBrowser() {\n  return typeof document !== \"undefined\";\n}\n\nexport function isWebGLContext(ctx) {\n  return (\n    ctx &&\n    typeof ctx.clear === \"function\" &&\n    typeof ctx.clearColor === \"function\" &&\n    typeof ctx.bufferData === \"function\"\n  );\n}\n\nexport function is2DContext(ctx) {\n  return (\n    ctx &&\n    typeof ctx.save === \"function\" &&\n    typeof ctx.scale === \"function\" &&\n    typeof ctx.restore === \"function\"\n  );\n}\n\nexport function isCanvas(element) {\n  return (\n    isDOM(element) &&\n    /canvas/i.test(element.nodeName) &&\n    typeof element.getContext === \"function\"\n  );\n}\n","exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n","/*\n * Date Format 1.2.3\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\n * MIT license\n *\n * Includes enhancements by Scott Trenda <scott.trenda.net>\n * and Kris Kowal <cixar.com/~kris.kowal/>\n *\n * Accepts a date, a mask, or a date and a mask.\n * Returns a formatted version of the given date.\n * The date defaults to the current date/time.\n * The mask defaults to dateFormat.masks.default.\n */\n\n(function(global) {\n  'use strict';\n\n  var dateFormat = (function() {\n      var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZWN]|\"[^\"]*\"|'[^']*'/g;\n      var timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g;\n      var timezoneClip = /[^-+\\dA-Z]/g;\n  \n      // Regexes and supporting functions are cached through closure\n      return function (date, mask, utc, gmt) {\n  \n        // You can't provide utc if you skip other args (use the 'UTC:' mask prefix)\n        if (arguments.length === 1 && kindOf(date) === 'string' && !/\\d/.test(date)) {\n          mask = date;\n          date = undefined;\n        }\n  \n        date = date || new Date;\n  \n        if(!(date instanceof Date)) {\n          date = new Date(date);\n        }\n  \n        if (isNaN(date)) {\n          throw TypeError('Invalid date');\n        }\n  \n        mask = String(dateFormat.masks[mask] || mask || dateFormat.masks['default']);\n  \n        // Allow setting the utc/gmt argument via the mask\n        var maskSlice = mask.slice(0, 4);\n        if (maskSlice === 'UTC:' || maskSlice === 'GMT:') {\n          mask = mask.slice(4);\n          utc = true;\n          if (maskSlice === 'GMT:') {\n            gmt = true;\n          }\n        }\n  \n        var _ = utc ? 'getUTC' : 'get';\n        var d = date[_ + 'Date']();\n        var D = date[_ + 'Day']();\n        var m = date[_ + 'Month']();\n        var y = date[_ + 'FullYear']();\n        var H = date[_ + 'Hours']();\n        var M = date[_ + 'Minutes']();\n        var s = date[_ + 'Seconds']();\n        var L = date[_ + 'Milliseconds']();\n        var o = utc ? 0 : date.getTimezoneOffset();\n        var W = getWeek(date);\n        var N = getDayOfWeek(date);\n        var flags = {\n          d:    d,\n          dd:   pad(d),\n          ddd:  dateFormat.i18n.dayNames[D],\n          dddd: dateFormat.i18n.dayNames[D + 7],\n          m:    m + 1,\n          mm:   pad(m + 1),\n          mmm:  dateFormat.i18n.monthNames[m],\n          mmmm: dateFormat.i18n.monthNames[m + 12],\n          yy:   String(y).slice(2),\n          yyyy: y,\n          h:    H % 12 || 12,\n          hh:   pad(H % 12 || 12),\n          H:    H,\n          HH:   pad(H),\n          M:    M,\n          MM:   pad(M),\n          s:    s,\n          ss:   pad(s),\n          l:    pad(L, 3),\n          L:    pad(Math.round(L / 10)),\n          t:    H < 12 ? dateFormat.i18n.timeNames[0] : dateFormat.i18n.timeNames[1],\n          tt:   H < 12 ? dateFormat.i18n.timeNames[2] : dateFormat.i18n.timeNames[3],\n          T:    H < 12 ? dateFormat.i18n.timeNames[4] : dateFormat.i18n.timeNames[5],\n          TT:   H < 12 ? dateFormat.i18n.timeNames[6] : dateFormat.i18n.timeNames[7],\n          Z:    gmt ? 'GMT' : utc ? 'UTC' : (String(date).match(timezone) || ['']).pop().replace(timezoneClip, ''),\n          o:    (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n          S:    ['th', 'st', 'nd', 'rd'][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10],\n          W:    W,\n          N:    N\n        };\n  \n        return mask.replace(token, function (match) {\n          if (match in flags) {\n            return flags[match];\n          }\n          return match.slice(1, match.length - 1);\n        });\n      };\n    })();\n\n  dateFormat.masks = {\n    'default':               'ddd mmm dd yyyy HH:MM:ss',\n    'shortDate':             'm/d/yy',\n    'mediumDate':            'mmm d, yyyy',\n    'longDate':              'mmmm d, yyyy',\n    'fullDate':              'dddd, mmmm d, yyyy',\n    'shortTime':             'h:MM TT',\n    'mediumTime':            'h:MM:ss TT',\n    'longTime':              'h:MM:ss TT Z',\n    'isoDate':               'yyyy-mm-dd',\n    'isoTime':               'HH:MM:ss',\n    'isoDateTime':           'yyyy-mm-dd\\'T\\'HH:MM:sso',\n    'isoUtcDateTime':        'UTC:yyyy-mm-dd\\'T\\'HH:MM:ss\\'Z\\'',\n    'expiresHeaderFormat':   'ddd, dd mmm yyyy HH:MM:ss Z'\n  };\n\n  // Internationalization strings\n  dateFormat.i18n = {\n    dayNames: [\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat',\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n    ],\n    monthNames: [\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec',\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\n    ],\n    timeNames: [\n      'a', 'p', 'am', 'pm', 'A', 'P', 'AM', 'PM'\n    ]\n  };\n\nfunction pad(val, len) {\n  val = String(val);\n  len = len || 2;\n  while (val.length < len) {\n    val = '0' + val;\n  }\n  return val;\n}\n\n/**\n * Get the ISO 8601 week number\n * Based on comments from\n * http://techblog.procurios.nl/k/n618/news/view/33796/14863/Calculate-ISO-8601-week-and-year-in-javascript.html\n *\n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getWeek(date) {\n  // Remove time components of date\n  var targetThursday = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n\n  // Change date to Thursday same week\n  targetThursday.setDate(targetThursday.getDate() - ((targetThursday.getDay() + 6) % 7) + 3);\n\n  // Take January 4th as it is always in week 1 (see ISO 8601)\n  var firstThursday = new Date(targetThursday.getFullYear(), 0, 4);\n\n  // Change date to Thursday same week\n  firstThursday.setDate(firstThursday.getDate() - ((firstThursday.getDay() + 6) % 7) + 3);\n\n  // Check if daylight-saving-time-switch occurred and correct for it\n  var ds = targetThursday.getTimezoneOffset() - firstThursday.getTimezoneOffset();\n  targetThursday.setHours(targetThursday.getHours() - ds);\n\n  // Number of weeks between target Thursday and first Thursday\n  var weekDiff = (targetThursday - firstThursday) / (86400000*7);\n  return 1 + Math.floor(weekDiff);\n}\n\n/**\n * Get ISO-8601 numeric representation of the day of the week\n * 1 (for Monday) through 7 (for Sunday)\n * \n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getDayOfWeek(date) {\n  var dow = date.getDay();\n  if(dow === 0) {\n    dow = 7;\n  }\n  return dow;\n}\n\n/**\n * kind-of shortcut\n * @param  {*} val\n * @return {String}\n */\nfunction kindOf(val) {\n  if (val === null) {\n    return 'null';\n  }\n\n  if (val === undefined) {\n    return 'undefined';\n  }\n\n  if (typeof val !== 'object') {\n    return typeof val;\n  }\n\n  if (Array.isArray(val)) {\n    return 'array';\n  }\n\n  return {}.toString.call(val)\n    .slice(8, -1).toLowerCase();\n};\n\n\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return dateFormat;\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = dateFormat;\n  } else {\n    global.dateFormat = dateFormat;\n  }\n})(this);\n","/*!\n * repeat-string <https://github.com/jonschlinkert/repeat-string>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\n/**\n * Results cache\n */\n\nvar res = '';\nvar cache;\n\n/**\n * Expose `repeat`\n */\n\nmodule.exports = repeat;\n\n/**\n * Repeat the given `string` the specified `number`\n * of times.\n *\n * **Example:**\n *\n * ```js\n * var repeat = require('repeat-string');\n * repeat('A', 5);\n * //=> AAAAA\n * ```\n *\n * @param {String} `string` The string to repeat\n * @param {Number} `number` The number of times to repeat the string\n * @return {String} Repeated string\n * @api public\n */\n\nfunction repeat(str, num) {\n  if (typeof str !== 'string') {\n    throw new TypeError('expected a string');\n  }\n\n  // cover common, quick use cases\n  if (num === 1) return str;\n  if (num === 2) return str + str;\n\n  var max = str.length * num;\n  if (cache !== str || typeof cache === 'undefined') {\n    cache = str;\n    res = '';\n  } else if (res.length >= max) {\n    return res.substr(0, max);\n  }\n\n  while (max > res.length && num > 1) {\n    if (num & 1) {\n      res += str;\n    }\n\n    num >>= 1;\n    str += str;\n  }\n\n  res += str;\n  res = res.substr(0, max);\n  return res;\n}\n","/*!\n * pad-left <https://github.com/jonschlinkert/pad-left>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT license.\n */\n\n'use strict';\n\nvar repeat = require('repeat-string');\n\nmodule.exports = function padLeft(str, num, ch) {\n  str = str.toString();\n\n  if (typeof num === 'undefined') {\n    return str;\n  }\n\n  if (ch === 0) {\n    ch = '0';\n  } else if (ch) {\n    ch = ch.toString();\n  } else {\n    ch = ' ';\n  }\n\n  return repeat(ch, num - str.length) + str;\n};\n","import dateformat from 'dateformat';\nimport assign from 'object-assign';\nimport padLeft from 'pad-left';\nimport { getClientAPI } from './util';\n\nconst noop = () => {};\nlet link;\nlet defaultExts = { extension: '', prefix: '', suffix: '' };\n\n// Alternative solution for saving files,\n// a bit slower and does not work in Safari\n// function fetchBlobFromDataURL (dataURL) {\n//   return window.fetch(dataURL).then(res => res.blob());\n// }\n\nconst supportedEncodings = [\n  'image/png',\n  'image/jpeg',\n  'image/webp'\n];\n\nfunction stream (isStart, opts = {}) {\n  return new Promise((resolve, reject) => {\n    opts = assign({}, defaultExts, opts);\n    const filename = resolveFilename(Object.assign({}, opts, {\n      extension: '',\n      frame: undefined\n    }));\n    const func = isStart ? 'streamStart' : 'streamEnd';\n    const client = getClientAPI();\n    if (client && client.output && typeof client[func] === 'function') {\n      return client[func](assign({}, opts, { filename }))\n        .then(ev => resolve(ev));\n    } else {\n      return resolve({ filename, client: false });\n    }\n  });\n}\n\nexport function streamStart (opts = {}) {\n  return stream(true, opts);\n}\n\nexport function streamEnd (opts = {}) {\n  return stream(false, opts);\n}\n\nexport function exportCanvas (canvas, opt = {}) {\n  const encoding = opt.encoding || 'image/png';\n  if (!supportedEncodings.includes(encoding)) throw new Error(`Invalid canvas encoding ${encoding}`);\n  let extension = (encoding.split('/')[1] || '').replace(/jpeg/i, 'jpg');\n  if (extension) extension = `.${extension}`.toLowerCase();\n  return {\n    extension,\n    type: encoding,\n    dataURL: canvas.toDataURL(encoding, opt.encodingQuality)\n  };\n}\n\nfunction createBlobFromDataURL (dataURL) {\n  return new Promise((resolve) => {\n    const splitIndex = dataURL.indexOf(',');\n    if (splitIndex === -1) {\n      resolve(new window.Blob());\n      return;\n    }\n    const base64 = dataURL.slice(splitIndex + 1);\n    const byteString = window.atob(base64);\n    const type = dataURL.slice(0, splitIndex);\n    const mimeMatch = /data:([^;]+)/.exec(type);\n    const mime = (mimeMatch ? mimeMatch[1] : '') || undefined;\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for (var i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n    resolve(new window.Blob([ ab ], { type: mime }));\n  });\n}\n\nexport function saveDataURL (dataURL, opts = {}) {\n  return createBlobFromDataURL(dataURL)\n    .then(blob => saveBlob(blob, opts));\n}\n\nexport function saveBlob (blob, opts = {}) {\n  return new Promise(resolve => {\n    opts = assign({}, defaultExts, opts);\n    const filename = opts.filename;\n\n    const client = getClientAPI();\n    if (client && typeof client.saveBlob === 'function' && client.output) {\n      // native saving using a CLI tool\n      return client.saveBlob(blob, assign({}, opts, { filename }))\n        .then(ev => resolve(ev));\n    } else {\n      // force download\n      if (!link) {\n        link = document.createElement('a');\n        link.style.visibility = 'hidden';\n        link.target = '_blank';\n      }\n      link.download = filename;\n      link.href = window.URL.createObjectURL(blob);\n      document.body.appendChild(link);\n      link.onclick = () => {\n        link.onclick = noop;\n        setTimeout(() => {\n          window.URL.revokeObjectURL(blob);\n          if (link.parentElement) link.parentElement.removeChild(link);\n          link.removeAttribute('href');\n          resolve({ filename, client: false });\n        });\n      };\n      link.click();\n    }\n  });\n}\n\nexport function saveFile (data, opts = {}) {\n  const parts = Array.isArray(data) ? data : [ data ];\n  const blob = new window.Blob(parts, { type: opts.type || '' });\n  return saveBlob(blob, opts);\n}\n\nexport function getTimeStamp () {\n  const dateFormatStr = `yyyy.mm.dd-HH.MM.ss`;\n  return dateformat(new Date(), dateFormatStr);\n}\n\nexport function getDefaultFile (prefix = '', suffix = '', ext) {\n  // const dateFormatStr = `yyyy.mm.dd-HH.MM.ss`;\n  const dateFormatStr = `yyyy-mm-dd 'at' h.MM.ss TT`;\n  return `${prefix}${dateformat(new Date(), dateFormatStr)}${suffix}${ext}`;\n}\n\nexport function resolveFilename (opt = {}) {\n  opt = assign({}, opt);\n\n  // Custom filename function\n  if (typeof opt.file === 'function') {\n    return opt.file(opt);\n  } else if (opt.file) {\n    return opt.file;\n  }\n\n  let frame = null;\n  let extension = '';\n  if (typeof opt.extension === 'string') extension = opt.extension;\n\n  if (typeof opt.frame === 'number') {\n    let totalFrames;\n    if (typeof opt.totalFrames === 'number') {\n      totalFrames = opt.totalFrames;\n    } else {\n      totalFrames = Math.max(10000, opt.frame);\n    }\n    frame = padLeft(String(opt.frame), String(totalFrames).length, '0');\n  }\n\n  const layerStr = isFinite(opt.totalLayers) && isFinite(opt.layer) && opt.totalLayers > 1 ? `${opt.layer}` : '';\n  if (frame != null) {\n    return [ layerStr, frame ].filter(Boolean).join('-') + extension;\n  } else {\n    const defaultFileName = opt.timeStamp;\n    return [ opt.prefix, opt.name || defaultFileName, layerStr, opt.hash, opt.suffix ].filter(Boolean).join('-') + extension;\n  }\n}\n","// Handle some common typos\nconst commonTypos = {\n  dimension: 'dimensions',\n  animated: 'animate',\n  animating: 'animate',\n  unit: 'units',\n  P5: 'p5',\n  pixellated: 'pixelated',\n  looping: 'loop',\n  pixelPerInch: 'pixels'\n};\n\n// Handle all other typos\nconst allKeys = [\n  'dimensions', 'units', 'pixelsPerInch', 'orientation',\n  'scaleToFit', 'scaleToView', 'bleed', 'pixelRatio',\n  'exportPixelRatio', 'maxPixelRatio', 'scaleContext',\n  'resizeCanvas', 'styleCanvas', 'canvas', 'context', 'attributes',\n  'parent', 'file', 'name', 'prefix', 'suffix', 'animate', 'playing',\n  'loop', 'duration', 'totalFrames', 'fps', 'playbackRate', 'timeScale',\n  'frame', 'time', 'flush', 'pixelated', 'hotkeys', 'p5', 'id',\n  'scaleToFitPadding', 'data', 'params', 'encoding', 'encodingQuality'\n];\n\n// This is fairly opinionated and forces users to use the 'data' parameter\n// if they want to pass along non-setting objects...\nexport const checkSettings = (settings) => {\n  const keys = Object.keys(settings);\n  keys.forEach(key => {\n    if (key in commonTypos) {\n      const actual = commonTypos[key];\n      console.warn(`[canvas-sketch] Could not recognize the setting \"${key}\", did you mean \"${actual}\"?`);\n    } else if (!allKeys.includes(key)) {\n      console.warn(`[canvas-sketch] Could not recognize the setting \"${key}\"`);\n    }\n  });\n};\n","import { getClientAPI } from '../util';\n\nexport default function (opt = {}) {\n  const handler = ev => {\n    if (!opt.enabled()) return;\n\n    const client = getClientAPI();\n    if (ev.keyCode === 83 && !ev.altKey && (ev.metaKey || ev.ctrlKey)) {\n      // Cmd + S\n      ev.preventDefault();\n      opt.save(ev);\n    } else if (ev.keyCode === 32) {\n      // Space\n      // TODO: what to do with this? keep it, or remove it?\n      opt.togglePlay(ev);\n    } else if (client && !ev.altKey && ev.keyCode === 75 && (ev.metaKey || ev.ctrlKey)) {\n      // Cmd + K, only when canvas-sketch-cli is used\n      ev.preventDefault();\n      opt.commit(ev);\n    }\n  };\n\n  const attach = () => {\n    window.addEventListener('keydown', handler);\n  };\n\n  const detach = () => {\n    window.removeEventListener('keydown', handler);\n  };\n\n  return {\n    attach,\n    detach\n  };\n}\n","const defaultUnits = 'mm';\n\nconst data = [\n  // Common Paper Sizes\n  // (Mostly North-American based)\n  [ 'postcard', 101.6, 152.4 ],\n  [ 'poster-small', 280, 430 ],\n  [ 'poster', 460, 610 ],\n  [ 'poster-large', 610, 910 ],\n  [ 'business-card', 50.8, 88.9 ],\n\n  // Photographic Print Paper Sizes\n  [ '2r', 64, 89 ],\n  [ '3r', 89, 127 ],\n  [ '4r', 102, 152 ],\n  [ '5r', 127, 178 ], // 5x7\n  [ '6r', 152, 203 ], // 6x8\n  [ '8r', 203, 254 ], // 8x10\n  [ '10r', 254, 305 ], // 10x12\n  [ '11r', 279, 356 ], // 11x14\n  [ '12r', 305, 381 ],\n\n  // Standard Paper Sizes\n  [ 'a0', 841, 1189 ],\n  [ 'a1', 594, 841 ],\n  [ 'a2', 420, 594 ],\n  [ 'a3', 297, 420 ],\n  [ 'a4', 210, 297 ],\n  [ 'a5', 148, 210 ],\n  [ 'a6', 105, 148 ],\n  [ 'a7', 74, 105 ],\n  [ 'a8', 52, 74 ],\n  [ 'a9', 37, 52 ],\n  [ 'a10', 26, 37 ],\n  [ '2a0', 1189, 1682 ],\n  [ '4a0', 1682, 2378 ],\n  [ 'b0', 1000, 1414 ],\n  [ 'b1', 707, 1000 ],\n  [ 'b1+', 720, 1020 ],\n  [ 'b2', 500, 707 ],\n  [ 'b2+', 520, 720 ],\n  [ 'b3', 353, 500 ],\n  [ 'b4', 250, 353 ],\n  [ 'b5', 176, 250 ],\n  [ 'b6', 125, 176 ],\n  [ 'b7', 88, 125 ],\n  [ 'b8', 62, 88 ],\n  [ 'b9', 44, 62 ],\n  [ 'b10', 31, 44 ],\n  [ 'b11', 22, 32 ],\n  [ 'b12', 16, 22 ],\n  [ 'c0', 917, 1297 ],\n  [ 'c1', 648, 917 ],\n  [ 'c2', 458, 648 ],\n  [ 'c3', 324, 458 ],\n  [ 'c4', 229, 324 ],\n  [ 'c5', 162, 229 ],\n  [ 'c6', 114, 162 ],\n  [ 'c7', 81, 114 ],\n  [ 'c8', 57, 81 ],\n  [ 'c9', 40, 57 ],\n  [ 'c10', 28, 40 ],\n  [ 'c11', 22, 32 ],\n  [ 'c12', 16, 22 ],\n\n  // Use inches for North American sizes,\n  // as it produces less float precision errors\n  [ 'half-letter', 5.5, 8.5, 'in' ],\n  [ 'letter', 8.5, 11, 'in' ],\n  [ 'legal', 8.5, 14, 'in' ],\n  [ 'junior-legal', 5, 8, 'in' ],\n  [ 'ledger', 11, 17, 'in' ],\n  [ 'tabloid', 11, 17, 'in' ],\n  [ 'ansi-a', 8.5, 11.0, 'in' ],\n  [ 'ansi-b', 11.0, 17.0, 'in' ],\n  [ 'ansi-c', 17.0, 22.0, 'in' ],\n  [ 'ansi-d', 22.0, 34.0, 'in' ],\n  [ 'ansi-e', 34.0, 44.0, 'in' ],\n  [ 'arch-a', 9, 12, 'in' ],\n  [ 'arch-b', 12, 18, 'in' ],\n  [ 'arch-c', 18, 24, 'in' ],\n  [ 'arch-d', 24, 36, 'in' ],\n  [ 'arch-e', 36, 48, 'in' ],\n  [ 'arch-e1', 30, 42, 'in' ],\n  [ 'arch-e2', 26, 38, 'in' ],\n  [ 'arch-e3', 27, 39, 'in' ]\n];\n\nexport default data.reduce((dict, preset) => {\n  const item = {\n    units: preset[3] || defaultUnits,\n    dimensions: [ preset[1], preset[2] ]\n  };\n  dict[preset[0]] = item;\n  dict[preset[0].replace(/-/g, ' ')] = item;\n  return dict;\n}, {});\n","module.exports = function () {\n    for (var i = 0; i < arguments.length; i++) {\n        if (arguments[i] !== undefined) return arguments[i];\n    }\n};\n","var defined = require('defined');\nvar units = [ 'mm', 'cm', 'm', 'pc', 'pt', 'in', 'ft', 'px' ];\n\nvar conversions = {\n  // metric\n  m: {\n    system: 'metric',\n    factor: 1\n  },\n  cm: {\n    system: 'metric',\n    factor: 1 / 100\n  },\n  mm: {\n    system: 'metric',\n    factor: 1 / 1000\n  },\n  // imperial\n  pt: {\n    system: 'imperial',\n    factor: 1 / 72\n  },\n  pc: {\n    system: 'imperial',\n    factor: 1 / 6\n  },\n  in: {\n    system: 'imperial',\n    factor: 1\n  },\n  ft: {\n    system: 'imperial',\n    factor: 12\n  }\n};\n\nconst anchors = {\n  metric: {\n    unit: 'm',\n    ratio: 1 / 0.0254\n  },\n  imperial: {\n    unit: 'in',\n    ratio: 0.0254\n  }\n};\n\nfunction round (value, decimals) {\n  return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);\n}\n\nfunction convertDistance (value, fromUnit, toUnit, opts) {\n  if (typeof value !== 'number' || !isFinite(value)) throw new Error('Value must be a finite number');\n  if (!fromUnit || !toUnit) throw new Error('Must specify from and to units');\n\n  opts = opts || {};\n  var pixelsPerInch = defined(opts.pixelsPerInch, 96);\n  var precision = opts.precision;\n  var roundPixel = opts.roundPixel !== false;\n\n  fromUnit = fromUnit.toLowerCase();\n  toUnit = toUnit.toLowerCase();\n\n  if (units.indexOf(fromUnit) === -1) throw new Error('Invalid from unit \"' + fromUnit + '\", must be one of: ' + units.join(', '));\n  if (units.indexOf(toUnit) === -1) throw new Error('Invalid from unit \"' + toUnit + '\", must be one of: ' + units.join(', '));\n\n  if (fromUnit === toUnit) {\n    // We don't need to convert from A to B since they are the same already\n    return value;\n  }\n\n  var toFactor = 1;\n  var fromFactor = 1;\n  var isToPixel = false;\n\n  if (fromUnit === 'px') {\n    fromFactor = 1 / pixelsPerInch;\n    fromUnit = 'in';\n  }\n  if (toUnit === 'px') {\n    isToPixel = true;\n    toFactor = pixelsPerInch;\n    toUnit = 'in';\n  }\n\n  var fromUnitData = conversions[fromUnit];\n  var toUnitData = conversions[toUnit];\n\n  // source to anchor inside source's system\n  var anchor = value * fromUnitData.factor * fromFactor;\n\n  // if systems differ, convert one to another\n  if (fromUnitData.system !== toUnitData.system) {\n    // regular 'm' to 'in' and so forth\n    anchor *= anchors[fromUnitData.system].ratio;\n  }\n\n  var result = anchor / toUnitData.factor * toFactor;\n  if (isToPixel && roundPixel) {\n    result = Math.round(result);\n  } else if (typeof precision === 'number' && isFinite(precision)) {\n    result = round(result, precision);\n  }\n  return result;\n}\n\nmodule.exports = convertDistance;\nmodule.exports.units = units;\n","import paperSizes from './paper-sizes';\nimport convertLength from 'convert-length';\n\nexport function getDimensionsFromPreset (dimensions, unitsTo = 'px', pixelsPerInch = 72) {\n  if (typeof dimensions === 'string') {\n    const key = dimensions.toLowerCase();\n    if (!(key in paperSizes)) {\n      throw new Error(`The dimension preset \"${dimensions}\" is not supported or could not be found; try using a4, a3, postcard, letter, etc.`)\n    }\n    const preset = paperSizes[key];\n    return preset.dimensions.map(d => {\n      return convertDistance(d, preset.units, unitsTo, pixelsPerInch);\n    });\n  } else {\n    return dimensions;\n  }\n}\n\nexport function convertDistance (dimension, unitsFrom = 'px', unitsTo = 'px', pixelsPerInch = 72) {\n  return convertLength(dimension, unitsFrom, unitsTo, {\n    pixelsPerInch,\n    precision: 4,\n    roundPixel: true\n  });\n}\n","import { getDimensionsFromPreset, convertDistance } from '../distances';\nimport { isBrowser, defined } from '../util';\n\nfunction checkIfHasDimensions (settings) {\n  if (!settings.dimensions) return false;\n  if (typeof settings.dimensions === 'string') return true;\n  if (Array.isArray(settings.dimensions) && settings.dimensions.length >= 2) return true;\n  return false;\n}\n\nfunction getParentSize (props, settings) {\n  // When no { dimension } is passed in node, we default to HTML canvas size\n  if (!isBrowser()) {\n    return [ 300, 150 ];\n  }\n\n  let element = settings.parent || window;\n\n  if (element === window ||\n      element === document ||\n      element === document.body) {\n    return [ window.innerWidth, window.innerHeight ];\n  } else {\n    const { width, height } = element.getBoundingClientRect();\n    return [ width, height ];\n  }\n}\n\nexport default function resizeCanvas (props, settings) {\n  let width, height;\n  let styleWidth, styleHeight;\n  let canvasWidth, canvasHeight;\n\n  const browser = isBrowser();\n  const dimensions = settings.dimensions;\n  const hasDimensions = checkIfHasDimensions(settings);\n  const exporting = props.exporting;\n  let scaleToFit = hasDimensions ? settings.scaleToFit !== false : false;\n  let scaleToView = (!exporting && hasDimensions) ? settings.scaleToView : true;\n  // in node, cancel both of these options\n  if (!browser) scaleToFit = scaleToView = false;\n  const units = settings.units;\n  const pixelsPerInch = (typeof settings.pixelsPerInch === 'number' && isFinite(settings.pixelsPerInch)) ? settings.pixelsPerInch : 72;\n  const bleed = defined(settings.bleed, 0);\n\n  const devicePixelRatio = browser ? window.devicePixelRatio : 1;\n  const basePixelRatio = scaleToView ? devicePixelRatio : 1;\n\n  let pixelRatio, exportPixelRatio;\n\n  // If a pixel ratio is specified, we will use it.\n  // Otherwise:\n  //  -> If dimension is specified, use base ratio (i.e. size for export)\n  //  -> If no dimension is specified, use device ratio (i.e. size for screen)\n  if (typeof settings.pixelRatio === 'number' && isFinite(settings.pixelRatio)) {\n    // When { pixelRatio } is specified, it's also used as default exportPixelRatio.\n    pixelRatio = settings.pixelRatio;\n    exportPixelRatio = defined(settings.exportPixelRatio, pixelRatio);\n  } else {\n    if (hasDimensions) {\n      // When a dimension is specified, use the base ratio rather than screen ratio\n      pixelRatio = basePixelRatio;\n      // Default to a pixel ratio of 1 so that you end up with the same dimension\n      // you specified, i.e. [ 500, 500 ] is exported as 500x500 px\n      exportPixelRatio = defined(settings.exportPixelRatio, 1);\n    } else {\n      // No dimension is specified, assume full-screen retina sizing\n      pixelRatio = devicePixelRatio;\n      // Default to screen pixel ratio, so that it's like taking a device screenshot\n      exportPixelRatio = defined(settings.exportPixelRatio, pixelRatio);\n    }\n  }\n\n  // Clamp pixel ratio\n  if (typeof settings.maxPixelRatio === 'number' && isFinite(settings.maxPixelRatio)) {\n    pixelRatio = Math.min(settings.maxPixelRatio, pixelRatio);\n  }\n\n  // Handle export pixel ratio\n  if (exporting) {\n    pixelRatio = exportPixelRatio;\n  }\n\n  // parentWidth = typeof parentWidth === 'undefined' ? defaultNodeSize[0] : parentWidth;\n  // parentHeight = typeof parentHeight === 'undefined' ? defaultNodeSize[1] : parentHeight;\n\n  let [ parentWidth, parentHeight ] = getParentSize(props, settings);\n  let trimWidth, trimHeight;\n\n  // You can specify a dimensions in pixels or cm/m/in/etc\n  if (hasDimensions) {\n    const result = getDimensionsFromPreset(dimensions, units, pixelsPerInch);\n    const highest = Math.max(result[0], result[1]);\n    const lowest = Math.min(result[0], result[1]);\n    if (settings.orientation) {\n      const landscape = settings.orientation === 'landscape';\n      width = landscape ? highest : lowest;\n      height = landscape ? lowest : highest;\n    } else {\n      width = result[0];\n      height = result[1];\n    }\n\n    trimWidth = width;\n    trimHeight = height;\n\n    // Apply bleed which is assumed to be in the same units\n    width += bleed * 2;\n    height += bleed * 2;\n  } else {\n    width = parentWidth;\n    height = parentHeight;\n    trimWidth = width;\n    trimHeight = height;\n  }\n\n  // Real size in pixels after PPI is taken into account\n  let realWidth = width;\n  let realHeight = height;\n  if (hasDimensions && units) {\n    // Convert to digital/pixel units if necessary\n    realWidth = convertDistance(width, units, 'px', pixelsPerInch);\n    realHeight = convertDistance(height, units, 'px', pixelsPerInch);\n  }\n\n  // How big to set the 'view' of the canvas in the browser (i.e. style)\n  styleWidth = Math.round(realWidth);\n  styleHeight = Math.round(realHeight);\n\n  // If we wish to scale the view to the browser window\n  if (scaleToFit && !exporting && hasDimensions) {\n    const aspect = width / height;\n    const windowAspect = parentWidth / parentHeight;\n    const scaleToFitPadding = defined(settings.scaleToFitPadding, 40);\n    const maxWidth = Math.round(parentWidth - scaleToFitPadding * 2);\n    const maxHeight = Math.round(parentHeight - scaleToFitPadding * 2);\n    if (styleWidth > maxWidth || styleHeight > maxHeight) {\n      if (windowAspect > aspect) {\n        styleHeight = maxHeight;\n        styleWidth = Math.round(styleHeight * aspect);\n      } else {\n        styleWidth = maxWidth;\n        styleHeight = Math.round(styleWidth / aspect);\n      }\n    }\n  }\n\n  canvasWidth = scaleToView ? Math.round(pixelRatio * styleWidth) : Math.round(pixelRatio * realWidth);\n  canvasHeight = scaleToView ? Math.round(pixelRatio * styleHeight) : Math.round(pixelRatio * realHeight);\n\n  const viewportWidth = scaleToView ? Math.round(styleWidth) : Math.round(realWidth);\n  const viewportHeight = scaleToView ? Math.round(styleHeight) : Math.round(realHeight);\n\n  const scaleX = canvasWidth / width;\n  const scaleY = canvasHeight / height;\n\n  // Assign to current props\n  return {\n    bleed,\n    pixelRatio,\n    width,\n    height,\n    dimensions: [ width, height ],\n    units: units || 'px',\n    scaleX,\n    scaleY,\n    pixelsPerInch,\n    viewportWidth,\n    viewportHeight,\n    canvasWidth,\n    canvasHeight,\n    trimWidth,\n    trimHeight,\n    styleWidth,\n    styleHeight\n  };\n}\n","module.exports = getCanvasContext\nfunction getCanvasContext (type, opts) {\n  if (typeof type !== 'string') {\n    throw new TypeError('must specify type string')\n  }\n\n  opts = opts || {}\n\n  if (typeof document === 'undefined' && !opts.canvas) {\n    return null // check for Node\n  }\n\n  var canvas = opts.canvas || document.createElement('canvas')\n  if (typeof opts.width === 'number') {\n    canvas.width = opts.width\n  }\n  if (typeof opts.height === 'number') {\n    canvas.height = opts.height\n  }\n\n  var attribs = opts\n  var gl\n  try {\n    var names = [ type ]\n    // prefix GL contexts\n    if (type.indexOf('webgl') === 0) {\n      names.push('experimental-' + type)\n    }\n\n    for (var i = 0; i < names.length; i++) {\n      gl = canvas.getContext(names[i], attribs)\n      if (gl) return gl\n    }\n  } catch (e) {\n    gl = null\n  }\n  return (gl || null) // ensure null on fail\n}\n","import assign from 'object-assign';\nimport getCanvasContext from 'get-canvas-context';\nimport { isBrowser } from '../util';\n\nfunction createCanvasElement () {\n  if (!isBrowser()) {\n    throw new Error('It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.');\n  }\n  return document.createElement('canvas');\n}\n\nexport default function createCanvas (settings = {}) {\n  let context, canvas;\n  let ownsCanvas = false;\n  if (settings.canvas !== false) {\n    // Determine the canvas and context to create\n    context = settings.context;\n    if (!context || typeof context === 'string') {\n      let newCanvas = settings.canvas;\n      if (!newCanvas) {\n        newCanvas = createCanvasElement();\n        ownsCanvas = true;\n      }\n      const type = context || '2d';\n      if (typeof newCanvas.getContext !== 'function') {\n        throw new Error(`The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?`);\n      }\n      context = getCanvasContext(type, assign({}, settings.attributes, { canvas: newCanvas }));\n      if (!context) {\n        throw new Error(`Failed at canvas.getContext('${type}') - the browser may not support this context, or a different context may already be in use with this canvas.`);\n      }\n    }\n\n    canvas = context.canvas;\n    // Ensure context matches user's canvas expectations\n    if (settings.canvas && canvas !== settings.canvas) {\n      throw new Error('The { canvas } and { context } settings must point to the same underlying canvas element');\n    }\n\n    // Apply pixelation to canvas if necessary, this is mostly a convenience utility\n    if (settings.pixelated) {\n      context.imageSmoothingEnabled = false;\n      context.mozImageSmoothingEnabled = false;\n      context.oImageSmoothingEnabled = false;\n      context.webkitImageSmoothingEnabled = false;\n      context.msImageSmoothingEnabled = false;\n      canvas.style['image-rendering'] = 'pixelated';\n    }\n  }\n  return { canvas, context, ownsCanvas };\n}\n","import assign from \"object-assign\";\nimport rightNow from \"right-now\";\nimport isPromise from \"is-promise\";\nimport {\n  isBrowser,\n  defined,\n  isWebGLContext,\n  is2DContext,\n  isCanvas,\n  getClientAPI,\n} from \"../util\";\nimport deepEqual from \"deep-equal\";\nimport {\n  resolveFilename,\n  saveFile,\n  saveDataURL,\n  getTimeStamp,\n  exportCanvas,\n  streamStart,\n  streamEnd,\n} from \"../save\";\nimport { checkSettings } from \"../accessibility\";\n\nimport keyboardShortcuts from \"./keyboardShortcuts\";\nimport resizeCanvas from \"./resizeCanvas\";\nimport createCanvas from \"./createCanvas\";\n\nclass SketchManager {\n  constructor() {\n    this._settings = {};\n    this._props = {};\n    this._sketch = undefined;\n    this._raf = null;\n    this._recordTimeout = null;\n\n    // Some hacky things required to get around p5.js structure\n    this._lastRedrawResult = undefined;\n    this._isP5Resizing = false;\n\n    this._keyboardShortcuts = keyboardShortcuts({\n      enabled: () => this.settings.hotkeys !== false,\n      save: (ev) => {\n        if (ev.shiftKey) {\n          if (this.props.recording) {\n            this.endRecord();\n            this.run();\n          } else this.record();\n        } else if (!this.props.recording) {\n          this.exportFrame();\n        }\n      },\n      togglePlay: () => {\n        if (this.props.playing) this.pause();\n        else this.play();\n      },\n      commit: (ev) => {\n        this.exportFrame({ commit: true });\n      },\n    });\n\n    this._animateHandler = () => this.animate();\n\n    this._resizeHandler = () => {\n      const changed = this.resize();\n      // Only re-render when size actually changes\n      if (changed) {\n        this.render();\n      }\n    };\n  }\n\n  get sketch() {\n    return this._sketch;\n  }\n\n  get settings() {\n    return this._settings;\n  }\n\n  get props() {\n    return this._props;\n  }\n\n  _computePlayhead(currentTime, duration) {\n    const hasDuration = typeof duration === \"number\" && isFinite(duration);\n    return hasDuration ? currentTime / duration : 0;\n  }\n\n  _computeFrame(playhead, time, totalFrames, fps) {\n    return isFinite(totalFrames) && totalFrames > 1\n      ? Math.floor(playhead * (totalFrames - 1))\n      : Math.floor(fps * time);\n  }\n\n  _computeCurrentFrame() {\n    return this._computeFrame(\n      this.props.playhead,\n      this.props.time,\n      this.props.totalFrames,\n      this.props.fps\n    );\n  }\n\n  _getSizeProps() {\n    const props = this.props;\n    return {\n      width: props.width,\n      height: props.height,\n      pixelRatio: props.pixelRatio,\n      canvasWidth: props.canvasWidth,\n      canvasHeight: props.canvasHeight,\n      viewportWidth: props.viewportWidth,\n      viewportHeight: props.viewportHeight,\n    };\n  }\n\n  run() {\n    if (!this.sketch)\n      throw new Error(\n        \"should wait until sketch is loaded before trying to play()\"\n      );\n\n    // Start an animation frame loop if necessary\n    if (this.settings.playing !== false) {\n      this.play();\n    }\n\n    // Let's let this warning hang around for a few versions...\n    if (typeof this.sketch.dispose === \"function\") {\n      console.warn(\n        \"In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()\"\n      );\n    }\n\n    // In case we aren't playing or animated, make sure we still trigger begin message...\n    if (!this.props.started) {\n      this._signalBegin();\n      this.props.started = true;\n    }\n\n    // Render an initial frame\n    this.tick();\n    this.render();\n    return this;\n  }\n\n  _cancelTimeouts() {\n    if (\n      this._raf != null &&\n      typeof window !== \"undefined\" &&\n      typeof window.cancelAnimationFrame === \"function\"\n    ) {\n      window.cancelAnimationFrame(this._raf);\n      this._raf = null;\n    }\n    if (this._recordTimeout != null) {\n      clearTimeout(this._recordTimeout);\n      this._recordTimeout = null;\n    }\n  }\n\n  play() {\n    let animate = this.settings.animate;\n    if (\"animation\" in this.settings) {\n      animate = true;\n      console.warn(\n        \"[canvas-sketch] { animation } has been renamed to { animate }\"\n      );\n    }\n    if (!animate) return;\n    if (!isBrowser()) {\n      console.error(\n        \"[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported\"\n      );\n      return;\n    }\n    if (this.props.playing) return;\n    if (!this.props.started) {\n      this._signalBegin();\n      this.props.started = true;\n    }\n\n    // console.log('play', this.props.time)\n\n    // Start a render loop\n    this.props.playing = true;\n    this._cancelTimeouts();\n    this._lastTime = rightNow();\n    this._raf = window.requestAnimationFrame(this._animateHandler);\n  }\n\n  pause() {\n    if (this.props.recording) this.endRecord();\n    this.props.playing = false;\n\n    this._cancelTimeouts();\n  }\n\n  togglePlay() {\n    if (this.props.playing) this.pause();\n    else this.play();\n  }\n\n  // Stop and reset to frame zero\n  stop() {\n    this.pause();\n    this.props.frame = 0;\n    this.props.playhead = 0;\n    this.props.time = 0;\n    this.props.deltaTime = 0;\n    this.props.started = false;\n    this.render();\n  }\n\n  record() {\n    if (this.props.recording) return;\n    if (!isBrowser()) {\n      console.error(\n        \"[canvas-sketch] WARN: Recording from Node.js is not yet supported\"\n      );\n      return;\n    }\n\n    this.stop();\n    this.props.playing = true;\n    this.props.recording = true;\n\n    const exportOpts = this._createExportOptions({ sequence: true });\n\n    const frameInterval = 1 / this.props.fps;\n    // Render each frame in the sequence\n    this._cancelTimeouts();\n    const tick = () => {\n      if (!this.props.recording) return Promise.resolve();\n      this.props.deltaTime = frameInterval;\n      this.tick();\n      return this.exportFrame(exportOpts).then(() => {\n        if (!this.props.recording) return; // was cancelled before\n        this.props.deltaTime = 0;\n        this.props.frame++;\n        if (this.props.frame < this.props.totalFrames) {\n          this.props.time += frameInterval;\n          this.props.playhead = this._computePlayhead(\n            this.props.time,\n            this.props.duration\n          );\n          this._recordTimeout = setTimeout(tick, 0);\n        } else {\n          console.log(\"Finished recording\");\n          this._signalEnd();\n          this.endRecord();\n          this.stop();\n          this.run();\n        }\n      });\n    };\n\n    // Trigger a start event before we begin recording\n    if (!this.props.started) {\n      this._signalBegin();\n      this.props.started = true;\n    }\n\n    // Trigger 'begin record' event\n    if (this.sketch && typeof this.sketch.beginRecord === \"function\") {\n      this._wrapContextScale((props) => this.sketch.beginRecord(props));\n    }\n\n    // Initiate a streaming start if necessary\n    streamStart(exportOpts)\n      .catch((err) => {\n        console.error(err);\n      })\n      .then((response) => {\n        this._raf = window.requestAnimationFrame(tick);\n      });\n  }\n\n  _signalBegin() {\n    if (this.sketch && typeof this.sketch.begin === \"function\") {\n      this._wrapContextScale((props) => this.sketch.begin(props));\n    }\n  }\n\n  _signalEnd() {\n    if (this.sketch && typeof this.sketch.end === \"function\") {\n      this._wrapContextScale((props) => this.sketch.end(props));\n    }\n  }\n\n  endRecord() {\n    const wasRecording = this.props.recording;\n\n    this._cancelTimeouts();\n    this.props.recording = false;\n    this.props.deltaTime = 0;\n    this.props.playing = false;\n\n    // tell CLI that stream has finished\n    return streamEnd()\n      .catch((err) => {\n        console.error(err);\n      })\n      .then(() => {\n        // Trigger 'end record' event\n        if (\n          wasRecording &&\n          this.sketch &&\n          typeof this.sketch.endRecord === \"function\"\n        ) {\n          this._wrapContextScale((props) => this.sketch.endRecord(props));\n        }\n      });\n  }\n\n  _createExportOptions(opt = {}) {\n    return {\n      sequence: opt.sequence,\n      save: opt.save,\n      fps: this.props.fps,\n      frame: opt.sequence ? this.props.frame : undefined,\n      file: this.settings.file,\n      name: this.settings.name,\n      prefix: this.settings.prefix,\n      suffix: this.settings.suffix,\n      encoding: this.settings.encoding,\n      encodingQuality: this.settings.encodingQuality,\n      timeStamp: opt.timeStamp || getTimeStamp(),\n      totalFrames: isFinite(this.props.totalFrames)\n        ? Math.max(0, this.props.totalFrames)\n        : 1000,\n    };\n  }\n\n  exportFrame(opt = {}) {\n    if (!this.sketch) return Promise.all([]);\n    if (typeof this.sketch.preExport === \"function\") {\n      this.sketch.preExport();\n    }\n\n    // Options for export function\n    let exportOpts = this._createExportOptions(opt);\n\n    const client = getClientAPI();\n    let p = Promise.resolve();\n    if (client && opt.commit && typeof client.commit === \"function\") {\n      const commitOpts = assign({}, exportOpts);\n      const hash = client.commit(commitOpts);\n      if (isPromise(hash)) p = hash;\n      else p = Promise.resolve(hash);\n    }\n\n    return p\n      .then((hash) => {\n        return this._doExportFrame(\n          assign({}, exportOpts, { hash: hash || \"\" })\n        );\n      })\n      .then((result) => {\n        // Most common usecase is to export a single layer,\n        // so let's optimize the user experience for that.\n        if (result.length === 1) return result[0];\n        else return result;\n      });\n  }\n\n  _doExportFrame(exportOpts = {}) {\n    this._props.exporting = true;\n\n    // Resize to output resolution\n    this.resize();\n\n    // Draw at this output resolution\n    let drawResult = this.render();\n\n    // The self owned canvas (may be undefined...!)\n    const canvas = this.props.canvas;\n\n    // Get list of results from render\n    if (typeof drawResult === \"undefined\") {\n      drawResult = [canvas];\n    }\n    drawResult = [].concat(drawResult).filter(Boolean);\n\n    // Transform the canvas/file descriptors into a consistent format,\n    // and pull out any data URLs from canvas elements\n    drawResult = drawResult.map((result) => {\n      const hasDataObject =\n        typeof result === \"object\" &&\n        result &&\n        (\"data\" in result || \"dataURL\" in result);\n      const data = hasDataObject ? result.data : result;\n      const opts = hasDataObject ? assign({}, result, { data }) : { data };\n      if (isCanvas(data)) {\n        const encoding = opts.encoding || exportOpts.encoding;\n        const encodingQuality = defined(\n          opts.encodingQuality,\n          exportOpts.encodingQuality,\n          0.95\n        );\n        const { dataURL, extension, type } = exportCanvas(data, {\n          encoding,\n          encodingQuality,\n        });\n        return Object.assign(opts, { dataURL, extension, type });\n      } else {\n        return opts;\n      }\n    });\n\n    // Now return to regular rendering mode\n    this._props.exporting = false;\n    this.resize();\n    this.render();\n\n    // And now we can save each result\n    return Promise.all(\n      drawResult.map((result, i, layerList) => {\n        // By default, if rendering multiple layers we will give them indices\n        const curOpt = assign(\n          {\n            extension: \"\",\n            prefix: \"\",\n            suffix: \"\",\n          },\n          exportOpts,\n          result,\n          {\n            layer: i,\n            totalLayers: layerList.length,\n          }\n        );\n\n        // If export is explicitly not saving, make sure nothing saves\n        // Otherwise default to the layer save option, or fallback to true\n        const saveParam = exportOpts.save === false ? false : result.save;\n        curOpt.save = saveParam !== false;\n\n        // Resolve a full filename from all the options\n        curOpt.filename = resolveFilename(curOpt);\n\n        // Clean up some parameters that may be ambiguous to the user\n        delete curOpt.encoding;\n        delete curOpt.encodingQuality;\n\n        // Clean it up further by just removing undefined values\n        for (let k in curOpt) {\n          if (typeof curOpt[k] === \"undefined\") delete curOpt[k];\n        }\n\n        let savePromise = Promise.resolve({});\n        if (curOpt.save) {\n          // Whether to actually save (download) this fragment\n          const data = curOpt.data;\n          if (curOpt.dataURL) {\n            const dataURL = curOpt.dataURL;\n            savePromise = saveDataURL(dataURL, curOpt);\n          } else {\n            savePromise = saveFile(data, curOpt);\n          }\n        }\n        return savePromise.then((saveResult) => {\n          return Object.assign({}, curOpt, saveResult);\n        });\n      })\n    ).then((ev) => {\n      const savedEvents = ev.filter((e) => e.save);\n      if (savedEvents.length > 0) {\n        // Log the saved exports\n        const eventWithOutput = savedEvents.find((e) => e.outputName);\n        const isClient = savedEvents.some((e) => e.client);\n        const isStreaming = savedEvents.some((e) => e.stream);\n        let item;\n        // many files, just log how many were exported\n        if (savedEvents.length > 1) item = savedEvents.length;\n        // in CLI, we know exact path dirname\n        else if (eventWithOutput)\n          item = `${eventWithOutput.outputName}/${savedEvents[0].filename}`;\n        // in browser, we can only know it went to \"browser download folder\"\n        else item = `${savedEvents[0].filename}`;\n        let ofSeq = \"\";\n        if (exportOpts.sequence) {\n          const hasTotalFrames = isFinite(this.props.totalFrames);\n          ofSeq = hasTotalFrames\n            ? ` (frame ${exportOpts.frame + 1} / ${this.props.totalFrames})`\n            : ` (frame ${exportOpts.frame})`;\n        } else if (savedEvents.length > 1) {\n          ofSeq = ` files`;\n        }\n        const client = isClient ? \"canvas-sketch-cli\" : \"canvas-sketch\";\n        const action = isStreaming ? \"Streaming into\" : \"Exported\";\n        console.log(\n          `%c[${client}]%c ${action} %c${item}%c${ofSeq}`,\n          \"color: #8e8e8e;\",\n          \"color: initial;\",\n          \"font-weight: bold;\",\n          \"font-weight: initial;\"\n        );\n      }\n      if (typeof this.sketch.postExport === \"function\") {\n        this.sketch.postExport();\n      }\n      return ev;\n    });\n  }\n\n  _wrapContextScale(cb) {\n    this._preRender();\n    cb(this.props);\n    this._postRender();\n  }\n\n  _preRender() {\n    const props = this.props;\n\n    // Scale context for unit sizing\n    if (is2DContext(props.context) && !props.p5) {\n      props.context.save();\n      if (this.settings.scaleContext !== false) {\n        props.context.scale(props.scaleX, props.scaleY);\n      }\n    } else if (props.p5) {\n      props.p5.scale(\n        props.scaleX / props.pixelRatio,\n        props.scaleY / props.pixelRatio\n      );\n    }\n  }\n\n  _postRender() {\n    const props = this.props;\n\n    if (is2DContext(props.context) && !props.p5) {\n      props.context.restore();\n    }\n\n    // Flush by default, this may be revisited at a later point.\n    // We do this to ensure toDataURL can be called immediately after.\n    // Most likely browsers already handle this, so we may revisit this and\n    // remove it if it improves performance without any usability issues.\n    if (props.gl && this.settings.flush !== false && !props.p5) {\n      props.gl.flush();\n    }\n  }\n\n  tick() {\n    if (this.sketch && typeof this.sketch.tick === \"function\") {\n      this._preRender();\n      this.sketch.tick(this.props);\n      this._postRender();\n    }\n  }\n\n  render() {\n    if (this.props.p5) {\n      this._lastRedrawResult = undefined;\n      this.props.p5.redraw();\n      return this._lastRedrawResult;\n    } else {\n      return this.submitDrawCall();\n    }\n  }\n\n  submitDrawCall() {\n    if (!this.sketch) return;\n\n    const props = this.props;\n    this._preRender();\n\n    let drawResult;\n\n    if (typeof this.sketch === \"function\") {\n      drawResult = this.sketch(props);\n    } else if (typeof this.sketch.render === \"function\") {\n      drawResult = this.sketch.render(props);\n    }\n\n    this._postRender();\n\n    return drawResult;\n  }\n\n  update(opt = {}) {\n    // Currently update() is only focused on resizing,\n    // but later we will support other options like switching\n    // frames and such.\n    const notYetSupported = [\"animate\"];\n\n    Object.keys(opt).forEach((key) => {\n      if (notYetSupported.indexOf(key) >= 0) {\n        throw new Error(\n          `Sorry, the { ${key} } option is not yet supported with update().`\n        );\n      }\n    });\n\n    const oldCanvas = this._settings.canvas;\n    const oldContext = this._settings.context;\n\n    // Merge new options into settings\n    for (let key in opt) {\n      const value = opt[key];\n      if (typeof value !== \"undefined\") {\n        // ignore undefined\n        this._settings[key] = value;\n      }\n    }\n\n    // Merge in time props\n    const timeOpts = Object.assign({}, this._settings, opt);\n    if (\"time\" in opt && \"frame\" in opt)\n      throw new Error(\"You should specify { time } or { frame } but not both\");\n    else if (\"time\" in opt) delete timeOpts.frame;\n    else if (\"frame\" in opt) delete timeOpts.time;\n    if (\"duration\" in opt && \"totalFrames\" in opt)\n      throw new Error(\n        \"You should specify { duration } or { totalFrames } but not both\"\n      );\n    else if (\"duration\" in opt) delete timeOpts.totalFrames;\n    else if (\"totalFrames\" in opt) delete timeOpts.duration;\n\n    // Merge in user data without copying\n    if (\"data\" in opt) this._props.data = opt.data;\n\n    const timeProps = this.getTimeProps(timeOpts);\n    Object.assign(this._props, timeProps);\n\n    // If either canvas or context is changed, we should re-update\n    if (\n      oldCanvas !== this._settings.canvas ||\n      oldContext !== this._settings.context\n    ) {\n      const { canvas, context } = createCanvas(this._settings);\n\n      this.props.canvas = canvas;\n      this.props.context = context;\n\n      // Delete or add a 'gl' prop for convenience\n      this._setupGLKey();\n\n      // Re-mount the new canvas if it has no parent\n      this._appendCanvasIfNeeded();\n    }\n\n    // Special case to support P5.js\n    if (opt.p5 && typeof opt.p5 !== \"function\") {\n      this.props.p5 = opt.p5;\n      this.props.p5.draw = () => {\n        if (this._isP5Resizing) return;\n        this._lastRedrawResult = this.submitDrawCall();\n      };\n    }\n\n    // Update playing state if necessary\n    if (\"playing\" in opt) {\n      if (opt.playing) this.play();\n      else this.pause();\n    }\n\n    checkSettings(this._settings);\n\n    // Draw new frame\n    this.resize();\n    this.render();\n    return this.props;\n  }\n\n  resize() {\n    const oldSizes = this._getSizeProps();\n\n    const settings = this.settings;\n    const props = this.props;\n\n    // Recompute new properties based on current setup\n    const newProps = resizeCanvas(props, settings);\n\n    // Assign to current props\n    Object.assign(this._props, newProps);\n\n    // Now we actually update the canvas width/height and style props\n    const { pixelRatio, canvasWidth, canvasHeight, styleWidth, styleHeight } =\n      this.props;\n\n    // Update canvas settings\n    const canvas = this.props.canvas;\n    if (canvas && settings.resizeCanvas !== false) {\n      if (props.p5) {\n        // P5.js specific edge case\n        if (canvas.width !== canvasWidth || canvas.height !== canvasHeight) {\n          this._isP5Resizing = true;\n          // This causes a re-draw :\\ so we ignore draws in the mean time... sorta hacky\n          props.p5.pixelDensity(pixelRatio);\n          props.p5.resizeCanvas(\n            canvasWidth / pixelRatio,\n            canvasHeight / pixelRatio,\n            false\n          );\n          this._isP5Resizing = false;\n        }\n      } else {\n        // Force canvas size\n        if (canvas.width !== canvasWidth) canvas.width = canvasWidth;\n        if (canvas.height !== canvasHeight) canvas.height = canvasHeight;\n      }\n      // Update canvas style\n      if (isBrowser() && settings.styleCanvas !== false) {\n        canvas.style.width = `${styleWidth}px`;\n        canvas.style.height = `${styleHeight}px`;\n      }\n    }\n\n    const newSizes = this._getSizeProps();\n    let changed = !deepEqual(oldSizes, newSizes);\n    if (changed) {\n      this._sizeChanged();\n    }\n    return changed;\n  }\n\n  _sizeChanged() {\n    // Send resize event to sketch\n    if (this.sketch && typeof this.sketch.resize === \"function\") {\n      this.sketch.resize(this.props);\n    }\n  }\n\n  animate() {\n    if (!this.props.playing) return;\n    if (!isBrowser()) {\n      console.error(\n        \"[canvas-sketch] WARN: Animation in Node.js is not yet supported\"\n      );\n      return;\n    }\n    this._raf = window.requestAnimationFrame(this._animateHandler);\n\n    let now = rightNow();\n\n    const fps = this.props.fps;\n    const frameIntervalMS = 1000 / fps;\n    let deltaTimeMS = now - this._lastTime;\n\n    const duration = this.props.duration;\n    const hasDuration = typeof duration === \"number\" && isFinite(duration);\n\n    let isNewFrame = true;\n    const playbackRate = this.settings.playbackRate;\n    if (playbackRate === \"fixed\") {\n      deltaTimeMS = frameIntervalMS;\n    } else if (playbackRate === \"throttle\") {\n      if (deltaTimeMS > frameIntervalMS) {\n        now = now - (deltaTimeMS % frameIntervalMS);\n        this._lastTime = now;\n      } else {\n        isNewFrame = false;\n      }\n    } else {\n      this._lastTime = now;\n    }\n\n    const deltaTime = deltaTimeMS / 1000;\n    let newTime = this.props.time + deltaTime * this.props.timeScale;\n\n    // Handle reverse time scale\n    if (newTime < 0 && hasDuration) {\n      newTime = duration + newTime;\n    }\n\n    // Re-start animation\n    let isFinished = false;\n    let isLoopStart = false;\n\n    const looping = this.settings.loop !== false;\n\n    if (hasDuration && newTime >= duration) {\n      // Re-start animation\n      if (looping) {\n        isNewFrame = true;\n        newTime = newTime % duration;\n        isLoopStart = true;\n      } else {\n        isNewFrame = false;\n        newTime = duration;\n        isFinished = true;\n      }\n\n      this._signalEnd();\n    }\n\n    if (isNewFrame) {\n      this.props.deltaTime = deltaTime;\n      this.props.time = newTime;\n      this.props.playhead = this._computePlayhead(newTime, duration);\n      const lastFrame = this.props.frame;\n      this.props.frame = this._computeCurrentFrame();\n      if (isLoopStart) this._signalBegin();\n      if (lastFrame !== this.props.frame) this.tick();\n      this.render();\n      this.props.deltaTime = 0;\n    }\n\n    if (isFinished) {\n      this.pause();\n    }\n  }\n\n  dispatch(cb) {\n    if (typeof cb !== \"function\")\n      throw new Error(\"must pass function into dispatch()\");\n    cb(this.props);\n    this.render();\n  }\n\n  mount() {\n    this._appendCanvasIfNeeded();\n  }\n\n  unmount() {\n    if (isBrowser()) {\n      window.removeEventListener(\"resize\", this._resizeHandler);\n      this._keyboardShortcuts.detach();\n    }\n    if (this.props.canvas.parentElement) {\n      this.props.canvas.parentElement.removeChild(this.props.canvas);\n    }\n  }\n\n  _appendCanvasIfNeeded() {\n    if (!isBrowser()) return;\n    if (\n      this.settings.parent !== false &&\n      this.props.canvas &&\n      !this.props.canvas.parentElement\n    ) {\n      const defaultParent = this.settings.parent || document.body;\n      defaultParent.appendChild(this.props.canvas);\n    }\n  }\n\n  _setupGLKey() {\n    if (this.props.context) {\n      if (isWebGLContext(this.props.context)) {\n        this._props.gl = this.props.context;\n      } else {\n        delete this._props.gl;\n      }\n    }\n  }\n\n  getTimeProps(settings = {}) {\n    // Get timing data\n    let duration = settings.duration;\n    let totalFrames = settings.totalFrames;\n    const timeScale = defined(settings.timeScale, 1);\n    const fps = defined(settings.fps, 24);\n    const hasDuration = typeof duration === \"number\" && isFinite(duration);\n    const hasTotalFrames =\n      typeof totalFrames === \"number\" && isFinite(totalFrames);\n\n    const totalFramesFromDuration = hasDuration\n      ? Math.floor(fps * duration)\n      : undefined;\n    const durationFromTotalFrames = hasTotalFrames\n      ? totalFrames / fps\n      : undefined;\n    if (\n      hasDuration &&\n      hasTotalFrames &&\n      totalFramesFromDuration !== totalFrames\n    ) {\n      throw new Error(\n        \"You should specify either duration or totalFrames, but not both. Or, they must match exactly.\"\n      );\n    }\n\n    if (\n      typeof settings.dimensions === \"undefined\" &&\n      typeof settings.units !== \"undefined\"\n    ) {\n      console.warn(\n        `You've specified a { units } setting but no { dimension }, so the units will be ignored.`\n      );\n    }\n\n    totalFrames = defined(totalFrames, totalFramesFromDuration, Infinity);\n    duration = defined(duration, durationFromTotalFrames, Infinity);\n\n    const startTime = settings.time;\n    const startFrame = settings.frame;\n    const hasStartTime = typeof startTime === \"number\" && isFinite(startTime);\n    const hasStartFrame =\n      typeof startFrame === \"number\" && isFinite(startFrame);\n\n    // start at zero unless user specifies frame or time (but not both mismatched)\n    let time = 0;\n    let frame = 0;\n    let playhead = 0;\n    if (hasStartTime && hasStartFrame) {\n      throw new Error(\n        \"You should specify either start frame or time, but not both.\"\n      );\n    } else if (hasStartTime) {\n      // User specifies time, we infer frames from FPS\n      time = startTime;\n      playhead = this._computePlayhead(time, duration);\n      frame = this._computeFrame(playhead, time, totalFrames, fps);\n    } else if (hasStartFrame) {\n      // User specifies frame number, we infer time from FPS\n      frame = startFrame;\n      time = frame / fps;\n      playhead = this._computePlayhead(time, duration);\n    }\n\n    return {\n      playhead,\n      time,\n      frame,\n      duration,\n      totalFrames,\n      fps,\n      timeScale,\n    };\n  }\n\n  setup(settings = {}) {\n    if (this.sketch)\n      throw new Error(\"Multiple setup() calls not yet supported.\");\n\n    this._settings = Object.assign({}, settings, this._settings);\n\n    checkSettings(this._settings);\n\n    // Get initial canvas & context\n    const { context, canvas } = createCanvas(this._settings);\n\n    const timeProps = this.getTimeProps(this._settings);\n\n    // Initial render state features\n    this._props = {\n      ...timeProps,\n      canvas,\n      context,\n      deltaTime: 0,\n      started: false,\n      exporting: false,\n      playing: false,\n      recording: false,\n      settings: this.settings,\n      data: this.settings.data,\n\n      // Export some specific actions to the sketch\n      render: () => this.render(),\n      togglePlay: () => this.togglePlay(),\n      dispatch: (cb) => this.dispatch(cb),\n      tick: () => this.tick(),\n      resize: () => this.resize(),\n      update: (opt) => this.update(opt),\n      exportFrame: (opt) => this.exportFrame(opt),\n      record: () => this.record(),\n      play: () => this.play(),\n      pause: () => this.pause(),\n      stop: () => this.stop(),\n    };\n\n    // For WebGL sketches, a gl variable reads a bit better\n    this._setupGLKey();\n\n    // Trigger initial resize now so that canvas is already sized\n    // by the time we load the sketch\n    this.resize();\n  }\n\n  loadAndRun(canvasSketch, newSettings) {\n    return this.load(canvasSketch, newSettings).then(() => {\n      this.run();\n      return this;\n    });\n  }\n\n  unload() {\n    this.pause();\n    if (!this.sketch) return;\n    if (typeof this.sketch.unload === \"function\") {\n      this._wrapContextScale((props) => this.sketch.unload(props));\n    }\n    this._sketch = null;\n  }\n\n  destroy() {\n    this.unload();\n    this.unmount();\n  }\n\n  load(createSketch, newSettings) {\n    // User didn't specify a function\n    if (typeof createSketch !== \"function\") {\n      throw new Error(\n        \"The function must take in a function as the first parameter. Example:\\n  canvasSketcher(() => { ... }, settings)\"\n      );\n    }\n\n    if (this.sketch) {\n      this.unload();\n    }\n\n    if (typeof newSettings !== \"undefined\") {\n      this.update(newSettings);\n    }\n\n    // This is a bit of a tricky case; we set up the auto-scaling here\n    // in case the user decides to render anything to the context *before* the\n    // render() function... However, users should instead use begin() function for that.\n    this._preRender();\n\n    let preload = Promise.resolve();\n\n    // Because of P5.js's unusual structure, we have to do a bit of\n    // library-specific changes to support it properly.\n    if (this.settings.p5) {\n      if (!isBrowser()) {\n        throw new Error(\n          \"[canvas-sketch] ERROR: Using p5.js in Node.js is not supported\"\n        );\n      }\n      preload = new Promise((resolve) => {\n        let P5Constructor = this.settings.p5;\n        let preload;\n        if (P5Constructor.p5) {\n          preload = P5Constructor.preload;\n          P5Constructor = P5Constructor.p5;\n        }\n\n        // The sketch setup; disable loop, set sizing, etc.\n        const p5Sketch = (p5) => {\n          // Hook in preload if necessary\n          if (preload) p5.preload = () => preload(p5);\n          p5.setup = () => {\n            const props = this.props;\n            const isGL = this.settings.context === \"webgl\";\n            const renderer = isGL ? p5.WEBGL : p5.P2D;\n            p5.noLoop();\n            p5.pixelDensity(props.pixelRatio);\n            p5.createCanvas(\n              props.viewportWidth,\n              props.viewportHeight,\n              renderer\n            );\n            if (isGL && this.settings.attributes) {\n              p5.setAttributes(this.settings.attributes);\n            }\n\n            this.update({\n              p5,\n              canvas: p5.canvas,\n              context: p5._renderer.drawingContext,\n            });\n            resolve();\n          };\n        };\n\n        // Support global and instance P5.js modes\n        if (typeof P5Constructor === \"function\") {\n          new P5Constructor(p5Sketch);\n        } else {\n          if (typeof window.createCanvas !== \"function\") {\n            throw new Error(\n              \"{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?\\nnew p5(); // <-- attaches to global scope\"\n            );\n          }\n          p5Sketch(window);\n        }\n      });\n    }\n\n    return preload\n      .then(() => {\n        // Load the user's sketch\n        let loader = createSketch(this.props);\n        if (!isPromise(loader)) {\n          loader = Promise.resolve(loader);\n        }\n        return loader;\n      })\n      .then((sketch) => {\n        if (!sketch) sketch = {};\n        this._sketch = sketch;\n\n        // Once the sketch is loaded we can add the events\n        if (isBrowser()) {\n          this._keyboardShortcuts.attach();\n          window.addEventListener(\"resize\", this._resizeHandler);\n        }\n\n        this._postRender();\n\n        // The initial resize() in the constructor will not have\n        // triggered a resize() event on the sketch, since it was before\n        // the sketch was loaded. So we send the signal here, allowing\n        // users to react to the initial size before first render.\n        this._sizeChanged();\n        return this;\n      })\n      .catch((err) => {\n        console.warn(\n          \"Could not start sketch, the async loading function rejected with an error:\\n    Error: \" +\n            err.message\n        );\n        throw err;\n      });\n  }\n}\n\nexport default SketchManager;\n","import SketchManager from './core/SketchManager';\nimport PaperSizes from './paper-sizes';\nimport { getClientAPI, defined } from './util';\n\nconst CACHE = 'hot-id-cache';\nconst runtimeCollisions = [];\n\nfunction isHotReload () {\n  const client = getClientAPI();\n  return client && client.hot;\n}\n\nfunction cacheGet (id) {\n  const client = getClientAPI();\n  if (!client) return undefined;\n  client[CACHE] = client[CACHE] || {};\n  return client[CACHE][id];\n}\n\nfunction cachePut (id, data) {\n  const client = getClientAPI();\n  if (!client) return undefined;\n  client[CACHE] = client[CACHE] || {};\n  client[CACHE][id] = data;\n}\n\nfunction getTimeProp (oldManager, newSettings) {\n  // Static sketches ignore the time persistency\n  return newSettings.animate ? { time: oldManager.props.time } : undefined;\n}\n\nfunction canvasSketch (sketch, settings = {}) {\n  if (settings.p5) {\n    if (settings.canvas || (settings.context && typeof settings.context !== 'string')) {\n      throw new Error(`In { p5 } mode, you can't pass your own canvas or context, unless the context is a \"webgl\" or \"2d\" string`);\n    }\n\n    // Do not create a canvas on startup, since P5.js does that for us\n    const context = typeof settings.context === 'string' ? settings.context : false;\n    settings = Object.assign({}, settings, { canvas: false, context });\n  }\n\n  const isHot = isHotReload();\n  let hotID;\n  if (isHot) {\n    // Use a magic name by default, force user to define each sketch if they\n    // require more than one in an application. Open to other ideas on how to tackle\n    // this as well...\n    hotID = defined(settings.id, '$__DEFAULT_CANVAS_SKETCH_ID__$');\n  }\n  let isInjecting = isHot && typeof hotID === 'string';\n\n  if (isInjecting && runtimeCollisions.includes(hotID)) {\n    console.warn(`Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. `, hotID);\n    isInjecting = false;\n  }\n\n  let preload = Promise.resolve();\n\n  if (isInjecting) {\n    // Mark this as already spotted in this runtime instance\n    runtimeCollisions.push(hotID);\n\n    const previousData = cacheGet(hotID);\n    if (previousData) {\n      const next = () => {\n        // Grab new props from old sketch instance\n        const newProps = getTimeProp(previousData.manager, settings);\n        // Destroy the old instance\n        previousData.manager.destroy();\n        // Pass along new props\n        return newProps;\n      };\n\n      // Move along the next data...\n      preload = previousData.load.then(next).catch(next);\n    }\n  }\n\n  return preload.then(newProps => {\n    const manager = new SketchManager();\n    let result;\n    if (sketch) {\n      // Merge with incoming data\n      settings = Object.assign({}, settings, newProps);\n\n      // Apply settings and create a canvas\n      manager.setup(settings);\n\n      // Mount to DOM\n      manager.mount();\n\n      // load the sketch first\n      result = manager.loadAndRun(sketch);\n    } else {\n      result = Promise.resolve(manager);\n    }\n    if (isInjecting) {\n      cachePut(hotID, { load: result, manager });\n    }\n    return result;\n  });\n}\n\n// TODO: Figure out a nice way to export things.\ncanvasSketch.canvasSketch = canvasSketch;\ncanvasSketch.PaperSizes = PaperSizes;\n\nexport default canvasSketch;\n","var defined = require('defined');\nvar wrap = require('./lib/wrap');\nvar EPSILON = Number.EPSILON;\n\nfunction clamp (value, min, max) {\n  return min < max\n    ? (value < min ? min : value > max ? max : value)\n    : (value < max ? max : value > min ? min : value);\n}\n\nfunction clamp01 (v) {\n  return clamp(v, 0, 1);\n}\n\nfunction lerp (min, max, t) {\n  return min * (1 - t) + max * t;\n}\n\nfunction inverseLerp (min, max, t) {\n  if (Math.abs(min - max) < EPSILON) return 0;\n  else return (t - min) / (max - min);\n}\n\nfunction smoothstep (min, max, t) {\n  var x = clamp(inverseLerp(min, max, t), 0, 1);\n  return x * x * (3 - 2 * x);\n}\n\nfunction toFinite (n, defaultValue) {\n  defaultValue = defined(defaultValue, 0);\n  return typeof n === 'number' && isFinite(n) ? n : defaultValue;\n}\n\nfunction expandVector (dims) {\n  if (typeof dims !== 'number') throw new TypeError('Expected dims argument');\n  return function (p, defaultValue) {\n    defaultValue = defined(defaultValue, 0);\n    var scalar;\n    if (p == null) {\n      // No vector, create a default one\n      scalar = defaultValue;\n    } else if (typeof p === 'number' && isFinite(p)) {\n      // Expand single channel to multiple vector\n      scalar = p;\n    }\n\n    var out = [];\n    var i;\n    if (scalar == null) {\n      for (i = 0; i < dims; i++) {\n        out[i] = toFinite(p[i], defaultValue);\n      }\n    } else {\n      for (i = 0; i < dims; i++) {\n        out[i] = scalar;\n      }\n    }\n    return out;\n  };\n}\n\nfunction lerpArray (min, max, t, out) {\n  out = out || [];\n  if (min.length !== max.length) {\n    throw new TypeError('min and max array are expected to have the same length');\n  }\n  for (var i = 0; i < min.length; i++) {\n    out[i] = lerp(min[i], max[i], t);\n  }\n  return out;\n}\n\nfunction newArray (n, initialValue) {\n  n = defined(n, 0);\n  if (typeof n !== 'number') throw new TypeError('Expected n argument to be a number');\n  var out = [];\n  for (var i = 0; i < n; i++) out.push(initialValue);\n  return out;\n}\n\nfunction linspace (n, opts) {\n  n = defined(n, 0);\n  if (typeof n !== 'number') throw new TypeError('Expected n argument to be a number');\n  opts = opts || {};\n  if (typeof opts === 'boolean') {\n    opts = { endpoint: true };\n  }\n  var offset = defined(opts.offset, 0);\n  if (opts.endpoint) {\n    return newArray(n).map(function (_, i) {\n      return n <= 1 ? 0 : ((i + offset) / (n - 1));\n    });\n  } else {\n    return newArray(n).map(function (_, i) {\n      return (i + offset) / n;\n    });\n  }\n}\n\nfunction lerpFrames (values, t, out) {\n  t = clamp(t, 0, 1);\n\n  var len = values.length - 1;\n  var whole = t * len;\n  var frame = Math.floor(whole);\n  var fract = whole - frame;\n\n  var nextFrame = Math.min(frame + 1, len);\n  var a = values[frame % values.length];\n  var b = values[nextFrame % values.length];\n  if (typeof a === 'number' && typeof b === 'number') {\n    return lerp(a, b, fract);\n  } else if (Array.isArray(a) && Array.isArray(b)) {\n    return lerpArray(a, b, fract, out);\n  } else {\n    throw new TypeError('Mismatch in value type of two array elements: ' + frame + ' and ' + nextFrame);\n  }\n}\n\nfunction mod (a, b) {\n  return ((a % b) + b) % b;\n}\n\nfunction degToRad (n) {\n  return n * Math.PI / 180;\n}\n\nfunction radToDeg (n) {\n  return n * 180 / Math.PI;\n}\n\nfunction fract (n) {\n  return n - Math.floor(n);\n}\n\nfunction sign (n) {\n  if (n > 0) return 1;\n  else if (n < 0) return -1;\n  else return 0;\n}\n\n// Specific function from Unity / ofMath, not sure its needed?\n// function lerpWrap (a, b, t, min, max) {\n//   return wrap(a + wrap(b - a, min, max) * t, min, max)\n// }\n\nfunction pingPong (t, length) {\n  t = mod(t, length * 2);\n  return length - Math.abs(t - length);\n}\n\nfunction damp (a, b, lambda, dt) {\n  return lerp(a, b, 1 - Math.exp(-lambda * dt));\n}\n\nfunction dampArray (a, b, lambda, dt, out) {\n  out = out || [];\n  for (var i = 0; i < a.length; i++) {\n    out[i] = damp(a[i], b[i], lambda, dt);\n  }\n  return out;\n}\n\nfunction mapRange (value, inputMin, inputMax, outputMin, outputMax, clamp) {\n  // Reference:\n  // https://openframeworks.cc/documentation/math/ofMath/\n  if (Math.abs(inputMin - inputMax) < EPSILON) {\n    return outputMin;\n  } else {\n    var outVal = ((value - inputMin) / (inputMax - inputMin) * (outputMax - outputMin) + outputMin);\n    if (clamp) {\n      if (outputMax < outputMin) {\n        if (outVal < outputMax) outVal = outputMax;\n        else if (outVal > outputMin) outVal = outputMin;\n      } else {\n        if (outVal > outputMax) outVal = outputMax;\n        else if (outVal < outputMin) outVal = outputMin;\n      }\n    }\n    return outVal;\n  }\n}\n\nmodule.exports = {\n  mod: mod,\n  fract: fract,\n  sign: sign,\n  degToRad: degToRad,\n  radToDeg: radToDeg,\n  wrap: wrap,\n  pingPong: pingPong,\n  linspace: linspace,\n  lerp: lerp,\n  lerpArray: lerpArray,\n  inverseLerp: inverseLerp,\n  lerpFrames: lerpFrames,\n  clamp: clamp,\n  clamp01: clamp01,\n  smoothstep: smoothstep,\n  damp: damp,\n  dampArray: dampArray,\n  mapRange: mapRange,\n  expand2D: expandVector(2),\n  expand3D: expandVector(3),\n  expand4D: expandVector(4)\n};\n","'use strict';\n\nmodule.exports = function defined() {\n\tfor (var i = 0; i < arguments.length; i++) {\n\t\tif (typeof arguments[i] !== 'undefined') {\n\t\t\treturn arguments[i];\n\t\t}\n\t}\n};\n","module.exports = wrap;\nfunction wrap (value, from, to) {\n  if (typeof from !== 'number' || typeof to !== 'number') {\n    throw new TypeError('Must specify \"to\" and \"from\" arguments as numbers');\n  }\n  // algorithm from http://stackoverflow.com/a/5852628/599884\n  if (from > to) {\n    var t = from;\n    from = to;\n    to = t;\n  }\n  var cycle = to - from;\n  if (cycle === 0) {\n    return to;\n  }\n  return value - cycle * Math.floor((value - from) / cycle);\n}\n","var seedRandom = require('seed-random');\nvar SimplexNoise = require('simplex-noise');\nvar defined = require('defined');\n\nfunction createRandom (defaultSeed) {\n  defaultSeed = defined(defaultSeed, null);\n  var defaultRandom = Math.random;\n  var currentSeed;\n  var currentRandom;\n  var noiseGenerator;\n  var _nextGaussian = null;\n  var _hasNextGaussian = false;\n\n  setSeed(defaultSeed);\n\n  return {\n    value: value,\n    createRandom: function (defaultSeed) {\n      return createRandom(defaultSeed);\n    },\n    setSeed: setSeed,\n    getSeed: getSeed,\n    getRandomSeed: getRandomSeed,\n    valueNonZero: valueNonZero,\n    permuteNoise: permuteNoise,\n    noise1D: noise1D,\n    noise2D: noise2D,\n    noise3D: noise3D,\n    noise4D: noise4D,\n    sign: sign,\n    boolean: boolean,\n    chance: chance,\n    range: range,\n    rangeFloor: rangeFloor,\n    pick: pick,\n    shuffle: shuffle,\n    onCircle: onCircle,\n    insideCircle: insideCircle,\n    onSphere: onSphere,\n    insideSphere: insideSphere,\n    quaternion: quaternion,\n    weighted: weighted,\n    weightedSet: weightedSet,\n    weightedSetIndex: weightedSetIndex,\n    gaussian: gaussian\n  };\n\n  function setSeed (seed, opt) {\n    if (typeof seed === 'number' || typeof seed === 'string') {\n      currentSeed = seed;\n      currentRandom = seedRandom(currentSeed, opt);\n    } else {\n      currentSeed = undefined;\n      currentRandom = defaultRandom;\n    }\n    noiseGenerator = createNoise();\n    _nextGaussian = null;\n    _hasNextGaussian = false;\n  }\n\n  function value () {\n    return currentRandom();\n  }\n\n  function valueNonZero () {\n    var u = 0;\n    while (u === 0) u = value();\n    return u;\n  }\n\n  function getSeed () {\n    return currentSeed;\n  }\n\n  function getRandomSeed () {\n    var seed = String(Math.floor(Math.random() * 1000000));\n    return seed;\n  }\n\n  function createNoise () {\n    return new SimplexNoise(currentRandom);\n  }\n\n  function permuteNoise () {\n    noiseGenerator = createNoise();\n  }\n\n  function noise1D (x, frequency, amplitude) {\n    if (!isFinite(x)) throw new TypeError('x component for noise() must be finite');\n    frequency = defined(frequency, 1);\n    amplitude = defined(amplitude, 1);\n    return amplitude * noiseGenerator.noise2D(x * frequency, 0);\n  }\n\n  function noise2D (x, y, frequency, amplitude) {\n    if (!isFinite(x)) throw new TypeError('x component for noise() must be finite');\n    if (!isFinite(y)) throw new TypeError('y component for noise() must be finite');\n    frequency = defined(frequency, 1);\n    amplitude = defined(amplitude, 1);\n    return amplitude * noiseGenerator.noise2D(x * frequency, y * frequency);\n  }\n\n  function noise3D (x, y, z, frequency, amplitude) {\n    if (!isFinite(x)) throw new TypeError('x component for noise() must be finite');\n    if (!isFinite(y)) throw new TypeError('y component for noise() must be finite');\n    if (!isFinite(z)) throw new TypeError('z component for noise() must be finite');\n    frequency = defined(frequency, 1);\n    amplitude = defined(amplitude, 1);\n    return amplitude * noiseGenerator.noise3D(\n      x * frequency,\n      y * frequency,\n      z * frequency\n    );\n  }\n\n  function noise4D (x, y, z, w, frequency, amplitude) {\n    if (!isFinite(x)) throw new TypeError('x component for noise() must be finite');\n    if (!isFinite(y)) throw new TypeError('y component for noise() must be finite');\n    if (!isFinite(z)) throw new TypeError('z component for noise() must be finite');\n    if (!isFinite(w)) throw new TypeError('w component for noise() must be finite');\n    frequency = defined(frequency, 1);\n    amplitude = defined(amplitude, 1);\n    return amplitude * noiseGenerator.noise4D(\n      x * frequency,\n      y * frequency,\n      z * frequency,\n      w * frequency\n    );\n  }\n\n  function sign () {\n    return boolean() ? 1 : -1;\n  }\n\n  function boolean () {\n    return value() > 0.5;\n  }\n\n  function chance (n) {\n    n = defined(n, 0.5);\n    if (typeof n !== 'number') throw new TypeError('expected n to be a number');\n    return value() < n;\n  }\n\n  function range (min, max) {\n    if (max === undefined) {\n      max = min;\n      min = 0;\n    }\n\n    if (typeof min !== 'number' || typeof max !== 'number') {\n      throw new TypeError('Expected all arguments to be numbers');\n    }\n\n    return value() * (max - min) + min;\n  }\n\n  function rangeFloor (min, max) {\n    if (max === undefined) {\n      max = min;\n      min = 0;\n    }\n\n    if (typeof min !== 'number' || typeof max !== 'number') {\n      throw new TypeError('Expected all arguments to be numbers');\n    }\n\n    return Math.floor(range(min, max));\n  }\n\n  function pick (array) {\n    if (array.length === 0) return undefined;\n    return array[rangeFloor(0, array.length)];\n  }\n\n  function shuffle (arr) {\n    if (!Array.isArray(arr)) {\n      throw new TypeError('Expected Array, got ' + typeof arr);\n    }\n\n    var rand;\n    var tmp;\n    var len = arr.length;\n    var ret = arr.slice();\n    while (len) {\n      rand = Math.floor(value() * len--);\n      tmp = ret[len];\n      ret[len] = ret[rand];\n      ret[rand] = tmp;\n    }\n    return ret;\n  }\n\n  function onCircle (radius, out) {\n    radius = defined(radius, 1);\n    out = out || [];\n    var theta = value() * 2.0 * Math.PI;\n    out[0] = radius * Math.cos(theta);\n    out[1] = radius * Math.sin(theta);\n    return out;\n  }\n\n  function insideCircle (radius, out) {\n    radius = defined(radius, 1);\n    out = out || [];\n    onCircle(1, out);\n    var r = radius * Math.sqrt(value());\n    out[0] *= r;\n    out[1] *= r;\n    return out;\n  }\n\n  function onSphere (radius, out) {\n    radius = defined(radius, 1);\n    out = out || [];\n    var u = value() * Math.PI * 2;\n    var v = value() * 2 - 1;\n    var phi = u;\n    var theta = Math.acos(v);\n    out[0] = radius * Math.sin(theta) * Math.cos(phi);\n    out[1] = radius * Math.sin(theta) * Math.sin(phi);\n    out[2] = radius * Math.cos(theta);\n    return out;\n  }\n\n  function insideSphere (radius, out) {\n    radius = defined(radius, 1);\n    out = out || [];\n    var u = value() * Math.PI * 2;\n    var v = value() * 2 - 1;\n    var k = value();\n\n    var phi = u;\n    var theta = Math.acos(v);\n    var r = radius * Math.cbrt(k);\n    out[0] = r * Math.sin(theta) * Math.cos(phi);\n    out[1] = r * Math.sin(theta) * Math.sin(phi);\n    out[2] = r * Math.cos(theta);\n    return out;\n  }\n\n  function quaternion (out) {\n    out = out || [];\n    var u1 = value();\n    var u2 = value();\n    var u3 = value();\n\n    var sq1 = Math.sqrt(1 - u1);\n    var sq2 = Math.sqrt(u1);\n\n    var theta1 = Math.PI * 2 * u2;\n    var theta2 = Math.PI * 2 * u3;\n\n    var x = Math.sin(theta1) * sq1;\n    var y = Math.cos(theta1) * sq1;\n    var z = Math.sin(theta2) * sq2;\n    var w = Math.cos(theta2) * sq2;\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = w;\n    return out;\n  }\n\n  function weightedSet (set) {\n    set = set || [];\n    if (set.length === 0) return null;\n    return set[weightedSetIndex(set)].value;\n  }\n\n  function weightedSetIndex (set) {\n    set = set || [];\n    if (set.length === 0) return -1;\n    return weighted(set.map(function (s) {\n      return s.weight;\n    }));\n  }\n\n  function weighted (weights) {\n    weights = weights || [];\n    if (weights.length === 0) return -1;\n    var totalWeight = 0;\n    var i;\n\n    for (i = 0; i < weights.length; i++) {\n      totalWeight += weights[i];\n    }\n\n    if (totalWeight <= 0) throw new Error('Weights must sum to > 0');\n\n    var random = value() * totalWeight;\n    for (i = 0; i < weights.length; i++) {\n      if (random < weights[i]) {\n        return i;\n      }\n      random -= weights[i];\n    }\n    return 0;\n  }\n\n  function gaussian (mean, standardDerivation) {\n    mean = defined(mean, 0);\n    standardDerivation = defined(standardDerivation, 1);\n\n    // https://github.com/openjdk-mirror/jdk7u-jdk/blob/f4d80957e89a19a29bb9f9807d2a28351ed7f7df/src/share/classes/java/util/Random.java#L496\n    if (_hasNextGaussian) {\n      _hasNextGaussian = false;\n      var result = _nextGaussian;\n      _nextGaussian = null;\n      return mean + standardDerivation * result;\n    } else {\n      var v1 = 0;\n      var v2 = 0;\n      var s = 0;\n      do {\n        v1 = value() * 2 - 1; // between -1 and 1\n        v2 = value() * 2 - 1; // between -1 and 1\n        s = v1 * v1 + v2 * v2;\n      } while (s >= 1 || s === 0);\n      var multiplier = Math.sqrt(-2 * Math.log(s) / s);\n      _nextGaussian = (v2 * multiplier);\n      _hasNextGaussian = true;\n      return mean + standardDerivation * (v1 * multiplier);\n    }\n  }\n}\n\nmodule.exports = createRandom();\n","'use strict';\r\n\r\nvar width = 256;// each RC4 output is 0 <= x < 256\r\nvar chunks = 6;// at least six RC4 outputs for each double\r\nvar digits = 52;// there are 52 significant digits in a double\r\nvar pool = [];// pool: entropy pool starts empty\r\nvar GLOBAL = typeof global === 'undefined' ? window : global;\r\n\r\n//\r\n// The following constants are related to IEEE 754 limits.\r\n//\r\nvar startdenom = Math.pow(width, chunks),\r\n    significance = Math.pow(2, digits),\r\n    overflow = significance * 2,\r\n    mask = width - 1;\r\n\r\n\r\nvar oldRandom = Math.random;\r\n\r\n//\r\n// seedrandom()\r\n// This is the seedrandom function described above.\r\n//\r\nmodule.exports = function(seed, options) {\r\n  if (options && options.global === true) {\r\n    options.global = false;\r\n    Math.random = module.exports(seed, options);\r\n    options.global = true;\r\n    return Math.random;\r\n  }\r\n  var use_entropy = (options && options.entropy) || false;\r\n  var key = [];\r\n\r\n  // Flatten the seed string or build one from local entropy if needed.\r\n  var shortseed = mixkey(flatten(\r\n    use_entropy ? [seed, tostring(pool)] :\r\n    0 in arguments ? seed : autoseed(), 3), key);\r\n\r\n  // Use the seed to initialize an ARC4 generator.\r\n  var arc4 = new ARC4(key);\r\n\r\n  // Mix the randomness into accumulated entropy.\r\n  mixkey(tostring(arc4.S), pool);\r\n\r\n  // Override Math.random\r\n\r\n  // This function returns a random double in [0, 1) that contains\r\n  // randomness in every bit of the mantissa of the IEEE 754 value.\r\n\r\n  return function() {         // Closure to return a random double:\r\n    var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\r\n        d = startdenom,                 //   and denominator d = 2 ^ 48.\r\n        x = 0;                          //   and no 'extra last byte'.\r\n    while (n < significance) {          // Fill up all significant digits by\r\n      n = (n + x) * width;              //   shifting numerator and\r\n      d *= width;                       //   denominator and generating a\r\n      x = arc4.g(1);                    //   new least-significant-byte.\r\n    }\r\n    while (n >= overflow) {             // To avoid rounding up, before adding\r\n      n /= 2;                           //   last byte, shift everything\r\n      d /= 2;                           //   right using integer Math until\r\n      x >>>= 1;                         //   we have exactly the desired bits.\r\n    }\r\n    return (n + x) / d;                 // Form the number within [0, 1).\r\n  };\r\n};\r\n\r\nmodule.exports.resetGlobal = function () {\r\n  Math.random = oldRandom;\r\n};\r\n\r\n//\r\n// ARC4\r\n//\r\n// An ARC4 implementation.  The constructor takes a key in the form of\r\n// an array of at most (width) integers that should be 0 <= x < (width).\r\n//\r\n// The g(count) method returns a pseudorandom integer that concatenates\r\n// the next (count) outputs from ARC4.  Its return value is a number x\r\n// that is in the range 0 <= x < (width ^ count).\r\n//\r\n/** @constructor */\r\nfunction ARC4(key) {\r\n  var t, keylen = key.length,\r\n      me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\r\n\r\n  // The empty key [] is treated as [0].\r\n  if (!keylen) { key = [keylen++]; }\r\n\r\n  // Set up S using the standard key scheduling algorithm.\r\n  while (i < width) {\r\n    s[i] = i++;\r\n  }\r\n  for (i = 0; i < width; i++) {\r\n    s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\r\n    s[j] = t;\r\n  }\r\n\r\n  // The \"g\" method returns the next (count) outputs as one number.\r\n  (me.g = function(count) {\r\n    // Using instance members instead of closure state nearly doubles speed.\r\n    var t, r = 0,\r\n        i = me.i, j = me.j, s = me.S;\r\n    while (count--) {\r\n      t = s[i = mask & (i + 1)];\r\n      r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\r\n    }\r\n    me.i = i; me.j = j;\r\n    return r;\r\n    // For robust unpredictability discard an initial batch of values.\r\n    // See http://www.rsa.com/rsalabs/node.asp?id=2009\r\n  })(width);\r\n}\r\n\r\n//\r\n// flatten()\r\n// Converts an object tree to nested arrays of strings.\r\n//\r\nfunction flatten(obj, depth) {\r\n  var result = [], typ = (typeof obj)[0], prop;\r\n  if (depth && typ == 'o') {\r\n    for (prop in obj) {\r\n      try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\r\n    }\r\n  }\r\n  return (result.length ? result : typ == 's' ? obj : obj + '\\0');\r\n}\r\n\r\n//\r\n// mixkey()\r\n// Mixes a string seed into a key that is an array of integers, and\r\n// returns a shortened string seed that is equivalent to the result key.\r\n//\r\nfunction mixkey(seed, key) {\r\n  var stringseed = seed + '', smear, j = 0;\r\n  while (j < stringseed.length) {\r\n    key[mask & j] =\r\n      mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\r\n  }\r\n  return tostring(key);\r\n}\r\n\r\n//\r\n// autoseed()\r\n// Returns an object for autoseeding, using window.crypto if available.\r\n//\r\n/** @param {Uint8Array=} seed */\r\nfunction autoseed(seed) {\r\n  try {\r\n    GLOBAL.crypto.getRandomValues(seed = new Uint8Array(width));\r\n    return tostring(seed);\r\n  } catch (e) {\r\n    return [+new Date, GLOBAL, GLOBAL.navigator && GLOBAL.navigator.plugins,\r\n            GLOBAL.screen, tostring(pool)];\r\n  }\r\n}\r\n\r\n//\r\n// tostring()\r\n// Converts an array of charcodes to a string\r\n//\r\nfunction tostring(a) {\r\n  return String.fromCharCode.apply(0, a);\r\n}\r\n\r\n//\r\n// When seedrandom.js is loaded, we immediately mix a few bits\r\n// from the built-in RNG into the entropy pool.  Because we do\r\n// not want to intefere with determinstic PRNG state later,\r\n// seedrandom will not call Math.random on its own again after\r\n// initialization.\r\n//\r\nmixkey(Math.random(), pool);\r\n","/*\n * A fast javascript implementation of simplex noise by Jonas Wagner\n\nBased on a speed-improved simplex noise algorithm for 2D, 3D and 4D in Java.\nWhich is based on example code by Stefan Gustavson (stegu@itn.liu.se).\nWith Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\nBetter rank ordering method by Stefan Gustavson in 2012.\n\n\n Copyright (c) 2018 Jonas Wagner\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n(function() {\n  'use strict';\n\n  var F2 = 0.5 * (Math.sqrt(3.0) - 1.0);\n  var G2 = (3.0 - Math.sqrt(3.0)) / 6.0;\n  var F3 = 1.0 / 3.0;\n  var G3 = 1.0 / 6.0;\n  var F4 = (Math.sqrt(5.0) - 1.0) / 4.0;\n  var G4 = (5.0 - Math.sqrt(5.0)) / 20.0;\n\n  function SimplexNoise(randomOrSeed) {\n    var random;\n    if (typeof randomOrSeed == 'function') {\n      random = randomOrSeed;\n    }\n    else if (randomOrSeed) {\n      random = alea(randomOrSeed);\n    } else {\n      random = Math.random;\n    }\n    this.p = buildPermutationTable(random);\n    this.perm = new Uint8Array(512);\n    this.permMod12 = new Uint8Array(512);\n    for (var i = 0; i < 512; i++) {\n      this.perm[i] = this.p[i & 255];\n      this.permMod12[i] = this.perm[i] % 12;\n    }\n\n  }\n  SimplexNoise.prototype = {\n    grad3: new Float32Array([1, 1, 0,\n      -1, 1, 0,\n      1, -1, 0,\n\n      -1, -1, 0,\n      1, 0, 1,\n      -1, 0, 1,\n\n      1, 0, -1,\n      -1, 0, -1,\n      0, 1, 1,\n\n      0, -1, 1,\n      0, 1, -1,\n      0, -1, -1]),\n    grad4: new Float32Array([0, 1, 1, 1, 0, 1, 1, -1, 0, 1, -1, 1, 0, 1, -1, -1,\n      0, -1, 1, 1, 0, -1, 1, -1, 0, -1, -1, 1, 0, -1, -1, -1,\n      1, 0, 1, 1, 1, 0, 1, -1, 1, 0, -1, 1, 1, 0, -1, -1,\n      -1, 0, 1, 1, -1, 0, 1, -1, -1, 0, -1, 1, -1, 0, -1, -1,\n      1, 1, 0, 1, 1, 1, 0, -1, 1, -1, 0, 1, 1, -1, 0, -1,\n      -1, 1, 0, 1, -1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, -1,\n      1, 1, 1, 0, 1, 1, -1, 0, 1, -1, 1, 0, 1, -1, -1, 0,\n      -1, 1, 1, 0, -1, 1, -1, 0, -1, -1, 1, 0, -1, -1, -1, 0]),\n    noise2D: function(xin, yin) {\n      var permMod12 = this.permMod12;\n      var perm = this.perm;\n      var grad3 = this.grad3;\n      var n0 = 0; // Noise contributions from the three corners\n      var n1 = 0;\n      var n2 = 0;\n      // Skew the input space to determine which simplex cell we're in\n      var s = (xin + yin) * F2; // Hairy factor for 2D\n      var i = Math.floor(xin + s);\n      var j = Math.floor(yin + s);\n      var t = (i + j) * G2;\n      var X0 = i - t; // Unskew the cell origin back to (x,y) space\n      var Y0 = j - t;\n      var x0 = xin - X0; // The x,y distances from the cell origin\n      var y0 = yin - Y0;\n      // For the 2D case, the simplex shape is an equilateral triangle.\n      // Determine which simplex we are in.\n      var i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n      if (x0 > y0) {\n        i1 = 1;\n        j1 = 0;\n      } // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n      else {\n        i1 = 0;\n        j1 = 1;\n      } // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n      // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n      // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n      // c = (3-sqrt(3))/6\n      var x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n      var y1 = y0 - j1 + G2;\n      var x2 = x0 - 1.0 + 2.0 * G2; // Offsets for last corner in (x,y) unskewed coords\n      var y2 = y0 - 1.0 + 2.0 * G2;\n      // Work out the hashed gradient indices of the three simplex corners\n      var ii = i & 255;\n      var jj = j & 255;\n      // Calculate the contribution from the three corners\n      var t0 = 0.5 - x0 * x0 - y0 * y0;\n      if (t0 >= 0) {\n        var gi0 = permMod12[ii + perm[jj]] * 3;\n        t0 *= t0;\n        n0 = t0 * t0 * (grad3[gi0] * x0 + grad3[gi0 + 1] * y0); // (x,y) of grad3 used for 2D gradient\n      }\n      var t1 = 0.5 - x1 * x1 - y1 * y1;\n      if (t1 >= 0) {\n        var gi1 = permMod12[ii + i1 + perm[jj + j1]] * 3;\n        t1 *= t1;\n        n1 = t1 * t1 * (grad3[gi1] * x1 + grad3[gi1 + 1] * y1);\n      }\n      var t2 = 0.5 - x2 * x2 - y2 * y2;\n      if (t2 >= 0) {\n        var gi2 = permMod12[ii + 1 + perm[jj + 1]] * 3;\n        t2 *= t2;\n        n2 = t2 * t2 * (grad3[gi2] * x2 + grad3[gi2 + 1] * y2);\n      }\n      // Add contributions from each corner to get the final noise value.\n      // The result is scaled to return values in the interval [-1,1].\n      return 70.0 * (n0 + n1 + n2);\n    },\n    // 3D simplex noise\n    noise3D: function(xin, yin, zin) {\n      var permMod12 = this.permMod12;\n      var perm = this.perm;\n      var grad3 = this.grad3;\n      var n0, n1, n2, n3; // Noise contributions from the four corners\n      // Skew the input space to determine which simplex cell we're in\n      var s = (xin + yin + zin) * F3; // Very nice and simple skew factor for 3D\n      var i = Math.floor(xin + s);\n      var j = Math.floor(yin + s);\n      var k = Math.floor(zin + s);\n      var t = (i + j + k) * G3;\n      var X0 = i - t; // Unskew the cell origin back to (x,y,z) space\n      var Y0 = j - t;\n      var Z0 = k - t;\n      var x0 = xin - X0; // The x,y,z distances from the cell origin\n      var y0 = yin - Y0;\n      var z0 = zin - Z0;\n      // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n      // Determine which simplex we are in.\n      var i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords\n      var i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords\n      if (x0 >= y0) {\n        if (y0 >= z0) {\n          i1 = 1;\n          j1 = 0;\n          k1 = 0;\n          i2 = 1;\n          j2 = 1;\n          k2 = 0;\n        } // X Y Z order\n        else if (x0 >= z0) {\n          i1 = 1;\n          j1 = 0;\n          k1 = 0;\n          i2 = 1;\n          j2 = 0;\n          k2 = 1;\n        } // X Z Y order\n        else {\n          i1 = 0;\n          j1 = 0;\n          k1 = 1;\n          i2 = 1;\n          j2 = 0;\n          k2 = 1;\n        } // Z X Y order\n      }\n      else { // x0<y0\n        if (y0 < z0) {\n          i1 = 0;\n          j1 = 0;\n          k1 = 1;\n          i2 = 0;\n          j2 = 1;\n          k2 = 1;\n        } // Z Y X order\n        else if (x0 < z0) {\n          i1 = 0;\n          j1 = 1;\n          k1 = 0;\n          i2 = 0;\n          j2 = 1;\n          k2 = 1;\n        } // Y Z X order\n        else {\n          i1 = 0;\n          j1 = 1;\n          k1 = 0;\n          i2 = 1;\n          j2 = 1;\n          k2 = 0;\n        } // Y X Z order\n      }\n      // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n      // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n      // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n      // c = 1/6.\n      var x1 = x0 - i1 + G3; // Offsets for second corner in (x,y,z) coords\n      var y1 = y0 - j1 + G3;\n      var z1 = z0 - k1 + G3;\n      var x2 = x0 - i2 + 2.0 * G3; // Offsets for third corner in (x,y,z) coords\n      var y2 = y0 - j2 + 2.0 * G3;\n      var z2 = z0 - k2 + 2.0 * G3;\n      var x3 = x0 - 1.0 + 3.0 * G3; // Offsets for last corner in (x,y,z) coords\n      var y3 = y0 - 1.0 + 3.0 * G3;\n      var z3 = z0 - 1.0 + 3.0 * G3;\n      // Work out the hashed gradient indices of the four simplex corners\n      var ii = i & 255;\n      var jj = j & 255;\n      var kk = k & 255;\n      // Calculate the contribution from the four corners\n      var t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0;\n      if (t0 < 0) n0 = 0.0;\n      else {\n        var gi0 = permMod12[ii + perm[jj + perm[kk]]] * 3;\n        t0 *= t0;\n        n0 = t0 * t0 * (grad3[gi0] * x0 + grad3[gi0 + 1] * y0 + grad3[gi0 + 2] * z0);\n      }\n      var t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1;\n      if (t1 < 0) n1 = 0.0;\n      else {\n        var gi1 = permMod12[ii + i1 + perm[jj + j1 + perm[kk + k1]]] * 3;\n        t1 *= t1;\n        n1 = t1 * t1 * (grad3[gi1] * x1 + grad3[gi1 + 1] * y1 + grad3[gi1 + 2] * z1);\n      }\n      var t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2;\n      if (t2 < 0) n2 = 0.0;\n      else {\n        var gi2 = permMod12[ii + i2 + perm[jj + j2 + perm[kk + k2]]] * 3;\n        t2 *= t2;\n        n2 = t2 * t2 * (grad3[gi2] * x2 + grad3[gi2 + 1] * y2 + grad3[gi2 + 2] * z2);\n      }\n      var t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3;\n      if (t3 < 0) n3 = 0.0;\n      else {\n        var gi3 = permMod12[ii + 1 + perm[jj + 1 + perm[kk + 1]]] * 3;\n        t3 *= t3;\n        n3 = t3 * t3 * (grad3[gi3] * x3 + grad3[gi3 + 1] * y3 + grad3[gi3 + 2] * z3);\n      }\n      // Add contributions from each corner to get the final noise value.\n      // The result is scaled to stay just inside [-1,1]\n      return 32.0 * (n0 + n1 + n2 + n3);\n    },\n    // 4D simplex noise, better simplex rank ordering method 2012-03-09\n    noise4D: function(x, y, z, w) {\n      var perm = this.perm;\n      var grad4 = this.grad4;\n\n      var n0, n1, n2, n3, n4; // Noise contributions from the five corners\n      // Skew the (x,y,z,w) space to determine which cell of 24 simplices we're in\n      var s = (x + y + z + w) * F4; // Factor for 4D skewing\n      var i = Math.floor(x + s);\n      var j = Math.floor(y + s);\n      var k = Math.floor(z + s);\n      var l = Math.floor(w + s);\n      var t = (i + j + k + l) * G4; // Factor for 4D unskewing\n      var X0 = i - t; // Unskew the cell origin back to (x,y,z,w) space\n      var Y0 = j - t;\n      var Z0 = k - t;\n      var W0 = l - t;\n      var x0 = x - X0; // The x,y,z,w distances from the cell origin\n      var y0 = y - Y0;\n      var z0 = z - Z0;\n      var w0 = w - W0;\n      // For the 4D case, the simplex is a 4D shape I won't even try to describe.\n      // To find out which of the 24 possible simplices we're in, we need to\n      // determine the magnitude ordering of x0, y0, z0 and w0.\n      // Six pair-wise comparisons are performed between each possible pair\n      // of the four coordinates, and the results are used to rank the numbers.\n      var rankx = 0;\n      var ranky = 0;\n      var rankz = 0;\n      var rankw = 0;\n      if (x0 > y0) rankx++;\n      else ranky++;\n      if (x0 > z0) rankx++;\n      else rankz++;\n      if (x0 > w0) rankx++;\n      else rankw++;\n      if (y0 > z0) ranky++;\n      else rankz++;\n      if (y0 > w0) ranky++;\n      else rankw++;\n      if (z0 > w0) rankz++;\n      else rankw++;\n      var i1, j1, k1, l1; // The integer offsets for the second simplex corner\n      var i2, j2, k2, l2; // The integer offsets for the third simplex corner\n      var i3, j3, k3, l3; // The integer offsets for the fourth simplex corner\n      // simplex[c] is a 4-vector with the numbers 0, 1, 2 and 3 in some order.\n      // Many values of c will never occur, since e.g. x>y>z>w makes x<z, y<w and x<w\n      // impossible. Only the 24 indices which have non-zero entries make any sense.\n      // We use a thresholding to set the coordinates in turn from the largest magnitude.\n      // Rank 3 denotes the largest coordinate.\n      i1 = rankx >= 3 ? 1 : 0;\n      j1 = ranky >= 3 ? 1 : 0;\n      k1 = rankz >= 3 ? 1 : 0;\n      l1 = rankw >= 3 ? 1 : 0;\n      // Rank 2 denotes the second largest coordinate.\n      i2 = rankx >= 2 ? 1 : 0;\n      j2 = ranky >= 2 ? 1 : 0;\n      k2 = rankz >= 2 ? 1 : 0;\n      l2 = rankw >= 2 ? 1 : 0;\n      // Rank 1 denotes the second smallest coordinate.\n      i3 = rankx >= 1 ? 1 : 0;\n      j3 = ranky >= 1 ? 1 : 0;\n      k3 = rankz >= 1 ? 1 : 0;\n      l3 = rankw >= 1 ? 1 : 0;\n      // The fifth corner has all coordinate offsets = 1, so no need to compute that.\n      var x1 = x0 - i1 + G4; // Offsets for second corner in (x,y,z,w) coords\n      var y1 = y0 - j1 + G4;\n      var z1 = z0 - k1 + G4;\n      var w1 = w0 - l1 + G4;\n      var x2 = x0 - i2 + 2.0 * G4; // Offsets for third corner in (x,y,z,w) coords\n      var y2 = y0 - j2 + 2.0 * G4;\n      var z2 = z0 - k2 + 2.0 * G4;\n      var w2 = w0 - l2 + 2.0 * G4;\n      var x3 = x0 - i3 + 3.0 * G4; // Offsets for fourth corner in (x,y,z,w) coords\n      var y3 = y0 - j3 + 3.0 * G4;\n      var z3 = z0 - k3 + 3.0 * G4;\n      var w3 = w0 - l3 + 3.0 * G4;\n      var x4 = x0 - 1.0 + 4.0 * G4; // Offsets for last corner in (x,y,z,w) coords\n      var y4 = y0 - 1.0 + 4.0 * G4;\n      var z4 = z0 - 1.0 + 4.0 * G4;\n      var w4 = w0 - 1.0 + 4.0 * G4;\n      // Work out the hashed gradient indices of the five simplex corners\n      var ii = i & 255;\n      var jj = j & 255;\n      var kk = k & 255;\n      var ll = l & 255;\n      // Calculate the contribution from the five corners\n      var t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0 - w0 * w0;\n      if (t0 < 0) n0 = 0.0;\n      else {\n        var gi0 = (perm[ii + perm[jj + perm[kk + perm[ll]]]] % 32) * 4;\n        t0 *= t0;\n        n0 = t0 * t0 * (grad4[gi0] * x0 + grad4[gi0 + 1] * y0 + grad4[gi0 + 2] * z0 + grad4[gi0 + 3] * w0);\n      }\n      var t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1 - w1 * w1;\n      if (t1 < 0) n1 = 0.0;\n      else {\n        var gi1 = (perm[ii + i1 + perm[jj + j1 + perm[kk + k1 + perm[ll + l1]]]] % 32) * 4;\n        t1 *= t1;\n        n1 = t1 * t1 * (grad4[gi1] * x1 + grad4[gi1 + 1] * y1 + grad4[gi1 + 2] * z1 + grad4[gi1 + 3] * w1);\n      }\n      var t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2 - w2 * w2;\n      if (t2 < 0) n2 = 0.0;\n      else {\n        var gi2 = (perm[ii + i2 + perm[jj + j2 + perm[kk + k2 + perm[ll + l2]]]] % 32) * 4;\n        t2 *= t2;\n        n2 = t2 * t2 * (grad4[gi2] * x2 + grad4[gi2 + 1] * y2 + grad4[gi2 + 2] * z2 + grad4[gi2 + 3] * w2);\n      }\n      var t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3 - w3 * w3;\n      if (t3 < 0) n3 = 0.0;\n      else {\n        var gi3 = (perm[ii + i3 + perm[jj + j3 + perm[kk + k3 + perm[ll + l3]]]] % 32) * 4;\n        t3 *= t3;\n        n3 = t3 * t3 * (grad4[gi3] * x3 + grad4[gi3 + 1] * y3 + grad4[gi3 + 2] * z3 + grad4[gi3 + 3] * w3);\n      }\n      var t4 = 0.6 - x4 * x4 - y4 * y4 - z4 * z4 - w4 * w4;\n      if (t4 < 0) n4 = 0.0;\n      else {\n        var gi4 = (perm[ii + 1 + perm[jj + 1 + perm[kk + 1 + perm[ll + 1]]]] % 32) * 4;\n        t4 *= t4;\n        n4 = t4 * t4 * (grad4[gi4] * x4 + grad4[gi4 + 1] * y4 + grad4[gi4 + 2] * z4 + grad4[gi4 + 3] * w4);\n      }\n      // Sum up and scale the result to cover the range [-1,1]\n      return 27.0 * (n0 + n1 + n2 + n3 + n4);\n    }\n  };\n\n  function buildPermutationTable(random) {\n    var i;\n    var p = new Uint8Array(256);\n    for (i = 0; i < 256; i++) {\n      p[i] = i;\n    }\n    for (i = 0; i < 255; i++) {\n      var r = i + ~~(random() * (256 - i));\n      var aux = p[i];\n      p[i] = p[r];\n      p[r] = aux;\n    }\n    return p;\n  }\n  SimplexNoise._buildPermutationTable = buildPermutationTable;\n\n  function alea() {\n    // Johannes Baage <baagoe@baagoe.com>, 2010\n    var s0 = 0;\n    var s1 = 0;\n    var s2 = 0;\n    var c = 1;\n\n    var mash = masher();\n    s0 = mash(' ');\n    s1 = mash(' ');\n    s2 = mash(' ');\n\n    for (var i = 0; i < arguments.length; i++) {\n      s0 -= mash(arguments[i]);\n      if (s0 < 0) {\n        s0 += 1;\n      }\n      s1 -= mash(arguments[i]);\n      if (s1 < 0) {\n        s1 += 1;\n      }\n      s2 -= mash(arguments[i]);\n      if (s2 < 0) {\n        s2 += 1;\n      }\n    }\n    mash = null;\n    return function() {\n      var t = 2091639 * s0 + c * 2.3283064365386963e-10; // 2^-32\n      s0 = s1;\n      s1 = s2;\n      return s2 = t - (c = t | 0);\n    };\n  }\n  function masher() {\n    var n = 0xefc8249d;\n    return function(data) {\n      data = data.toString();\n      for (var i = 0; i < data.length; i++) {\n        n += data.charCodeAt(i);\n        var h = 0.02519603282416938 * n;\n        n = h >>> 0;\n        h -= n;\n        h *= n;\n        n = h >>> 0;\n        h -= n;\n        n += h * 0x100000000; // 2^32\n      }\n      return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n    };\n  }\n\n  // amd\n  if (typeof define !== 'undefined' && define.amd) define(function() {return SimplexNoise;});\n  // common js\n  if (typeof exports !== 'undefined') exports.SimplexNoise = SimplexNoise;\n  // browser\n  else if (typeof window !== 'undefined') window.SimplexNoise = SimplexNoise;\n  // nodejs\n  if (typeof module !== 'undefined') {\n    module.exports = SimplexNoise;\n  }\n\n})();\n","/*! Tweakpane 3.1.10 (c) 2016 cocopon, licensed under the MIT license. */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Tweakpane = {}));\n})(this, (function (exports) { 'use strict';\n\n    /***\n     * A simple semantic versioning perser.\n     */\n    class Semver {\n        /**\n         * @hidden\n         */\n        constructor(text) {\n            const [core, prerelease] = text.split('-');\n            const coreComps = core.split('.');\n            this.major = parseInt(coreComps[0], 10);\n            this.minor = parseInt(coreComps[1], 10);\n            this.patch = parseInt(coreComps[2], 10);\n            this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n        }\n        toString() {\n            const core = [this.major, this.minor, this.patch].join('.');\n            return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n        }\n    }\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    class TpEvent {\n        constructor(target) {\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n    class TpUpdateEvent extends TpEvent {\n        constructor(target, value, presetKey) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n        }\n    }\n    class TpFoldEvent extends TpEvent {\n        constructor(target, expanded) {\n            super(target);\n            this.expanded = expanded;\n        }\n    }\n    class TpTabSelectEvent extends TpEvent {\n        constructor(target, index) {\n            super(target);\n            this.index = index;\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) {\n            return false;\n        }\n        for (let i = 0; i < a1.length; i++) {\n            if (a1[i] !== a2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    function isPropertyWritable(obj, key) {\n        let target = obj;\n        do {\n            const d = Object.getOwnPropertyDescriptor(target, key);\n            if (d && (d.set !== undefined || d.writable === true)) {\n                return true;\n            }\n            target = Object.getPrototypeOf(target);\n        } while (target !== null);\n        return false;\n    }\n\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: () => 'View has been already disposed',\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: () => `Value is not bindable`,\n        propertynotfound: (context) => `Property '${context.name}' not found`,\n        shouldneverhappen: () => 'This error should never happen',\n    };\n    class TpError {\n        static alreadyDisposed() {\n            return new TpError({ type: 'alreadydisposed' });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable',\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({ type: 'shouldneverhappen' });\n        }\n        constructor(config) {\n            var _a;\n            this.message =\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n    }\n\n    class BindingTarget {\n        constructor(obj, key, opt_id) {\n            this.obj_ = obj;\n            this.key_ = key;\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\n        }\n        static isBindable(obj) {\n            if (obj === null) {\n                return false;\n            }\n            if (typeof obj !== 'object' && typeof obj !== 'function') {\n                return false;\n            }\n            return true;\n        }\n        get key() {\n            return this.key_;\n        }\n        get presetKey() {\n            return this.presetKey_;\n        }\n        read() {\n            return this.obj_[this.key_];\n        }\n        write(value) {\n            this.obj_[this.key_] = value;\n        }\n        writeProperty(name, value) {\n            const valueObj = this.read();\n            if (!BindingTarget.isBindable(valueObj)) {\n                throw TpError.notBindable();\n            }\n            if (!(name in valueObj)) {\n                throw TpError.propertyNotFound(name);\n            }\n            valueObj[name] = value;\n        }\n    }\n\n    class ButtonApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.valueController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.valueController.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.valueController.emitter;\n            emitter.on(eventName, () => {\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text) => {\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n\n    const className$q = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$q());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$q('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$q('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n\n    class ButtonController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const prevValue = this.rawValue_;\n            const changed = !this.equals_(prevValue, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                previousRawValue: prevValue,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const prevValue = this.value_;\n            if (prevValue === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                previousRawValue: prevValue,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function warnMissing(info) {\n        console.warn([\n            `Missing '${info.key}' of ${info.target} in ${info.place}.`,\n            'Please rebuild plugins with the latest core package.',\n        ].join(' '));\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    class ReadonlyValue {\n        constructor(value) {\n            this.value_ = value;\n        }\n        static create(value) {\n            return [\n                new ReadonlyValue(value),\n                (rawValue, options) => {\n                    value.setRawValue(rawValue, options);\n                },\n            ];\n        }\n        get emitter() {\n            return this.value_.emitter;\n        }\n        get rawValue() {\n            return this.value_.rawValue;\n        }\n    }\n\n    const className$p = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$p(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            var _a;\n            super(valueMap);\n            this.onDisabledChange_ = this.onDisabledChange_.bind(this);\n            this.onParentChange_ = this.onParentChange_.bind(this);\n            this.onParentGlobalDisabledChange_ =\n                this.onParentGlobalDisabledChange_.bind(this);\n            [this.globalDisabled_, this.setGlobalDisabled_] = ReadonlyValue.create(createValue(this.getGlobalDisabled_()));\n            this.value('disabled').emitter.on('change', this.onDisabledChange_);\n            this.value('parent').emitter.on('change', this.onParentChange_);\n            (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n        }\n        static create(opt_initialValue) {\n            var _a, _b, _c;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            return new ViewProps(ValueMap.createCore({\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n                parent: (_c = initialValue.parent) !== null && _c !== void 0 ? _c : null,\n            }));\n        }\n        get globalDisabled() {\n            return this.globalDisabled_;\n        }\n        bindClassModifiers(elem) {\n            bindValue(this.globalDisabled_, valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValue(this.globalDisabled_, (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValue(this.globalDisabled_, (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n        getGlobalDisabled_() {\n            const parent = this.get('parent');\n            const parentDisabled = parent ? parent.globalDisabled.rawValue : false;\n            return parentDisabled || this.get('disabled');\n        }\n        updateGlobalDisabled_() {\n            this.setGlobalDisabled_(this.getGlobalDisabled_());\n        }\n        onDisabledChange_() {\n            this.updateGlobalDisabled_();\n        }\n        onParentGlobalDisabledChange_() {\n            this.updateGlobalDisabled_();\n        }\n        onParentChange_(ev) {\n            var _a;\n            const prevParent = ev.previousRawValue;\n            prevParent === null || prevParent === void 0 ? void 0 : prevParent.globalDisabled.emitter.off('change', this.onParentGlobalDisabledChange_);\n            (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n            this.updateGlobalDisabled_();\n        }\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$o = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$o(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$o(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n        set parent(parent) {\n            this.parent_ = parent;\n            if (!('parent' in this.viewProps.valMap_)) {\n                warnMissing({\n                    key: 'parent',\n                    target: ViewProps.name,\n                    place: 'BladeController.parent',\n                });\n                return;\n            }\n            this.viewProps.set('parent', this.parent_ ? this.parent_.viewProps : null);\n        }\n    }\n\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function getGlobalObject() {\n        return globalThis;\n    }\n    function getWindowDocument() {\n        const globalObj = forceCast(getGlobalObject());\n        return globalObj.document;\n    }\n    function getCanvasContext(canvasElement) {\n        const win = canvasElement.ownerDocument.defaultView;\n        if (!win) {\n            return null;\n        }\n        const isBrowser = 'document' in win;\n        return isBrowser\n            ? canvasElement.getContext('2d', {\n                willReadFrequently: true,\n            })\n            : null;\n    }\n    const ICON_ID_TO_INNER_HTML_MAP = {\n        check: '<path d=\"M2 8l4 4l8 -8\"/>',\n        dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n        p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n    };\n    function createSvgIconElement(document, iconId) {\n        const elem = document.createElementNS(SVG_NS, 'svg');\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n        return elem;\n    }\n    function insertElementAt(parentElement, element, index) {\n        parentElement.insertBefore(element, parentElement.children[index]);\n    }\n    function removeElement(element) {\n        if (element.parentElement) {\n            element.parentElement.removeChild(element);\n        }\n    }\n    function removeChildElements(element) {\n        while (element.children.length > 0) {\n            element.removeChild(element.children[0]);\n        }\n    }\n    function removeChildNodes(element) {\n        while (element.childNodes.length > 0) {\n            element.removeChild(element.childNodes[0]);\n        }\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        return null;\n    }\n\n    const className$n = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line) => {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index) => {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$n());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$n('l'));\n            bindValueMap(config.props, 'label', (value) => {\n                if (isEmpty(value)) {\n                    this.element.classList.add(className$n(undefined, 'nol'));\n                }\n                else {\n                    this.element.classList.remove(className$n(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$n('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n\n    class LabelController extends BladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    const ButtonBladePlugin = {\n        id: 'button',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('button'),\n                label: p.optional.string,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new ButtonController(args.document, {\n                    props: ValueMap.fromObject({\n                        title: args.params.title,\n                    }),\n                    viewProps: args.viewProps,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ButtonController)) {\n                return null;\n            }\n            return new ButtonApi(args.controller);\n        },\n    };\n\n    class ValueBladeController extends BladeController {\n        constructor(config) {\n            super(config);\n            this.value = config.value;\n        }\n    }\n\n    function createBlade() {\n        return new ValueMap({\n            positions: createValue([], {\n                equals: deepEqualsArray,\n            }),\n        });\n    }\n\n    class Foldable extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) {\n                return '0';\n            }\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n                return `${exHeight}px`;\n            }\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            const onExpand = () => {\n                const expanded = this.styleExpanded;\n                if (expanded) {\n                    elem.classList.add(expandedClassName);\n                }\n                else {\n                    elem.classList.remove(expandedClassName);\n                }\n            };\n            bindValueMap(this, 'expanded', onExpand);\n            bindValueMap(this, 'temporaryExpanded', onExpand);\n        }\n        cleanUpTransition() {\n            this.set('shouldFixHeight', false);\n            this.set('expandedHeight', null);\n            this.set('completed', true);\n        }\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, () => {\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', () => {\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                const h = computeExpandedFolderHeight(foldable, elem);\n                if (h > 0) {\n                    foldable.set('expandedHeight', h);\n                }\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', () => {\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev) => {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            foldable.cleanUpTransition();\n        });\n    }\n\n    class RackLikeApi extends BladeApi {\n        constructor(controller, rackApi) {\n            super(controller);\n            this.rackApi_ = rackApi;\n        }\n    }\n\n    function addButtonAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n    }\n    function addFolderAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n    }\n    function addSeparatorAsBlade(api, opt_params) {\n        const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'separator' }));\n    }\n    function addTabAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n    }\n\n    class NestedOrderedSet {\n        constructor(extract) {\n            this.emitter = new Emitter();\n            this.items_ = [];\n            this.cache_ = new Set();\n            this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n            this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n            this.extract_ = extract;\n        }\n        get items() {\n            return this.items_;\n        }\n        allItems() {\n            return Array.from(this.cache_);\n        }\n        find(callback) {\n            for (const item of this.allItems()) {\n                if (callback(item)) {\n                    return item;\n                }\n            }\n            return null;\n        }\n        includes(item) {\n            return this.cache_.has(item);\n        }\n        add(item, opt_index) {\n            if (this.includes(item)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const index = opt_index !== undefined ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            this.cache_.add(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.on('add', this.onSubListAdd_);\n                subList.emitter.on('remove', this.onSubListRemove_);\n                subList.allItems().forEach((item) => {\n                    this.cache_.add(item);\n                });\n            }\n            this.emitter.emit('add', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            this.cache_.delete(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.off('add', this.onSubListAdd_);\n                subList.emitter.off('remove', this.onSubListRemove_);\n            }\n            this.emitter.emit('remove', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        onSubListAdd_(ev) {\n            this.cache_.add(ev.item);\n            this.emitter.emit('add', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n        onSubListRemove_(ev) {\n            this.cache_.delete(ev.item);\n            this.emitter.emit('remove', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n    }\n\n    class InputBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingChange_ = this.onBindingChange_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('change', this.onBindingChange_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingChange_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('change', {\n                event: new TpChangeEvent(this, forceCast(value), this.controller_.binding.target.presetKey, ev.options.last),\n            });\n        }\n    }\n\n    class InputBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n        }\n    }\n\n    class MonitorBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingUpdate_ = this.onBindingUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('update', this.onBindingUpdate_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingUpdate_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(this, forceCast(value), this.controller_.binding.target.presetKey),\n            });\n        }\n    }\n\n    class MonitorBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n            this.viewProps.bindDisabled(this.binding.ticker);\n            this.viewProps.handleDispose(() => {\n                this.binding.dispose();\n            });\n        }\n    }\n\n    function findSubBladeApiSet(api) {\n        if (api instanceof RackApi) {\n            return api['apiSet_'];\n        }\n        if (api instanceof RackLikeApi) {\n            return api['rackApi_']['apiSet_'];\n        }\n        return null;\n    }\n    function getApiByController(apiSet, controller) {\n        const api = apiSet.find((api) => api.controller_ === controller);\n        if (!api) {\n            throw TpError.shouldNeverHappen();\n        }\n        return api;\n    }\n    function createBindingTarget(obj, key, opt_id) {\n        if (!BindingTarget.isBindable(obj)) {\n            throw TpError.notBindable();\n        }\n        return new BindingTarget(obj, key, opt_id);\n    }\n    class RackApi extends BladeApi {\n        constructor(controller, pool) {\n            super(controller);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.onRackInputChange_ = this.onRackInputChange_.bind(this);\n            this.onRackMonitorUpdate_ = this.onRackMonitorUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.apiSet_ = new NestedOrderedSet(findSubBladeApiSet);\n            this.pool_ = pool;\n            const rack = this.controller_.rack;\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            rack.emitter.on('inputchange', this.onRackInputChange_);\n            rack.emitter.on('monitorupdate', this.onRackMonitorUpdate_);\n            rack.children.forEach((bc) => {\n                this.setUpApi_(bc);\n            });\n        }\n        get children() {\n            return this.controller_.rack.children.map((bc) => getApiByController(this.apiSet_, bc));\n        }\n        addInput(object, key, opt_params) {\n            const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createInput(doc, createBindingTarget(object, key, params.presetKey), params);\n            const api = new InputBindingApi(bc);\n            return this.add(api, params.index);\n        }\n        addMonitor(object, key, opt_params) {\n            const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createMonitor(doc, createBindingTarget(object, key), params);\n            const api = new MonitorBindingApi(bc);\n            return forceCast(this.add(api, params.index));\n        }\n        addFolder(params) {\n            return addFolderAsBlade(this, params);\n        }\n        addButton(params) {\n            return addButtonAsBlade(this, params);\n        }\n        addSeparator(opt_params) {\n            return addSeparatorAsBlade(this, opt_params);\n        }\n        addTab(params) {\n            return addTabAsBlade(this, params);\n        }\n        add(api, opt_index) {\n            this.controller_.rack.add(api.controller_, opt_index);\n            const gapi = this.apiSet_.find((a) => a.controller_ === api.controller_);\n            if (gapi) {\n                this.apiSet_.remove(gapi);\n            }\n            this.apiSet_.add(api);\n            return api;\n        }\n        remove(api) {\n            this.controller_.rack.remove(api.controller_);\n        }\n        addBlade(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createBlade(doc, params);\n            const api = this.pool_.createBladeApi(bc);\n            return this.add(api, params.index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpApi_(bc) {\n            const api = this.apiSet_.find((api) => api.controller_ === bc);\n            if (!api) {\n                this.apiSet_.add(this.pool_.createBladeApi(bc));\n            }\n        }\n        onRackAdd_(ev) {\n            this.setUpApi_(ev.bladeController);\n        }\n        onRackRemove_(ev) {\n            if (ev.isRoot) {\n                const api = getApiByController(this.apiSet_, ev.bladeController);\n                this.apiSet_.remove(api);\n            }\n        }\n        onRackInputChange_(ev) {\n            const bc = ev.bladeController;\n            if (bc instanceof InputBindingController) {\n                const api = getApiByController(this.apiSet_, bc);\n                const binding = bc.binding;\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, forceCast(binding.target.read()), binding.target.presetKey, ev.options.last),\n                });\n            }\n            else if (bc instanceof ValueBladeController) {\n                const api = getApiByController(this.apiSet_, bc);\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, bc.value.rawValue, undefined, ev.options.last),\n                });\n            }\n        }\n        onRackMonitorUpdate_(ev) {\n            if (!(ev.bladeController instanceof MonitorBindingController)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = getApiByController(this.apiSet_, ev.bladeController);\n            const binding = ev.bladeController.binding;\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(api, forceCast(binding.target.read()), binding.target.presetKey),\n            });\n        }\n    }\n\n    class FolderApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.emitter_ = new Emitter();\n            this.controller_.foldable\n                .value('expanded')\n                .emitter.on('change', (ev) => {\n                this.emitter_.emit('fold', {\n                    event: new TpFoldEvent(this, ev.sender.rawValue),\n                });\n            });\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n        }\n        get expanded() {\n            return this.controller_.foldable.get('expanded');\n        }\n        set expanded(expanded) {\n            this.controller_.foldable.set('expanded', expanded);\n        }\n        get title() {\n            return this.controller_.props.get('title');\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            return this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class RackLikeController extends BladeController {\n        constructor(config) {\n            super({\n                blade: config.blade,\n                view: config.view,\n                viewProps: config.rackController.viewProps,\n            });\n            this.rackController = config.rackController;\n        }\n    }\n\n    class PlainView {\n        constructor(doc, config) {\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n\n    function findInputBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof InputBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findMonitorBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof MonitorBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findValueBladeController(bcs, v) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof ValueBladeController && bc.value === v) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findSubRack(bc) {\n        if (bc instanceof RackController) {\n            return bc.rack;\n        }\n        if (bc instanceof RackLikeController) {\n            return bc.rackController.rack;\n        }\n        return null;\n    }\n    function findSubBladeControllerSet(bc) {\n        const rack = findSubRack(bc);\n        return rack ? rack['bcSet_'] : null;\n    }\n    class BladeRack {\n        constructor(config) {\n            var _a, _b;\n            this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n            this.onSetAdd_ = this.onSetAdd_.bind(this);\n            this.onSetRemove_ = this.onSetRemove_.bind(this);\n            this.onChildDispose_ = this.onChildDispose_.bind(this);\n            this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n            this.onChildInputChange_ = this.onChildInputChange_.bind(this);\n            this.onChildMonitorUpdate_ = this.onChildMonitorUpdate_.bind(this);\n            this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n            this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n            this.onDescendantLayout_ = this.onDescendantLayout_.bind(this);\n            this.onDescendantInputChange_ = this.onDescendantInputChange_.bind(this);\n            this.onDescendantMonitorUpdate_ =\n                this.onDescendantMonitorUpdate_.bind(this);\n            this.emitter = new Emitter();\n            this.blade_ = (_a = config.blade) !== null && _a !== void 0 ? _a : null;\n            (_b = this.blade_) === null || _b === void 0 ? void 0 : _b.value('positions').emitter.on('change', this.onBladePositionsChange_);\n            this.viewProps = config.viewProps;\n            this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n            this.bcSet_.emitter.on('add', this.onSetAdd_);\n            this.bcSet_.emitter.on('remove', this.onSetRemove_);\n        }\n        get children() {\n            return this.bcSet_.items;\n        }\n        add(bc, opt_index) {\n            var _a;\n            (_a = bc.parent) === null || _a === void 0 ? void 0 : _a.remove(bc);\n            if (isPropertyWritable(bc, 'parent')) {\n                bc.parent = this;\n            }\n            else {\n                bc['parent_'] = this;\n                warnMissing({\n                    key: 'parent',\n                    target: 'BladeController',\n                    place: 'BladeRack.add',\n                });\n            }\n            this.bcSet_.add(bc, opt_index);\n        }\n        remove(bc) {\n            if (isPropertyWritable(bc, 'parent')) {\n                bc.parent = null;\n            }\n            else {\n                bc['parent_'] = null;\n                warnMissing({\n                    key: 'parent',\n                    target: 'BladeController',\n                    place: 'BladeRack.remove',\n                });\n            }\n            this.bcSet_.remove(bc);\n        }\n        find(controllerClass) {\n            return forceCast(this.bcSet_.allItems().filter((bc) => {\n                return bc instanceof controllerClass;\n            }));\n        }\n        onSetAdd_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('add', {\n                bladeController: ev.item,\n                index: ev.index,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n            bc.blade\n                .value('positions')\n                .emitter.on('change', this.onChildPositionsChange_);\n            bc.viewProps.handleDispose(this.onChildDispose_);\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.on('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.on('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.on('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.on('layout', this.onDescendantLayout_);\n                    emitter.on('inputchange', this.onDescendantInputChange_);\n                    emitter.on('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        onSetRemove_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('remove', {\n                bladeController: ev.item,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.off('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.off('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.off('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.off('layout', this.onDescendantLayout_);\n                    emitter.off('inputchange', this.onDescendantInputChange_);\n                    emitter.off('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        updatePositions_() {\n            const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n            const firstVisibleItem = visibleItems[0];\n            const lastVisibleItem = visibleItems[visibleItems.length - 1];\n            this.bcSet_.items.forEach((bc) => {\n                const ps = [];\n                if (bc === firstVisibleItem) {\n                    ps.push('first');\n                    if (!this.blade_ ||\n                        this.blade_.get('positions').includes('veryfirst')) {\n                        ps.push('veryfirst');\n                    }\n                }\n                if (bc === lastVisibleItem) {\n                    ps.push('last');\n                    if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                        ps.push('verylast');\n                    }\n                }\n                bc.blade.set('positions', ps);\n            });\n        }\n        onChildPositionsChange_() {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildViewPropsChange_(_ev) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildDispose_() {\n            const disposedUcs = this.bcSet_.items.filter((bc) => {\n                return bc.viewProps.get('disposed');\n            });\n            disposedUcs.forEach((bc) => {\n                this.bcSet_.remove(bc);\n            });\n        }\n        onChildInputChange_(ev) {\n            const bc = findInputBindingController(this.find(InputBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.alreadyDisposed();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onChildMonitorUpdate_(ev) {\n            const bc = findMonitorBindingController(this.find(MonitorBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.alreadyDisposed();\n            }\n            this.emitter.emit('monitorupdate', {\n                bladeController: bc,\n                sender: this,\n            });\n        }\n        onChildValueChange_(ev) {\n            const bc = findValueBladeController(this.find(ValueBladeController), ev.sender);\n            if (!bc) {\n                throw TpError.alreadyDisposed();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantLayout_(_) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onDescendantInputChange_(ev) {\n            this.emitter.emit('inputchange', {\n                bladeController: ev.bladeController,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantMonitorUpdate_(ev) {\n            this.emitter.emit('monitorupdate', {\n                bladeController: ev.bladeController,\n                sender: this,\n            });\n        }\n        onBladePositionsChange_() {\n            this.updatePositions_();\n        }\n    }\n\n    class RackController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new PlainView(doc, {\n                    viewName: 'brk',\n                    viewProps: config.viewProps,\n                }) }));\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            const rack = new BladeRack({\n                blade: config.root ? undefined : config.blade,\n                viewProps: config.viewProps,\n            });\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            this.rack = rack;\n            this.viewProps.handleDispose(() => {\n                for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                    const bc = this.rack.children[i];\n                    bc.viewProps.set('disposed', true);\n                }\n            });\n        }\n        onRackAdd_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            insertElementAt(this.view.element, ev.bladeController.view.element, ev.index);\n        }\n        onRackRemove_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            removeElement(ev.bladeController.view.element);\n        }\n    }\n\n    const bladeContainerClassName = ClassName('cnt');\n\n    class FolderView {\n        constructor(doc, config) {\n            var _a;\n            this.className_ = ClassName((_a = config.viewName) !== null && _a !== void 0 ? _a : 'fld');\n            this.element = doc.createElement('div');\n            this.element.classList.add(this.className_(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            this.foldable_ = config.foldable;\n            this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n            bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(this.className_('b'));\n            bindValueMap(config.props, 'title', (title) => {\n                if (isEmpty(title)) {\n                    this.element.classList.add(this.className_(undefined, 'not'));\n                }\n                else {\n                    this.element.classList.remove(this.className_(undefined, 'not'));\n                }\n            });\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const indentElem = doc.createElement('div');\n            indentElem.classList.add(this.className_('i'));\n            this.element.appendChild(indentElem);\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(this.className_('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(this.className_('m'));\n            this.buttonElement.appendChild(markElem);\n            const containerElem = config.containerElement;\n            containerElem.classList.add(this.className_('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n        }\n    }\n\n    class FolderController extends RackLikeController {\n        constructor(doc, config) {\n            var _a;\n            const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n            const rc = new RackController(doc, {\n                blade: config.blade,\n                root: config.root,\n                viewProps: config.viewProps,\n            });\n            super(Object.assign(Object.assign({}, config), { rackController: rc, view: new FolderView(doc, {\n                    containerElement: rc.view.element,\n                    foldable: foldable,\n                    props: config.props,\n                    viewName: config.root ? 'rot' : undefined,\n                    viewProps: config.viewProps,\n                }) }));\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.props = config.props;\n            this.foldable = foldable;\n            bindFoldable(this.foldable, this.view.containerElement);\n            this.rackController.rack.emitter.on('add', () => {\n                this.foldable.cleanUpTransition();\n            });\n            this.rackController.rack.emitter.on('remove', () => {\n                this.foldable.cleanUpTransition();\n            });\n            this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n        }\n        get document() {\n            return this.view.element.ownerDocument;\n        }\n        onTitleClick_() {\n            this.foldable.set('expanded', !this.foldable.get('expanded'));\n        }\n    }\n\n    const FolderBladePlugin = {\n        id: 'folder',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('folder'),\n                expanded: p.optional.boolean,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new FolderController(args.document, {\n                blade: args.blade,\n                expanded: args.params.expanded,\n                props: ValueMap.fromObject({\n                    title: args.params.title,\n                }),\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof FolderController)) {\n                return null;\n            }\n            return new FolderApi(args.controller, args.pool);\n        },\n    };\n\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class SeparatorApi extends BladeApi {\n    }\n\n    const className$m = ClassName('spr');\n    class SeparatorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$m());\n            config.viewProps.bindClassModifiers(this.element);\n            const hrElem = doc.createElement('hr');\n            hrElem.classList.add(className$m('r'));\n            this.element.appendChild(hrElem);\n        }\n    }\n\n    class SeparatorController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\n                    viewProps: config.viewProps,\n                }) }));\n        }\n    }\n\n    const SeparatorBladePlugin = {\n        id: 'separator',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('separator'),\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new SeparatorController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof SeparatorController)) {\n                return null;\n            }\n            return new SeparatorApi(args.controller);\n        },\n    };\n\n    const className$l = ClassName('tbi');\n    class TabItemView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$l());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValueMap(config.props, 'selected', (selected) => {\n                if (selected) {\n                    this.element.classList.add(className$l(undefined, 'sel'));\n                }\n                else {\n                    this.element.classList.remove(className$l(undefined, 'sel'));\n                }\n            });\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$l('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$l('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n        }\n    }\n\n    class TabItemController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new TabItemView(doc, {\n                props: config.props,\n                viewProps: config.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class TabPageController {\n        constructor(doc, config) {\n            this.onItemClick_ = this.onItemClick_.bind(this);\n            this.ic_ = new TabItemController(doc, {\n                props: config.itemProps,\n                viewProps: ViewProps.create(),\n            });\n            this.ic_.emitter.on('click', this.onItemClick_);\n            this.cc_ = new RackController(doc, {\n                blade: createBlade(),\n                viewProps: ViewProps.create(),\n            });\n            this.props = config.props;\n            bindValueMap(this.props, 'selected', (selected) => {\n                this.itemController.props.set('selected', selected);\n                this.contentController.viewProps.set('hidden', !selected);\n            });\n        }\n        get itemController() {\n            return this.ic_;\n        }\n        get contentController() {\n            return this.cc_;\n        }\n        onItemClick_() {\n            this.props.set('selected', true);\n        }\n    }\n\n    class TabPageApi {\n        constructor(controller, contentRackApi) {\n            this.controller_ = controller;\n            this.rackApi_ = contentRackApi;\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.itemController.props.set('title', title);\n        }\n        get selected() {\n            return this.controller_.props.get('selected');\n        }\n        set selected(selected) {\n            this.controller_.props.set('selected', selected);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n    }\n\n    class TabApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.onSelect_ = this.onSelect_.bind(this);\n            this.emitter_ = new Emitter();\n            this.pageApiMap_ = new Map();\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n            this.controller_.tab.selectedIndex.emitter.on('change', this.onSelect_);\n            this.controller_.pageSet.emitter.on('add', this.onPageAdd_);\n            this.controller_.pageSet.emitter.on('remove', this.onPageRemove_);\n            this.controller_.pageSet.items.forEach((pc) => {\n                this.setUpPageApi_(pc);\n            });\n        }\n        get pages() {\n            return this.controller_.pageSet.items.map((pc) => {\n                const api = this.pageApiMap_.get(pc);\n                if (!api) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return api;\n            });\n        }\n        addPage(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const pc = new TabPageController(doc, {\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: params.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n            });\n            this.controller_.add(pc, params.index);\n            const api = this.pageApiMap_.get(pc);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n        removePage(index) {\n            this.controller_.remove(index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpPageApi_(pc) {\n            const rackApi = this.rackApi_['apiSet_'].find((api) => api.controller_ === pc.contentController);\n            if (!rackApi) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = new TabPageApi(pc, rackApi);\n            this.pageApiMap_.set(pc, api);\n        }\n        onPageAdd_(ev) {\n            this.setUpPageApi_(ev.item);\n        }\n        onPageRemove_(ev) {\n            const api = this.pageApiMap_.get(ev.item);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.pageApiMap_.delete(ev.item);\n        }\n        onSelect_(ev) {\n            this.emitter_.emit('select', {\n                event: new TpTabSelectEvent(this, ev.rawValue),\n            });\n        }\n    }\n\n    const INDEX_NOT_SELECTED = -1;\n    class Tab {\n        constructor() {\n            this.onItemSelectedChange_ = this.onItemSelectedChange_.bind(this);\n            this.empty = createValue(true);\n            this.selectedIndex = createValue(INDEX_NOT_SELECTED);\n            this.items_ = [];\n        }\n        add(item, opt_index) {\n            const index = opt_index !== null && opt_index !== void 0 ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            item.emitter.on('change', this.onItemSelectedChange_);\n            this.keepSelection_();\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            item.emitter.off('change', this.onItemSelectedChange_);\n            this.keepSelection_();\n        }\n        keepSelection_() {\n            if (this.items_.length === 0) {\n                this.selectedIndex.rawValue = INDEX_NOT_SELECTED;\n                this.empty.rawValue = true;\n                return;\n            }\n            const firstSelIndex = this.items_.findIndex((s) => s.rawValue);\n            if (firstSelIndex < 0) {\n                this.items_.forEach((s, i) => {\n                    s.rawValue = i === 0;\n                });\n                this.selectedIndex.rawValue = 0;\n            }\n            else {\n                this.items_.forEach((s, i) => {\n                    s.rawValue = i === firstSelIndex;\n                });\n                this.selectedIndex.rawValue = firstSelIndex;\n            }\n            this.empty.rawValue = false;\n        }\n        onItemSelectedChange_(ev) {\n            if (ev.rawValue) {\n                const index = this.items_.findIndex((s) => s === ev.sender);\n                this.items_.forEach((s, i) => {\n                    s.rawValue = i === index;\n                });\n                this.selectedIndex.rawValue = index;\n            }\n            else {\n                this.keepSelection_();\n            }\n        }\n    }\n\n    const className$k = ClassName('tab');\n    class TabView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$k(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.empty, valueToClassName(this.element, className$k(undefined, 'nop')));\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$k('t'));\n            this.element.appendChild(titleElem);\n            this.itemsElement = titleElem;\n            const indentElem = doc.createElement('div');\n            indentElem.classList.add(className$k('i'));\n            this.element.appendChild(indentElem);\n            const contentsElem = config.contentsElement;\n            contentsElem.classList.add(className$k('c'));\n            this.element.appendChild(contentsElem);\n            this.contentsElement = contentsElem;\n        }\n    }\n\n    class TabController extends RackLikeController {\n        constructor(doc, config) {\n            const cr = new RackController(doc, {\n                blade: config.blade,\n                viewProps: config.viewProps,\n            });\n            const tab = new Tab();\n            super({\n                blade: config.blade,\n                rackController: cr,\n                view: new TabView(doc, {\n                    contentsElement: cr.view.element,\n                    empty: tab.empty,\n                    viewProps: config.viewProps,\n                }),\n            });\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.pageSet_ = new NestedOrderedSet(() => null);\n            this.pageSet_.emitter.on('add', this.onPageAdd_);\n            this.pageSet_.emitter.on('remove', this.onPageRemove_);\n            this.tab = tab;\n        }\n        get pageSet() {\n            return this.pageSet_;\n        }\n        add(pc, opt_index) {\n            this.pageSet_.add(pc, opt_index);\n        }\n        remove(index) {\n            this.pageSet_.remove(this.pageSet_.items[index]);\n        }\n        onPageAdd_(ev) {\n            const pc = ev.item;\n            insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n            pc.itemController.viewProps.set('parent', this.viewProps);\n            this.rackController.rack.add(pc.contentController, ev.index);\n            this.tab.add(pc.props.value('selected'));\n        }\n        onPageRemove_(ev) {\n            const pc = ev.item;\n            removeElement(pc.itemController.view.element);\n            pc.itemController.viewProps.set('parent', null);\n            this.rackController.rack.remove(pc.contentController);\n            this.tab.remove(pc.props.value('selected'));\n        }\n    }\n\n    const TabBladePlugin = {\n        id: 'tab',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                pages: p.required.array(p.required.object({ title: p.required.string })),\n                view: p.required.constant('tab'),\n            });\n            if (!result || result.pages.length === 0) {\n                return null;\n            }\n            return { params: result };\n        },\n        controller(args) {\n            const c = new TabController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n            args.params.pages.forEach((p) => {\n                const pc = new TabPageController(args.document, {\n                    itemProps: ValueMap.fromObject({\n                        selected: false,\n                        title: p.title,\n                    }),\n                    props: ValueMap.fromObject({\n                        selected: false,\n                    }),\n                });\n                c.add(pc);\n            });\n            return c;\n        },\n        api(args) {\n            if (!(args.controller instanceof TabController)) {\n                return null;\n            }\n            return new TabApi(args.controller, args.pool);\n        },\n    };\n\n    function createBladeController(plugin, args) {\n        const ac = plugin.accept(args.params);\n        if (!ac) {\n            return null;\n        }\n        const disabled = ParamsParsers.optional.boolean(args.params['disabled']).value;\n        const hidden = ParamsParsers.optional.boolean(args.params['hidden']).value;\n        return plugin.controller({\n            blade: createBlade(),\n            document: args.document,\n            params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: disabled, hidden: hidden })),\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n    }\n\n    class ManualTicker {\n        constructor() {\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() { }\n        tick() {\n            if (this.disabled) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class IntervalTicker {\n        constructor(doc, interval) {\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) {\n                this.clearTimer_();\n            }\n            else {\n                this.setTimer_();\n            }\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                win.clearInterval(this.timerId_);\n            }\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n            }\n        }\n        onTick_() {\n            if (this.disabled_) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class InputBinding {\n        constructor(config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.reader = config.reader;\n            this.writer = config.writer;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.target = config.target;\n            this.read();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue !== undefined) {\n                this.value.rawValue = this.reader(targetValue);\n            }\n        }\n        write_(rawValue) {\n            this.writer(this.target, rawValue);\n        }\n        onValueChange_(ev) {\n            this.write_(ev.rawValue);\n            this.emitter.emit('change', {\n                options: ev.options,\n                rawValue: ev.rawValue,\n                sender: this,\n            });\n        }\n    }\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    class MonitorBinding {\n        constructor(config) {\n            this.onTick_ = this.onTick_.bind(this);\n            this.reader_ = config.reader;\n            this.target = config.target;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.ticker = config.ticker;\n            this.ticker.emitter.on('tick', this.onTick_);\n            this.read();\n        }\n        dispose() {\n            this.ticker.dispose();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue === undefined) {\n                return;\n            }\n            const buffer = this.value.rawValue;\n            const newValue = this.reader_(targetValue);\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\n            this.emitter.emit('update', {\n                rawValue: newValue,\n                sender: this,\n            });\n        }\n        onTick_(_) {\n            this.read();\n        }\n    }\n\n    class CompositeConstraint {\n        constructor(constraints) {\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c) => {\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc) => {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    class DefiniteRangeConstraint {\n        constructor(config) {\n            this.values = ValueMap.fromObject({\n                max: config.max,\n                min: config.min,\n            });\n        }\n        constrain(value) {\n            const max = this.values.get('max');\n            const min = this.values.get('min');\n            return Math.min(Math.max(value, min), max);\n        }\n    }\n\n    class ListConstraint {\n        constructor(options) {\n            this.values = ValueMap.fromObject({\n                options: options,\n            });\n        }\n        get options() {\n            return this.values.get('options');\n        }\n        constrain(value) {\n            const opts = this.values.get('options');\n            if (opts.length === 0) {\n                return value;\n            }\n            const matched = opts.filter((item) => {\n                return item.value === value;\n            }).length > 0;\n            return matched ? value : opts[0].value;\n        }\n    }\n\n    class RangeConstraint {\n        constructor(config) {\n            this.values = ValueMap.fromObject({\n                max: config.max,\n                min: config.min,\n            });\n        }\n        get maxValue() {\n            return this.values.get('max');\n        }\n        get minValue() {\n            return this.values.get('min');\n        }\n        constrain(value) {\n            const max = this.values.get('max');\n            const min = this.values.get('min');\n            let result = value;\n            if (!isEmpty(min)) {\n                result = Math.max(result, min);\n            }\n            if (!isEmpty(max)) {\n                result = Math.min(result, max);\n            }\n            return result;\n        }\n    }\n\n    class StepConstraint {\n        constructor(step, origin = 0) {\n            this.step = step;\n            this.origin = origin;\n        }\n        constrain(value) {\n            const o = this.origin % this.step;\n            const r = Math.round((value - o) / this.step);\n            return o + r * this.step;\n        }\n    }\n\n    const className$j = ClassName('lst');\n    class ListView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.props_ = config.props;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$j());\n            config.viewProps.bindClassModifiers(this.element);\n            const selectElem = doc.createElement('select');\n            selectElem.classList.add(className$j('s'));\n            config.viewProps.bindDisabled(selectElem);\n            this.element.appendChild(selectElem);\n            this.selectElement = selectElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(className$j('m'));\n            markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            this.element.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value_ = config.value;\n            bindValueMap(this.props_, 'options', (opts) => {\n                removeChildElements(this.selectElement);\n                opts.forEach((item) => {\n                    const optionElem = doc.createElement('option');\n                    optionElem.textContent = item.text;\n                    this.selectElement.appendChild(optionElem);\n                });\n                this.update_();\n            });\n        }\n        update_() {\n            const values = this.props_.get('options').map((o) => o.value);\n            this.selectElement.selectedIndex = values.indexOf(this.value_.rawValue);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ListController {\n        constructor(doc, config) {\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ListView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.selectElement.addEventListener('change', this.onSelectChange_);\n        }\n        onSelectChange_(e) {\n            const selectElem = forceCast(e.currentTarget);\n            this.value.rawValue =\n                this.props.get('options')[selectElem.selectedIndex].value;\n        }\n    }\n\n    const className$i = ClassName('pop');\n    class PopupView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$i());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$i(undefined, 'v')));\n        }\n    }\n\n    class PopupController {\n        constructor(doc, config) {\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$h = ClassName('txt');\n    class TextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$h());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$h('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class TextController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n    }\n\n    function boolToString(value) {\n        return String(value);\n    }\n    function boolFromUnknown(value) {\n        if (value === 'false') {\n            return false;\n        }\n        return !!value;\n    }\n    function BooleanFormatter(value) {\n        return boolToString(value);\n    }\n\n    class NumberLiteralNode {\n        constructor(text) {\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2) => Math.pow(v1, v2),\n        '*': (v1, v2) => v1 * v2,\n        '/': (v1, v2) => v1 / v2,\n        '%': (v1, v2) => v1 % v2,\n        '+': (v1, v2) => v1 + v2,\n        '-': (v1, v2) => v1 - v2,\n        '<<': (v1, v2) => v1 << v2,\n        '>>': (v1, v2) => v1 >> v2,\n        '>>>': (v1, v2) => v1 >>> v2,\n        '&': (v1, v2) => v1 & v2,\n        '^': (v1, v2) => v1 ^ v2,\n        '|': (v1, v2) => v1 | v2,\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right) {\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected binary operator: '${this.operator}`);\n            }\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')',\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v) => v,\n        '-': (v) => -v,\n        '~': (v) => ~v,\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr) {\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected unary operator: '${this.operator}`);\n            }\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n        }\n    }\n\n    function combineReader(parsers) {\n        return (text, cursor) => {\n            for (let i = 0; i < parsers.length; i++) {\n                const result = parsers[i](text, cursor);\n                if (result !== '') {\n                    return result;\n                }\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') {\n            return ds;\n        }\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') {\n            return '';\n        }\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') {\n            return '';\n        }\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') {\n            return '';\n        }\n        const si = readSignedInteger(text, cursor);\n        if (si === '') {\n            return '';\n        }\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') {\n            return ch;\n        }\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') {\n            return '';\n        }\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') {\n            return '';\n        }\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3,\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') {\n            return '';\n        }\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') {\n            return '';\n        }\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') {\n            return '';\n        }\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') {\n            return '';\n        }\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') {\n            return '';\n        }\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') {\n            return '';\n        }\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral,\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral,\n    ]);\n\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') {\n            return null;\n        }\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor,\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') {\n            return null;\n        }\n        const expr = parseExpression(text, cursor);\n        if (!expr) {\n            return null;\n        }\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') {\n            return null;\n        }\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor,\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        var _a;\n        return ((_a = parseLiteral(text, cursor)) !== null && _a !== void 0 ? _a : parseParenthesizedExpression(text, cursor));\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) {\n            return expr;\n        }\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') {\n            return null;\n        }\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) {\n            return null;\n        }\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable),\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n        if (!op) {\n            return null;\n        }\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op,\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor) => {\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) {\n                return null;\n            }\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for (;;) {\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) {\n                    break;\n                }\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) {\n                    return null;\n                }\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr\n                ? {\n                    cursor: cursor,\n                    evaluable: expr,\n                }\n                : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        ['**'],\n        ['*', '/', '%'],\n        ['+', '-'],\n        ['<<', '>>>', '>>'],\n        ['&'],\n        ['^'],\n        ['|'],\n    ].reduce((parser, ops) => {\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) {\n            return null;\n        }\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) {\n            return null;\n        }\n        return expr.evaluable;\n    }\n\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    function numberToString(value) {\n        return String(value);\n    }\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    const innerFormatter = createNumberFormatter(0);\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n    function formatString(value) {\n        return value;\n    }\n\n    function connectValues({ primary, secondary, forward, backward, }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) {\n                return;\n            }\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true,\n            });\n        });\n    }\n\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp',\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight',\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n\n    function computeOffset$1(ev, elem) {\n        var _a, _b;\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((_a = (win && win.scrollX)) !== null && _a !== void 0 ? _a : 0) + rect.left),\n            y: ev.pageY - (((_b = (win && win.scrollY)) !== null && _b !== void 0 ? _b : 0) + rect.top),\n        };\n    }\n    class PointerHandler {\n        constructor(element) {\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_, {\n                passive: false,\n            });\n            element.addEventListener('touchmove', this.onTouchMove_, {\n                passive: true,\n            });\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height,\n                },\n                point: offset\n                    ? {\n                        x: offset.x,\n                        y: offset.y,\n                    }\n                    : null,\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n    }\n\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n    function loopRange(value, max) {\n        return ((value % max) + max) % max;\n    }\n\n    const className$g = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g(), className$g(undefined, 'num'));\n            if (config.arrayPosition) {\n                this.element.classList.add(className$g(undefined, config.arrayPosition));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$g('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$g());\n            this.inputElement.classList.add(className$g('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$g('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$g('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$g('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$g('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$g(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$g(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n            const adx = constrainRange(-aox, -4, +4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class NumberTextController {\n        constructor(doc, config) {\n            var _a;\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.sliderProps_ = (_a = config.sliderProps) !== null && _a !== void 0 ? _a : null;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        constrainValue_(value) {\n            var _a, _b;\n            const min = (_a = this.sliderProps_) === null || _a === void 0 ? void 0 : _a.get('minValue');\n            const max = (_b = this.sliderProps_) === null || _b === void 0 ? void 0 : _b.get('maxValue');\n            let v = value;\n            if (min !== undefined) {\n                v = Math.max(v, min);\n            }\n            if (max !== undefined) {\n                v = Math.min(v, max);\n            }\n            return v;\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = this.constrainValue_(parsedValue);\n            }\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.constrainValue_(this.value.rawValue + step), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.constrainValue_(this.originRawValue_ + dx * this.props.get('draggingScale'));\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false,\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true,\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n\n    const className$f = ClassName('sld');\n    class SliderView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$f());\n            config.viewProps.bindClassModifiers(this.element);\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$f('t'));\n            config.viewProps.bindTabIndex(trackElem);\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$f('k'));\n            this.trackElement.appendChild(knobElem);\n            this.knobElement = knobElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('minValue'), this.props_.get('maxValue'), 0, 100), 0, 100);\n            this.knobElement.style.width = `${p}%`;\n        }\n        onChange_() {\n            this.update_();\n        }\n    }\n\n    class SliderController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.props = config.props;\n            this.view = new SliderView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.trackElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n            this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('minValue'), this.props.get('maxValue')), opts);\n        }\n        onPointerDownOrMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$e = ClassName('sldtxt');\n    class SliderTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$e('s'));\n            this.sliderView_ = config.sliderView;\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$e('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n\n    class SliderTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sliderC_ = new SliderController(doc, {\n                baseStep: config.baseStep,\n                props: config.sliderProps,\n                value: config.value,\n                viewProps: this.viewProps,\n            });\n            this.textC_ = new NumberTextController(doc, {\n                baseStep: config.baseStep,\n                parser: config.parser,\n                props: config.textProps,\n                sliderProps: config.sliderProps,\n                value: config.value,\n                viewProps: config.viewProps,\n            });\n            this.view = new SliderTextView(doc, {\n                sliderView: this.sliderC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get sliderController() {\n            return this.sliderC_;\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    function parseListOptions(value) {\n        const p = ParamsParsers;\n        if (Array.isArray(value)) {\n            return p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            }))(value).value;\n        }\n        if (typeof value === 'object') {\n            return p.required.raw(value)\n                .value;\n        }\n        return undefined;\n    }\n    function parsePickerLayout(value) {\n        if (value === 'inline' || value === 'popup') {\n            return value;\n        }\n        return undefined;\n    }\n    function parsePointDimensionParams(value) {\n        const p = ParamsParsers;\n        return p.required.object({\n            max: p.optional.number,\n            min: p.optional.number,\n            step: p.optional.number,\n        })(value).value;\n    }\n    function normalizeListOptions(options) {\n        if (Array.isArray(options)) {\n            return options;\n        }\n        const items = [];\n        Object.keys(options).forEach((text) => {\n            items.push({ text: text, value: options[text] });\n        });\n        return items;\n    }\n    function createListConstraint(options) {\n        return !isEmpty(options)\n            ? new ListConstraint(normalizeListOptions(forceCast(options)))\n            : null;\n    }\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n\n    const className$d = ClassName('ckb');\n    class CheckboxView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$d());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className$d('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$d('i'));\n            inputElem.type = 'checkbox';\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.viewProps.bindDisabled(this.inputElement);\n            const wrapperElem = doc.createElement('div');\n            wrapperElem.classList.add(className$d('w'));\n            labelElem.appendChild(wrapperElem);\n            const markElem = createSvgIconElement(doc, 'check');\n            wrapperElem.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            this.inputElement.checked = this.value.rawValue;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class CheckboxController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CheckboxView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            this.value.rawValue = inputElem.checked;\n        }\n    }\n\n    function createConstraint$6(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const BooleanInputPlugin = {\n        id: 'input-bool',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n            constraint: (args) => createConstraint$6(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) {\n                return new ListController(doc, {\n                    props: new ValueMap({\n                        options: lc.values.value('options'),\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new CheckboxController(doc, {\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className$c = ClassName('col');\n    class ColorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.foldable.bindExpandedClass(this.element, className$c(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$c(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$c('h'));\n            this.element.appendChild(headElem);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$c('s'));\n            headElem.appendChild(swatchElem);\n            this.swatchElement = swatchElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$c('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$c('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    function rgbToHslInt(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const c = cmax - cmin;\n        let h = 0;\n        let s = 0;\n        const l = (cmin + cmax) / 2;\n        if (c !== 0) {\n            s = c / (1 - Math.abs(cmax + cmin - 1));\n            if (rp === cmax) {\n                h = (gp - bp) / c;\n            }\n            else if (gp === cmax) {\n                h = 2 + (bp - rp) / c;\n            }\n            else {\n                h = 4 + (rp - gp) / c;\n            }\n            h = h / 6 + (h < 0 ? 1 : 0);\n        }\n        return [h * 360, s * 100, l * 100];\n    }\n    function hslToRgbInt(h, s, l) {\n        const hp = ((h % 360) + 360) % 360;\n        const sp = constrainRange(s / 100, 0, 1);\n        const lp = constrainRange(l / 100, 0, 1);\n        const c = (1 - Math.abs(2 * lp - 1)) * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = lp - c / 2;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function rgbToHsvInt(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const d = cmax - cmin;\n        let h;\n        if (d === 0) {\n            h = 0;\n        }\n        else if (cmax === rp) {\n            h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n        }\n        else if (cmax === gp) {\n            h = 60 * ((bp - rp) / d + 2);\n        }\n        else {\n            h = 60 * ((rp - gp) / d + 4);\n        }\n        const s = cmax === 0 ? 0 : d / cmax;\n        const v = cmax;\n        return [h, s * 100, v * 100];\n    }\n    function hsvToRgbInt(h, s, v) {\n        const hp = loopRange(h, 360);\n        const sp = constrainRange(s / 100, 0, 1);\n        const vp = constrainRange(v / 100, 0, 1);\n        const c = vp * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = vp - c;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function hslToHsvInt(h, s, l) {\n        const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n        return [\n            h,\n            sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n            l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n        ];\n    }\n    function hsvToHslInt(h, s, v) {\n        const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n        return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n    }\n    function removeAlphaComponent(comps) {\n        return [comps[0], comps[1], comps[2]];\n    }\n    function appendAlphaComponent(comps, alpha) {\n        return [comps[0], comps[1], comps[2], alpha];\n    }\n    const MODE_CONVERTER_MAP = {\n        hsl: {\n            hsl: (h, s, l) => [h, s, l],\n            hsv: hslToHsvInt,\n            rgb: hslToRgbInt,\n        },\n        hsv: {\n            hsl: hsvToHslInt,\n            hsv: (h, s, v) => [h, s, v],\n            rgb: hsvToRgbInt,\n        },\n        rgb: {\n            hsl: rgbToHslInt,\n            hsv: rgbToHsvInt,\n            rgb: (r, g, b) => [r, g, b],\n        },\n    };\n    function getColorMaxComponents(mode, type) {\n        return [\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 360,\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n        ];\n    }\n    function loopHueRange(hue, max) {\n        return hue === max ? max : loopRange(hue, max);\n    }\n    function constrainColorComponents(components, mode, type) {\n        var _a;\n        const ms = getColorMaxComponents(mode, type);\n        return [\n            mode === 'rgb'\n                ? constrainRange(components[0], 0, ms[0])\n                : loopHueRange(components[0], ms[0]),\n            constrainRange(components[1], 0, ms[1]),\n            constrainRange(components[2], 0, ms[2]),\n            constrainRange((_a = components[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n        ];\n    }\n    function convertColorType(comps, mode, from, to) {\n        const fms = getColorMaxComponents(mode, from);\n        const tms = getColorMaxComponents(mode, to);\n        return comps.map((c, index) => (c / fms[index]) * tms[index]);\n    }\n    function convertColor(components, from, to) {\n        const intComps = convertColorType(components, from.mode, from.type, 'int');\n        const result = MODE_CONVERTER_MAP[from.mode][to.mode](...intComps);\n        return convertColorType(result, to.mode, 'int', to.type);\n    }\n\n    function isRgbColorComponent(obj, key) {\n        if (typeof obj !== 'object' || isEmpty(obj)) {\n            return false;\n        }\n        return key in obj && typeof obj[key] === 'number';\n    }\n    class Color {\n        static black(type = 'int') {\n            return new Color([0, 0, 0], 'rgb', type);\n        }\n        static fromObject(obj, type = 'int') {\n            const comps = 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n            return new Color(comps, 'rgb', type);\n        }\n        static toRgbaObject(color, type = 'int') {\n            return color.toRgbaObject(type);\n        }\n        static isRgbColorObject(obj) {\n            return (isRgbColorComponent(obj, 'r') &&\n                isRgbColorComponent(obj, 'g') &&\n                isRgbColorComponent(obj, 'b'));\n        }\n        static isRgbaColorObject(obj) {\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n        }\n        static isColorObject(obj) {\n            return this.isRgbColorObject(obj);\n        }\n        static equals(v1, v2) {\n            if (v1.mode !== v2.mode) {\n                return false;\n            }\n            const comps1 = v1.comps_;\n            const comps2 = v2.comps_;\n            for (let i = 0; i < comps1.length; i++) {\n                if (comps1[i] !== comps2[i]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        constructor(comps, mode, type = 'int') {\n            this.mode = mode;\n            this.type = type;\n            this.comps_ = constrainColorComponents(comps, mode, type);\n        }\n        getComponents(opt_mode, type = 'int') {\n            return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), { mode: this.mode, type: this.type }, { mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode, type }), this.comps_[3]);\n        }\n        toRgbaObject(type = 'int') {\n            const rgbComps = this.getComponents('rgb', type);\n            return {\n                r: rgbComps[0],\n                g: rgbComps[1],\n                b: rgbComps[2],\n                a: rgbComps[3],\n            };\n        }\n    }\n\n    const className$b = ClassName('colp');\n    class ColorPickerView {\n        constructor(doc, config) {\n            this.alphaViews_ = null;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            config.viewProps.bindClassModifiers(this.element);\n            const hsvElem = doc.createElement('div');\n            hsvElem.classList.add(className$b('hsv'));\n            const svElem = doc.createElement('div');\n            svElem.classList.add(className$b('sv'));\n            this.svPaletteView_ = config.svPaletteView;\n            svElem.appendChild(this.svPaletteView_.element);\n            hsvElem.appendChild(svElem);\n            const hElem = doc.createElement('div');\n            hElem.classList.add(className$b('h'));\n            this.hPaletteView_ = config.hPaletteView;\n            hElem.appendChild(this.hPaletteView_.element);\n            hsvElem.appendChild(hElem);\n            this.element.appendChild(hsvElem);\n            const rgbElem = doc.createElement('div');\n            rgbElem.classList.add(className$b('rgb'));\n            this.textView_ = config.textView;\n            rgbElem.appendChild(this.textView_.element);\n            this.element.appendChild(rgbElem);\n            if (config.alphaViews) {\n                this.alphaViews_ = {\n                    palette: config.alphaViews.palette,\n                    text: config.alphaViews.text,\n                };\n                const aElem = doc.createElement('div');\n                aElem.classList.add(className$b('a'));\n                const apElem = doc.createElement('div');\n                apElem.classList.add(className$b('ap'));\n                apElem.appendChild(this.alphaViews_.palette.element);\n                aElem.appendChild(apElem);\n                const atElem = doc.createElement('div');\n                atElem.classList.add(className$b('at'));\n                atElem.appendChild(this.alphaViews_.text.element);\n                aElem.appendChild(atElem);\n                this.element.appendChild(aElem);\n            }\n        }\n        get allFocusableElements() {\n            const elems = [\n                this.svPaletteView_.element,\n                this.hPaletteView_.element,\n                this.textView_.modeSelectElement,\n                ...this.textView_.textViews.map((v) => v.inputElement),\n            ];\n            if (this.alphaViews_) {\n                elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n            }\n            return elems;\n        }\n    }\n\n    function parseColorType(value) {\n        return value === 'int' ? 'int' : value === 'float' ? 'float' : undefined;\n    }\n    function parseColorInputParams(params) {\n        const p = ParamsParsers;\n        return parseParams(params, {\n            alpha: p.optional.boolean,\n            color: p.optional.object({\n                alpha: p.optional.boolean,\n                type: p.optional.custom(parseColorType),\n            }),\n            expanded: p.optional.boolean,\n            picker: p.optional.custom(parsePickerLayout),\n        });\n    }\n    function getBaseStepForColor(forAlpha) {\n        return forAlpha ? 0.1 : 1;\n    }\n    function extractColorType(params) {\n        var _a;\n        return (_a = params.color) === null || _a === void 0 ? void 0 : _a.type;\n    }\n\n    function equalsStringColorFormat(f1, f2) {\n        return (f1.alpha === f2.alpha &&\n            f1.mode === f2.mode &&\n            f1.notation === f2.notation &&\n            f1.type === f2.type);\n    }\n    function parseCssNumberOrPercentage(text, maxValue) {\n        const m = text.match(/^(.+)%$/);\n        if (!m) {\n            return Math.min(parseFloat(text), maxValue);\n        }\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\n    }\n    const ANGLE_TO_DEG_MAP = {\n        deg: (angle) => angle,\n        grad: (angle) => (angle * 360) / 400,\n        rad: (angle) => (angle * 360) / (2 * Math.PI),\n        turn: (angle) => angle * 360,\n    };\n    function parseCssNumberOrAngle(text) {\n        const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n        if (!m) {\n            return parseFloat(text);\n        }\n        const angle = parseFloat(m[1]);\n        const unit = m[2];\n        return ANGLE_TO_DEG_MAP[unit](angle);\n    }\n    function parseFunctionalRgbColorComponents(text) {\n        const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrPercentage(m[1], 255),\n            parseCssNumberOrPercentage(m[2], 255),\n            parseCssNumberOrPercentage(m[3], 255),\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n            return null;\n        }\n        return comps;\n    }\n    function createFunctionalRgbColorParser(type) {\n        return (text) => {\n            const comps = parseFunctionalRgbColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseFunctionalRgbaColorComponents(text) {\n        const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrPercentage(m[1], 255),\n            parseCssNumberOrPercentage(m[2], 255),\n            parseCssNumberOrPercentage(m[3], 255),\n            parseCssNumberOrPercentage(m[4], 1),\n        ];\n        if (isNaN(comps[0]) ||\n            isNaN(comps[1]) ||\n            isNaN(comps[2]) ||\n            isNaN(comps[3])) {\n            return null;\n        }\n        return comps;\n    }\n    function createFunctionalRgbaColorParser(type) {\n        return (text) => {\n            const comps = parseFunctionalRgbaColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseHslColorComponents(text) {\n        const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrAngle(m[1]),\n            parseCssNumberOrPercentage(m[2], 100),\n            parseCssNumberOrPercentage(m[3], 100),\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n            return null;\n        }\n        return comps;\n    }\n    function createHslColorParser(type) {\n        return (text) => {\n            const comps = parseHslColorComponents(text);\n            return comps ? new Color(comps, 'hsl', type) : null;\n        };\n    }\n    function parseHslaColorComponents(text) {\n        const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrAngle(m[1]),\n            parseCssNumberOrPercentage(m[2], 100),\n            parseCssNumberOrPercentage(m[3], 100),\n            parseCssNumberOrPercentage(m[4], 1),\n        ];\n        if (isNaN(comps[0]) ||\n            isNaN(comps[1]) ||\n            isNaN(comps[2]) ||\n            isNaN(comps[3])) {\n            return null;\n        }\n        return comps;\n    }\n    function createHslaColorParser(type) {\n        return (text) => {\n            const comps = parseHslaColorComponents(text);\n            return comps ? new Color(comps, 'hsl', type) : null;\n        };\n    }\n    function parseHexRgbColorComponents(text) {\n        const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n        if (mRgb) {\n            return [\n                parseInt(mRgb[1] + mRgb[1], 16),\n                parseInt(mRgb[2] + mRgb[2], 16),\n                parseInt(mRgb[3] + mRgb[3], 16),\n            ];\n        }\n        const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n        if (mRrggbb) {\n            return [\n                parseInt(mRrggbb[1], 16),\n                parseInt(mRrggbb[2], 16),\n                parseInt(mRrggbb[3], 16),\n            ];\n        }\n        return null;\n    }\n    function parseHexRgbColor(text) {\n        const comps = parseHexRgbColorComponents(text);\n        return comps ? new Color(comps, 'rgb', 'int') : null;\n    }\n    function parseHexRgbaColorComponents(text) {\n        const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n        if (mRgb) {\n            return [\n                parseInt(mRgb[1] + mRgb[1], 16),\n                parseInt(mRgb[2] + mRgb[2], 16),\n                parseInt(mRgb[3] + mRgb[3], 16),\n                mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n            ];\n        }\n        const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n        if (mRrggbb) {\n            return [\n                parseInt(mRrggbb[1], 16),\n                parseInt(mRrggbb[2], 16),\n                parseInt(mRrggbb[3], 16),\n                mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n            ];\n        }\n        return null;\n    }\n    function parseHexRgbaColor(text) {\n        const comps = parseHexRgbaColorComponents(text);\n        return comps ? new Color(comps, 'rgb', 'int') : null;\n    }\n    function parseObjectRgbColorComponents(text) {\n        const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseFloat(m[1]),\n            parseFloat(m[2]),\n            parseFloat(m[3]),\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n            return null;\n        }\n        return comps;\n    }\n    function createObjectRgbColorParser(type) {\n        return (text) => {\n            const comps = parseObjectRgbColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseObjectRgbaColorComponents(text) {\n        const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*a\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseFloat(m[1]),\n            parseFloat(m[2]),\n            parseFloat(m[3]),\n            parseFloat(m[4]),\n        ];\n        if (isNaN(comps[0]) ||\n            isNaN(comps[1]) ||\n            isNaN(comps[2]) ||\n            isNaN(comps[3])) {\n            return null;\n        }\n        return comps;\n    }\n    function createObjectRgbaColorParser(type) {\n        return (text) => {\n            const comps = parseObjectRgbaColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    const PARSER_AND_RESULT = [\n        {\n            parser: parseHexRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'hex',\n            },\n        },\n        {\n            parser: parseHexRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'hex',\n            },\n        },\n        {\n            parser: parseFunctionalRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseFunctionalRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseHslColorComponents,\n            result: {\n                alpha: false,\n                mode: 'hsl',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseHslaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'hsl',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseObjectRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'object',\n            },\n        },\n        {\n            parser: parseObjectRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'object',\n            },\n        },\n    ];\n    function detectStringColor(text) {\n        return PARSER_AND_RESULT.reduce((prev, { parser, result: detection }) => {\n            if (prev) {\n                return prev;\n            }\n            return parser(text) ? detection : null;\n        }, null);\n    }\n    function detectStringColorFormat(text, type = 'int') {\n        const r = detectStringColor(text);\n        if (!r) {\n            return null;\n        }\n        if (r.notation === 'hex' && type !== 'float') {\n            return Object.assign(Object.assign({}, r), { type: 'int' });\n        }\n        if (r.notation === 'func') {\n            return Object.assign(Object.assign({}, r), { type: type });\n        }\n        return null;\n    }\n    const TYPE_TO_PARSERS = {\n        int: [\n            parseHexRgbColor,\n            parseHexRgbaColor,\n            createFunctionalRgbColorParser('int'),\n            createFunctionalRgbaColorParser('int'),\n            createHslColorParser('int'),\n            createHslaColorParser('int'),\n            createObjectRgbColorParser('int'),\n            createObjectRgbaColorParser('int'),\n        ],\n        float: [\n            createFunctionalRgbColorParser('float'),\n            createFunctionalRgbaColorParser('float'),\n            createHslColorParser('float'),\n            createHslaColorParser('float'),\n            createObjectRgbColorParser('float'),\n            createObjectRgbaColorParser('float'),\n        ],\n    };\n    function createColorStringBindingReader(type) {\n        const parsers = TYPE_TO_PARSERS[type];\n        return (value) => {\n            if (typeof value !== 'string') {\n                return Color.black(type);\n            }\n            const result = parsers.reduce((prev, parser) => {\n                if (prev) {\n                    return prev;\n                }\n                return parser(value);\n            }, null);\n            return result !== null && result !== void 0 ? result : Color.black(type);\n        };\n    }\n    function createColorStringParser(type) {\n        const parsers = TYPE_TO_PARSERS[type];\n        return (value) => {\n            return parsers.reduce((prev, parser) => {\n                if (prev) {\n                    return prev;\n                }\n                return parser(value);\n            }, null);\n        };\n    }\n    function zerofill(comp) {\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? `0${hex}` : hex;\n    }\n    function colorToHexRgbString(value, prefix = '#') {\n        const hexes = removeAlphaComponent(value.getComponents('rgb'))\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToHexRgbaString(value, prefix = '#') {\n        const rgbaComps = value.getComponents('rgb');\n        const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToFunctionalRgbString(value, opt_type) {\n        const formatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\n        const comps = removeAlphaComponent(value.getComponents('rgb', opt_type)).map((comp) => formatter(comp));\n        return `rgb(${comps.join(', ')})`;\n    }\n    function createFunctionalRgbColorFormatter(type) {\n        return (value) => {\n            return colorToFunctionalRgbString(value, type);\n        };\n    }\n    function colorToFunctionalRgbaString(value, opt_type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\n        const comps = value.getComponents('rgb', opt_type).map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return `rgba(${comps.join(', ')})`;\n    }\n    function createFunctionalRgbaColorFormatter(type) {\n        return (value) => {\n            return colorToFunctionalRgbaString(value, type);\n        };\n    }\n    function colorToFunctionalHslString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n        ];\n        const comps = removeAlphaComponent(value.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n        return `hsl(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslaString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2),\n        ];\n        const comps = value\n            .getComponents('hsl')\n            .map((comp, index) => formatters[index](comp));\n        return `hsla(${comps.join(', ')})`;\n    }\n    function colorToObjectRgbString(value, type) {\n        const formatter = createNumberFormatter(type === 'float' ? 2 : 0);\n        const names = ['r', 'g', 'b'];\n        const comps = removeAlphaComponent(value.getComponents('rgb', type)).map((comp, index) => `${names[index]}: ${formatter(comp)}`);\n        return `{${comps.join(', ')}}`;\n    }\n    function createObjectRgbColorFormatter(type) {\n        return (value) => colorToObjectRgbString(value, type);\n    }\n    function colorToObjectRgbaString(value, type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(type === 'float' ? 2 : 0);\n        const names = ['r', 'g', 'b', 'a'];\n        const comps = value.getComponents('rgb', type).map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return `${names[index]}: ${formatter(comp)}`;\n        });\n        return `{${comps.join(', ')}}`;\n    }\n    function createObjectRgbaColorFormatter(type) {\n        return (value) => colorToObjectRgbaString(value, type);\n    }\n    const FORMAT_AND_STRINGIFIERS = [\n        {\n            format: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'hex',\n                type: 'int',\n            },\n            stringifier: colorToHexRgbString,\n        },\n        {\n            format: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'hex',\n                type: 'int',\n            },\n            stringifier: colorToHexRgbaString,\n        },\n        {\n            format: {\n                alpha: false,\n                mode: 'hsl',\n                notation: 'func',\n                type: 'int',\n            },\n            stringifier: colorToFunctionalHslString,\n        },\n        {\n            format: {\n                alpha: true,\n                mode: 'hsl',\n                notation: 'func',\n                type: 'int',\n            },\n            stringifier: colorToFunctionalHslaString,\n        },\n        ...['int', 'float'].reduce((prev, type) => {\n            return [\n                ...prev,\n                {\n                    format: {\n                        alpha: false,\n                        mode: 'rgb',\n                        notation: 'func',\n                        type: type,\n                    },\n                    stringifier: createFunctionalRgbColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: 'rgb',\n                        notation: 'func',\n                        type: type,\n                    },\n                    stringifier: createFunctionalRgbaColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: false,\n                        mode: 'rgb',\n                        notation: 'object',\n                        type: type,\n                    },\n                    stringifier: createObjectRgbColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: 'rgb',\n                        notation: 'object',\n                        type: type,\n                    },\n                    stringifier: createObjectRgbaColorFormatter(type),\n                },\n            ];\n        }, []),\n    ];\n    function findColorStringifier(format) {\n        return FORMAT_AND_STRINGIFIERS.reduce((prev, fas) => {\n            if (prev) {\n                return prev;\n            }\n            return equalsStringColorFormat(fas.format, format)\n                ? fas.stringifier\n                : null;\n        }, null);\n    }\n\n    const className$a = ClassName('apl');\n    class APaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$a('b'));\n            this.element.appendChild(barElem);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$a('c'));\n            barElem.appendChild(colorElem);\n            this.colorElem_ = colorElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$a('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$a('p'));\n            this.markerElem_.appendChild(previewElem);\n            this.previewElem_ = previewElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const rgbaComps = c.getComponents('rgb');\n            const leftColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n            const rightColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n            const gradientComps = [\n                'to right',\n                colorToFunctionalRgbaString(leftColor),\n                colorToFunctionalRgbaString(rightColor),\n            ];\n            this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n            const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class APaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new APaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const alpha = d.point.x / d.bounds.width;\n            const c = this.value.rawValue;\n            const [h, s, v] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, alpha], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, a + step], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$9 = ClassName('coltxt');\n    function createModeSelectElement(doc) {\n        const selectElem = doc.createElement('select');\n        const items = [\n            { text: 'RGB', value: 'rgb' },\n            { text: 'HSL', value: 'hsl' },\n            { text: 'HSV', value: 'hsv' },\n        ];\n        selectElem.appendChild(items.reduce((frag, item) => {\n            const optElem = doc.createElement('option');\n            optElem.textContent = item.text;\n            optElem.value = item.value;\n            frag.appendChild(optElem);\n            return frag;\n        }, doc.createDocumentFragment()));\n        return selectElem;\n    }\n    class ColorTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            config.viewProps.bindClassModifiers(this.element);\n            const modeElem = doc.createElement('div');\n            modeElem.classList.add(className$9('m'));\n            this.modeElem_ = createModeSelectElement(doc);\n            this.modeElem_.classList.add(className$9('ms'));\n            modeElem.appendChild(this.modeSelectElement);\n            config.viewProps.bindDisabled(this.modeElem_);\n            const modeMarkerElem = doc.createElement('div');\n            modeMarkerElem.classList.add(className$9('mm'));\n            modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            modeElem.appendChild(modeMarkerElem);\n            this.element.appendChild(modeElem);\n            const textsElem = doc.createElement('div');\n            textsElem.classList.add(className$9('w'));\n            this.element.appendChild(textsElem);\n            this.textsElem_ = textsElem;\n            this.textViews_ = config.textViews;\n            this.applyTextViews_();\n            bindValue(config.colorMode, (mode) => {\n                this.modeElem_.value = mode;\n            });\n        }\n        get modeSelectElement() {\n            return this.modeElem_;\n        }\n        get textViews() {\n            return this.textViews_;\n        }\n        set textViews(textViews) {\n            this.textViews_ = textViews;\n            this.applyTextViews_();\n        }\n        applyTextViews_() {\n            removeChildElements(this.textsElem_);\n            const doc = this.element.ownerDocument;\n            this.textViews_.forEach((v) => {\n                const compElem = doc.createElement('div');\n                compElem.classList.add(className$9('c'));\n                compElem.appendChild(v.element);\n                this.textsElem_.appendChild(compElem);\n            });\n        }\n    }\n\n    function createFormatter$2(type) {\n        return createNumberFormatter(type === 'float' ? 2 : 0);\n    }\n    function createConstraint$5(mode, type, index) {\n        const max = getColorMaxComponents(mode, type)[index];\n        return new DefiniteRangeConstraint({\n            min: 0,\n            max: max,\n        });\n    }\n    function createComponentController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n            baseStep: getBaseStepForColor(false),\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                draggingScale: config.colorType === 'float' ? 0.01 : 1,\n                formatter: createFormatter$2(config.colorType),\n            }),\n            value: createValue(0, {\n                constraint: createConstraint$5(config.colorMode, config.colorType, index),\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class ColorTextController {\n        constructor(doc, config) {\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n            this.colorType_ = config.colorType;\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.colorMode = createValue(this.value.rawValue.mode);\n            this.ccs_ = this.createComponentControllers_(doc);\n            this.view = new ColorTextView(doc, {\n                colorMode: this.colorMode,\n                textViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n                viewProps: this.viewProps,\n            });\n            this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n        }\n        createComponentControllers_(doc) {\n            const cc = {\n                colorMode: this.colorMode.rawValue,\n                colorType: this.colorType_,\n                parser: this.parser_,\n                viewProps: this.viewProps,\n            };\n            const ccs = [\n                createComponentController(doc, cc, 0),\n                createComponentController(doc, cc, 1),\n                createComponentController(doc, cc, 2),\n            ];\n            ccs.forEach((cs, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: cs.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents(this.colorMode.rawValue, this.colorType_)[index];\n                    },\n                    backward: (p, s) => {\n                        const pickedMode = this.colorMode.rawValue;\n                        const comps = p.rawValue.getComponents(pickedMode, this.colorType_);\n                        comps[index] = s.rawValue;\n                        return new Color(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode, this.colorType_);\n                    },\n                });\n            });\n            return ccs;\n        }\n        onModeSelectChange_(ev) {\n            const selectElem = ev.currentTarget;\n            this.colorMode.rawValue = selectElem.value;\n            this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n            this.view.textViews = [\n                this.ccs_[0].view,\n                this.ccs_[1].view,\n                this.ccs_[2].view,\n            ];\n        }\n    }\n\n    const className$8 = ClassName('hpl');\n    class HPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$8('c'));\n            this.element.appendChild(colorElem);\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$8('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const [h] = c.getComponents('hsv');\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([h, 100, 100], 'hsv'));\n            const left = mapRange(h, 0, 360, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class HPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new HPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 360);\n            const c = this.value.rawValue;\n            const [, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([hue, s, v, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h + step, s, v, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$7 = ClassName('svp');\n    const CANVAS_RESOL = 64;\n    class SvPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const canvasElem = doc.createElement('canvas');\n            canvasElem.height = CANVAS_RESOL;\n            canvasElem.width = CANVAS_RESOL;\n            canvasElem.classList.add(className$7('c'));\n            this.element.appendChild(canvasElem);\n            this.canvasElement = canvasElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$7('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const ctx = getCanvasContext(this.canvasElement);\n            if (!ctx) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const hsvComps = c.getComponents('hsv');\n            const width = this.canvasElement.width;\n            const height = this.canvasElement.height;\n            const imgData = ctx.getImageData(0, 0, width, height);\n            const data = imgData.data;\n            for (let iy = 0; iy < height; iy++) {\n                for (let ix = 0; ix < width; ix++) {\n                    const s = mapRange(ix, 0, width, 0, 100);\n                    const v = mapRange(iy, 0, height, 100, 0);\n                    const rgbComps = hsvToRgbInt(hsvComps[0], s, v);\n                    const i = (iy * width + ix) * 4;\n                    data[i] = rgbComps[0];\n                    data[i + 1] = rgbComps[1];\n                    data[i + 2] = rgbComps[2];\n                    data[i + 3] = 255;\n                }\n            }\n            ctx.putImageData(imgData, 0, 0);\n            const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n            const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n            this.markerElem_.style.top = `${top}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class SvPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SvPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n            const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n            const [h, , , a] = this.value.rawValue.getComponents('hsv');\n            this.value.setRawValue(new Color([h, saturation, value, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(new Color([h, s + ds, v + dv, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class ColorPickerController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.hPaletteC_ = new HPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.svPaletteC_ = new SvPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.alphaIcs_ = config.supportsAlpha\n                ? {\n                    palette: new APaletteController(doc, {\n                        value: this.value,\n                        viewProps: this.viewProps,\n                    }),\n                    text: new NumberTextController(doc, {\n                        parser: parseNumber,\n                        baseStep: 0.1,\n                        props: ValueMap.fromObject({\n                            draggingScale: 0.01,\n                            formatter: createNumberFormatter(2),\n                        }),\n                        value: createValue(0, {\n                            constraint: new DefiniteRangeConstraint({ min: 0, max: 1 }),\n                        }),\n                        viewProps: this.viewProps,\n                    }),\n                }\n                : null;\n            if (this.alphaIcs_) {\n                connectValues({\n                    primary: this.value,\n                    secondary: this.alphaIcs_.text.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents()[3];\n                    },\n                    backward: (p, s) => {\n                        const comps = p.rawValue.getComponents();\n                        comps[3] = s.rawValue;\n                        return new Color(comps, p.rawValue.mode);\n                    },\n                });\n            }\n            this.textC_ = new ColorTextController(doc, {\n                colorType: config.colorType,\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorPickerView(doc, {\n                alphaViews: this.alphaIcs_\n                    ? {\n                        palette: this.alphaIcs_.palette.view,\n                        text: this.alphaIcs_.text.view,\n                    }\n                    : null,\n                hPaletteView: this.hPaletteC_.view,\n                supportsAlpha: config.supportsAlpha,\n                svPaletteView: this.svPaletteC_.view,\n                textView: this.textC_.view,\n                viewProps: this.viewProps,\n            });\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    const className$6 = ClassName('colsw');\n    class ColorSwatchView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$6('sw'));\n            this.element.appendChild(swatchElem);\n            this.swatchElem_ = swatchElem;\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$6('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            this.update_();\n        }\n        update_() {\n            const value = this.value.rawValue;\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ColorSwatchController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ColorSwatchView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    class ColorController {\n        constructor(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.swatchC_ = new ColorSwatchController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            const buttonElem = this.swatchC_.view.buttonElement;\n            buttonElem.addEventListener('blur', this.onButtonBlur_);\n            buttonElem.addEventListener('click', this.onButtonClick_);\n            this.textC_ = new TextController(doc, {\n                parser: config.parser,\n                props: ValueMap.fromObject({\n                    formatter: config.formatter,\n                }),\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout,\n            });\n            this.view.swatchElement.appendChild(this.swatchC_.view.element);\n            this.view.textElement.appendChild(this.textC_.view.element);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const pickerC = new ColorPickerController(doc, {\n                colorType: config.colorType,\n                supportsAlpha: config.supportsAlpha,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            pickerC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(pickerC.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        get textController() {\n            return this.textC_;\n        }\n        onButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.swatchC_.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.swatchC_.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function colorFromObject(value, opt_type) {\n        if (Color.isColorObject(value)) {\n            return Color.fromObject(value, opt_type);\n        }\n        return Color.black(opt_type);\n    }\n    function colorToRgbNumber(value) {\n        return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n            return (result << 8) | (Math.floor(comp) & 0xff);\n        }, 0);\n    }\n    function colorToRgbaNumber(value) {\n        return (value.getComponents('rgb').reduce((result, comp, index) => {\n            const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n            return (result << 8) | hex;\n        }, 0) >>> 0);\n    }\n    function numberToRgbColor(num) {\n        return new Color([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n    }\n    function numberToRgbaColor(num) {\n        return new Color([\n            (num >> 24) & 0xff,\n            (num >> 16) & 0xff,\n            (num >> 8) & 0xff,\n            mapRange(num & 0xff, 0, 255, 0, 1),\n        ], 'rgb');\n    }\n    function colorFromRgbNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbColor(value);\n    }\n    function colorFromRgbaNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbaColor(value);\n    }\n\n    function createColorStringWriter(format) {\n        const stringify = findColorStringifier(format);\n        return stringify\n            ? (target, value) => {\n                writePrimitive(target, stringify(value));\n            }\n            : null;\n    }\n    function createColorNumberWriter(supportsAlpha) {\n        const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n        return (target, value) => {\n            writePrimitive(target, colorToNumber(value));\n        };\n    }\n    function writeRgbaColorObject(target, value, opt_type) {\n        const obj = value.toRgbaObject(opt_type);\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n        target.writeProperty('a', obj.a);\n    }\n    function writeRgbColorObject(target, value, opt_type) {\n        const obj = value.toRgbaObject(opt_type);\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n    }\n    function createColorObjectWriter(supportsAlpha, opt_type) {\n        return (target, inValue) => {\n            if (supportsAlpha) {\n                writeRgbaColorObject(target, inValue, opt_type);\n            }\n            else {\n                writeRgbColorObject(target, inValue, opt_type);\n            }\n        };\n    }\n\n    function shouldSupportAlpha$1(inputParams) {\n        var _a;\n        if ((inputParams === null || inputParams === void 0 ? void 0 : inputParams.alpha) || ((_a = inputParams === null || inputParams === void 0 ? void 0 : inputParams.color) === null || _a === void 0 ? void 0 : _a.alpha)) {\n            return true;\n        }\n        return false;\n    }\n    function createFormatter$1(supportsAlpha) {\n        return supportsAlpha\n            ? (v) => colorToHexRgbaString(v, '0x')\n            : (v) => colorToHexRgbString(v, '0x');\n    }\n    function isForColor(params) {\n        if ('color' in params) {\n            return true;\n        }\n        if ('view' in params && params.view === 'color') {\n            return true;\n        }\n        return false;\n    }\n    const NumberColorInputPlugin = {\n        id: 'input-color-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            if (!isForColor(params)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => {\n                return shouldSupportAlpha$1(args.params)\n                    ? colorFromRgbaNumber\n                    : colorFromRgbNumber;\n            },\n            equals: Color.equals,\n            writer: (args) => {\n                return createColorNumberWriter(shouldSupportAlpha$1(args.params));\n            },\n        },\n        controller: (args) => {\n            const supportsAlpha = shouldSupportAlpha$1(args.params);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                colorType: 'int',\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createFormatter$1(supportsAlpha),\n                parser: createColorStringParser('int'),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function shouldSupportAlpha(initialValue) {\n        return Color.isRgbaColorObject(initialValue);\n    }\n    function createColorObjectReader(opt_type) {\n        return (value) => {\n            return colorFromObject(value, opt_type);\n        };\n    }\n    function createColorObjectFormatter(supportsAlpha, type) {\n        return (value) => {\n            if (supportsAlpha) {\n                return colorToObjectRgbaString(value, type);\n            }\n            return colorToObjectRgbString(value, type);\n        };\n    }\n    const ObjectColorInputPlugin = {\n        id: 'input-color-object',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Color.isColorObject(value)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => createColorObjectReader(extractColorType(args.params)),\n            equals: Color.equals,\n            writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue), extractColorType(args.params)),\n        },\n        controller: (args) => {\n            var _a;\n            const supportsAlpha = Color.isRgbaColorObject(args.initialValue);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            const type = (_a = extractColorType(args.params)) !== null && _a !== void 0 ? _a : 'int';\n            return new ColorController(args.document, {\n                colorType: type,\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createColorObjectFormatter(supportsAlpha, type),\n                parser: createColorStringParser(type),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const StringColorInputPlugin = {\n        id: 'input-color-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            if ('view' in params && params.view === 'text') {\n                return null;\n            }\n            const format = detectStringColorFormat(value, extractColorType(params));\n            if (!format) {\n                return null;\n            }\n            const stringifier = findColorStringifier(format);\n            if (!stringifier) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => { var _a; return createColorStringBindingReader((_a = extractColorType(args.params)) !== null && _a !== void 0 ? _a : 'int'); },\n            equals: Color.equals,\n            writer: (args) => {\n                const format = detectStringColorFormat(args.initialValue, extractColorType(args.params));\n                if (!format) {\n                    throw TpError.shouldNeverHappen();\n                }\n                const writer = createColorStringWriter(format);\n                if (!writer) {\n                    throw TpError.notBindable();\n                }\n                return writer;\n            },\n        },\n        controller: (args) => {\n            const format = detectStringColorFormat(args.initialValue, extractColorType(args.params));\n            if (!format) {\n                throw TpError.shouldNeverHappen();\n            }\n            const stringifier = findColorStringifier(format);\n            if (!stringifier) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                colorType: format.type,\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: stringifier,\n                parser: createColorStringParser(format.type),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: format.alpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class PointNdConstraint {\n        constructor(config) {\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_\n                .toComponents(value)\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n\n    const className$5 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config) {\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            this.textViews.forEach((v) => {\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$5('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint,\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n            this.acs_.forEach((c, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p) => {\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    },\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac) => ac.view),\n            });\n        }\n    }\n\n    function createStepConstraint(params, initialValue) {\n        if ('step' in params && !isEmpty(params.step)) {\n            return new StepConstraint(params.step, initialValue);\n        }\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (!isEmpty(params.max) && !isEmpty(params.min)) {\n            return new DefiniteRangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            return new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        return null;\n    }\n    function findNumberRange(c) {\n        const drc = findConstraint(c, DefiniteRangeConstraint);\n        if (drc) {\n            return [drc.values.get('min'), drc.values.get('max')];\n        }\n        const rc = findConstraint(c, RangeConstraint);\n        if (rc) {\n            return [rc.minValue, rc.maxValue];\n        }\n        return [undefined, undefined];\n    }\n    function createConstraint$4(params,\n    initialValue) {\n        const constraints = [];\n        const sc = createStepConstraint(params, initialValue);\n        if (sc) {\n            constraints.push(sc);\n        }\n        const rc = createRangeConstraint(params);\n        if (rc) {\n            constraints.push(rc);\n        }\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const NumberInputPlugin = {\n        id: 'input-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                options: p.optional.custom(parseListOptions),\n                step: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => numberFromUnknown,\n            constraint: (args) => createConstraint$4(args.params, args.initialValue),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) {\n                return new ListController(args.document, {\n                    props: new ValueMap({\n                        options: lc.values.value('options'),\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            const formatter = (_a = ('format' in args.params ? args.params.format : undefined)) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(c, value.rawValue));\n            const drc = c && findConstraint(c, DefiniteRangeConstraint);\n            if (drc) {\n                return new SliderTextController(args.document, {\n                    baseStep: getBaseStep(c),\n                    parser: parseNumber,\n                    sliderProps: new ValueMap({\n                        maxValue: drc.values.value('max'),\n                        minValue: drc.values.value('min'),\n                    }),\n                    textProps: ValueMap.fromObject({\n                        draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                        formatter: formatter,\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new NumberTextController(args.document, {\n                baseStep: getBaseStep(c),\n                parser: parseNumber,\n                props: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                    formatter: formatter,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point2d {\n        constructor(x = 0, y = 0) {\n            this.x = x;\n            this.y = y;\n        }\n        getComponents() {\n            return [this.x, this.y];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            if (typeof x !== 'number' || typeof y !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n            };\n        }\n    }\n    const Point2dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point2d(...comps),\n    };\n\n    const className$4 = ClassName('p2d');\n    class Point2dView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.expanded, valueToClassName(this.element, className$4(undefined, 'expanded')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$4('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$4('b'));\n            buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n            config.viewProps.bindDisabled(buttonElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$4('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$4('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    const className$3 = ClassName('p2dp');\n    class Point2dPickerView {\n        constructor(doc, config) {\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.invertsY_ = config.invertsY;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            if (config.layout === 'popup') {\n                this.element.classList.add(className$3(undefined, 'p'));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const padElem = doc.createElement('div');\n            padElem.classList.add(className$3('p'));\n            config.viewProps.bindTabIndex(padElem);\n            this.element.appendChild(padElem);\n            this.padElement = padElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$3('g'));\n            this.padElement.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n            xAxisElem.classList.add(className$3('ax'));\n            xAxisElem.setAttributeNS(null, 'x1', '0');\n            xAxisElem.setAttributeNS(null, 'y1', '50%');\n            xAxisElem.setAttributeNS(null, 'x2', '100%');\n            xAxisElem.setAttributeNS(null, 'y2', '50%');\n            this.svgElem_.appendChild(xAxisElem);\n            const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n            yAxisElem.classList.add(className$3('ax'));\n            yAxisElem.setAttributeNS(null, 'x1', '50%');\n            yAxisElem.setAttributeNS(null, 'y1', '0');\n            yAxisElem.setAttributeNS(null, 'x2', '50%');\n            yAxisElem.setAttributeNS(null, 'y2', '100%');\n            this.svgElem_.appendChild(yAxisElem);\n            const lineElem = doc.createElementNS(SVG_NS, 'line');\n            lineElem.classList.add(className$3('l'));\n            lineElem.setAttributeNS(null, 'x1', '50%');\n            lineElem.setAttributeNS(null, 'y1', '50%');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$3('m'));\n            this.padElement.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        get allFocusableElements() {\n            return [this.padElement];\n        }\n        update_() {\n            const [x, y] = this.value.rawValue.getComponents();\n            const max = this.maxValue_;\n            const px = mapRange(x, -max, +max, 0, 100);\n            const py = mapRange(y, -max, +max, 0, 100);\n            const ipy = this.invertsY_ ? 100 - py : py;\n            this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n            this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n            this.markerElem_.style.left = `${px}%`;\n            this.markerElem_.style.top = `${ipy}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n        onFoldableChange_() {\n            this.update_();\n        }\n    }\n\n    function computeOffset(ev, baseSteps, invertsY) {\n        return [\n            getStepForKey(baseSteps[0], getHorizontalStepKeys(ev)),\n            getStepForKey(baseSteps[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n        ];\n    }\n    class Point2dPickerController {\n        constructor(doc, config) {\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n            this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.baseSteps_ = config.baseSteps;\n            this.maxValue_ = config.maxValue;\n            this.invertsY_ = config.invertsY;\n            this.view = new Point2dPickerView(doc, {\n                invertsY: this.invertsY_,\n                layout: config.layout,\n                maxValue: this.maxValue_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.padElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n            this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const max = this.maxValue_;\n            const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n            const py = mapRange(this.invertsY_ ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n            this.value.setRawValue(new Point2d(px, py), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPadKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPadKeyUp_(ev) {\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class Point2dController {\n        constructor(doc, config) {\n            var _a, _b;\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const padC = new Point2dPickerController(doc, {\n                baseSteps: [config.axes[0].baseStep, config.axes[1].baseStep],\n                invertsY: config.invertsY,\n                layout: config.pickerLayout,\n                maxValue: config.maxValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            padC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = padC;\n            this.textC_ = new PointNdTextController(doc, {\n                assembly: Point2dAssembly,\n                axes: config.axes,\n                parser: config.parser,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new Point2dView(doc, {\n                expanded: this.foldable_.value('expanded'),\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.textC_.view.element);\n            (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n            (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onPadButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onPadButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    class Point3d {\n        constructor(x = 0, y = 0, z = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n            };\n        }\n    }\n    const Point3dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point3d(...comps),\n    };\n\n    function point3dFromUnknown(value) {\n        return Point3d.isObject(value)\n            ? new Point3d(value.x, value.y, value.z)\n            : new Point3d();\n    }\n    function writePoint3d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n    }\n\n    function createConstraint$3(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point3dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\n                createDimensionConstraint('z' in params ? params.z : undefined, initialValue.z),\n            ],\n        });\n    }\n    function createAxis$2(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point3dInputPlugin = {\n        id: 'input-point3d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point3d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point3dFromUnknown,\n            constraint: (args) => createConstraint$3(args.params, args.initialValue),\n            equals: Point3d.equals,\n            writer: (_args) => writePoint3d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point3dAssembly,\n                axes: [\n                    createAxis$2(value.rawValue.x, c.components[0]),\n                    createAxis$2(value.rawValue.y, c.components[1]),\n                    createAxis$2(value.rawValue.z, c.components[2]),\n                ],\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point4d {\n        constructor(x = 0, y = 0, z = 0, w = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            this.w = w;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z, this.w];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            const w = obj.w;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number' ||\n                typeof w !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n                w: this.w,\n            };\n        }\n    }\n    const Point4dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point4d(...comps),\n    };\n\n    function point4dFromUnknown(value) {\n        return Point4d.isObject(value)\n            ? new Point4d(value.x, value.y, value.z, value.w)\n            : new Point4d();\n    }\n    function writePoint4d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n        target.writeProperty('w', value.w);\n    }\n\n    function createConstraint$2(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point4dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\n                createDimensionConstraint('z' in params ? params.z : undefined, initialValue.z),\n                createDimensionConstraint('w' in params ? params.w : undefined, initialValue.w),\n            ],\n        });\n    }\n    function createAxis$1(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point4dInputPlugin = {\n        id: 'input-point4d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point4d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n                w: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point4dFromUnknown,\n            constraint: (args) => createConstraint$2(args.params, args.initialValue),\n            equals: Point4d.equals,\n            writer: (_args) => writePoint4d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point4dAssembly,\n                axes: value.rawValue\n                    .getComponents()\n                    .map((comp, index) => createAxis$1(comp, c.components[index])),\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function createConstraint$1(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const StringInputPlugin = {\n        id: 'input-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n            constraint: (args) => createConstraint$1(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) {\n                return new ListController(doc, {\n                    props: new ValueMap({\n                        options: lc.values.value('options'),\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new TextController(doc, {\n                parser: (v) => v,\n                props: ValueMap.fromObject({\n                    formatter: formatString,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    const className$2 = ClassName('mll');\n    class MultiLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            config.viewProps.bindClassModifiers(this.element);\n            const textareaElem = doc.createElement('textarea');\n            textareaElem.classList.add(className$2('i'));\n            textareaElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            textareaElem.readOnly = true;\n            config.viewProps.bindDisabled(textareaElem);\n            this.element.appendChild(textareaElem);\n            this.textareaElem_ = textareaElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const elem = this.textareaElem_;\n            const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n            const lines = [];\n            this.value.rawValue.forEach((value) => {\n                if (value !== undefined) {\n                    lines.push(this.formatter_(value));\n                }\n            });\n            elem.textContent = lines.join('\\n');\n            if (shouldScroll) {\n                elem.scrollTop = elem.scrollHeight;\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class MultiLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new MultiLogView(doc, {\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$1 = ClassName('sgl');\n    class SingleLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$1('i'));\n            inputElem.readOnly = true;\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const values = this.value.rawValue;\n            const lastValue = values[values.length - 1];\n            this.inputElement.value =\n                lastValue !== undefined ? this.formatter_(lastValue) : '';\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class SingleLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SingleLogView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const BooleanMonitorPlugin = {\n        id: 'monitor-bool',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            if (args.value.rawValue.length === 1) {\n                return new SingleLogController(args.document, {\n                    formatter: BooleanFormatter,\n                    value: args.value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new MultiLogController(args.document, {\n                formatter: BooleanFormatter,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.props_ = config.props;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.props_.get('minValue');\n            const max = this.props_.get('maxValue');\n            const points = [];\n            this.value.rawValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.rawValue];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.rawValue, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className('t', 'a'))) {\n                tooltipElem.classList.add(className('t', 'a'), className('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n\n    class GraphLogController {\n        constructor(doc, config) {\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.props_ = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = createValue(-1);\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                props: this.props_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            }\n            else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.rawValue = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.rawValue = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.rawValue = -1;\n                return;\n            }\n            this.cursor_.rawValue = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.rawValue = -1;\n        }\n    }\n\n    function createFormatter(params) {\n        return 'format' in params && !isEmpty(params.format)\n            ? params.format\n            : createNumberFormatter(2);\n    }\n    function createTextMonitor(args) {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: createFormatter(args.params),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function createGraphMonitor(args) {\n        var _a, _b, _c;\n        return new GraphLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            props: ValueMap.fromObject({\n                maxValue: (_b = ('max' in args.params ? args.params.max : null)) !== null && _b !== void 0 ? _b : 100,\n                minValue: (_c = ('min' in args.params ? args.params.min : null)) !== null && _c !== void 0 ? _c : 0,\n            }),\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function shouldShowGraph(params) {\n        return 'view' in params && params.view === 'graph';\n    }\n    const NumberMonitorPlugin = {\n        id: 'monitor-number',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n                view: p.optional.string,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n            reader: (_args) => numberFromUnknown,\n        },\n        controller: (args) => {\n            if (shouldShowGraph(args.params)) {\n                return createGraphMonitor(args);\n            }\n            return createTextMonitor(args);\n        },\n    };\n\n    const StringMonitorPlugin = {\n        id: 'monitor-string',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n                multiline: p.optional.boolean,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            const value = args.value;\n            const multiline = value.rawValue.length > 1 ||\n                ('multiline' in args.params && args.params.multiline);\n            if (multiline) {\n                return new MultiLogController(args.document, {\n                    formatter: formatString,\n                    lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new SingleLogController(args.document, {\n                formatter: formatString,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function createInputBindingController(plugin, args) {\n        var _a;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const p = ParamsParsers;\n        const valueArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(valueArgs);\n        const constraint = plugin.binding.constraint\n            ? plugin.binding.constraint(valueArgs)\n            : undefined;\n        const value = createValue(reader(result.initialValue), {\n            constraint: constraint,\n            equals: plugin.binding.equals,\n        });\n        const binding = new InputBinding({\n            reader: reader,\n            target: args.target,\n            value: value,\n            writer: plugin.binding.writer(valueArgs),\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            constraint: constraint,\n            document: args.document,\n            initialValue: result.initialValue,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        return new InputBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: 'label' in args.params\n                    ? (_a = p.optional.string(args.params.label).value) !== null && _a !== void 0 ? _a : null\n                    : args.target.key,\n            }),\n            valueController: controller,\n        });\n    }\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    function createMonitorBindingController(plugin, args) {\n        var _a, _b, _c;\n        const p = ParamsParsers;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const bindingArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(bindingArgs);\n        const bufferSize = (_b = (_a = p.optional.number(args.params.bufferSize).value) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\n            plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\n        const interval = p.optional.number(args.params.interval).value;\n        const binding = new MonitorBinding({\n            reader: reader,\n            target: args.target,\n            ticker: createTicker(args.document, interval),\n            value: initializeBuffer(bufferSize),\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            document: args.document,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        return new MonitorBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: 'label' in args.params\n                    ? (_c = p.optional.string(args.params.label).value) !== null && _c !== void 0 ? _c : null\n                    : args.target.key,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class PluginPool {\n        constructor() {\n            this.pluginsMap_ = {\n                blades: [],\n                inputs: [],\n                monitors: [],\n            };\n        }\n        getAll() {\n            return [\n                ...this.pluginsMap_.blades,\n                ...this.pluginsMap_.inputs,\n                ...this.pluginsMap_.monitors,\n            ];\n        }\n        register(r) {\n            if (r.type === 'blade') {\n                this.pluginsMap_.blades.unshift(r);\n            }\n            else if (r.type === 'input') {\n                this.pluginsMap_.inputs.unshift(r);\n            }\n            else if (r.type === 'monitor') {\n                this.pluginsMap_.monitors.unshift(r);\n            }\n        }\n        createInput(document, target, params) {\n            const initialValue = target.read();\n            if (isEmpty(initialValue)) {\n                throw new TpError({\n                    context: {\n                        key: target.key,\n                    },\n                    type: 'nomatchingcontroller',\n                });\n            }\n            const bc = this.pluginsMap_.inputs.reduce((result, plugin) => result !== null && result !== void 0 ? result : createInputBindingController(plugin, {\n                document: document,\n                target: target,\n                params: params,\n            }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createMonitor(document, target, params) {\n            const bc = this.pluginsMap_.monitors.reduce((result, plugin) => result !== null && result !== void 0 ? result : createMonitorBindingController(plugin, {\n                document: document,\n                params: params,\n                target: target,\n            }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createBlade(document, params) {\n            const bc = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : createBladeController(plugin, {\n                document: document,\n                params: params,\n            }), null);\n            if (!bc) {\n                throw new TpError({\n                    type: 'nomatchingview',\n                    context: {\n                        params: params,\n                    },\n                });\n            }\n            return bc;\n        }\n        createBladeApi(bc) {\n            if (bc instanceof InputBindingController) {\n                return new InputBindingApi(bc);\n            }\n            if (bc instanceof MonitorBindingController) {\n                return new MonitorBindingApi(bc);\n            }\n            if (bc instanceof RackController) {\n                return new RackApi(bc, this);\n            }\n            const api = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : plugin.api({\n                controller: bc,\n                pool: this,\n            }), null);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n    }\n\n    function createDefaultPluginPool() {\n        const pool = new PluginPool();\n        [\n            Point2dInputPlugin,\n            Point3dInputPlugin,\n            Point4dInputPlugin,\n            StringInputPlugin,\n            NumberInputPlugin,\n            StringColorInputPlugin,\n            ObjectColorInputPlugin,\n            NumberColorInputPlugin,\n            BooleanInputPlugin,\n            BooleanMonitorPlugin,\n            StringMonitorPlugin,\n            NumberMonitorPlugin,\n            ButtonBladePlugin,\n            FolderBladePlugin,\n            SeparatorBladePlugin,\n            TabBladePlugin,\n        ].forEach((p) => {\n            pool.register(p);\n        });\n        return pool;\n    }\n\n    function point2dFromUnknown(value) {\n        return Point2d.isObject(value)\n            ? new Point2d(value.x, value.y)\n            : new Point2d();\n    }\n    function writePoint2d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n    }\n\n    function createDimensionConstraint(params, initialValue) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        const cs = createStepConstraint(params, initialValue);\n        if (cs) {\n            constraints.push(cs);\n        }\n        const rs = createRangeConstraint(params);\n        if (rs) {\n            constraints.push(rs);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point2dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\n            ],\n        });\n    }\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\n        const [min, max] = constraint ? findNumberRange(constraint) : [];\n        if (!isEmpty(min) || !isEmpty(max)) {\n            return Math.max(Math.abs(min !== null && min !== void 0 ? min : 0), Math.abs(max !== null && max !== void 0 ? max : 0));\n        }\n        const step = getBaseStep(constraint);\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n    }\n    function getSuitableMaxValue(initialValue, constraint) {\n        const xc = constraint instanceof PointNdConstraint\n            ? constraint.components[0]\n            : undefined;\n        const yc = constraint instanceof PointNdConstraint\n            ? constraint.components[1]\n            : undefined;\n        const xr = getSuitableMaxDimensionValue(xc, initialValue.x);\n        const yr = getSuitableMaxDimensionValue(yc, initialValue.y);\n        return Math.max(xr, yr);\n    }\n    function createAxis(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    function shouldInvertY(params) {\n        if (!('y' in params)) {\n            return false;\n        }\n        const yParams = params.y;\n        if (!yParams) {\n            return false;\n        }\n        return 'inverted' in yParams ? !!yParams.inverted : false;\n    }\n    const Point2dInputPlugin = {\n        id: 'input-point2d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point2d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                expanded: p.optional.boolean,\n                picker: p.optional.custom(parsePickerLayout),\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.object({\n                    inverted: p.optional.boolean,\n                    max: p.optional.number,\n                    min: p.optional.number,\n                    step: p.optional.number,\n                }),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point2dFromUnknown,\n            constraint: (args) => createConstraint(args.params, args.initialValue),\n            equals: Point2d.equals,\n            writer: (_args) => writePoint2d,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new Point2dController(doc, {\n                axes: [\n                    createAxis(value.rawValue.x, c.components[0]),\n                    createAxis(value.rawValue.y, c.components[1]),\n                ],\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                invertsY: shouldInvertY(args.params),\n                maxValue: getSuitableMaxValue(value.rawValue, c),\n                parser: parseNumber,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class ListApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get options() {\n            return this.controller_.valueController.props.get('options');\n        }\n        set options(options) {\n            this.controller_.valueController.props.set('options', options);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class SliderApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get maxValue() {\n            return this.controller_.valueController.sliderController.props.get('maxValue');\n        }\n        set maxValue(maxValue) {\n            this.controller_.valueController.sliderController.props.set('maxValue', maxValue);\n        }\n        get minValue() {\n            return this.controller_.valueController.sliderController.props.get('minValue');\n        }\n        set minValue(minValue) {\n            this.controller_.valueController.sliderController.props.set('minValue', minValue);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class TextApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get formatter() {\n            return this.controller_.valueController.props.get('formatter');\n        }\n        set formatter(formatter) {\n            this.controller_.valueController.props.set('formatter', formatter);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    const ListBladePlugin = (function () {\n        return {\n            id: 'list',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    options: p.required.custom(parseListOptions),\n                    value: p.required.raw,\n                    view: p.required.constant('list'),\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                const lc = new ListConstraint(normalizeListOptions(args.params.options));\n                const value = createValue(args.params.value, {\n                    constraint: lc,\n                });\n                const ic = new ListController(args.document, {\n                    props: new ValueMap({\n                        options: lc.values.value('options'),\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof ListController)) {\n                    return null;\n                }\n                return new ListApi(args.controller);\n            },\n        };\n    })();\n\n    /**\n     * @hidden\n     */\n    function exportPresetJson(targets) {\n        return targets.reduce((result, target) => {\n            return Object.assign(result, {\n                [target.presetKey]: target.read(),\n            });\n        }, {});\n    }\n    /**\n     * @hidden\n     */\n    function importPresetJson(bindings, preset) {\n        bindings.forEach((binding) => {\n            const value = preset[binding.target.presetKey];\n            if (value !== undefined) {\n                binding.writer(binding.target, binding.reader(value));\n            }\n        });\n    }\n\n    class RootApi extends FolderApi {\n        /**\n         * @hidden\n         */\n        constructor(controller, pool) {\n            super(controller, pool);\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        /**\n         * Imports a preset of all inputs.\n         * @param preset The preset object to import.\n         */\n        importPreset(preset) {\n            const bindings = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding;\n            });\n            importPresetJson(bindings, preset);\n            this.refresh();\n        }\n        /**\n         * Exports a preset of all inputs.\n         * @return An exported preset object.\n         */\n        exportPreset() {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            return exportPresetJson(targets);\n        }\n        /**\n         * Refreshes all bindings of the pane.\n         */\n        refresh() {\n            // Force-read all input bindings\n            this.controller_.rackController.rack\n                .find(InputBindingController)\n                .forEach((ibc) => {\n                ibc.binding.read();\n            });\n            // Force-read all monitor bindings\n            this.controller_.rackController.rack\n                .find(MonitorBindingController)\n                .forEach((mbc) => {\n                mbc.binding.read();\n            });\n        }\n    }\n\n    class RootController extends FolderController {\n        constructor(doc, config) {\n            super(doc, {\n                expanded: config.expanded,\n                blade: config.blade,\n                props: config.props,\n                root: true,\n                viewProps: config.viewProps,\n            });\n        }\n    }\n\n    const SliderBladePlugin = {\n        id: 'slider',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                max: p.required.number,\n                min: p.required.number,\n                view: p.required.constant('slider'),\n                format: p.optional.function,\n                label: p.optional.string,\n                value: p.optional.number,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b;\n            const initialValue = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n            const drc = new DefiniteRangeConstraint({\n                max: args.params.max,\n                min: args.params.min,\n            });\n            const vc = new SliderTextController(args.document, {\n                baseStep: 1,\n                parser: parseNumber,\n                sliderProps: new ValueMap({\n                    maxValue: drc.values.value('max'),\n                    minValue: drc.values.value('min'),\n                }),\n                textProps: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(undefined, initialValue),\n                    formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n                }),\n                value: createValue(initialValue, {\n                    constraint: drc,\n                }),\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: vc,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof SliderTextController)) {\n                return null;\n            }\n            return new SliderApi(args.controller);\n        },\n    };\n\n    const TextBladePlugin = (function () {\n        return {\n            id: 'text',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    parse: p.required.function,\n                    value: p.required.raw,\n                    view: p.required.constant('text'),\n                    format: p.optional.function,\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                var _a;\n                const ic = new TextController(args.document, {\n                    parser: args.params.parse,\n                    props: ValueMap.fromObject({\n                        formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof TextController)) {\n                    return null;\n                }\n                return new TextApi(args.controller);\n            },\n        };\n    })();\n\n    function createDefaultWrapperElement(doc) {\n        const elem = doc.createElement('div');\n        elem.classList.add(ClassName('dfw')());\n        if (doc.body) {\n            doc.body.appendChild(elem);\n        }\n        return elem;\n    }\n    function embedStyle(doc, id, css) {\n        if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n            return;\n        }\n        const styleElem = doc.createElement('style');\n        styleElem.dataset.tpStyle = id;\n        styleElem.textContent = css;\n        doc.head.appendChild(styleElem);\n    }\n    /**\n     * The root pane of Tweakpane.\n     */\n    class Pane extends RootApi {\n        constructor(opt_config) {\n            var _a, _b;\n            const config = opt_config !== null && opt_config !== void 0 ? opt_config : {};\n            const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n            const pool = createDefaultPluginPool();\n            const rootController = new RootController(doc, {\n                expanded: config.expanded,\n                blade: createBlade(),\n                props: ValueMap.fromObject({\n                    title: config.title,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            super(rootController, pool);\n            this.pool_ = pool;\n            this.containerElem_ = (_b = config.container) !== null && _b !== void 0 ? _b : createDefaultWrapperElement(doc);\n            this.containerElem_.appendChild(this.element);\n            this.doc_ = doc;\n            this.usesDefaultWrapper_ = !config.container;\n            this.setUpDefaultPlugins_();\n        }\n        get document() {\n            if (!this.doc_) {\n                throw TpError.alreadyDisposed();\n            }\n            return this.doc_;\n        }\n        dispose() {\n            const containerElem = this.containerElem_;\n            if (!containerElem) {\n                throw TpError.alreadyDisposed();\n            }\n            if (this.usesDefaultWrapper_) {\n                const parentElem = containerElem.parentElement;\n                if (parentElem) {\n                    parentElem.removeChild(containerElem);\n                }\n            }\n            this.containerElem_ = null;\n            this.doc_ = null;\n            super.dispose();\n        }\n        registerPlugin(bundle) {\n            const plugins = 'plugin' in bundle\n                ? [bundle.plugin]\n                : 'plugins' in bundle\n                    ? bundle.plugins\n                    : [];\n            plugins.forEach((p) => {\n                this.pool_.register(p);\n                this.embedPluginStyle_(p);\n            });\n        }\n        embedPluginStyle_(plugin) {\n            if (plugin.css) {\n                embedStyle(this.document, `plugin-${plugin.id}`, plugin.css);\n            }\n        }\n        setUpDefaultPlugins_() {\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            embedStyle(this.document, 'default', '.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:\"\";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:\"\";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:\"\";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}');\n            this.pool_.getAll().forEach((plugin) => {\n                this.embedPluginStyle_(plugin);\n            });\n            this.registerPlugin({\n                plugins: [\n                    SliderBladePlugin,\n                    ListBladePlugin,\n                    TabBladePlugin,\n                    TextBladePlugin,\n                ],\n            });\n        }\n    }\n\n    const VERSION = new Semver('3.1.10');\n\n    exports.BladeApi = BladeApi;\n    exports.ButtonApi = ButtonApi;\n    exports.FolderApi = FolderApi;\n    exports.InputBindingApi = InputBindingApi;\n    exports.ListApi = ListApi;\n    exports.MonitorBindingApi = MonitorBindingApi;\n    exports.Pane = Pane;\n    exports.SeparatorApi = SeparatorApi;\n    exports.SliderApi = SliderApi;\n    exports.TabApi = TabApi;\n    exports.TabPageApi = TabPageApi;\n    exports.TextApi = TextApi;\n    exports.TpChangeEvent = TpChangeEvent;\n    exports.VERSION = VERSION;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","// A library of seedable RNGs implemented in Javascript.\n//\n// Usage:\n//\n// var seedrandom = require('seedrandom');\n// var random = seedrandom(1); // or any seed.\n// var x = random();       // 0 <= x < 1.  Every bit is random.\n// var x = random.quick(); // 0 <= x < 1.  32 bits of randomness.\n\n// alea, a 53-bit multiply-with-carry generator by Johannes Baage.\n// Period: ~2^116\n// Reported to pass all BigCrush tests.\nvar alea = require('./lib/alea');\n\n// xor128, a pure xor-shift generator by George Marsaglia.\n// Period: 2^128-1.\n// Reported to fail: MatrixRank and LinearComp.\nvar xor128 = require('./lib/xor128');\n\n// xorwow, George Marsaglia's 160-bit xor-shift combined plus weyl.\n// Period: 2^192-2^32\n// Reported to fail: CollisionOver, SimpPoker, and LinearComp.\nvar xorwow = require('./lib/xorwow');\n\n// xorshift7, by Franois Panneton and Pierre L'ecuyer, takes\n// a different approach: it adds robustness by allowing more shifts\n// than Marsaglia's original three.  It is a 7-shift generator\n// with 256 bits, that passes BigCrush with no systmatic failures.\n// Period 2^256-1.\n// No systematic BigCrush failures reported.\nvar xorshift7 = require('./lib/xorshift7');\n\n// xor4096, by Richard Brent, is a 4096-bit xor-shift with a\n// very long period that also adds a Weyl generator. It also passes\n// BigCrush with no systematic failures.  Its long period may\n// be useful if you have many generators and need to avoid\n// collisions.\n// Period: 2^4128-2^32.\n// No systematic BigCrush failures reported.\nvar xor4096 = require('./lib/xor4096');\n\n// Tyche-i, by Samuel Neves and Filipe Araujo, is a bit-shifting random\n// number generator derived from ChaCha, a modern stream cipher.\n// https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n// Period: ~2^127\n// No systematic BigCrush failures reported.\nvar tychei = require('./lib/tychei');\n\n// The original ARC4-based prng included in this library.\n// Period: ~2^1600\nvar sr = require('./seedrandom');\n\nsr.alea = alea;\nsr.xor128 = xor128;\nsr.xorwow = xorwow;\nsr.xorshift7 = xorshift7;\nsr.xor4096 = xor4096;\nsr.tychei = tychei;\n\nmodule.exports = sr;\n","/*\nCopyright 2019 David Bau.\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n(function (global, pool, math) {\n//\n// The following constants are related to IEEE 754 limits.\n//\n\nvar width = 256,        // each RC4 output is 0 <= x < 256\n    chunks = 6,         // at least six RC4 outputs for each double\n    digits = 52,        // there are 52 significant digits in a double\n    rngname = 'random', // rngname: name for Math.random and Math.seedrandom\n    startdenom = math.pow(width, chunks),\n    significance = math.pow(2, digits),\n    overflow = significance * 2,\n    mask = width - 1,\n    nodecrypto;         // node.js crypto module, initialized at the bottom.\n\n//\n// seedrandom()\n// This is the seedrandom function described above.\n//\nfunction seedrandom(seed, options, callback) {\n  var key = [];\n  options = (options == true) ? { entropy: true } : (options || {});\n\n  // Flatten the seed string or build one from local entropy if needed.\n  var shortseed = mixkey(flatten(\n    options.entropy ? [seed, tostring(pool)] :\n    (seed == null) ? autoseed() : seed, 3), key);\n\n  // Use the seed to initialize an ARC4 generator.\n  var arc4 = new ARC4(key);\n\n  // This function returns a random double in [0, 1) that contains\n  // randomness in every bit of the mantissa of the IEEE 754 value.\n  var prng = function() {\n    var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\n        d = startdenom,                 //   and denominator d = 2 ^ 48.\n        x = 0;                          //   and no 'extra last byte'.\n    while (n < significance) {          // Fill up all significant digits by\n      n = (n + x) * width;              //   shifting numerator and\n      d *= width;                       //   denominator and generating a\n      x = arc4.g(1);                    //   new least-significant-byte.\n    }\n    while (n >= overflow) {             // To avoid rounding up, before adding\n      n /= 2;                           //   last byte, shift everything\n      d /= 2;                           //   right using integer math until\n      x >>>= 1;                         //   we have exactly the desired bits.\n    }\n    return (n + x) / d;                 // Form the number within [0, 1).\n  };\n\n  prng.int32 = function() { return arc4.g(4) | 0; }\n  prng.quick = function() { return arc4.g(4) / 0x100000000; }\n  prng.double = prng;\n\n  // Mix the randomness into accumulated entropy.\n  mixkey(tostring(arc4.S), pool);\n\n  // Calling convention: what to return as a function of prng, seed, is_math.\n  return (options.pass || callback ||\n      function(prng, seed, is_math_call, state) {\n        if (state) {\n          // Load the arc4 state from the given state if it has an S array.\n          if (state.S) { copy(state, arc4); }\n          // Only provide the .state method if requested via options.state.\n          prng.state = function() { return copy(arc4, {}); }\n        }\n\n        // If called as a method of Math (Math.seedrandom()), mutate\n        // Math.random because that is how seedrandom.js has worked since v1.0.\n        if (is_math_call) { math[rngname] = prng; return seed; }\n\n        // Otherwise, it is a newer calling convention, so return the\n        // prng directly.\n        else return prng;\n      })(\n  prng,\n  shortseed,\n  'global' in options ? options.global : (this == math),\n  options.state);\n}\n\n//\n// ARC4\n//\n// An ARC4 implementation.  The constructor takes a key in the form of\n// an array of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates\n// the next (count) outputs from ARC4.  Its return value is a number x\n// that is in the range 0 <= x < (width ^ count).\n//\nfunction ARC4(key) {\n  var t, keylen = key.length,\n      me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\n\n  // The empty key [] is treated as [0].\n  if (!keylen) { key = [keylen++]; }\n\n  // Set up S using the standard key scheduling algorithm.\n  while (i < width) {\n    s[i] = i++;\n  }\n  for (i = 0; i < width; i++) {\n    s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\n    s[j] = t;\n  }\n\n  // The \"g\" method returns the next (count) outputs as one number.\n  (me.g = function(count) {\n    // Using instance members instead of closure state nearly doubles speed.\n    var t, r = 0,\n        i = me.i, j = me.j, s = me.S;\n    while (count--) {\n      t = s[i = mask & (i + 1)];\n      r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\n    }\n    me.i = i; me.j = j;\n    return r;\n    // For robust unpredictability, the function call below automatically\n    // discards an initial batch of values.  This is called RC4-drop[256].\n    // See http://google.com/search?q=rsa+fluhrer+response&btnI\n  })(width);\n}\n\n//\n// copy()\n// Copies internal state of ARC4 to or from a plain object.\n//\nfunction copy(f, t) {\n  t.i = f.i;\n  t.j = f.j;\n  t.S = f.S.slice();\n  return t;\n};\n\n//\n// flatten()\n// Converts an object tree to nested arrays of strings.\n//\nfunction flatten(obj, depth) {\n  var result = [], typ = (typeof obj), prop;\n  if (depth && typ == 'object') {\n    for (prop in obj) {\n      try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\n    }\n  }\n  return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\n}\n\n//\n// mixkey()\n// Mixes a string seed into a key that is an array of integers, and\n// returns a shortened string seed that is equivalent to the result key.\n//\nfunction mixkey(seed, key) {\n  var stringseed = seed + '', smear, j = 0;\n  while (j < stringseed.length) {\n    key[mask & j] =\n      mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\n  }\n  return tostring(key);\n}\n\n//\n// autoseed()\n// Returns an object for autoseeding, using window.crypto and Node crypto\n// module if available.\n//\nfunction autoseed() {\n  try {\n    var out;\n    if (nodecrypto && (out = nodecrypto.randomBytes)) {\n      // The use of 'out' to remember randomBytes makes tight minified code.\n      out = out(width);\n    } else {\n      out = new Uint8Array(width);\n      (global.crypto || global.msCrypto).getRandomValues(out);\n    }\n    return tostring(out);\n  } catch (e) {\n    var browser = global.navigator,\n        plugins = browser && browser.plugins;\n    return [+new Date, global, plugins, global.screen, tostring(pool)];\n  }\n}\n\n//\n// tostring()\n// Converts an array of charcodes to a string\n//\nfunction tostring(a) {\n  return String.fromCharCode.apply(0, a);\n}\n\n//\n// When seedrandom.js is loaded, we immediately mix a few bits\n// from the built-in RNG into the entropy pool.  Because we do\n// not want to interfere with deterministic PRNG state later,\n// seedrandom will not call math.random on its own again after\n// initialization.\n//\nmixkey(math.random(), pool);\n\n//\n// Nodejs and AMD support: export the implementation as a module using\n// either convention.\n//\nif ((typeof module) == 'object' && module.exports) {\n  module.exports = seedrandom;\n  // When in node.js, try using crypto package for autoseeding.\n  try {\n    nodecrypto = require('crypto');\n  } catch (ex) {}\n} else if ((typeof define) == 'function' && define.amd) {\n  define(function() { return seedrandom; });\n} else {\n  // When included as a plain script, set up Math.seedrandom global.\n  math['seed' + rngname] = seedrandom;\n}\n\n\n// End anonymous scope, and pass initial values.\n})(\n  // global: `self` in browsers (including strict mode and web workers),\n  // otherwise `this` in Node and other environments\n  (typeof self !== 'undefined') ? self : this,\n  [],     // pool: entropy pool starts empty\n  Math    // math: package containing random, pow, and seedrandom\n);\n"],"names":["folder","mainFolder","$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","parcelRegister","global","module1","define1","Alea","seed","n","me","mash","data","String","i","length","h","charCodeAt","next","t","s0","c","s1","s2","copy","f","impl","opts","xg","state","prng","int32","double","quick","amd","alea","define","XorGen","strseed","x","y","z","w","k","top","bot","result","xor128","v","d","xorwow","X","j","push","slice","Date","xorshift7","limit","Math","max","xor4096","b","a","floor","tychei","$245d8981719bb01f$exports","factory","cache","link","getOwnPropertySymbols","Object","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","objectAssign","shouldUseNative","assign","test1","getOwnPropertyNames","test2","fromCharCode","order2","map","join","test3","split","forEach","letter","keys","target","source","from","symbols","to","toObject","val","TypeError","s","arguments","key","commonjsGlobal","window","self","createCommonjsModule","fn","browser","performance","now","isPromise_1","obj","then","getClientAPI","defined","arguments$1","isBrowser","document","is2DContext","ctx","save","scale","restore","shim","is_arguments","supported","object","toString","unsupported","supportsArgumentsClass","deepEqual_1","pSlice","Array","deepEqual","actual","expected","getTime","objEquiv","value","isBuffer","ka","kb","e","sort","strict","dateformat","global1","token","timezone","timezoneClip","dateFormat","date","mask","utc","gmt","kindOf","undefined","isArray","toLowerCase","test","isNaN","targetThursday","firstThursday","ds","dow","maskSlice","masks","_","D","m","H","M","L","o","getTimezoneOffset","W","getFullYear","getMonth","getDate","setDate","getDay","setHours","getHours","N","flags","dd","pad","ddd","i18n","dayNames","dddd","mm","mmm","monthNames","mmmm","yy","yyyy","hh","HH","MM","ss","l","round","timeNames","tt","T","TT","Z","match","pop","replace","abs","S","len","res","noop","defaultExts","extension","prefix","suffix","supportedEncodings","stream","isStart","Promise","resolve","reject","filename","resolveFilename","frame","func","client","output","ev","saveBlob","blob","createElement","style","visibility","download","href","URL","createObjectURL","body","appendChild","onclick","setTimeout","revokeObjectURL","parentElement","removeChild","removeAttribute","click","opt","file","str","num","ch","totalFrames","repeatString","substr","layerStr","isFinite","totalLayers","layer","filter","Boolean","defaultFileName","timeStamp","name","hash","commonTypos","dimension","animated","animating","unit","P5","pixellated","looping","pixelPerInch","allKeys","checkSettings","settings","console","warn","includes","paperSizes","reduce","dict","preset","item","units","dimensions","defined$1","conversions","system","factor","cm","pt","pc","in","ft","anchors","metric","ratio","imperial","convertLength","fromUnit","toUnit","pixelsPerInch","precision","roundPixel","indexOf","toFactor","fromFactor","isToPixel","fromUnitData","toUnitData","anchor","Number","convertDistance$1","unitsFrom","unitsTo","createCanvas","context","canvas","ownsCanvas","newCanvas","createCanvasElement","type","getContext","getCanvasContext_1","gl","width","height","attribs","names","attributes","pixelated","imageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","webkitImageSmoothingEnabled","msImageSmoothingEnabled","SketchManager","handler","this$1","_settings","_props","_sketch","_raf","_recordTimeout","_lastRedrawResult","_isP5Resizing","_keyboardShortcuts","enabled","hotkeys","shiftKey","props","recording","endRecord","run","record","exportFrame","togglePlay","playing","pause","play","commit","keyCode","altKey","metaKey","ctrlKey","preventDefault","attach","addEventListener","detach","removeEventListener","_animateHandler","animate","_resizeHandler","changed","resize","render","prototypeAccessors","sketch","configurable","get","_computePlayhead","currentTime","duration","hasDuration","_computeFrame","playhead","time","fps","_computeCurrentFrame","_getSizeProps","pixelRatio","canvasWidth","canvasHeight","viewportWidth","viewportHeight","dispose","started","_signalBegin","tick","_cancelTimeouts","cancelAnimationFrame","clearTimeout","error","_lastTime","requestAnimationFrame","stop","deltaTime","exportOpts","_createExportOptions","sequence","frameInterval","log","_signalEnd","beginRecord","_wrapContextScale","streamStart","catch","response","begin","end","wasRecording","streamEnd","encoding","encodingQuality","all","preExport","p","commitOpts","_doExportFrame","exporting","drawResult","concat","hasDataObject","isDom","Node","nodeType","nodeName","element","ref","exportCanvas","dataURL","toDataURL","layerList","curOpt","saveParam","savePromise","parts","createBlobFromDataURL","splitIndex","Blob","base64","byteString","atob","mimeMatch","exec","mime","ab","ArrayBuffer","ia","Uint8Array","saveResult","savedEvents","eventWithOutput","find","outputName","isClient","some","isStreaming","ofSeq","hasTotalFrames","postExport","cb","_preRender","_postRender","p5","scaleContext","scaleX","scaleY","flush","redraw","submitDrawCall","update","notYetSupported","oldCanvas","oldContext","timeOpts","timeProps","getTimeProps","_setupGLKey","_appendCanvasIfNeeded","draw","oldSizes","newProps","resizeCanvas","styleWidth","styleHeight","exportPixelRatio","trimWidth","trimHeight","hasDimensions","scaleToFit","scaleToView","bleed","devicePixelRatio","basePixelRatio","maxPixelRatio","min","getParentSize","parent","innerWidth","innerHeight","getBoundingClientRect","parentWidth","parentHeight","getDimensionsFromPreset","highest","lowest","orientation","landscape","realWidth","realHeight","aspect","scaleToFitPadding","maxWidth","maxHeight","windowAspect","pixelDensity","styleCanvas","_sizeChanged","frameIntervalMS","deltaTimeMS","isNewFrame","playbackRate","newTime","timeScale","isFinished","isLoopStart","loop","lastFrame","dispatch","mount","unmount","defaultParent","clear","clearColor","bufferData","totalFramesFromDuration","durationFromTotalFrames","Infinity","startTime","startFrame","hasStartTime","hasStartFrame","setup","loadAndRun","canvasSketch","newSettings","load","unload","destroy","createSketch","preload","P5Constructor","p5Sketch","isGL","renderer","WEBGL","P2D","noLoop","setAttributes","_renderer","drawingContext","loader","message","defineProperties","CACHE","runtimeCollisions","hotID","isHot","hot","isInjecting","previousData","cacheGet","oldManager","manager","PaperSizes","$7a4c4b0affb0d9b8$exports","$d4b6eff69b324b58$var$EPSILON","EPSILON","$d4b6eff69b324b58$var$clamp","$d4b6eff69b324b58$var$lerp","$d4b6eff69b324b58$var$inverseLerp","$d4b6eff69b324b58$var$expandVector","dims","defaultValue","scalar","out","$d4b6eff69b324b58$var$lerpArray","$d4b6eff69b324b58$var$newArray","initialValue","$d4b6eff69b324b58$var$mod","$d4b6eff69b324b58$var$damp","lambda","dt","exp","$42aaec2867bae1b8$require$mapRange","$d4b6eff69b324b58$exports","mod","fract","sign","degToRad","PI","radToDeg","wrap","cycle","pingPong","linspace","endpoint","offset","lerp","lerpArray","inverseLerp","lerpFrames","values","whole","nextFrame","clamp","clamp01","smoothstep","damp","dampArray","mapRange","inputMin","inputMax","outputMin","outputMax","outVal","expand2D","expand3D","expand4D","$ced3fcf7c41a216a$exports","$ced3fcf7c41a216a$var$pool","$ced3fcf7c41a216a$var$GLOBAL","$ced3fcf7c41a216a$var$oldRandom","random","$ced3fcf7c41a216a$var$ARC4","keylen","$ced3fcf7c41a216a$var$mask","$ced3fcf7c41a216a$var$width","g","count","r","$ced3fcf7c41a216a$var$mixkey","smear","stringseed","$ced3fcf7c41a216a$var$tostring","apply","options","use_entropy","entropy","$ced3fcf7c41a216a$var$flatten","depth","prop","typ","$ced3fcf7c41a216a$var$autoseed","crypto","getRandomValues","navigator","plugins","screen","arc4","$ced3fcf7c41a216a$var$significance","resetGlobal","$7f9986d0b71cf3d1$exports","F2","sqrt","G2","F3","G3","F4","G4","SimplexNoise","randomOrSeed","buildPermutationTable","perm","permMod12","aux","grad3","Float32Array","grad4","noise2D","xin","yin","i1","j1","n0","n1","n2","x0","y0","x1","y1","x2","y2","ii","jj","t0","gi0","t1","gi1","t2","gi2","noise3D","zin","n3","k1","i2","j2","k2","z0","z1","z2","x3","y3","z3","kk","t3","gi3","noise4D","n4","l1","l2","i3","j3","k3","l3","w0","rankx","ranky","rankz","rankw","w1","w2","w3","x4","y4","z4","w4","ll","t4","gi4","_buildPermutationTable","$42aaec2867bae1b8$require$noise1D","$1959121dce5586b4$exports","$1959121dce5586b4$var$createRandom","defaultSeed","currentSeed","currentRandom","noiseGenerator","defaultRandom","_nextGaussian","_hasNextGaussian","setSeed","createRandom","getSeed","getRandomSeed","valueNonZero","u","permuteNoise","noise1D","frequency","amplitude","boolean","chance","range","rangeFloor","pick","array","shuffle","arr","rand","tmp","ret","onCircle","insideCircle","radius","onSphere","theta","acos","sin","cos","insideSphere","cbrt","quaternion","u1","u2","u3","sq1","sq2","theta1","theta2","weighted","weightedSet","set","weightedSetIndex","gaussian","mean","standardDerivation","v1","v2","multiplier","weight","weights","totalWeight","$c398a0ea03e027b6$exports","exports1","BladeApi","controller","controller_","view","disabled","viewProps","hidden","TpEvent","TpChangeEvent","presetKey","last","TpUpdateEvent","TpFoldEvent","expanded","TpTabSelectEvent","index","isEmpty","deepEqualsArray","a1","a2","isPropertyWritable","getOwnPropertyDescriptor","writable","getPrototypeOf","CREATE_MESSAGE_MAP","alreadydisposed","invalidparams","nomatchingcontroller","nomatchingview","JSON","stringify","params","notbindable","propertynotfound","shouldneverhappen","TpError","alreadyDisposed","notBindable","propertyNotFound","shouldNeverHappen","config","_a","stack","BindingTarget","opt_id","obj_","key_","presetKey_","isBindable","read","write","writeProperty","valueObj","ButtonApi","label","title","valueController","on","eventName","bh","bind","emitter","Emitter","observers_","observers","off","observer","emit","event","ClassName","viewName","opt_elementName","opt_modifier","extractValue","rawValue","bindValue","applyValue","input","h2","h1","bindValueMap","valueMap","valueToClassName","elem","className","classList","add","remove","bindValueToTextContent","text","textContent","className$q","ButtonView","doc","bindClassModifiers","buttonElem","bindDisabled","buttonElement","titleElem","ButtonController","onClick_","sender","BoundValue","constraint_","constraint","equals_","equals","rawValue_","setRawValue","forceEmit","constrainedValue","constrain","prevValue","previousRawValue","PrimitiveValue","value_","createValue","ValueMap","valMap_","createCore","fromObject","createParamsParserBuilder","parse","optional","succeeded","createParamsParserBuilders","custom","number","string","function","constant","raw","keyToParserMap","parser","itemParser","parseItem","ParamsParsers","required","parseParams","warnMissing","info","place","ReadonlyValue","create","className$p","valueToModifier","modifier","ViewProps","onDisabledChange_","onParentChange_","onParentGlobalDisabledChange_","globalDisabled_","setGlobalDisabled_","getGlobalDisabled_","globalDisabled","opt_initialValue","_b","_c","disposed","bindTabIndex","tabIndex","handleDispose","callback","parentDisabled","updateGlobalDisabled_","prevParent","className$o","POS_TO_CLASS_NAME_MAP","veryfirst","first","verylast","BladeController","parent_","blade","getAllBladePositions","pos","SVG_NS","forceReflow","offsetHeight","supportsTouch","ontouchstart","ICON_ID_TO_INNER_HTML_MAP","check","dropdown","p2dpad","createSvgIconElement","iconId","createElementNS","innerHTML","insertElementAt","insertBefore","children","removeElement","removeChildElements","findNextTarget","relatedTarget","explicitOriginalTarget","className$n","LabelView","labelElem","childNodes","createLabelNode","frag","createDocumentFragment","lineNodes","line","createTextNode","lineNode","labelElement","valueElem","valueElement","LabelController","ButtonBladePlugin","accept","args","api","ValueBladeController","createBlade","positions","Foldable","completed","expandedHeight","shouldFixHeight","temporaryExpanded","styleExpanded","exHeight","bindExpandedClass","expandedClassName","onExpand","cleanUpTransition","applyHeight","foldable","bindFoldable","computeExpandedFolderHeight","containerElement","transition","clientHeight","propertyName","RackLikeApi","rackApi","rackApi_","NestedOrderedSet","extract","items_","cache_","Set","onSubListAdd_","onSubListRemove_","extract_","items","allItems","has","opt_index","splice","subList","root","delete","InputBindingApi","onBindingChange_","emitter_","binding","refresh","InputBindingController","MonitorBindingApi","onBindingUpdate_","MonitorBindingController","ticker","findSubBladeApiSet","RackApi","getApiByController","apiSet","createBindingTarget","pool","onRackAdd_","onRackRemove_","onRackInputChange_","onRackMonitorUpdate_","apiSet_","pool_","rack","bc","setUpApi_","addInput","opt_params","ownerDocument","createInput","addMonitor","createMonitor","addFolder","addBlade","addButton","addSeparator","addTab","gapi","createBladeApi","bladeController","isRoot","FolderApi","rackController","RackLikeController","PlainView","findSubRack","RackController","findSubBladeControllerSet","BladeRack","onBladePositionsChange_","onSetAdd_","onSetRemove_","onChildDispose_","onChildPositionsChange_","onChildInputChange_","onChildMonitorUpdate_","onChildValueChange_","onChildViewPropsChange_","onDescendantLayout_","onDescendantInputChange_","onDescendantMonitorUpdate_","blade_","bcSet_","controllerClass","updatePositions_","visibleItems","firstVisibleItem","lastVisibleItem","ps","_ev","disposedUcs","findInputBindingController","bcs","findMonitorBindingController","findValueBladeController","bladeContainerClassName","FolderView","className_","foldable_","indentElem","titleElement","markElem","containerElem","FolderController","rc","onTitleClick_","FolderBladePlugin","LabeledValueController","SeparatorApi","className$m","SeparatorView","hrElem","SeparatorController","SeparatorBladePlugin","className$l","TabItemView","selected","TabItemController","TabPageController","onItemClick_","ic_","itemProps","cc_","itemController","contentController","TabPageApi","contentRackApi","TabApi","onPageAdd_","onPageRemove_","onSelect_","pageApiMap_","Map","tab","selectedIndex","pageSet","setUpPageApi_","pages","addPage","removePage","Tab","onItemSelectedChange_","empty","keepSelection_","firstSelIndex","findIndex","className$k","TabView","itemsElement","contentsElem","contentsElement","TabController","cr","pageSet_","TabBladePlugin","ManualTicker","IntervalTicker","interval","disabled_","timerId_","onTick_","doc_","interval_","setTimer_","inactive","clearTimer_","win","defaultView","clearInterval","setInterval","InputBinding","onValueChange_","reader","writer","targetValue","write_","fillBuffer","buffer","bufferSize","MonitorBinding","reader_","newValue","createPushedBuffer","newBuffer","createTrimmedBuffer","CompositeConstraint","constraints","findConstraint","constraintClass","tmpResult","sc","DefiniteRangeConstraint","ListConstraint","RangeConstraint","maxValue","minValue","StepConstraint","step","origin","className$j","ListView","props_","selectElem","selectElement","optionElem","update_","ListController","onSelectChange_","currentTarget","className$i","PopupView","shows","PopupController","className$h","TextView","onChange_","inputElem","inputElement","formatter","TextController","onInputChange_","parser_","parsedValue","boolFromUnknown","BooleanFormatter","NumberLiteralNode","evaluate","BINARY_OPERATION_MAP","pow","BinaryOperationNode","operator","left","right","op","UNARY_OPERATION_MAP","UnaryOperationNode","expr","expression","combineReader","parsers","cursor","readWhitespace","readDecimalDigits","readExponentPart","si","readSignedInteger","sds","readDecimalIntegerLiteral","nzd","readNonZeroDigit","readDecimalLiteral","dil","dot","dds","readNonDecimalIntegerLiteral","bds","parseBinaryDigits","ods","readOctalDigits","hds","readHexDigits","readNumericLiteral","parseBinaryOperationExpression","ops","firstExpr","exprParser","evaluable","readBinaryOperator","startsWith","nextExpr","parseUnaryExpression","parseLiteral","parseParenthesizedExpression","parseExpression","cl","parseNumber","parseEcmaNumberExpression","numberFromUnknown","pv","numberToString","createNumberFormatter","digits","toFixed","innerFormatter","formatPercentage","stringFromUnknown","formatString","connectValues","primary","secondary","forward","backward","changing","preventFeedback","getStepForKey","baseStep","upKey","downKey","getVerticalStepKeys","getHorizontalStepKeys","isArrowKey","isVerticalArrowKey","computeOffset$1","rect","pageX","scrollX","pageY","scrollY","PointerHandler","lastTouch_","onDocumentMouseMove_","onDocumentMouseUp_","onMouseDown_","onTouchEnd_","onTouchMove_","onTouchStart_","elem_","passive","computePosition_","bounds","point","focus","touch","targetTouches","clientX","clientY","start1","end1","start2","end2","getDecimalDigits","frac","constrainRange","className$g","NumberTextView","arrayPosition","onDraggingChange_","dragging_","dragging","knobElem","knobElement","guideElem","bodyElem","guideBodyElem_","headElem","guideHeadElem_","tooltipElem","tooltipElem_","aox","adx","setAttributeNS","NumberTextController","originRawValue_","onInputKeyDown_","onInputKeyUp_","onPointerDown_","onPointerMove_","onPointerUp_","baseStep_","sliderProps_","sliderProps","ph","constrainValue_","computeDraggingValue_","dx","className$f","SliderView","trackElem","trackElement","SliderController","onKeyDown_","onKeyUp_","onPointerDownOrMove_","ptHandler_","handlePointerEvent_","className$e","SliderTextView","sliderElem","sliderView_","sliderView","textElem","textView_","textView","SliderTextController","sliderC_","textC_","textProps","sliderController","textController","writePrimitive","parseListOptions","parsePickerLayout","parsePointDimensionParams","normalizeListOptions","createListConstraint","getSuitableDecimalDigits","getBaseStep","findStep","getSuitableDraggingScale","base","log10","className$d","CheckboxView","wrapperElem","checked","CheckboxController","BooleanInputPlugin","_args","createConstraint$6","lc","className$c","ColorView","swatchElem","swatchElement","textElement","pickerLayout","pickerElem","pickerElement","hsvToRgbInt","rp","gp","bp","hp","sp","vp","removeAlphaComponent","comps","appendAlphaComponent","alpha","MODE_CONVERTER_MAP","hsl","hsv","sd","rgb","lp","cmax","cmin","getColorMaxComponents","mode","convertColorType","fms","tms","isRgbColorComponent","Color","black","toRgbaObject","color","isRgbColorObject","isRgbaColorObject","isColorObject","comps1","comps_","comps2","constrainColorComponents","components","hue","ms","getComponents","opt_mode","convertColor","intComps","rgbComps","className$b","ColorPickerView","alphaViews_","hsvElem","svElem","svPaletteView_","svPaletteView","hElem","hPaletteView_","hPaletteView","rgbElem","alphaViews","palette","aElem","apElem","atElem","allFocusableElements","elems","modeSelectElement","textViews","parseColorType","parseColorInputParams","picker","getBaseStepForColor","forAlpha","extractColorType","parseCssNumberOrPercentage","parseFloat","ANGLE_TO_DEG_MAP","deg","angle","grad","rad","turn","parseCssNumberOrAngle","parseFunctionalRgbColorComponents","createFunctionalRgbColorParser","parseFunctionalRgbaColorComponents","createFunctionalRgbaColorParser","parseHslColorComponents","createHslColorParser","parseHslaColorComponents","createHslaColorParser","parseHexRgbColorComponents","mRgb","parseInt","mRrggbb","parseHexRgbaColorComponents","parseObjectRgbColorComponents","createObjectRgbColorParser","parseObjectRgbaColorComponents","createObjectRgbaColorParser","PARSER_AND_RESULT","notation","detectStringColorFormat","prev","detection","TYPE_TO_PARSERS","int","float","createColorStringParser","zerofill","comp","hex","colorToHexRgbString","hexes","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","opt_type","colorToFunctionalRgbaString","aFormatter","rgbFormatter","colorToObjectRgbString","colorToObjectRgbaString","FORMAT_AND_STRINGIFIERS","format","stringifier","formatters","findColorStringifier","fas","f1","equalsStringColorFormat","f2","className$a","APaletteView","barElem","colorElem","colorElem_","markerElem","markerElem_","previewElem","previewElem_","leftColor","rightColor","gradientComps","background","backgroundColor","APaletteController","className$9","ColorTextView","modeElem","modeElem_","createModeSelectElement","optElem","modeMarkerElem","textsElem","textsElem_","textViews_","applyTextViews_","colorMode","compElem","createComponentController","draggingScale","colorType","ColorTextController","onModeSelectChange_","colorType_","ccs_","createComponentControllers_","cc","ccs","cs","pickedMode","className$8","HPaletteView","HPaletteController","className$7","SvPaletteView","canvasElem","canvasElement","getCanvasContext","willReadFrequently","hsvComps","imgData","getImageData","iy","ix","putImageData","SvPaletteController","saturation","dv","ColorPickerController","hPaletteC_","svPaletteC_","alphaIcs_","supportsAlpha","className$6","ColorSwatchView","swatchElem_","ColorSwatchController","ColorController","onButtonBlur_","onButtonClick_","onPopupChildBlur_","onPopupChildKeydown_","swatchC_","popC_","pickerC","pickerC_","nextTarget","contains","colorToRgbNumber","colorToRgbaNumber","colorFromRgbNumber","colorFromRgbaNumber","shouldSupportAlpha$1","inputParams","NumberColorInputPlugin","createColorNumberWriter","colorToNumber","ObjectColorInputPlugin","inValue","writeRgbaColorObject","writeRgbColorObject","StringColorInputPlugin","createColorStringWriter","PointNdConstraint","asm_","assembly","toComponents","fromComponents","className$5","PointNdTextView","axisElem","PointNdTextController","acs_","axes","ac","createStepConstraint","createRangeConstraint","NumberInputPlugin","createConstraint$4","drc","Point2d","isObject","Point2dAssembly","className$4","Point2dView","className$3","Point2dPickerView","onFoldableChange_","invertsY_","invertsY","maxValue_","layout","padElem","padElement","svgElem","svgElem_","xAxisElem","yAxisElem","lineElem","lineElem_","px","py","ipy","computeOffset","baseSteps","Point2dPickerController","onPadKeyDown_","onPadKeyUp_","baseSteps_","dy","Point2dController","onPadButtonBlur_","onPadButtonClick_","padC","Point3d","Point3dAssembly","point3dFromUnknown","writePoint3d","createAxis$2","Point3dInputPlugin","createDimensionConstraint","Point4d","Point4dAssembly","point4dFromUnknown","writePoint4d","Point4dInputPlugin","StringInputPlugin","createConstraint$1","className$2","MultiLogView","onValueUpdate_","formatter_","textareaElem","lineCount","readOnly","textareaElem_","shouldScroll","scrollTop","scrollHeight","lines","MultiLogController","className$1","SingleLogView","lastValue","SingleLogController","BooleanMonitorPlugin","GraphLogView","onCursorChange_","cursor_","graphElement","maxIndex","points","tx","ty","GraphLogController","onGraphMouseMove_","onGraphMouseLeave_","onGraphPointerDown_","onGraphPointerMove_","onGraphPointerUp_","offsetX","createFormatter","shouldShowGraph","NumberMonitorPlugin","defaultBufferSize","StringMonitorPlugin","multiline","PluginPool","pluginsMap_","blades","inputs","monitors","getAll","unshift","plugin","createInputBindingController","valueArgs","createMonitorBindingController","bindingArgs","initializeBuffer","createBladeController","point2dFromUnknown","writePoint2d","rs","getSuitableMaxDimensionValue","findNumberRange","createAxis","Point2dInputPlugin","inverted","shouldInvertY","yParams","getSuitableMaxValue","xc","yc","ListApi","SliderApi","TextApi","ListBladePlugin","ic","RootApi","importPreset","bindings","ibc","exportPreset","targets","mbc","RootController","SliderBladePlugin","vc","TextBladePlugin","embedStyle","css","querySelector","styleElem","dataset","tpStyle","head","VERSION","core","prerelease","coreComps","major","minor","patch","Pane","opt_config","globalObj","createDefaultPluginPool","containerElem_","container","createDefaultWrapperElement","usesDefaultWrapper_","setUpDefaultPlugins_","parentElem","registerPlugin","bundle","embedPluginStyle_","defineProperty","$2725bdcb11510985$exports","$cmoHh","$euRi5","$hDsEw","$3J2Zm","$6Px8M","$lDm0S","$d7e73366feb50558$exports","math","nodecrypto","rngname","startdenom","significance","overflow","seedrandom","shortseed","mixkey","flatten","tostring","autoseed","randomBytes","msCrypto","ARC4","pass","is_math_call","ex","$42aaec2867bae1b8$var$params","layers","colorSeed","r1","g1","b1","r2","g2","b2","backgroundR","backgroundG","backgroundB","$42aaec2867bae1b8$var$shouldAnimate","$42aaec2867bae1b8$var$shouldRepaint","$42aaec2867bae1b8$var$useRandomColor","pane","$42aaec2867bae1b8$var$downloadCanvasAsPNG","imageURL","downloadLink","$42aaec2867bae1b8$var$generateBackground","skyline","$42aaec2867bae1b8$var$Skyline","drawCanvas","inches","$42aaec2867bae1b8$var$Building","buildings","screenHeight","screenWidth","widthMultiplier","heightMultiplier","allCells","sizeX","fill","originalCell","minBuildingWidth","maxBuildingWidth","minBuildingHeight","maxBuildingHeight","generate","generateLayer","heightRange","widthRange","minHeight","minWidth","bldgs","rW","rH","bWidth","bHeight","bldg","reverse","$42aaec2867bae1b8$var$lerpColor","color1","color2","red","green","blue","drawBuilding","building","lightenPercent","lineWidth","strokeStyle","fillStyle","vOffset","strokeRect","fillRect","usableSpacing","horizontalPattern","$42aaec2867bae1b8$var$horizontalCanvasPattern","verticalPattern","$42aaec2867bae1b8$var$verticalCanvasPattern","pat","$42aaec2867bae1b8$var$renderHatch","baseStroke","spacing","canvasPattern","contextPattern","beginPath","startX","startY","moveTo","lineTo","stroke","createPattern","margin","let","isDOM","isArguments","objectKeys","this","repeat","const","convertDistance","rightNow","isPromise"],"version":3,"file":"skyline-generator.715cfa00.js.map"}