let t;var e=globalThis;function n(t,e,n,i){Object.defineProperty(t,e,{get:n,set:i,enumerable:!0,configurable:!0})}var i={},o={},a=e.parcelRequire8459;null==a&&((a=function(t){if(t in i)return i[t].exports;if(t in o){var e=o[t];delete o[t];var n={id:t,exports:{}};return i[t]=n,e.call(n.exports,n,n.exports),n.exports}var a=Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){o[t]=e},e.parcelRequire8459=a);var s=a.register;s("2aVrh",function(t,e){var n=a("hKWlf"),i=a("aXd2j"),o=a("auZlB");t.exports=function t(e){e=o(e,null);var a,s,l,u=Math.random,c=null,f=!1;return p(e),{value:h,createRandom:function(e){return t(e)},setSeed:p,getSeed:function(){return a},getRandomSeed:function(){return String(Math.floor(1e6*Math.random()))},valueNonZero:function(){for(var t=0;0===t;)t=h();return t},permuteNoise:function(){l=new i(s)},noise1D:function(t,e,n){if(!isFinite(t))throw TypeError("x component for noise() must be finite");return e=o(e,1),(n=o(n,1))*l.noise2D(t*e,0)},noise2D:function(t,e,n,i){if(!isFinite(t))throw TypeError("x component for noise() must be finite");if(!isFinite(e))throw TypeError("y component for noise() must be finite");return n=o(n,1),(i=o(i,1))*l.noise2D(t*n,e*n)},noise3D:function(t,e,n,i,a){if(!isFinite(t))throw TypeError("x component for noise() must be finite");if(!isFinite(e))throw TypeError("y component for noise() must be finite");if(!isFinite(n))throw TypeError("z component for noise() must be finite");return i=o(i,1),(a=o(a,1))*l.noise3D(t*i,e*i,n*i)},noise4D:function(t,e,n,i,a,s){if(!isFinite(t))throw TypeError("x component for noise() must be finite");if(!isFinite(e))throw TypeError("y component for noise() must be finite");if(!isFinite(n))throw TypeError("z component for noise() must be finite");if(!isFinite(i))throw TypeError("w component for noise() must be finite");return a=o(a,1),(s=o(s,1))*l.noise4D(t*a,e*a,n*a,i*a)},sign:function(){return d()?1:-1},boolean:d,chance:function(t){if("number"!=typeof(t=o(t,.5)))throw TypeError("expected n to be a number");return h()<t},range:v,rangeFloor:m,pick:function(t){if(0!==t.length)return t[m(0,t.length)]},shuffle:function(t){if(!Array.isArray(t))throw TypeError("Expected Array, got "+typeof t);for(var e,n,i=t.length,o=t.slice();i;)e=Math.floor(h()*i--),n=o[i],o[i]=o[e],o[e]=n;return o},onCircle:y,insideCircle:function(t,e){t=o(t,1),y(1,e=e||[]);var n=t*Math.sqrt(h());return e[0]*=n,e[1]*=n,e},onSphere:function(t,e){t=o(t,1),e=e||[];var n=h()*Math.PI*2,i=Math.acos(2*h()-1);return e[0]=t*Math.sin(i)*Math.cos(n),e[1]=t*Math.sin(i)*Math.sin(n),e[2]=t*Math.cos(i),e},insideSphere:function(t,e){t=o(t,1),e=e||[];var n=h()*Math.PI*2,i=2*h()-1,a=h(),s=Math.acos(i),l=t*Math.cbrt(a);return e[0]=l*Math.sin(s)*Math.cos(n),e[1]=l*Math.sin(s)*Math.sin(n),e[2]=l*Math.cos(s),e},quaternion:function(t){t=t||[];var e=h(),n=h(),i=h(),o=Math.sqrt(1-e),a=Math.sqrt(e),s=2*Math.PI*n,l=2*Math.PI*i,u=Math.sin(s)*o,c=Math.cos(s)*o,f=Math.sin(l)*a,p=Math.cos(l)*a;return t[0]=u,t[1]=c,t[2]=f,t[3]=p,t},weighted:w,weightedSet:function(t){return 0===(t=t||[]).length?null:t[_(t)].value},weightedSetIndex:_,gaussian:function(t,e){if(t=o(t,0),e=o(e,1),f){f=!1;var n=c;return c=null,t+e*n}var i=0,a=0,s=0;do s=(i=2*h()-1)*i+(a=2*h()-1)*a;while(s>=1||0===s)var l=Math.sqrt(-2*Math.log(s)/s);return c=a*l,f=!0,t+i*l*e}};function p(t,e){"number"==typeof t||"string"==typeof t?s=n(a=t,e):(a=void 0,s=u),l=new i(s),c=null,f=!1}function h(){return s()}function d(){return h()>.5}function v(t,e){if(void 0===e&&(e=t,t=0),"number"!=typeof t||"number"!=typeof e)throw TypeError("Expected all arguments to be numbers");return h()*(e-t)+t}function m(t,e){if(void 0===e&&(e=t,t=0),"number"!=typeof t||"number"!=typeof e)throw TypeError("Expected all arguments to be numbers");return Math.floor(v(t,e))}function y(t,e){t=o(t,1),e=e||[];var n=2*h()*Math.PI;return e[0]=t*Math.cos(n),e[1]=t*Math.sin(n),e}function _(t){return 0===(t=t||[]).length?-1:w(t.map(function(t){return t.weight}))}function w(t){if(0===(t=t||[]).length)return -1;var e,n=0;for(e=0;e<t.length;e++)n+=t[e];if(n<=0)throw Error("Weights must sum to > 0");var i=h()*n;for(e=0;e<t.length;e++){if(i<t[e])return e;i-=t[e]}return 0}}()}),s("hKWlf",function(t,n){var i=[],o=void 0===e?window:e,a=Math.random;function s(t){var e,n=t.length,i=this,o=0,a=i.i=i.j=0,s=i.S=[];for(n||(t=[n++]);o<256;)s[o]=o++;for(o=0;o<256;o++)s[o]=s[a=255&a+t[o%n]+(e=s[o])],s[a]=e;(i.g=function(t){for(var e,n=0,o=i.i,a=i.j,s=i.S;t--;)e=s[o=255&o+1],n=256*n+s[255&(s[o]=s[a=255&a+e])+(s[a]=e)];return i.i=o,i.j=a,n})(256)}function l(t,e){for(var n,i=t+"",o=0;o<i.length;)e[255&o]=255&(n^=19*e[255&o])+i.charCodeAt(o++);return u(e)}function u(t){return String.fromCharCode.apply(0,t)}t.exports=function(e,n){if(n&&!0===n.global)return n.global=!1,Math.random=t.exports(e,n),n.global=!0,Math.random;var a=n&&n.entropy||!1,c=[];l(function t(e,n){var i,o=[],a=(typeof e)[0];if(n&&"o"==a)for(i in e)try{o.push(t(e[i],n-1))}catch(t){}return o.length?o:"s"==a?e:e+"\0"}(a?[e,u(i)]:0 in arguments?e:function(t){try{return o.crypto.getRandomValues(t=new Uint8Array(256)),u(t)}catch(t){return[+new Date,o,o.navigator&&o.navigator.plugins,o.screen,u(i)]}}(),3),c);var f=new s(c);return l(u(f.S),i),function(){for(var t=f.g(6),e=0x1000000000000,n=0;t<0x10000000000000;)t=(t+n)*256,e*=256,n=f.g(1);for(;t>=0x20000000000000;)t/=2,e/=2,n>>>=1;return(t+n)/e}},t.exports.resetGlobal=function(){Math.random=a},l(Math.random(),i)}),s("aXd2j",function(t,e){!function(){var e=.5*(Math.sqrt(3)-1),n=(3-Math.sqrt(3))/6,i=1/3,o=1/6,a=(Math.sqrt(5)-1)/4,s=(5-Math.sqrt(5))/20;function l(t){var e;e="function"==typeof t?t:t?function(){var t,e=0,n=0,i=0,o=1,a=(t=0xefc8249d,function(e){e=e.toString();for(var n=0;n<e.length;n++){var i=.02519603282416938*(t+=e.charCodeAt(n));t=i>>>0,i-=t,i*=t,t=i>>>0,i-=t,t+=0x100000000*i}return(t>>>0)*23283064365386963e-26});e=a(" "),n=a(" "),i=a(" ");for(var s=0;s<arguments.length;s++)e-=a(arguments[s]),e<0&&(e+=1),n-=a(arguments[s]),n<0&&(n+=1),i-=a(arguments[s]),i<0&&(i+=1);return a=null,function(){var t=2091639*e+23283064365386963e-26*o;return e=n,n=i,i=t-(o=0|t)}}(t):Math.random,this.p=u(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var n=0;n<512;n++)this.perm[n]=this.p[255&n],this.permMod12[n]=this.perm[n]%12}function u(t){var e,n=new Uint8Array(256);for(e=0;e<256;e++)n[e]=e;for(e=0;e<255;e++){var i=e+~~(t()*(256-e)),o=n[e];n[e]=n[i],n[i]=o}return n}l.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,i){var o,a,s=this.permMod12,l=this.perm,u=this.grad3,c=0,f=0,p=0,h=(t+i)*e,d=Math.floor(t+h),v=Math.floor(i+h),m=(d+v)*n,y=t-(d-m),_=i-(v-m);y>_?(o=1,a=0):(o=0,a=1);var w=y-o+n,x=_-a+n,k=y-1+2*n,E=_-1+2*n,C=255&d,A=255&v,P=.5-y*y-_*_;if(P>=0){var M=3*s[C+l[A]];P*=P,c=P*P*(u[M]*y+u[M+1]*_)}var S=.5-w*w-x*x;if(S>=0){var T=3*s[C+o+l[A+a]];S*=S,f=S*S*(u[T]*w+u[T+1]*x)}var j=.5-k*k-E*E;if(j>=0){var O=3*s[C+1+l[A+1]];j*=j,p=j*j*(u[O]*k+u[O+1]*E)}return 70*(c+f+p)},noise3D:function(t,e,n){var a,s,l,u,c,f,p,h,d,v,m=this.permMod12,y=this.perm,_=this.grad3,w=(t+e+n)*i,x=Math.floor(t+w),k=Math.floor(e+w),E=Math.floor(n+w),C=(x+k+E)*o,A=t-(x-C),P=e-(k-C),M=n-(E-C);A>=P?P>=M?(c=1,f=0,p=0,h=1,d=1,v=0):(A>=M?(c=1,f=0,p=0):(c=0,f=0,p=1),h=1,d=0,v=1):P<M?(c=0,f=0,p=1,h=0,d=1,v=1):A<M?(c=0,f=1,p=0,h=0,d=1,v=1):(c=0,f=1,p=0,h=1,d=1,v=0);var S=A-c+o,T=P-f+o,j=M-p+o,O=A-h+2*o,V=P-d+2*o,D=M-v+2*o,L=A-1+3*o,R=P-1+3*o,B=M-1+3*o,I=255&x,F=255&k,z=255&E,U=.6-A*A-P*P-M*M;if(U<0)a=0;else{var N=3*m[I+y[F+y[z]]];U*=U,a=U*U*(_[N]*A+_[N+1]*P+_[N+2]*M)}var q=.6-S*S-T*T-j*j;if(q<0)s=0;else{var H=3*m[I+c+y[F+f+y[z+p]]];q*=q,s=q*q*(_[H]*S+_[H+1]*T+_[H+2]*j)}var $=.6-O*O-V*V-D*D;if($<0)l=0;else{var G=3*m[I+h+y[F+d+y[z+v]]];$*=$,l=$*$*(_[G]*O+_[G+1]*V+_[G+2]*D)}var K=.6-L*L-R*R-B*B;if(K<0)u=0;else{var W=3*m[I+1+y[F+1+y[z+1]]];K*=K,u=K*K*(_[W]*L+_[W+1]*R+_[W+2]*B)}return 32*(a+s+l+u)},noise4D:function(t,e,n,i){var o,l,u,c,f,p,h,d,v,m,y,_,w,x,k,E,C,A=this.perm,P=this.grad4,M=(t+e+n+i)*a,S=Math.floor(t+M),T=Math.floor(e+M),j=Math.floor(n+M),O=Math.floor(i+M),V=(S+T+j+O)*s,D=t-(S-V),L=e-(T-V),R=n-(j-V),B=i-(O-V),I=0,F=0,z=0,U=0;D>L?I++:F++,D>R?I++:z++,D>B?I++:U++,L>R?F++:z++,L>B?F++:U++,R>B?z++:U++;var N=D-(p=+(I>=3))+s,q=L-(h=+(F>=3))+s,H=R-(d=+(z>=3))+s,$=B-(v=+(U>=3))+s,G=D-(m=+(I>=2))+2*s,K=L-(y=+(F>=2))+2*s,W=R-(_=+(z>=2))+2*s,Y=B-(w=+(U>=2))+2*s,Q=D-(x=+(I>=1))+3*s,J=L-(k=+(F>=1))+3*s,X=R-(E=+(z>=1))+3*s,Z=B-(C=+(U>=1))+3*s,tt=D-1+4*s,te=L-1+4*s,tr=R-1+4*s,tn=B-1+4*s,ti=255&S,to=255&T,ta=255&j,ts=255&O,tl=.6-D*D-L*L-R*R-B*B;if(tl<0)o=0;else{var tu=A[ti+A[to+A[ta+A[ts]]]]%32*4;tl*=tl,o=tl*tl*(P[tu]*D+P[tu+1]*L+P[tu+2]*R+P[tu+3]*B)}var tc=.6-N*N-q*q-H*H-$*$;if(tc<0)l=0;else{var tf=A[ti+p+A[to+h+A[ta+d+A[ts+v]]]]%32*4;tc*=tc,l=tc*tc*(P[tf]*N+P[tf+1]*q+P[tf+2]*H+P[tf+3]*$)}var tp=.6-G*G-K*K-W*W-Y*Y;if(tp<0)u=0;else{var th=A[ti+m+A[to+y+A[ta+_+A[ts+w]]]]%32*4;tp*=tp,u=tp*tp*(P[th]*G+P[th+1]*K+P[th+2]*W+P[th+3]*Y)}var td=.6-Q*Q-J*J-X*X-Z*Z;if(td<0)c=0;else{var tv=A[ti+x+A[to+k+A[ta+E+A[ts+C]]]]%32*4;td*=td,c=td*td*(P[tv]*Q+P[tv+1]*J+P[tv+2]*X+P[tv+3]*Z)}var tm=.6-tt*tt-te*te-tr*tr-tn*tn;if(tm<0)f=0;else{var tg=A[ti+1+A[to+1+A[ta+1+A[ts+1]]]]%32*4;tm*=tm,f=tm*tm*(P[tg]*tt+P[tg+1]*te+P[tg+2]*tr+P[tg+3]*tn)}return 27*(o+l+u+c+f)}},l._buildPermutationTable=u,"undefined"!=typeof define&&define.amd&&define(function(){return l}),t.exports.SimplexNoise=l,t.exports=l}()}),s("auZlB",function(t,e){t.exports=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}}),s("igh2p",function(t,e){var n=a("auZlB"),i=a("3f3Eq"),o=Number.EPSILON;function s(t,e,n){return e<n?t<e?e:t>n?n:t:t<n?n:t>e?e:t}function l(t,e,n){return t*(1-n)+e*n}function u(t,e,n){return Math.abs(t-e)<o?0:(n-t)/(e-t)}function c(t){if("number"!=typeof t)throw TypeError("Expected dims argument");return function(e,i){i=n(i,0),null==e?s=i:"number"==typeof e&&isFinite(e)&&(s=e);var o,a,s,l,u=[];if(null==s)for(l=0;l<t;l++)u[l]=(o=e[l],a=n(a=i,0),"number"==typeof o&&isFinite(o)?o:a);else for(l=0;l<t;l++)u[l]=s;return u}}function f(t,e,n,i){if(i=i||[],t.length!==e.length)throw TypeError("min and max array are expected to have the same length");for(var o=0;o<t.length;o++)i[o]=l(t[o],e[o],n);return i}function p(t,e){if("number"!=typeof(t=n(t,0)))throw TypeError("Expected n argument to be a number");for(var i=[],o=0;o<t;o++)i.push(e);return i}function h(t,e){return(t%e+e)%e}function d(t,e,n,i){return l(t,e,1-Math.exp(-n*i))}t.exports={mod:h,fract:function(t){return t-Math.floor(t)},sign:function(t){return t>0?1:t<0?-1:0},degToRad:function(t){return t*Math.PI/180},radToDeg:function(t){return 180*t/Math.PI},wrap:i,pingPong:function(t,e){return t=h(t,2*e),e-Math.abs(t-e)},linspace:function(t,e){if("number"!=typeof(t=n(t,0)))throw TypeError("Expected n argument to be a number");"boolean"==typeof(e=e||{})&&(e={endpoint:!0});var i=n(e.offset,0);return e.endpoint?p(t).map(function(e,n){return t<=1?0:(n+i)/(t-1)}):p(t).map(function(e,n){return(n+i)/t})},lerp:l,lerpArray:f,inverseLerp:u,lerpFrames:function(t,e,n){e=s(e,0,1);var i=t.length-1,o=e*i,a=Math.floor(o),u=o-a,c=Math.min(a+1,i),p=t[a%t.length],h=t[c%t.length];if("number"==typeof p&&"number"==typeof h)return l(p,h,u);if(Array.isArray(p)&&Array.isArray(h))return f(p,h,u,n);throw TypeError("Mismatch in value type of two array elements: "+a+" and "+c)},clamp:s,clamp01:function(t){return s(t,0,1)},smoothstep:function(t,e,n){var i=s(u(t,e,n),0,1);return i*i*(3-2*i)},damp:d,dampArray:function(t,e,n,i,o){o=o||[];for(var a=0;a<t.length;a++)o[a]=d(t[a],e[a],n,i);return o},mapRange:function(t,e,n,i,a,s){if(Math.abs(e-n)<o)return i;var l=(t-e)/(n-e)*(a-i)+i;return s&&(a<i?l<a?l=a:l>i&&(l=i):l>a?l=a:l<i&&(l=i)),l},expand2D:c(2),expand3D:c(3),expand4D:c(4)}}),s("3f3Eq",function(t,e){t.exports=function(t,e,n){if("number"!=typeof e||"number"!=typeof n)throw TypeError('Must specify "to" and "from" arguments as numbers');if(e>n){var i=e;e=n,n=i}var o=n-e;return 0===o?n:t-o*Math.floor((t-e)/o)}}),s("f1q41",function(t,n){(function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",l=1/0,u=0/0,c=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],f="[object Arguments]",p="[object Array]",h="[object Boolean]",d="[object Date]",v="[object Error]",m="[object Function]",y="[object GeneratorFunction]",_="[object Map]",w="[object Number]",x="[object Object]",k="[object Promise]",E="[object RegExp]",C="[object Set]",A="[object String]",P="[object Symbol]",M="[object WeakMap]",S="[object ArrayBuffer]",T="[object DataView]",j="[object Float32Array]",O="[object Float64Array]",V="[object Int8Array]",D="[object Int16Array]",L="[object Int32Array]",R="[object Uint8Array]",B="[object Uint8ClampedArray]",I="[object Uint16Array]",F="[object Uint32Array]",z=/\b__p \+= '';/g,U=/\b(__p \+=) '' \+/g,N=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,H=/[&<>"']/g,$=RegExp(q.source),G=RegExp(H.source),K=/<%-([\s\S]+?)%>/g,W=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,X=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Z=/[\\^$.*+?()[\]{}|]/g,tt=RegExp(Z.source),te=/^\s+/,tr=/\s/,tn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ti=/\{\n\/\* \[wrapped with (.+)\] \*/,to=/,? & /,ta=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ts=/[()=,{}\[\]\/\s]/,tl=/\\(\\)?/g,tu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,tc=/\w*$/,tf=/^[-+]0x[0-9a-f]+$/i,tp=/^0b[01]+$/i,th=/^\[object .+?Constructor\]$/,td=/^0o[0-7]+$/i,tv=/^(?:0|[1-9]\d*)$/,tm=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tg=/($^)/,tb=/['\n\r\u2028\u2029\\]/g,ty="\ud800-\udfff",t_="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",tw="\\u2700-\\u27bf",tx="a-z\\xdf-\\xf6\\xf8-\\xff",tk="A-Z\\xc0-\\xd6\\xd8-\\xde",tE="\\ufe0e\\ufe0f",tC="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tA="['’]",tP="["+tC+"]",tM="["+t_+"]",tS="["+tx+"]",tT="[^"+ty+tC+"\\d+"+tw+tx+tk+"]",tj="\ud83c[\udffb-\udfff]",tO="[^"+ty+"]",tV="(?:\ud83c[\udde6-\uddff]){2}",tD="[\ud800-\udbff][\udc00-\udfff]",tL="["+tk+"]",tR="\\u200d",tB="(?:"+tS+"|"+tT+")",tI="(?:"+tL+"|"+tT+")",tF="(?:"+tA+"(?:d|ll|m|re|s|t|ve))?",tz="(?:"+tA+"(?:D|LL|M|RE|S|T|VE))?",tU="(?:"+tM+"|"+tj+")?",tN="["+tE+"]?",tq="(?:"+tR+"(?:"+[tO,tV,tD].join("|")+")"+tN+tU+")*",tH=tN+tU+tq,t$="(?:"+["["+tw+"]",tV,tD].join("|")+")"+tH,tG="(?:"+[tO+tM+"?",tM,tV,tD,"["+ty+"]"].join("|")+")",tK=RegExp(tA,"g"),tW=RegExp(tM,"g"),tY=RegExp(tj+"(?="+tj+")|"+tG+tH,"g"),tQ=RegExp([tL+"?"+tS+"+"+tF+"(?="+[tP,tL,"$"].join("|")+")",tI+"+"+tz+"(?="+[tP,tL+tB,"$"].join("|")+")",tL+"?"+tB+"+"+tF,tL+"+"+tz,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+",t$].join("|"),"g"),tJ=RegExp("["+tR+ty+t_+tE+"]"),tX=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tZ=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],t0=-1,t1={};t1[j]=t1[O]=t1[V]=t1[D]=t1[L]=t1[R]=t1[B]=t1[I]=t1[F]=!0,t1[f]=t1[p]=t1[S]=t1[h]=t1[T]=t1[d]=t1[v]=t1[m]=t1[_]=t1[w]=t1[x]=t1[E]=t1[C]=t1[A]=t1[M]=!1;var t2={};t2[f]=t2[p]=t2[S]=t2[T]=t2[h]=t2[d]=t2[j]=t2[O]=t2[V]=t2[D]=t2[L]=t2[_]=t2[w]=t2[x]=t2[E]=t2[C]=t2[A]=t2[P]=t2[R]=t2[B]=t2[I]=t2[F]=!0,t2[v]=t2[m]=t2[M]=!1;var t5={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},t3=parseFloat,t6=parseInt,t4="object"==typeof e&&e&&e.Object===Object&&e,t8="object"==typeof self&&self&&self.Object===Object&&self,t7=t4||t8||Function("return this")(),t9=n&&!n.nodeType&&n,et=t9&&t&&!t.nodeType&&t,ee=et&&et.exports===t9,er=ee&&t4.process,en=function(){try{var t=et&&et.require&&et.require("util").types;if(t)return t;return er&&er.binding&&er.binding("util")}catch(t){}}(),ei=en&&en.isArrayBuffer,eo=en&&en.isDate,ea=en&&en.isMap,es=en&&en.isRegExp,el=en&&en.isSet,eu=en&&en.isTypedArray;function ec(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ef(t,e,n,i){for(var o=-1,a=null==t?0:t.length;++o<a;){var s=t[o];e(i,s,n(s),t)}return i}function ep(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function eh(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function ed(t,e){for(var n=-1,i=null==t?0:t.length,o=0,a=[];++n<i;){var s=t[n];e(s,n,t)&&(a[o++]=s)}return a}function ev(t,e){return!!(null==t?0:t.length)&&eC(t,e,0)>-1}function em(t,e,n){for(var i=-1,o=null==t?0:t.length;++i<o;)if(n(e,t[i]))return!0;return!1}function eg(t,e){for(var n=-1,i=null==t?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o}function eb(t,e){for(var n=-1,i=e.length,o=t.length;++n<i;)t[o+n]=e[n];return t}function ey(t,e,n,i){var o=-1,a=null==t?0:t.length;for(i&&a&&(n=t[++o]);++o<a;)n=e(n,t[o],o,t);return n}function e_(t,e,n,i){var o=null==t?0:t.length;for(i&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function ew(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var ex=eS("length");function ek(t,e,n){var i;return n(t,function(t,n,o){if(e(t,n,o))return i=n,!1}),i}function eE(t,e,n,i){for(var o=t.length,a=n+(i?1:-1);i?a--:++a<o;)if(e(t[a],a,t))return a;return -1}function eC(t,e,n){return e==e?function(t,e,n){for(var i=n-1,o=t.length;++i<o;)if(t[i]===e)return i;return -1}(t,e,n):eE(t,eP,n)}function eA(t,e,n,i){for(var o=n-1,a=t.length;++o<a;)if(i(t[o],e))return o;return -1}function eP(t){return t!=t}function eM(t,e){var n=null==t?0:t.length;return n?eO(t,e)/n:u}function eS(t){return function(e){return null==e?i:e[t]}}function eT(t){return function(e){return null==t?i:t[e]}}function ej(t,e,n,i,o){return o(t,function(t,o,a){n=i?(i=!1,t):e(n,t,o,a)}),n}function eO(t,e){for(var n,o=-1,a=t.length;++o<a;){var s=e(t[o]);s!==i&&(n=n===i?s:n+s)}return n}function eV(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function eD(t){return t?t.slice(0,eQ(t)+1).replace(te,""):t}function eL(t){return function(e){return t(e)}}function eR(t,e){return eg(e,function(e){return t[e]})}function eB(t,e){return t.has(e)}function eI(t,e){for(var n=-1,i=t.length;++n<i&&eC(e,t[n],0)>-1;);return n}function eF(t,e){for(var n=t.length;n--&&eC(e,t[n],0)>-1;);return n}var ez=eT({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),eU=eT({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function eN(t){return"\\"+t5[t]}function eq(t){return tJ.test(t)}function eH(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function e$(t,e){return function(n){return t(e(n))}}function eG(t,e){for(var n=-1,i=t.length,o=0,a=[];++n<i;){var l=t[n];(l===e||l===s)&&(t[n]=s,a[o++]=n)}return a}function eK(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function eW(t){return eq(t)?function(t){for(var e=tY.lastIndex=0;tY.test(t);)++e;return e}(t):ex(t)}function eY(t){return eq(t)?t.match(tY)||[]:t.split("")}function eQ(t){for(var e=t.length;e--&&tr.test(t.charAt(e)););return e}var eJ=eT({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),eX=function t(e){var n,tr,ty,t_,tw=(e=null==e?t7:eX.defaults(t7.Object(),e,eX.pick(t7,tZ))).Array,tx=e.Date,tk=e.Error,tE=e.Function,tC=e.Math,tA=e.Object,tP=e.RegExp,tM=e.String,tS=e.TypeError,tT=tw.prototype,tj=tE.prototype,tO=tA.prototype,tV=e["__core-js_shared__"],tD=tj.toString,tL=tO.hasOwnProperty,tR=0,tB=(n=/[^.]+$/.exec(tV&&tV.keys&&tV.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",tI=tO.toString,tF=tD.call(tA),tz=t7._,tU=tP("^"+tD.call(tL).replace(Z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tN=ee?e.Buffer:i,tq=e.Symbol,tH=e.Uint8Array,t$=tN?tN.allocUnsafe:i,tG=e$(tA.getPrototypeOf,tA),tY=tA.create,tJ=tO.propertyIsEnumerable,t5=tT.splice,t4=tq?tq.isConcatSpreadable:i,t8=tq?tq.iterator:i,t9=tq?tq.toStringTag:i,et=function(){try{var t=ig(tA,"defineProperty");return t({},"",{}),t}catch(t){}}(),er=e.clearTimeout!==t7.clearTimeout&&e.clearTimeout,en=tx&&tx.now!==t7.Date.now&&tx.now,ex=e.setTimeout!==t7.setTimeout&&e.setTimeout,eT=tC.ceil,eZ=tC.floor,e0=tA.getOwnPropertySymbols,e1=tN?tN.isBuffer:i,e2=e.isFinite,e5=tT.join,e3=e$(tA.keys,tA),e6=tC.max,e4=tC.min,e8=tx.now,e7=e.parseInt,e9=tC.random,rt=tT.reverse,re=ig(e,"DataView"),rr=ig(e,"Map"),rn=ig(e,"Promise"),ri=ig(e,"Set"),ro=ig(e,"WeakMap"),ra=ig(tA,"create"),rs=ro&&new ro,rl={},ru=iN(re),rc=iN(rr),rf=iN(rn),rp=iN(ri),rh=iN(ro),rd=tq?tq.prototype:i,rv=rd?rd.valueOf:i,rm=rd?rd.toString:i;function rg(t){if(oJ(t)&&!oz(t)&&!(t instanceof rw)){if(t instanceof r_)return t;if(tL.call(t,"__wrapped__"))return iq(t)}return new r_(t)}var rb=function(){function t(){}return function(e){if(!oQ(e))return{};if(tY)return tY(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function ry(){}function r_(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function rw(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=0xffffffff,this.__views__=[]}function rx(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function rk(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function rE(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function rC(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new rE;++e<n;)this.add(t[e])}function rA(t){var e=this.__data__=new rk(t);this.size=e.size}function rP(t,e){var n=oz(t),i=!n&&oF(t),o=!n&&!i&&oH(t),a=!n&&!i&&!o&&o6(t),s=n||i||o||a,l=s?eV(t.length,tM):[],u=l.length;for(var c in t)(e||tL.call(t,c))&&!(s&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||iE(c,u)))&&l.push(c);return l}function rM(t){var e=t.length;return e?t[np(0,e-1)]:i}rg.templateSettings={escape:K,evaluate:W,interpolate:Y,variable:"",imports:{_:rg}},rg.prototype=ry.prototype,rg.prototype.constructor=rg,r_.prototype=rb(ry.prototype),r_.prototype.constructor=r_,rw.prototype=rb(ry.prototype),rw.prototype.constructor=rw,rx.prototype.clear=function(){this.__data__=ra?ra(null):{},this.size=0},rx.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=!!e,e},rx.prototype.get=function(t){var e=this.__data__;if(ra){var n=e[t];return n===a?i:n}return tL.call(e,t)?e[t]:i},rx.prototype.has=function(t){var e=this.__data__;return ra?e[t]!==i:tL.call(e,t)},rx.prototype.set=function(t,e){var n=this.__data__;return this.size+=+!this.has(t),n[t]=ra&&e===i?a:e,this},rk.prototype.clear=function(){this.__data__=[],this.size=0},rk.prototype.delete=function(t){var e=this.__data__,n=rj(e,t);return!(n<0)&&(n==e.length-1?e.pop():t5.call(e,n,1),--this.size,!0)},rk.prototype.get=function(t){var e=this.__data__,n=rj(e,t);return n<0?i:e[n][1]},rk.prototype.has=function(t){return rj(this.__data__,t)>-1},rk.prototype.set=function(t,e){var n=this.__data__,i=rj(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},rE.prototype.clear=function(){this.size=0,this.__data__={hash:new rx,map:new(rr||rk),string:new rx}},rE.prototype.delete=function(t){var e=iv(this,t).delete(t);return this.size-=!!e,e},rE.prototype.get=function(t){return iv(this,t).get(t)},rE.prototype.has=function(t){return iv(this,t).has(t)},rE.prototype.set=function(t,e){var n=iv(this,t),i=n.size;return n.set(t,e),this.size+=+(n.size!=i),this},rC.prototype.add=rC.prototype.push=function(t){return this.__data__.set(t,a),this},rC.prototype.has=function(t){return this.__data__.has(t)};function rS(t,e,n){(n===i||oR(t[e],n))&&(n!==i||e in t)||rD(t,e,n)}function rT(t,e,n){var o=t[e];tL.call(t,e)&&oR(o,n)&&(n!==i||e in t)||rD(t,e,n)}function rj(t,e){for(var n=t.length;n--;)if(oR(t[n][0],e))return n;return -1}function rO(t,e,n,i){return rU(t,function(t,o,a){e(i,t,n(t),a)}),i}function rV(t,e){return t&&nH(e,ag(e),t)}function rD(t,e,n){"__proto__"==e&&et?et(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function rL(t,e){for(var n=-1,o=e.length,a=tw(o),s=null==t;++n<o;)a[n]=s?i:ap(t,e[n]);return a}function rR(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function rB(t,e,n,o,a,s){var l,u=1&e,c=2&e,p=4&e;if(n&&(l=a?n(t,o,a,s):n(t)),l!==i)return l;if(!oQ(t))return t;var v=oz(t);if(v){if(M=(k=t).length,z=new k.constructor(M),M&&"string"==typeof k[0]&&tL.call(k,"index")&&(z.index=k.index,z.input=k.input),l=z,!u)return nq(t,l)}else{var k,M,z,U,N,q,H,$,G=i_(t),K=G==m||G==y;if(oH(t))return nB(t,u);if(G==x||G==f||K&&!a){if(l=c||K?{}:ix(t),!u){return c?(U=t,N=($=l)&&nH(t,ab(t),$),nH(U,iy(U),N)):(q=t,H=rV(l,t),nH(q,ib(q),H))}}else{if(!t2[G])return a?t:{};l=function(t,e,n){var i,o,a=t.constructor;switch(e){case S:return nI(t);case h:case d:return new a(+t);case T:return i=n?nI(t.buffer):t.buffer,new t.constructor(i,t.byteOffset,t.byteLength);case j:case O:case V:case D:case L:case R:case B:case I:case F:return nF(t,n);case _:return new a;case w:case A:return new a(t);case E:return(o=new t.constructor(t.source,tc.exec(t))).lastIndex=t.lastIndex,o;case C:return new a;case P:return rv?tA(rv.call(t)):{}}}(t,G,u)}}s||(s=new rA);var W=s.get(t);if(W)return W;s.set(t,l),o2(t)?t.forEach(function(i){l.add(rB(i,e,n,i,t,s))}):oX(t)&&t.forEach(function(i,o){l.set(o,rB(i,e,n,o,t,s))});var Y=p?c?iu:il:c?ab:ag,Q=v?i:Y(t);return ep(Q||t,function(i,o){Q&&(i=t[o=i]),rT(l,o,rB(i,e,n,o,t,s))}),l}function rI(t,e,n){var o=n.length;if(null==t)return!o;for(t=tA(t);o--;){var a=n[o],s=e[a],l=t[a];if(l===i&&!(a in t)||!s(l))return!1}return!0}function rF(t,e,n){if("function"!=typeof t)throw new tS(o);return iL(function(){t.apply(i,n)},e)}function rz(t,e,n,i){var o=-1,a=ev,s=!0,l=t.length,u=[],c=e.length;if(!l)return u;n&&(e=eg(e,eL(n))),i?(a=em,s=!1):e.length>=200&&(a=eB,s=!1,e=new rC(e));t:for(;++o<l;){var f=t[o],p=null==n?f:n(f);if(f=i||0!==f?f:0,s&&p==p){for(var h=c;h--;)if(e[h]===p)continue t;u.push(f)}else a(e,p,i)||u.push(f)}return u}rA.prototype.clear=function(){this.__data__=new rk,this.size=0},rA.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},rA.prototype.get=function(t){return this.__data__.get(t)},rA.prototype.has=function(t){return this.__data__.has(t)},rA.prototype.set=function(t,e){var n=this.__data__;if(n instanceof rk){var i=n.__data__;if(!rr||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new rE(i)}return n.set(t,e),this.size=n.size,this};var rU=nK(rY),rN=nK(rQ,!0);function rq(t,e){var n=!0;return rU(t,function(t,i,o){return n=!!e(t,i,o)}),n}function rH(t,e,n){for(var o=-1,a=t.length;++o<a;){var s=t[o],l=e(s);if(null!=l&&(u===i?l==l&&!o3(l):n(l,u)))var u=l,c=s}return c}function r$(t,e){var n=[];return rU(t,function(t,i,o){e(t,i,o)&&n.push(t)}),n}function rG(t,e,n,i,o){var a=-1,s=t.length;for(n||(n=ik),o||(o=[]);++a<s;){var l=t[a];e>0&&n(l)?e>1?rG(l,e-1,n,i,o):eb(o,l):i||(o[o.length]=l)}return o}var rK=nW(),rW=nW(!0);function rY(t,e){return t&&rK(t,e,ag)}function rQ(t,e){return t&&rW(t,e,ag)}function rJ(t,e){return ed(e,function(e){return oK(t[e])})}function rX(t,e){e=nD(e,t);for(var n=0,o=e.length;null!=t&&n<o;)t=t[iU(e[n++])];return n&&n==o?t:i}function rZ(t,e,n){var i=e(t);return oz(t)?i:eb(i,n(t))}function r0(t){var e;return null==t?t===i?"[object Undefined]":"[object Null]":t9&&t9 in tA(t)?function(t){var e=tL.call(t,t9),n=t[t9];try{t[t9]=i;var o=!0}catch(t){}var a=tI.call(t);return o&&(e?t[t9]=n:delete t[t9]),a}(t):(e=t,tI.call(e))}function r1(t,e){return t>e}function r2(t,e){return null!=t&&tL.call(t,e)}function r5(t,e){return null!=t&&e in tA(t)}function r3(t,e,n){for(var o=n?em:ev,a=t[0].length,s=t.length,l=s,u=tw(s),c=1/0,f=[];l--;){var p=t[l];l&&e&&(p=eg(p,eL(e))),c=e4(p.length,c),u[l]=!n&&(e||a>=120&&p.length>=120)?new rC(l&&p):i}p=t[0];var h=-1,d=u[0];t:for(;++h<a&&f.length<c;){var v=p[h],m=e?e(v):v;if(v=n||0!==v?v:0,!(d?eB(d,m):o(f,m,n))){for(l=s;--l;){var y=u[l];if(!(y?eB(y,m):o(t[l],m,n)))continue t}d&&d.push(m),f.push(v)}}return f}function r6(t,e,n){e=nD(e,t);var o=null==(t=iO(t,e))?t:t[iU(i0(e))];return null==o?i:ec(o,t,n)}function r4(t){return oJ(t)&&r0(t)==f}function r8(t,e,n,o,a){return t===e||(null!=t&&null!=e&&(oJ(t)||oJ(e))?function(t,e,n,o,a,s){var l=oz(t),u=oz(e),c=l?p:i_(t),m=u?p:i_(e);c=c==f?x:c,m=m==f?x:m;var y=c==x,k=m==x,M=c==m;if(M&&oH(t)){if(!oH(e))return!1;l=!0,y=!1}if(M&&!y)return s||(s=new rA),l||o6(t)?ia(t,e,n,o,a,s):function(t,e,n,i,o,a,s){switch(n){case T:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)break;t=t.buffer,e=e.buffer;case S:if(t.byteLength!=e.byteLength||!a(new tH(t),new tH(e)))break;return!0;case h:case d:case w:return oR(+t,+e);case v:return t.name==e.name&&t.message==e.message;case E:case A:return t==e+"";case _:var l=eH;case C:var u=1&i;if(l||(l=eK),t.size!=e.size&&!u)break;var c=s.get(t);if(c)return c==e;i|=2,s.set(t,e);var f=ia(l(t),l(e),i,o,a,s);return s.delete(t),f;case P:if(rv)return rv.call(t)==rv.call(e)}return!1}(t,e,c,n,o,a,s);if(!(1&n)){var j=y&&tL.call(t,"__wrapped__"),O=k&&tL.call(e,"__wrapped__");if(j||O){var V=j?t.value():t,D=O?e.value():e;return s||(s=new rA),a(V,D,n,o,s)}}return!!M&&(s||(s=new rA),function(t,e,n,o,a,s){var l=1&n,u=il(t),c=u.length;if(c!=il(e).length&&!l)return!1;for(var f=c;f--;){var p=u[f];if(!(l?p in e:tL.call(e,p)))return!1}var h=s.get(t),d=s.get(e);if(h&&d)return h==e&&d==t;var v=!0;s.set(t,e),s.set(e,t);for(var m=l;++f<c;){var y=t[p=u[f]],_=e[p];if(o)var w=l?o(_,y,p,e,t,s):o(y,_,p,t,e,s);if(!(w===i?y===_||a(y,_,n,o,s):w)){v=!1;break}m||(m="constructor"==p)}if(v&&!m){var x=t.constructor,k=e.constructor;x!=k&&"constructor"in t&&"constructor"in e&&!("function"==typeof x&&x instanceof x&&"function"==typeof k&&k instanceof k)&&(v=!1)}return s.delete(t),s.delete(e),v}(t,e,n,o,a,s))}(t,e,n,o,r8,a):t!=t&&e!=e)}function r7(t,e,n,o){var a=n.length,s=a,l=!o;if(null==t)return!s;for(t=tA(t);a--;){var u=n[a];if(l&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++a<s;){var c=(u=n[a])[0],f=t[c],p=u[1];if(l&&u[2]){if(f===i&&!(c in t))return!1}else{var h=new rA;if(o)var d=o(f,p,c,t,e,h);if(!(d===i?r8(p,f,3,o,h):d))return!1}}return!0}function r9(t){var e;return!(!oQ(t)||(e=t,tB&&tB in e))&&(oK(t)?tU:th).test(iN(t))}function nt(t){return"function"==typeof t?t:null==t?aq:"object"==typeof t?oz(t)?no(t[0],t[1]):ni(t):aX(t)}function ne(t){if(!iS(t))return e3(t);var e=[];for(var n in tA(t))tL.call(t,n)&&"constructor"!=n&&e.push(n);return e}function nr(t,e){return t<e}function nn(t,e){var n=-1,i=oN(t)?tw(t.length):[];return rU(t,function(t,o,a){i[++n]=e(t,o,a)}),i}function ni(t){var e=im(t);return 1==e.length&&e[0][2]?iT(e[0][0],e[0][1]):function(n){return n===t||r7(n,t,e)}}function no(t,e){var n;return iA(t)&&(n=e)==n&&!oQ(n)?iT(iU(t),e):function(n){var o=ap(n,t);return o===i&&o===e?ah(n,t):r8(e,o,3)}}function na(t,e,n,o,a){t!==e&&rK(e,function(s,l){if(a||(a=new rA),oQ(s))!function(t,e,n,o,a,s,l){var u=iV(t,n),c=iV(e,n),f=l.get(c);if(f)return rS(t,n,f);var p=s?s(u,c,n+"",t,e,l):i,h=p===i;if(h){var d=oz(c),v=!d&&oH(c),m=!d&&!v&&o6(c);p=c,d||v||m?oz(u)?p=u:oq(u)?p=nq(u):v?(h=!1,p=nB(c,!0)):m?(h=!1,p=nF(c,!0)):p=[]:o0(c)||oF(c)?(p=u,oF(u)?p=an(u):(!oQ(u)||oK(u))&&(p=ix(c))):h=!1}h&&(l.set(c,p),a(p,c,o,s,l),l.delete(c)),rS(t,n,p)}(t,e,l,n,na,o,a);else{var u=o?o(iV(t,l),s,l+"",t,e,a):i;u===i&&(u=s),rS(t,l,u)}},ab)}function ns(t,e){var n=t.length;if(n)return iE(e+=e<0?n:0,n)?t[e]:i}function nl(t,e,n){e=e.length?eg(e,function(t){return oz(t)?function(e){return rX(e,1===t.length?t[0]:t)}:t}):[aq];var i=-1;e=eg(e,eL(id()));var o=nn(t,function(t,n,o){return{criteria:eg(e,function(e){return e(t)}),index:++i,value:t}}),a=o.length;for(o.sort(function(t,e){return function(t,e,n){for(var i=-1,o=t.criteria,a=e.criteria,s=o.length,l=n.length;++i<s;){var u=nz(o[i],a[i]);if(u){if(i>=l)return u;return u*("desc"==n[i]?-1:1)}}return t.index-e.index}(t,e,n)});a--;)o[a]=o[a].value;return o}function nu(t,e,n){for(var i=-1,o=e.length,a={};++i<o;){var s=e[i],l=rX(t,s);n(l,s)&&nv(a,nD(s,t),l)}return a}function nc(t,e,n,i){var o=i?eA:eC,a=-1,s=e.length,l=t;for(t===e&&(e=nq(e)),n&&(l=eg(t,eL(n)));++a<s;)for(var u=0,c=e[a],f=n?n(c):c;(u=o(l,f,u,i))>-1;)l!==t&&t5.call(l,u,1),t5.call(t,u,1);return t}function nf(t,e){for(var n=t?e.length:0,i=n-1;n--;){var o=e[n];if(n==i||o!==a){var a=o;iE(o)?t5.call(t,o,1):nA(t,o)}}return t}function np(t,e){return t+eZ(e9()*(e-t+1))}function nh(t,e){var n="";if(!t||e<1||e>0x1fffffffffffff)return n;do e%2&&(n+=t),(e=eZ(e/2))&&(t+=t);while(e)return n}function nd(t,e){return iR(ij(t,e,aq),t+"")}function nv(t,e,n,o){if(!oQ(t))return t;e=nD(e,t);for(var a=-1,s=e.length,l=s-1,u=t;null!=u&&++a<s;){var c=iU(e[a]),f=n;if("__proto__"===c||"constructor"===c||"prototype"===c)break;if(a!=l){var p=u[c];(f=o?o(p,c,u):i)===i&&(f=oQ(p)?p:iE(e[a+1])?[]:{})}rT(u,c,f),u=u[c]}return t}var nm=rs?function(t,e){return rs.set(t,e),t}:aq,ng=et?function(t,e){return et(t,"toString",{configurable:!0,enumerable:!1,value:az(e),writable:!0})}:aq;function nb(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=tw(o);++i<o;)a[i]=t[i+e];return a}function ny(t,e){var n;return rU(t,function(t,i,o){return!(n=e(t,i,o))}),!!n}function n_(t,e,n){var i=0,o=null==t?i:t.length;if("number"==typeof e&&e==e&&o<=0x7fffffff){for(;i<o;){var a=i+o>>>1,s=t[a];null!==s&&!o3(s)&&(n?s<=e:s<e)?i=a+1:o=a}return o}return nw(t,e,aq,n)}function nw(t,e,n,o){var a=0,s=null==t?0:t.length;if(0===s)return 0;for(var l=(e=n(e))!=e,u=null===e,c=o3(e),f=e===i;a<s;){var p=eZ((a+s)/2),h=n(t[p]),d=h!==i,v=null===h,m=h==h,y=o3(h);if(l)var _=o||m;else _=f?m&&(o||d):u?m&&d&&(o||!v):c?m&&d&&!v&&(o||!y):!v&&!y&&(o?h<=e:h<e);_?a=p+1:s=p}return e4(s,0xfffffffe)}function nx(t,e){for(var n=-1,i=t.length,o=0,a=[];++n<i;){var s=t[n],l=e?e(s):s;if(!n||!oR(l,u)){var u=l;a[o++]=0===s?0:s}}return a}function nk(t){return"number"==typeof t?t:o3(t)?u:+t}function nE(t){if("string"==typeof t)return t;if(oz(t))return eg(t,nE)+"";if(o3(t))return rm?rm.call(t):"";var e=t+"";return"0"==e&&1/t==-l?"-0":e}function nC(t,e,n){var i=-1,o=ev,a=t.length,s=!0,l=[],u=l;if(n)s=!1,o=em;else if(a>=200){var c=e?null:n9(t);if(c)return eK(c);s=!1,o=eB,u=new rC}else u=e?[]:l;t:for(;++i<a;){var f=t[i],p=e?e(f):f;if(f=n||0!==f?f:0,s&&p==p){for(var h=u.length;h--;)if(u[h]===p)continue t;e&&u.push(p),l.push(f)}else o(u,p,n)||(u!==l&&u.push(p),l.push(f))}return l}function nA(t,e){return e=nD(e,t),null==(t=iO(t,e))||delete t[iU(i0(e))]}function nP(t,e,n,i){return nv(t,e,n(rX(t,e)),i)}function nM(t,e,n,i){for(var o=t.length,a=i?o:-1;(i?a--:++a<o)&&e(t[a],a,t););return n?nb(t,i?0:a,i?a+1:o):nb(t,i?a+1:0,i?o:a)}function nS(t,e){var n=t;return n instanceof rw&&(n=n.value()),ey(e,function(t,e){return e.func.apply(e.thisArg,eb([t],e.args))},n)}function nT(t,e,n){var i=t.length;if(i<2)return i?nC(t[0]):[];for(var o=-1,a=tw(i);++o<i;)for(var s=t[o],l=-1;++l<i;)l!=o&&(a[o]=rz(a[o]||s,t[l],e,n));return nC(rG(a,1),e,n)}function nj(t,e,n){for(var o=-1,a=t.length,s=e.length,l={};++o<a;){var u=o<s?e[o]:i;n(l,t[o],u)}return l}function nO(t){return oq(t)?t:[]}function nV(t){return"function"==typeof t?t:aq}function nD(t,e){return oz(t)?t:iA(t,e)?[t]:iz(ai(t))}function nL(t,e,n){var o=t.length;return n=n===i?o:n,!e&&n>=o?t:nb(t,e,n)}var nR=er||function(t){return t7.clearTimeout(t)};function nB(t,e){if(e)return t.slice();var n=t.length,i=t$?t$(n):new t.constructor(n);return t.copy(i),i}function nI(t){var e=new t.constructor(t.byteLength);return new tH(e).set(new tH(t)),e}function nF(t,e){var n=e?nI(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function nz(t,e){if(t!==e){var n=t!==i,o=null===t,a=t==t,s=o3(t),l=e!==i,u=null===e,c=e==e,f=o3(e);if(!u&&!f&&!s&&t>e||s&&l&&c&&!u&&!f||o&&l&&c||!n&&c||!a)return 1;if(!o&&!s&&!f&&t<e||f&&n&&a&&!o&&!s||u&&n&&a||!l&&a||!c)return -1}return 0}function nU(t,e,n,i){for(var o=-1,a=t.length,s=n.length,l=-1,u=e.length,c=e6(a-s,0),f=tw(u+c),p=!i;++l<u;)f[l]=e[l];for(;++o<s;)(p||o<a)&&(f[n[o]]=t[o]);for(;c--;)f[l++]=t[o++];return f}function nN(t,e,n,i){for(var o=-1,a=t.length,s=-1,l=n.length,u=-1,c=e.length,f=e6(a-l,0),p=tw(f+c),h=!i;++o<f;)p[o]=t[o];for(var d=o;++u<c;)p[d+u]=e[u];for(;++s<l;)(h||o<a)&&(p[d+n[s]]=t[o++]);return p}function nq(t,e){var n=-1,i=t.length;for(e||(e=tw(i));++n<i;)e[n]=t[n];return e}function nH(t,e,n,o){var a=!n;n||(n={});for(var s=-1,l=e.length;++s<l;){var u=e[s],c=o?o(n[u],t[u],u,n,t):i;c===i&&(c=t[u]),a?rD(n,u,c):rT(n,u,c)}return n}function n$(t,e){return function(n,i){var o=oz(n)?ef:rO,a=e?e():{};return o(n,t,id(i,2),a)}}function nG(t){return nd(function(e,n){var o=-1,a=n.length,s=a>1?n[a-1]:i,l=a>2?n[2]:i;for(s=t.length>3&&"function"==typeof s?(a--,s):i,l&&iC(n[0],n[1],l)&&(s=a<3?i:s,a=1),e=tA(e);++o<a;){var u=n[o];u&&t(e,u,o,s)}return e})}function nK(t,e){return function(n,i){if(null==n)return n;if(!oN(n))return t(n,i);for(var o=n.length,a=e?o:-1,s=tA(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}function nW(t){return function(e,n,i){for(var o=-1,a=tA(e),s=i(e),l=s.length;l--;){var u=s[t?l:++o];if(!1===n(a[u],u,a))break}return e}}function nY(t){return function(e){var n=eq(e=ai(e))?eY(e):i,o=n?n[0]:e.charAt(0),a=n?nL(n,1).join(""):e.slice(1);return o[t]()+a}}function nQ(t){return function(e){return ey(aB(aS(e).replace(tK,"")),t,"")}}function nJ(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=rb(t.prototype),i=t.apply(n,e);return oQ(i)?i:n}}function nX(t){return function(e,n,o){var a=tA(e);if(!oN(e)){var s=id(n,3);e=ag(e),n=function(t){return s(a[t],t,a)}}var l=t(e,n,o);return l>-1?a[s?e[l]:l]:i}}function nZ(t){return is(function(e){var n=e.length,a=n,s=r_.prototype.thru;for(t&&e.reverse();a--;){var l=e[a];if("function"!=typeof l)throw new tS(o);if(s&&!u&&"wrapper"==ip(l))var u=new r_([],!0)}for(a=u?a:n;++a<n;){var c=ip(l=e[a]),f="wrapper"==c?ic(l):i;u=f&&iP(f[0])&&424==f[1]&&!f[4].length&&1==f[9]?u[ip(f[0])].apply(u,f[3]):1==l.length&&iP(l)?u[c]():u.thru(l)}return function(){var t=arguments,i=t[0];if(u&&1==t.length&&oz(i))return u.plant(i).value();for(var o=0,a=n?e[o].apply(this,t):i;++o<n;)a=e[o].call(this,a);return a}})}function n0(t,e,n,o,a,s,l,u,c,f){var p=128&e,h=1&e,d=2&e,v=24&e,m=512&e,y=d?i:nJ(t);function _(){for(var w=arguments.length,x=tw(w),k=w;k--;)x[k]=arguments[k];if(v)var E=ih(_),C=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(x,E);if(o&&(x=nU(x,o,a,v)),s&&(x=nN(x,s,l,v)),w-=C,v&&w<f){var A=eG(x,E);return n8(t,e,n0,_.placeholder,n,x,A,u,c,f-w)}var P=h?n:this,M=d?P[t]:t;return w=x.length,u?x=function(t,e){for(var n=t.length,o=e4(e.length,n),a=nq(t);o--;){var s=e[o];t[o]=iE(s,n)?a[s]:i}return t}(x,u):m&&w>1&&x.reverse(),p&&c<w&&(x.length=c),this&&this!==t7&&this instanceof _&&(M=y||nJ(M)),M.apply(P,x)}return _}function n1(t,e){return function(n,i){var o,a;return o=e(i),a={},rY(n,function(e,n,i){t(a,o(e),n,i)}),a}}function n2(t,e){return function(n,o){var a;if(n===i&&o===i)return e;if(n!==i&&(a=n),o!==i){if(a===i)return o;"string"==typeof n||"string"==typeof o?(n=nE(n),o=nE(o)):(n=nk(n),o=nk(o)),a=t(n,o)}return a}}function n5(t){return is(function(e){return e=eg(e,eL(id())),nd(function(n){var i=this;return t(e,function(t){return ec(t,i,n)})})})}function n3(t,e){var n=(e=e===i?" ":nE(e)).length;if(n<2)return n?nh(e,t):e;var o=nh(e,eT(t/eW(e)));return eq(e)?nL(eY(o),0,t).join(""):o.slice(0,t)}function n6(t){return function(e,n,o){o&&"number"!=typeof o&&iC(e,n,o)&&(n=o=i),e=o9(e),n===i?(n=e,e=0):n=o9(n),o=o===i?e<n?1:-1:o9(o);for(var a=e,s=n,l=o,u=-1,c=e6(eT((s-a)/(l||1)),0),f=tw(c);c--;)f[t?c:++u]=a,a+=l;return f}}function n4(t){return function(e,n){return("string"!=typeof e||"string"!=typeof n)&&(e=ar(e),n=ar(n)),t(e,n)}}function n8(t,e,n,o,a,s,l,u,c,f){var p=8&e,h=p?l:i,d=p?i:l,v=p?s:i,m=p?i:s;e|=p?32:64,4&(e&=~(p?64:32))||(e&=-4);var y=[t,e,a,v,h,m,d,u,c,f],_=n.apply(i,y);return iP(t)&&iD(_,y),_.placeholder=o,iB(_,t,e)}function n7(t){var e=tC[t];return function(t,n){if(t=ar(t),(n=null==n?0:e4(at(n),292))&&e2(t)){var i=(ai(t)+"e").split("e");return+((i=(ai(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(i[1]-n))}return e(t)}}var n9=ri&&1/eK(new ri([,-0]))[1]==l?function(t){return new ri(t)}:aW;function it(t){return function(e){var n,i,o=i_(e);return o==_?eH(e):o==C?(n=-1,i=Array(e.size),e.forEach(function(t){i[++n]=[t,t]}),i):eg(t(e),function(t){return[t,e[t]]})}}function ie(t,e,n,a,l,u,c,f){var p=2&e;if(!p&&"function"!=typeof t)throw new tS(o);var h=a?a.length:0;if(h||(e&=-97,a=l=i),c=c===i?c:e6(at(c),0),f=f===i?f:at(f),h-=l?l.length:0,64&e){var d=a,v=l;a=l=i}var m=p?i:ic(t),y=[t,e,n,a,l,d,v,u,c,f];if(m&&function(t,e){var n=t[1],i=e[1],o=n|i,a=o<131,l=128==i&&8==n||128==i&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(a||l){1&i&&(t[2]=e[2],o|=1&n?0:4);var u=e[3];if(u){var c=t[3];t[3]=c?nU(c,u,e[4]):u,t[4]=c?eG(t[3],s):e[4]}(u=e[5])&&(c=t[5],t[5]=c?nN(c,u,e[6]):u,t[6]=c?eG(t[5],s):e[6]),(u=e[7])&&(t[7]=u),128&i&&(t[8]=null==t[8]?e[8]:e4(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o}}(y,m),t=y[0],e=y[1],n=y[2],a=y[3],l=y[4],(f=y[9]=y[9]===i?p?0:t.length:e6(y[9]-h,0))||!(24&e)||(e&=-25),e&&1!=e)8==e||16==e?j=function(t,e,n){var o=nJ(t);function a(){for(var s=arguments.length,l=tw(s),u=s,c=ih(a);u--;)l[u]=arguments[u];var f=s<3&&l[0]!==c&&l[s-1]!==c?[]:eG(l,c);return(s-=f.length)<n?n8(t,e,n0,a.placeholder,i,l,f,i,i,n-s):ec(this&&this!==t7&&this instanceof a?o:t,this,l)}return a}(t,e,f):32!=e&&33!=e||l.length?j=n0.apply(i,y):(_=t,w=e,x=n,k=a,E=1&w,C=nJ(_),j=function t(){for(var e=-1,n=arguments.length,i=-1,o=k.length,a=tw(o+n),s=this&&this!==t7&&this instanceof t?C:_;++i<o;)a[i]=k[i];for(;n--;)a[i++]=arguments[++e];return ec(s,E?x:this,a)});else var _,w,x,k,E,C,A,P,M,S,T,j=(A=t,P=e,M=n,S=1&P,T=nJ(A),function t(){return(this&&this!==t7&&this instanceof t?T:A).apply(S?M:this,arguments)});return iB((m?nm:iD)(j,y),t,e)}function ir(t,e,n,o){return t===i||oR(t,tO[n])&&!tL.call(o,n)?e:t}function ii(t,e,n,o,a,s){return oQ(t)&&oQ(e)&&(s.set(e,t),na(t,e,i,ii,s),s.delete(e)),t}function io(t){return o0(t)?i:t}function ia(t,e,n,o,a,s){var l=1&n,u=t.length,c=e.length;if(u!=c&&!(l&&c>u))return!1;var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var h=-1,d=!0,v=2&n?new rC:i;for(s.set(t,e),s.set(e,t);++h<u;){var m=t[h],y=e[h];if(o)var _=l?o(y,m,h,e,t,s):o(m,y,h,t,e,s);if(_!==i){if(_)continue;d=!1;break}if(v){if(!ew(e,function(t,e){if(!eB(v,e)&&(m===t||a(m,t,n,o,s)))return v.push(e)})){d=!1;break}}else if(!(m===y||a(m,y,n,o,s))){d=!1;break}}return s.delete(t),s.delete(e),d}function is(t){return iR(ij(t,i,iY),t+"")}function il(t){return rZ(t,ag,ib)}function iu(t){return rZ(t,ab,iy)}var ic=rs?function(t){return rs.get(t)}:aW;function ip(t){for(var e=t.name+"",n=rl[e],i=tL.call(rl,e)?n.length:0;i--;){var o=n[i],a=o.func;if(null==a||a==t)return o.name}return e}function ih(t){return(tL.call(rg,"placeholder")?rg:t).placeholder}function id(){var t=rg.iteratee||aH;return t=t===aH?nt:t,arguments.length?t(arguments[0],arguments[1]):t}function iv(t,e){var n,i,o=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function im(t){for(var e=ag(t),n=e.length;n--;){var i,o=e[n],a=t[o];e[n]=[o,a,(i=a)==i&&!oQ(i)]}return e}function ig(t,e){var n=null==t?i:t[e];return r9(n)?n:i}var ib=e0?function(t){return null==t?[]:ed(e0(t=tA(t)),function(e){return tJ.call(t,e)})}:a1,iy=e0?function(t){for(var e=[];t;)eb(e,ib(t)),t=tG(t);return e}:a1,i_=r0;function iw(t,e,n){e=nD(e,t);for(var i=-1,o=e.length,a=!1;++i<o;){var s=iU(e[i]);if(!(a=null!=t&&n(t,s)))break;t=t[s]}return a||++i!=o?a:!!(o=null==t?0:t.length)&&oY(o)&&iE(s,o)&&(oz(t)||oF(t))}function ix(t){return"function"!=typeof t.constructor||iS(t)?{}:rb(tG(t))}function ik(t){return oz(t)||oF(t)||!!(t4&&t&&t[t4])}function iE(t,e){var n=typeof t;return!!(e=null==e?0x1fffffffffffff:e)&&("number"==n||"symbol"!=n&&tv.test(t))&&t>-1&&t%1==0&&t<e}function iC(t,e,n){if(!oQ(n))return!1;var i=typeof e;return("number"==i?!!(oN(n)&&iE(e,n.length)):"string"==i&&e in n)&&oR(n[e],t)}function iA(t,e){if(oz(t))return!1;var n=typeof t;return!!("number"==n||"symbol"==n||"boolean"==n||null==t||o3(t))||J.test(t)||!Q.test(t)||null!=e&&t in tA(e)}function iP(t){var e=ip(t),n=rg[e];if("function"!=typeof n||!(e in rw.prototype))return!1;if(t===n)return!0;var i=ic(n);return!!i&&t===i[0]}(re&&i_(new re(new ArrayBuffer(1)))!=T||rr&&i_(new rr)!=_||rn&&i_(rn.resolve())!=k||ri&&i_(new ri)!=C||ro&&i_(new ro)!=M)&&(i_=function(t){var e=r0(t),n=e==x?t.constructor:i,o=n?iN(n):"";if(o)switch(o){case ru:return T;case rc:return _;case rf:return k;case rp:return C;case rh:return M}return e});var iM=tV?oK:a2;function iS(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||tO)}function iT(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in tA(n))}}function ij(t,e,n){return e=e6(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=e6(i.length-e,0),s=tw(a);++o<a;)s[o]=i[e+o];o=-1;for(var l=tw(e+1);++o<e;)l[o]=i[o];return l[e]=n(s),ec(t,this,l)}}function iO(t,e){return e.length<2?t:rX(t,nb(e,0,-1))}function iV(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var iD=iI(nm),iL=ex||function(t,e){return t7.setTimeout(t,e)},iR=iI(ng);function iB(t,e,n){var i,o,a,s=e+"";return iR(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(tn,"{\n/* [wrapped with "+e+"] */\n")}(s,(i=(a=s.match(ti))?a[1].split(to):[],o=n,ep(c,function(t){var e="_."+t[0];o&t[1]&&!ev(i,e)&&i.push(e)}),i.sort())))}function iI(t){var e=0,n=0;return function(){var o=e8(),a=16-(o-n);if(n=o,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function iF(t,e){var n=-1,o=t.length,a=o-1;for(e=e===i?o:e;++n<e;){var s=np(n,a),l=t[s];t[s]=t[n],t[n]=l}return t.length=e,t}var iz=(ty=(tr=oT(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(X,function(t,n,i,o){e.push(i?o.replace(tl,"$1"):n||t)}),e},function(t){return 500===ty.size&&ty.clear(),t})).cache,tr);function iU(t){if("string"==typeof t||o3(t))return t;var e=t+"";return"0"==e&&1/t==-l?"-0":e}function iN(t){if(null!=t){try{return tD.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function iq(t){if(t instanceof rw)return t.clone();var e=new r_(t.__wrapped__,t.__chain__);return e.__actions__=nq(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var iH=nd(function(t,e){return oq(t)?rz(t,rG(e,1,oq,!0)):[]}),i$=nd(function(t,e){var n=i0(e);return oq(n)&&(n=i),oq(t)?rz(t,rG(e,1,oq,!0),id(n,2)):[]}),iG=nd(function(t,e){var n=i0(e);return oq(n)&&(n=i),oq(t)?rz(t,rG(e,1,oq,!0),i,n):[]});function iK(t,e,n){var i=null==t?0:t.length;if(!i)return -1;var o=null==n?0:at(n);return o<0&&(o=e6(i+o,0)),eE(t,id(e,3),o)}function iW(t,e,n){var o=null==t?0:t.length;if(!o)return -1;var a=o-1;return n!==i&&(a=at(n),a=n<0?e6(o+a,0):e4(a,o-1)),eE(t,id(e,3),a,!0)}function iY(t){return(null==t?0:t.length)?rG(t,1):[]}function iQ(t){return t&&t.length?t[0]:i}var iJ=nd(function(t){var e=eg(t,nO);return e.length&&e[0]===t[0]?r3(e):[]}),iX=nd(function(t){var e=i0(t),n=eg(t,nO);return e===i0(n)?e=i:n.pop(),n.length&&n[0]===t[0]?r3(n,id(e,2)):[]}),iZ=nd(function(t){var e=i0(t),n=eg(t,nO);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?r3(n,i,e):[]});function i0(t){var e=null==t?0:t.length;return e?t[e-1]:i}var i1=nd(i2);function i2(t,e){return t&&t.length&&e&&e.length?nc(t,e):t}var i5=is(function(t,e){var n=null==t?0:t.length,i=rL(t,e);return nf(t,eg(e,function(t){return iE(t,n)?+t:t}).sort(nz)),i});function i3(t){return null==t?t:rt.call(t)}var i6=nd(function(t){return nC(rG(t,1,oq,!0))}),i4=nd(function(t){var e=i0(t);return oq(e)&&(e=i),nC(rG(t,1,oq,!0),id(e,2))}),i8=nd(function(t){var e=i0(t);return e="function"==typeof e?e:i,nC(rG(t,1,oq,!0),i,e)});function i7(t){if(!(t&&t.length))return[];var e=0;return t=ed(t,function(t){if(oq(t))return e=e6(t.length,e),!0}),eV(e,function(e){return eg(t,eS(e))})}function i9(t,e){if(!(t&&t.length))return[];var n=i7(t);return null==e?n:eg(n,function(t){return ec(e,i,t)})}var ot=nd(function(t,e){return oq(t)?rz(t,e):[]}),oe=nd(function(t){return nT(ed(t,oq))}),or=nd(function(t){var e=i0(t);return oq(e)&&(e=i),nT(ed(t,oq),id(e,2))}),on=nd(function(t){var e=i0(t);return e="function"==typeof e?e:i,nT(ed(t,oq),i,e)}),oi=nd(i7),oo=nd(function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,i9(t,n)});function oa(t){var e=rg(t);return e.__chain__=!0,e}function os(t,e){return e(t)}var ol=is(function(t){var e=t.length,n=e?t[0]:0,o=this.__wrapped__,a=function(e){return rL(e,t)};return!(e>1)&&!this.__actions__.length&&o instanceof rw&&iE(n)?((o=o.slice(n,+n+ +!!e)).__actions__.push({func:os,args:[a],thisArg:i}),new r_(o,this.__chain__).thru(function(t){return e&&!t.length&&t.push(i),t})):this.thru(a)}),ou=n$(function(t,e,n){tL.call(t,n)?++t[n]:rD(t,n,1)}),oc=nX(iK),of=nX(iW);function op(t,e){return(oz(t)?ep:rU)(t,id(e,3))}function oh(t,e){return(oz(t)?function(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}:rN)(t,id(e,3))}var od=n$(function(t,e,n){tL.call(t,n)?t[n].push(e):rD(t,n,[e])}),ov=nd(function(t,e,n){var i=-1,o="function"==typeof e,a=oN(t)?tw(t.length):[];return rU(t,function(t){a[++i]=o?ec(e,t,n):r6(t,e,n)}),a}),om=n$(function(t,e,n){rD(t,n,e)});function og(t,e){return(oz(t)?eg:nn)(t,id(e,3))}var ob=n$(function(t,e,n){t[+!n].push(e)},function(){return[[],[]]}),oy=nd(function(t,e){if(null==t)return[];var n=e.length;return n>1&&iC(t,e[0],e[1])?e=[]:n>2&&iC(e[0],e[1],e[2])&&(e=[e[0]]),nl(t,rG(e,1),[])}),o_=en||function(){return t7.Date.now()};function ow(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,ie(t,128,i,i,i,i,e)}function ox(t,e){var n;if("function"!=typeof e)throw new tS(o);return t=at(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var ok=nd(function(t,e,n){var i=1;if(n.length){var o=eG(n,ih(ok));i|=32}return ie(t,i,e,n,o)}),oE=nd(function(t,e,n){var i=3;if(n.length){var o=eG(n,ih(oE));i|=32}return ie(e,i,t,n,o)});function oC(t,e,n){e=n?i:e;var o=ie(t,8,i,i,i,i,i,e);return o.placeholder=oC.placeholder,o}function oA(t,e,n){e=n?i:e;var o=ie(t,16,i,i,i,i,i,e);return o.placeholder=oA.placeholder,o}function oP(t,e,n){var a,s,l,u,c,f,p=0,h=!1,d=!1,v=!0;if("function"!=typeof t)throw new tS(o);function m(e){var n=a,o=s;return a=s=i,p=e,u=t.apply(o,n)}function y(t){var n=t-f,o=t-p;return f===i||n>=e||n<0||d&&o>=l}function _(){var t,n,i,o=o_();if(y(o))return w(o);c=iL(_,(t=o-f,n=o-p,i=e-t,d?e4(i,l-n):i))}function w(t){return(c=i,v&&a)?m(t):(a=s=i,u)}function x(){var t,n=o_(),o=y(n);if(a=arguments,s=this,f=n,o){if(c===i)return p=t=f,c=iL(_,e),h?m(t):u;if(d)return nR(c),c=iL(_,e),m(f)}return c===i&&(c=iL(_,e)),u}return e=ar(e)||0,oQ(n)&&(h=!!n.leading,l=(d="maxWait"in n)?e6(ar(n.maxWait)||0,e):l,v="trailing"in n?!!n.trailing:v),x.cancel=function(){c!==i&&nR(c),p=0,a=f=s=c=i},x.flush=function(){return c===i?u:w(o_())},x}var oM=nd(function(t,e){return rF(t,1,e)}),oS=nd(function(t,e,n){return rF(t,ar(e)||0,n)});function oT(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new tS(o);var n=function(){var i=arguments,o=e?e.apply(this,i):i[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,i);return n.cache=a.set(o,s)||a,s};return n.cache=new(oT.Cache||rE),n}function oj(t){if("function"!=typeof t)throw new tS(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}oT.Cache=rE;var oO=nd(function(t,e){var n=(e=1==e.length&&oz(e[0])?eg(e[0],eL(id())):eg(rG(e,1),eL(id()))).length;return nd(function(i){for(var o=-1,a=e4(i.length,n);++o<a;)i[o]=e[o].call(this,i[o]);return ec(t,this,i)})}),oV=nd(function(t,e){var n=eG(e,ih(oV));return ie(t,32,i,e,n)}),oD=nd(function(t,e){var n=eG(e,ih(oD));return ie(t,64,i,e,n)}),oL=is(function(t,e){return ie(t,256,i,i,i,e)});function oR(t,e){return t===e||t!=t&&e!=e}var oB=n4(r1),oI=n4(function(t,e){return t>=e}),oF=r4(function(){return arguments}())?r4:function(t){return oJ(t)&&tL.call(t,"callee")&&!tJ.call(t,"callee")},oz=tw.isArray,oU=ei?eL(ei):function(t){return oJ(t)&&r0(t)==S};function oN(t){return null!=t&&oY(t.length)&&!oK(t)}function oq(t){return oJ(t)&&oN(t)}var oH=e1||a2,o$=eo?eL(eo):function(t){return oJ(t)&&r0(t)==d};function oG(t){if(!oJ(t))return!1;var e=r0(t);return e==v||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!o0(t)}function oK(t){if(!oQ(t))return!1;var e=r0(t);return e==m||e==y||"[object AsyncFunction]"==e||"[object Proxy]"==e}function oW(t){return"number"==typeof t&&t==at(t)}function oY(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=0x1fffffffffffff}function oQ(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function oJ(t){return null!=t&&"object"==typeof t}var oX=ea?eL(ea):function(t){return oJ(t)&&i_(t)==_};function oZ(t){return"number"==typeof t||oJ(t)&&r0(t)==w}function o0(t){if(!oJ(t)||r0(t)!=x)return!1;var e=tG(t);if(null===e)return!0;var n=tL.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&tD.call(n)==tF}var o1=es?eL(es):function(t){return oJ(t)&&r0(t)==E},o2=el?eL(el):function(t){return oJ(t)&&i_(t)==C};function o5(t){return"string"==typeof t||!oz(t)&&oJ(t)&&r0(t)==A}function o3(t){return"symbol"==typeof t||oJ(t)&&r0(t)==P}var o6=eu?eL(eu):function(t){return oJ(t)&&oY(t.length)&&!!t1[r0(t)]},o4=n4(nr),o8=n4(function(t,e){return t<=e});function o7(t){if(!t)return[];if(oN(t))return o5(t)?eY(t):nq(t);if(t8&&t[t8]){for(var e,n=t[t8](),i=[];!(e=n.next()).done;)i.push(e.value);return i}var o=i_(t);return(o==_?eH:o==C?eK:aA)(t)}function o9(t){return t?(t=ar(t))===l||t===-l?(t<0?-1:1)*17976931348623157e292:t==t?t:0:0===t?t:0}function at(t){var e=o9(t),n=e%1;return e==e?n?e-n:e:0}function ae(t){return t?rR(at(t),0,0xffffffff):0}function ar(t){if("number"==typeof t)return t;if(o3(t))return u;if(oQ(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=oQ(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=eD(t);var n=tp.test(t);return n||td.test(t)?t6(t.slice(2),n?2:8):tf.test(t)?u:+t}function an(t){return nH(t,ab(t))}function ai(t){return null==t?"":nE(t)}var ao=nG(function(t,e){if(iS(e)||oN(e))return void nH(e,ag(e),t);for(var n in e)tL.call(e,n)&&rT(t,n,e[n])}),aa=nG(function(t,e){nH(e,ab(e),t)}),as=nG(function(t,e,n,i){nH(e,ab(e),t,i)}),al=nG(function(t,e,n,i){nH(e,ag(e),t,i)}),au=is(rL),ac=nd(function(t,e){t=tA(t);var n=-1,o=e.length,a=o>2?e[2]:i;for(a&&iC(e[0],e[1],a)&&(o=1);++n<o;)for(var s=e[n],l=ab(s),u=-1,c=l.length;++u<c;){var f=l[u],p=t[f];(p===i||oR(p,tO[f])&&!tL.call(t,f))&&(t[f]=s[f])}return t}),af=nd(function(t){return t.push(i,ii),ec(a_,i,t)});function ap(t,e,n){var o=null==t?i:rX(t,e);return o===i?n:o}function ah(t,e){return null!=t&&iw(t,e,r5)}var ad=n1(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=tI.call(e)),t[e]=n},az(aq)),av=n1(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=tI.call(e)),tL.call(t,e)?t[e].push(n):t[e]=[n]},id),am=nd(r6);function ag(t){return oN(t)?rP(t):ne(t)}function ab(t){return oN(t)?rP(t,!0):function(t){if(!oQ(t)){var e=t,n=[];if(null!=e)for(var i in tA(e))n.push(i);return n}var o=iS(t),a=[];for(var s in t)"constructor"==s&&(o||!tL.call(t,s))||a.push(s);return a}(t)}var ay=nG(function(t,e,n){na(t,e,n)}),a_=nG(function(t,e,n,i){na(t,e,n,i)}),aw=is(function(t,e){var n={};if(null==t)return n;var i=!1;e=eg(e,function(e){return e=nD(e,t),i||(i=e.length>1),e}),nH(t,iu(t),n),i&&(n=rB(n,7,io));for(var o=e.length;o--;)nA(n,e[o]);return n}),ax=is(function(t,e){return null==t?{}:nu(t,e,function(e,n){return ah(t,n)})});function ak(t,e){if(null==t)return{};var n=eg(iu(t),function(t){return[t]});return e=id(e),nu(t,n,function(t,n){return e(t,n[0])})}var aE=it(ag),aC=it(ab);function aA(t){return null==t?[]:eR(t,ag(t))}var aP=nQ(function(t,e,n){return e=e.toLowerCase(),t+(n?aM(e):e)});function aM(t){return aR(ai(t).toLowerCase())}function aS(t){return(t=ai(t))&&t.replace(tm,ez).replace(tW,"")}var aT=nQ(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),aj=nQ(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),aO=nY("toLowerCase"),aV=nQ(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),aD=nQ(function(t,e,n){return t+(n?" ":"")+aR(e)}),aL=nQ(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),aR=nY("toUpperCase");function aB(t,e,n){if(t=ai(t),(e=n?i:e)===i){var o;return(o=t,tX.test(o))?t.match(tQ)||[]:t.match(ta)||[]}return t.match(e)||[]}var aI=nd(function(t,e){try{return ec(t,i,e)}catch(t){return oG(t)?t:new tk(t)}}),aF=is(function(t,e){return ep(e,function(e){rD(t,e=iU(e),ok(t[e],t))}),t});function az(t){return function(){return t}}var aU=nZ(),aN=nZ(!0);function aq(t){return t}function aH(t){return nt("function"==typeof t?t:rB(t,1))}var a$=nd(function(t,e){return function(n){return r6(n,t,e)}}),aG=nd(function(t,e){return function(n){return r6(t,n,e)}});function aK(t,e,n){var i=ag(e),o=rJ(e,i);null!=n||oQ(e)&&(o.length||!i.length)||(n=e,e=t,t=this,o=rJ(e,ag(e)));var a=!(oQ(n)&&"chain"in n)||!!n.chain,s=oK(t);return ep(o,function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__);return(n.__actions__=nq(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,eb([this.value()],arguments))})}),t}function aW(){}var aY=n5(eg),aQ=n5(eh),aJ=n5(ew);function aX(t){return iA(t)?eS(iU(t)):function(e){return rX(e,t)}}var aZ=n6(),a0=n6(!0);function a1(){return[]}function a2(){return!1}var a5=n2(function(t,e){return t+e},0),a3=n7("ceil"),a6=n2(function(t,e){return t/e},1),a4=n7("floor"),a8=n2(function(t,e){return t*e},1),a7=n7("round"),a9=n2(function(t,e){return t-e},0);return rg.after=function(t,e){if("function"!=typeof e)throw new tS(o);return t=at(t),function(){if(--t<1)return e.apply(this,arguments)}},rg.ary=ow,rg.assign=ao,rg.assignIn=aa,rg.assignInWith=as,rg.assignWith=al,rg.at=au,rg.before=ox,rg.bind=ok,rg.bindAll=aF,rg.bindKey=oE,rg.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return oz(t)?t:[t]},rg.chain=oa,rg.chunk=function(t,e,n){e=(n?iC(t,e,n):e===i)?1:e6(at(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,l=tw(eT(o/e));a<o;)l[s++]=nb(t,a,a+=e);return l},rg.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,o=[];++e<n;){var a=t[e];a&&(o[i++]=a)}return o},rg.concat=function(){var t=arguments.length;if(!t)return[];for(var e=tw(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return eb(oz(n)?nq(n):[n],rG(e,1))},rg.cond=function(t){var e=null==t?0:t.length,n=id();return t=e?eg(t,function(t){if("function"!=typeof t[1])throw new tS(o);return[n(t[0]),t[1]]}):[],nd(function(n){for(var i=-1;++i<e;){var o=t[i];if(ec(o[0],this,n))return ec(o[1],this,n)}})},rg.conforms=function(t){var e,n;return n=ag(e=rB(t,1)),function(t){return rI(t,e,n)}},rg.constant=az,rg.countBy=ou,rg.create=function(t,e){var n=rb(t);return null==e?n:rV(n,e)},rg.curry=oC,rg.curryRight=oA,rg.debounce=oP,rg.defaults=ac,rg.defaultsDeep=af,rg.defer=oM,rg.delay=oS,rg.difference=iH,rg.differenceBy=i$,rg.differenceWith=iG,rg.drop=function(t,e,n){var o=null==t?0:t.length;return o?nb(t,(e=n||e===i?1:at(e))<0?0:e,o):[]},rg.dropRight=function(t,e,n){var o=null==t?0:t.length;return o?nb(t,0,(e=o-(e=n||e===i?1:at(e)))<0?0:e):[]},rg.dropRightWhile=function(t,e){return t&&t.length?nM(t,id(e,3),!0,!0):[]},rg.dropWhile=function(t,e){return t&&t.length?nM(t,id(e,3),!0):[]},rg.fill=function(t,e,n,o){var a=null==t?0:t.length;if(!a)return[];n&&"number"!=typeof n&&iC(t,e,n)&&(n=0,o=a);var s=n,l=o,u=t.length;for((s=at(s))<0&&(s=-s>u?0:u+s),(l=l===i||l>u?u:at(l))<0&&(l+=u),l=s>l?0:ae(l);s<l;)t[s++]=e;return t},rg.filter=function(t,e){return(oz(t)?ed:r$)(t,id(e,3))},rg.flatMap=function(t,e){return rG(og(t,e),1)},rg.flatMapDeep=function(t,e){return rG(og(t,e),l)},rg.flatMapDepth=function(t,e,n){return n=n===i?1:at(n),rG(og(t,e),n)},rg.flatten=iY,rg.flattenDeep=function(t){return(null==t?0:t.length)?rG(t,l):[]},rg.flattenDepth=function(t,e){return(null==t?0:t.length)?rG(t,e=e===i?1:at(e)):[]},rg.flip=function(t){return ie(t,512)},rg.flow=aU,rg.flowRight=aN,rg.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var o=t[e];i[o[0]]=o[1]}return i},rg.functions=function(t){return null==t?[]:rJ(t,ag(t))},rg.functionsIn=function(t){return null==t?[]:rJ(t,ab(t))},rg.groupBy=od,rg.initial=function(t){return(null==t?0:t.length)?nb(t,0,-1):[]},rg.intersection=iJ,rg.intersectionBy=iX,rg.intersectionWith=iZ,rg.invert=ad,rg.invertBy=av,rg.invokeMap=ov,rg.iteratee=aH,rg.keyBy=om,rg.keys=ag,rg.keysIn=ab,rg.map=og,rg.mapKeys=function(t,e){var n={};return e=id(e,3),rY(t,function(t,i,o){rD(n,e(t,i,o),t)}),n},rg.mapValues=function(t,e){var n={};return e=id(e,3),rY(t,function(t,i,o){rD(n,i,e(t,i,o))}),n},rg.matches=function(t){return ni(rB(t,1))},rg.matchesProperty=function(t,e){return no(t,rB(e,1))},rg.memoize=oT,rg.merge=ay,rg.mergeWith=a_,rg.method=a$,rg.methodOf=aG,rg.mixin=aK,rg.negate=oj,rg.nthArg=function(t){return t=at(t),nd(function(e){return ns(e,t)})},rg.omit=aw,rg.omitBy=function(t,e){return ak(t,oj(id(e)))},rg.once=function(t){return ox(2,t)},rg.orderBy=function(t,e,n,o){return null==t?[]:(oz(e)||(e=null==e?[]:[e]),oz(n=o?i:n)||(n=null==n?[]:[n]),nl(t,e,n))},rg.over=aY,rg.overArgs=oO,rg.overEvery=aQ,rg.overSome=aJ,rg.partial=oV,rg.partialRight=oD,rg.partition=ob,rg.pick=ax,rg.pickBy=ak,rg.property=aX,rg.propertyOf=function(t){return function(e){return null==t?i:rX(t,e)}},rg.pull=i1,rg.pullAll=i2,rg.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?nc(t,e,id(n,2)):t},rg.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?nc(t,e,i,n):t},rg.pullAt=i5,rg.range=aZ,rg.rangeRight=a0,rg.rearg=oL,rg.reject=function(t,e){return(oz(t)?ed:r$)(t,oj(id(e,3)))},rg.remove=function(t,e){var n=[];if(!(t&&t.length))return n;var i=-1,o=[],a=t.length;for(e=id(e,3);++i<a;){var s=t[i];e(s,i,t)&&(n.push(s),o.push(i))}return nf(t,o),n},rg.rest=function(t,e){if("function"!=typeof t)throw new tS(o);return nd(t,e=e===i?e:at(e))},rg.reverse=i3,rg.sampleSize=function(t,e,n){return e=(n?iC(t,e,n):e===i)?1:at(e),(oz(t)?function(t,e){return iF(nq(t),rR(e,0,t.length))}:function(t,e){var n=aA(t);return iF(n,rR(e,0,n.length))})(t,e)},rg.set=function(t,e,n){return null==t?t:nv(t,e,n)},rg.setWith=function(t,e,n,o){return o="function"==typeof o?o:i,null==t?t:nv(t,e,n,o)},rg.shuffle=function(t){return(oz(t)?function(t){return iF(nq(t))}:function(t){return iF(aA(t))})(t)},rg.slice=function(t,e,n){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&iC(t,e,n)?(e=0,n=o):(e=null==e?0:at(e),n=n===i?o:at(n)),nb(t,e,n)):[]},rg.sortBy=oy,rg.sortedUniq=function(t){return t&&t.length?nx(t):[]},rg.sortedUniqBy=function(t,e){return t&&t.length?nx(t,id(e,2)):[]},rg.split=function(t,e,n){return(n&&"number"!=typeof n&&iC(t,e,n)&&(e=n=i),n=n===i?0xffffffff:n>>>0)?(t=ai(t))&&("string"==typeof e||null!=e&&!o1(e))&&!(e=nE(e))&&eq(t)?nL(eY(t),0,n):t.split(e,n):[]},rg.spread=function(t,e){if("function"!=typeof t)throw new tS(o);return e=null==e?0:e6(at(e),0),nd(function(n){var i=n[e],o=nL(n,0,e);return i&&eb(o,i),ec(t,this,o)})},rg.tail=function(t){var e=null==t?0:t.length;return e?nb(t,1,e):[]},rg.take=function(t,e,n){return t&&t.length?nb(t,0,(e=n||e===i?1:at(e))<0?0:e):[]},rg.takeRight=function(t,e,n){var o=null==t?0:t.length;return o?nb(t,(e=o-(e=n||e===i?1:at(e)))<0?0:e,o):[]},rg.takeRightWhile=function(t,e){return t&&t.length?nM(t,id(e,3),!1,!0):[]},rg.takeWhile=function(t,e){return t&&t.length?nM(t,id(e,3)):[]},rg.tap=function(t,e){return e(t),t},rg.throttle=function(t,e,n){var i=!0,a=!0;if("function"!=typeof t)throw new tS(o);return oQ(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),oP(t,e,{leading:i,maxWait:e,trailing:a})},rg.thru=os,rg.toArray=o7,rg.toPairs=aE,rg.toPairsIn=aC,rg.toPath=function(t){return oz(t)?eg(t,iU):o3(t)?[t]:nq(iz(ai(t)))},rg.toPlainObject=an,rg.transform=function(t,e,n){var i=oz(t),o=i||oH(t)||o6(t);if(e=id(e,4),null==n){var a=t&&t.constructor;n=o?i?new a:[]:oQ(t)&&oK(a)?rb(tG(t)):{}}return(o?ep:rY)(t,function(t,i,o){return e(n,t,i,o)}),n},rg.unary=function(t){return ow(t,1)},rg.union=i6,rg.unionBy=i4,rg.unionWith=i8,rg.uniq=function(t){return t&&t.length?nC(t):[]},rg.uniqBy=function(t,e){return t&&t.length?nC(t,id(e,2)):[]},rg.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?nC(t,i,e):[]},rg.unset=function(t,e){return null==t||nA(t,e)},rg.unzip=i7,rg.unzipWith=i9,rg.update=function(t,e,n){return null==t?t:nP(t,e,nV(n))},rg.updateWith=function(t,e,n,o){return o="function"==typeof o?o:i,null==t?t:nP(t,e,nV(n),o)},rg.values=aA,rg.valuesIn=function(t){return null==t?[]:eR(t,ab(t))},rg.without=ot,rg.words=aB,rg.wrap=function(t,e){return oV(nV(e),t)},rg.xor=oe,rg.xorBy=or,rg.xorWith=on,rg.zip=oi,rg.zipObject=function(t,e){return nj(t||[],e||[],rT)},rg.zipObjectDeep=function(t,e){return nj(t||[],e||[],nv)},rg.zipWith=oo,rg.entries=aE,rg.entriesIn=aC,rg.extend=aa,rg.extendWith=as,aK(rg,rg),rg.add=a5,rg.attempt=aI,rg.camelCase=aP,rg.capitalize=aM,rg.ceil=a3,rg.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=ar(n))==n?n:0),e!==i&&(e=(e=ar(e))==e?e:0),rR(ar(t),e,n)},rg.clone=function(t){return rB(t,4)},rg.cloneDeep=function(t){return rB(t,5)},rg.cloneDeepWith=function(t,e){return rB(t,5,e="function"==typeof e?e:i)},rg.cloneWith=function(t,e){return rB(t,4,e="function"==typeof e?e:i)},rg.conformsTo=function(t,e){return null==e||rI(t,e,ag(e))},rg.deburr=aS,rg.defaultTo=function(t,e){return null==t||t!=t?e:t},rg.divide=a6,rg.endsWith=function(t,e,n){t=ai(t),e=nE(e);var o=t.length,a=n=n===i?o:rR(at(n),0,o);return(n-=e.length)>=0&&t.slice(n,a)==e},rg.eq=oR,rg.escape=function(t){return(t=ai(t))&&G.test(t)?t.replace(H,eU):t},rg.escapeRegExp=function(t){return(t=ai(t))&&tt.test(t)?t.replace(Z,"\\$&"):t},rg.every=function(t,e,n){var o=oz(t)?eh:rq;return n&&iC(t,e,n)&&(e=i),o(t,id(e,3))},rg.find=oc,rg.findIndex=iK,rg.findKey=function(t,e){return ek(t,id(e,3),rY)},rg.findLast=of,rg.findLastIndex=iW,rg.findLastKey=function(t,e){return ek(t,id(e,3),rQ)},rg.floor=a4,rg.forEach=op,rg.forEachRight=oh,rg.forIn=function(t,e){return null==t?t:rK(t,id(e,3),ab)},rg.forInRight=function(t,e){return null==t?t:rW(t,id(e,3),ab)},rg.forOwn=function(t,e){return t&&rY(t,id(e,3))},rg.forOwnRight=function(t,e){return t&&rQ(t,id(e,3))},rg.get=ap,rg.gt=oB,rg.gte=oI,rg.has=function(t,e){return null!=t&&iw(t,e,r2)},rg.hasIn=ah,rg.head=iQ,rg.identity=aq,rg.includes=function(t,e,n,i){t=oN(t)?t:aA(t),n=n&&!i?at(n):0;var o=t.length;return n<0&&(n=e6(o+n,0)),o5(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&eC(t,e,n)>-1},rg.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return -1;var o=null==n?0:at(n);return o<0&&(o=e6(i+o,0)),eC(t,e,o)},rg.inRange=function(t,e,n){var o,a,s;return e=o9(e),n===i?(n=e,e=0):n=o9(n),(o=t=ar(t))>=e4(a=e,s=n)&&o<e6(a,s)},rg.invoke=am,rg.isArguments=oF,rg.isArray=oz,rg.isArrayBuffer=oU,rg.isArrayLike=oN,rg.isArrayLikeObject=oq,rg.isBoolean=function(t){return!0===t||!1===t||oJ(t)&&r0(t)==h},rg.isBuffer=oH,rg.isDate=o$,rg.isElement=function(t){return oJ(t)&&1===t.nodeType&&!o0(t)},rg.isEmpty=function(t){if(null==t)return!0;if(oN(t)&&(oz(t)||"string"==typeof t||"function"==typeof t.splice||oH(t)||o6(t)||oF(t)))return!t.length;var e=i_(t);if(e==_||e==C)return!t.size;if(iS(t))return!ne(t).length;for(var n in t)if(tL.call(t,n))return!1;return!0},rg.isEqual=function(t,e){return r8(t,e)},rg.isEqualWith=function(t,e,n){var o=(n="function"==typeof n?n:i)?n(t,e):i;return o===i?r8(t,e,i,n):!!o},rg.isError=oG,rg.isFinite=function(t){return"number"==typeof t&&e2(t)},rg.isFunction=oK,rg.isInteger=oW,rg.isLength=oY,rg.isMap=oX,rg.isMatch=function(t,e){return t===e||r7(t,e,im(e))},rg.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,r7(t,e,im(e),n)},rg.isNaN=function(t){return oZ(t)&&t!=+t},rg.isNative=function(t){if(iM(t))throw new tk("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return r9(t)},rg.isNil=function(t){return null==t},rg.isNull=function(t){return null===t},rg.isNumber=oZ,rg.isObject=oQ,rg.isObjectLike=oJ,rg.isPlainObject=o0,rg.isRegExp=o1,rg.isSafeInteger=function(t){return oW(t)&&t>=-0x1fffffffffffff&&t<=0x1fffffffffffff},rg.isSet=o2,rg.isString=o5,rg.isSymbol=o3,rg.isTypedArray=o6,rg.isUndefined=function(t){return t===i},rg.isWeakMap=function(t){return oJ(t)&&i_(t)==M},rg.isWeakSet=function(t){return oJ(t)&&"[object WeakSet]"==r0(t)},rg.join=function(t,e){return null==t?"":e5.call(t,e)},rg.kebabCase=aT,rg.last=i0,rg.lastIndexOf=function(t,e,n){var o=null==t?0:t.length;if(!o)return -1;var a=o;return n!==i&&(a=(a=at(n))<0?e6(o+a,0):e4(a,o-1)),e==e?function(t,e,n){for(var i=n+1;i--&&t[i]!==e;);return i}(t,e,a):eE(t,eP,a,!0)},rg.lowerCase=aj,rg.lowerFirst=aO,rg.lt=o4,rg.lte=o8,rg.max=function(t){return t&&t.length?rH(t,aq,r1):i},rg.maxBy=function(t,e){return t&&t.length?rH(t,id(e,2),r1):i},rg.mean=function(t){return eM(t,aq)},rg.meanBy=function(t,e){return eM(t,id(e,2))},rg.min=function(t){return t&&t.length?rH(t,aq,nr):i},rg.minBy=function(t,e){return t&&t.length?rH(t,id(e,2),nr):i},rg.stubArray=a1,rg.stubFalse=a2,rg.stubObject=function(){return{}},rg.stubString=function(){return""},rg.stubTrue=function(){return!0},rg.multiply=a8,rg.nth=function(t,e){return t&&t.length?ns(t,at(e)):i},rg.noConflict=function(){return t7._===this&&(t7._=tz),this},rg.noop=aW,rg.now=o_,rg.pad=function(t,e,n){t=ai(t);var i=(e=at(e))?eW(t):0;if(!e||i>=e)return t;var o=(e-i)/2;return n3(eZ(o),n)+t+n3(eT(o),n)},rg.padEnd=function(t,e,n){t=ai(t);var i=(e=at(e))?eW(t):0;return e&&i<e?t+n3(e-i,n):t},rg.padStart=function(t,e,n){t=ai(t);var i=(e=at(e))?eW(t):0;return e&&i<e?n3(e-i,n)+t:t},rg.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e*=1),e7(ai(t).replace(te,""),e||0)},rg.random=function(t,e,n){if(n&&"boolean"!=typeof n&&iC(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=o9(t),e===i?(e=t,t=0):e=o9(e)),t>e){var o=t;t=e,e=o}if(n||t%1||e%1){var a=e9();return e4(t+a*(e-t+t3("1e-"+((a+"").length-1))),e)}return np(t,e)},rg.reduce=function(t,e,n){var i=oz(t)?ey:ej,o=arguments.length<3;return i(t,id(e,4),n,o,rU)},rg.reduceRight=function(t,e,n){var i=oz(t)?e_:ej,o=arguments.length<3;return i(t,id(e,4),n,o,rN)},rg.repeat=function(t,e,n){return e=(n?iC(t,e,n):e===i)?1:at(e),nh(ai(t),e)},rg.replace=function(){var t=arguments,e=ai(t[0]);return t.length<3?e:e.replace(t[1],t[2])},rg.result=function(t,e,n){e=nD(e,t);var o=-1,a=e.length;for(a||(a=1,t=i);++o<a;){var s=null==t?i:t[iU(e[o])];s===i&&(o=a,s=n),t=oK(s)?s.call(t):s}return t},rg.round=a7,rg.runInContext=t,rg.sample=function(t){return(oz(t)?rM:function(t){return rM(aA(t))})(t)},rg.size=function(t){if(null==t)return 0;if(oN(t))return o5(t)?eW(t):t.length;var e=i_(t);return e==_||e==C?t.size:ne(t).length},rg.snakeCase=aV,rg.some=function(t,e,n){var o=oz(t)?ew:ny;return n&&iC(t,e,n)&&(e=i),o(t,id(e,3))},rg.sortedIndex=function(t,e){return n_(t,e)},rg.sortedIndexBy=function(t,e,n){return nw(t,e,id(n,2))},rg.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=n_(t,e);if(i<n&&oR(t[i],e))return i}return -1},rg.sortedLastIndex=function(t,e){return n_(t,e,!0)},rg.sortedLastIndexBy=function(t,e,n){return nw(t,e,id(n,2),!0)},rg.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=n_(t,e,!0)-1;if(oR(t[n],e))return n}return -1},rg.startCase=aD,rg.startsWith=function(t,e,n){return t=ai(t),n=null==n?0:rR(at(n),0,t.length),e=nE(e),t.slice(n,n+e.length)==e},rg.subtract=a9,rg.sum=function(t){return t&&t.length?eO(t,aq):0},rg.sumBy=function(t,e){return t&&t.length?eO(t,id(e,2)):0},rg.template=function(t,e,n){var o=rg.templateSettings;n&&iC(t,e,n)&&(e=i),t=ai(t),e=as({},e,o,ir);var a,s,l=as({},e.imports,o.imports,ir),u=ag(l),c=eR(l,u),f=0,p=e.interpolate||tg,h="__p += '",d=tP((e.escape||tg).source+"|"+p.source+"|"+(p===Y?tu:tg).source+"|"+(e.evaluate||tg).source+"|$","g"),v="//# sourceURL="+(tL.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++t0+"]")+"\n";t.replace(d,function(e,n,i,o,l,u){return i||(i=o),h+=t.slice(f,u).replace(tb,eN),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),l&&(s=!0,h+="';\n"+l+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),f=u+e.length,e}),h+="';\n";var m=tL.call(e,"variable")&&e.variable;if(m){if(ts.test(m))throw new tk("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(s?h.replace(z,""):h).replace(U,"$1").replace(N,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y=aI(function(){return tE(u,v+"return "+h).apply(i,c)});if(y.source=h,oG(y))throw y;return y},rg.times=function(t,e){if((t=at(t))<1||t>0x1fffffffffffff)return[];var n=0xffffffff,i=e4(t,0xffffffff);e=id(e),t-=0xffffffff;for(var o=eV(i,e);++n<t;)e(n);return o},rg.toFinite=o9,rg.toInteger=at,rg.toLength=ae,rg.toLower=function(t){return ai(t).toLowerCase()},rg.toNumber=ar,rg.toSafeInteger=function(t){return t?rR(at(t),-0x1fffffffffffff,0x1fffffffffffff):0===t?t:0},rg.toString=ai,rg.toUpper=function(t){return ai(t).toUpperCase()},rg.trim=function(t,e,n){if((t=ai(t))&&(n||e===i))return eD(t);if(!t||!(e=nE(e)))return t;var o=eY(t),a=eY(e),s=eI(o,a),l=eF(o,a)+1;return nL(o,s,l).join("")},rg.trimEnd=function(t,e,n){if((t=ai(t))&&(n||e===i))return t.slice(0,eQ(t)+1);if(!t||!(e=nE(e)))return t;var o=eY(t),a=eF(o,eY(e))+1;return nL(o,0,a).join("")},rg.trimStart=function(t,e,n){if((t=ai(t))&&(n||e===i))return t.replace(te,"");if(!t||!(e=nE(e)))return t;var o=eY(t),a=eI(o,eY(e));return nL(o,a).join("")},rg.truncate=function(t,e){var n=30,o="...";if(oQ(e)){var a="separator"in e?e.separator:a;n="length"in e?at(e.length):n,o="omission"in e?nE(e.omission):o}var s=(t=ai(t)).length;if(eq(t)){var l=eY(t);s=l.length}if(n>=s)return t;var u=n-eW(o);if(u<1)return o;var c=l?nL(l,0,u).join(""):t.slice(0,u);if(a===i)return c+o;if(l&&(u+=c.length-u),o1(a)){if(t.slice(u).search(a)){var f,p=c;for(a.global||(a=tP(a.source,ai(tc.exec(a))+"g")),a.lastIndex=0;f=a.exec(p);)var h=f.index;c=c.slice(0,h===i?u:h)}}else if(t.indexOf(nE(a),u)!=u){var d=c.lastIndexOf(a);d>-1&&(c=c.slice(0,d))}return c+o},rg.unescape=function(t){return(t=ai(t))&&$.test(t)?t.replace(q,eJ):t},rg.uniqueId=function(t){var e=++tR;return ai(t)+e},rg.upperCase=aL,rg.upperFirst=aR,rg.each=op,rg.eachRight=oh,rg.first=iQ,aK(rg,(t_={},rY(rg,function(t,e){tL.call(rg.prototype,e)||(t_[e]=t)}),t_),{chain:!1}),rg.VERSION="4.17.21",ep(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){rg[t].placeholder=rg}),ep(["drop","take"],function(t,e){rw.prototype[t]=function(n){n=n===i?1:e6(at(n),0);var o=this.__filtered__&&!e?new rw(this):this.clone();return o.__filtered__?o.__takeCount__=e4(n,o.__takeCount__):o.__views__.push({size:e4(n,0xffffffff),type:t+(o.__dir__<0?"Right":"")}),o},rw.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ep(["filter","map","takeWhile"],function(t,e){var n=e+1,i=1==n||3==n;rw.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:id(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),ep(["head","last"],function(t,e){var n="take"+(e?"Right":"");rw.prototype[t]=function(){return this[n](1).value()[0]}}),ep(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");rw.prototype[t]=function(){return this.__filtered__?new rw(this):this[n](1)}}),rw.prototype.compact=function(){return this.filter(aq)},rw.prototype.find=function(t){return this.filter(t).head()},rw.prototype.findLast=function(t){return this.reverse().find(t)},rw.prototype.invokeMap=nd(function(t,e){return"function"==typeof t?new rw(this):this.map(function(n){return r6(n,t,e)})}),rw.prototype.reject=function(t){return this.filter(oj(id(t)))},rw.prototype.slice=function(t,e){t=at(t);var n=this;return n.__filtered__&&(t>0||e<0)?new rw(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=at(e))<0?n.dropRight(-e):n.take(e-t)),n)},rw.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},rw.prototype.toArray=function(){return this.take(0xffffffff)},rY(rw.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),a=rg[o?"take"+("last"==e?"Right":""):e],s=o||/^find/.test(e);a&&(rg.prototype[e]=function(){var e=this.__wrapped__,l=o?[1]:arguments,u=e instanceof rw,c=l[0],f=u||oz(e),p=function(t){var e=a.apply(rg,eb([t],l));return o&&h?e[0]:e};f&&n&&"function"==typeof c&&1!=c.length&&(u=f=!1);var h=this.__chain__,d=!!this.__actions__.length,v=s&&!h,m=u&&!d;if(!s&&f){e=m?e:new rw(this);var y=t.apply(e,l);return y.__actions__.push({func:os,args:[p],thisArg:i}),new r_(y,h)}return v&&m?t.apply(this,l):(y=this.thru(p),v?o?y.value()[0]:y.value():y)})}),ep(["pop","push","shift","sort","splice","unshift"],function(t){var e=tT[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);rg.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var o=this.value();return e.apply(oz(o)?o:[],t)}return this[n](function(n){return e.apply(oz(n)?n:[],t)})}}),rY(rw.prototype,function(t,e){var n=rg[e];if(n){var i=n.name+"";tL.call(rl,i)||(rl[i]=[]),rl[i].push({name:e,func:n})}}),rl[n0(i,2).name]=[{name:"wrapper",func:i}],rw.prototype.clone=function(){var t=new rw(this.__wrapped__);return t.__actions__=nq(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=nq(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=nq(this.__views__),t},rw.prototype.reverse=function(){if(this.__filtered__){var t=new rw(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t},rw.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=oz(t),i=e<0,o=n?t.length:0,a=function(t,e,n){for(var i=-1,o=n.length;++i<o;){var a=n[i],s=a.size;switch(a.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=e4(e,t+s);break;case"takeRight":t=e6(t,e-s)}}return{start:t,end:e}}(0,o,this.__views__),s=a.start,l=a.end,u=l-s,c=i?l:s-1,f=this.__iteratees__,p=f.length,h=0,d=e4(u,this.__takeCount__);if(!n||!i&&o==u&&d==u)return nS(t,this.__actions__);var v=[];t:for(;u--&&h<d;){for(var m=-1,y=t[c+=e];++m<p;){var _=f[m],w=_.iteratee,x=_.type,k=w(y);if(2==x)y=k;else if(!k)if(1==x)continue t;else break t}v[h++]=y}return v},rg.prototype.at=ol,rg.prototype.chain=function(){return oa(this)},rg.prototype.commit=function(){return new r_(this.value(),this.__chain__)},rg.prototype.next=function(){this.__values__===i&&(this.__values__=o7(this.value()));var t=this.__index__>=this.__values__.length,e=t?i:this.__values__[this.__index__++];return{done:t,value:e}},rg.prototype.plant=function(t){for(var e,n=this;n instanceof ry;){var o=iq(n);o.__index__=0,o.__values__=i,e?a.__wrapped__=o:e=o;var a=o;n=n.__wrapped__}return a.__wrapped__=t,e},rg.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof rw){var e=t;return this.__actions__.length&&(e=new rw(this)),(e=e.reverse()).__actions__.push({func:os,args:[i3],thisArg:i}),new r_(e,this.__chain__)}return this.thru(i3)},rg.prototype.toJSON=rg.prototype.valueOf=rg.prototype.value=function(){return nS(this.__wrapped__,this.__actions__)},rg.prototype.first=rg.prototype.head,t8&&(rg.prototype[t8]=function(){return this}),rg}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t7._=eX,define(function(){return eX})):et?((et.exports=eX)._=eX,t9._=eX):t7._=eX}).call(this)}),s("4vRa3",function(t,e){n(t.exports,"parse",()=>i,t=>i=t),n(t.exports,"style",()=>o,t=>o=t),n(t.exports,"names",()=>s,t=>s=t),n(t.exports,"relativeLuminance",()=>l,t=>l=t),n(t.exports,"contrastRatio",()=>u,t=>u=t),n(t.exports,"offsetHSL",()=>c,t=>c=t),n(t.exports,"blend",()=>f,t=>f=t),n(t.exports,"hexToRGBA",()=>p,t=>p=t),n(t.exports,"RGBAToHex",()=>h,t=>h=t),n(t.exports,"RGBAToHSLA",()=>d,t=>d=t),n(t.exports,"HSLAToRGBA",()=>v,t=>v=t);var i,o,s,l,u,c,f,p,h,d,v,m=a("yneHK"),y=a("akXkW"),_=a("aNHS2"),w=a("h9P04"),x=a("bgsKx"),k=a("c3mRC");i=m.parse,o=m.style,s=y,l=function(t){var e=i(t);return e?_(e.rgb):null},u=function(t,e){var n=l(t),i=l(e);return null==n||null==i?null:(Math.max(n,i)+.05)/(Math.min(n,i)+.05)},c=function(t,e,n,o){var a=i(t);return a?(a.hsla[0]+=e||0,a.hsla[1]=Math.max(0,Math.min(100,a.hsla[1]+(n||0))),a.hsla[2]=Math.max(0,Math.min(100,a.hsla[2]+(o||0))),i({hsla:a.hsla})):null},f=function(t,e,n){var o=i(t),a=i(e);if(null==o||null==a)return null;var s=o.rgba,l=a.rgba,u=(n="number"==typeof n&&isFinite(n)?n:1)*l[3];if(u>=1)return a;for(var c=0;c<3;c++)l[c]=l[c]*u+s[c]*(s[3]*(1-u));return l[3]=Math.max(0,Math.min(1,u+s[3]*(1-u))),i(l)},p=x,h=k,d=w.RGBAToHSLA,v=w.HSLAToRGBA}),s("yneHK",function(t,e){n(t.exports,"parse",()=>i,t=>i=t),n(t.exports,"style",()=>o,t=>o=t);var i,o,s=a("akXkW"),l=a("h9P04"),u=a("bgsKx"),c=a("c3mRC"),f=a("3f3Eq");function p(t){if("string"!=typeof t)throw TypeError("Color parsing must be performed on a string parameter");if((t=t.toLowerCase())in s?t=s[t]:"transparent"===t&&(t="#00000000"),/^#[a-f0-9]+$/.test(t))i=c(e=u(t)),n=l.RGBAToHSLA(e);else{var e,n,i,o=/^((?:rgb|hsl)a?)\s*\(([^)]*)\)/.exec(t);if(!o)return null;var a=o[1].replace(/a$/,""),p=o[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(t,e){return e<=2?Math.round(parseFloat(t)||0):("number"==typeof(t=parseFloat(t))&&isFinite(t)||(t=1),t)});void 0!==p[3]&&isFinite(p[3])||(p[3]=1),"rgb"===a?(n=l.RGBAToHSLA(p),e=p):"hsl"===a&&(e=l.HSLAToRGBA(p),p[0]=f(p[0],0,360),n=p),i=c(e)}return e||i||n?{hex:i,alpha:e[3],rgb:e.slice(0,3),rgba:e,hsl:n.slice(0,3),hsla:n}:null}function h(t,e,n,i){return(t=Math.max(0,Math.min(255,Math.round(t))),e=Math.max(0,Math.min(255,Math.round(e))),n=Math.max(0,Math.min(255,Math.round(n))),1!==i&&isFinite(i)&&void 0!==i)?"rgba("+[t,e,n,i=Math.max(0,Math.min(1,i))].join(", ")+")":"rgb("+[t,e,n].join(", ")+")"}function d(t,e,n,i){return(t=Math.max(0,Math.min(360,Math.round(t=f(t,0,360)))),e=Math.max(0,Math.min(100,Math.round(e))),n=Math.max(0,Math.min(100,Math.round(n))),1!==i&&isFinite(i)&&void 0!==i)?"hsla("+[t,e,n,i=Math.max(0,Math.min(1,i))].join(", ")+")":"hsl("+[t,e,n].join(", ")+")"}i=function(t){if("string"==typeof t)return p(t);if(Array.isArray(t)&&t.length>=3){var e;return p(h(t[0],t[1],t[2],t[3]))}return t&&"object"==typeof t&&(t.hex?e=t.hex:t.rgba?e=h(t.rgba[0],t.rgba[1],t.rgba[2],t.rgba[3]):t.hsla?e=d(t.hsla[0],t.hsla[1],t.hsla[2],t.hsla[3]):t.rgb?e=h(t.rgb[0],t.rgb[1],t.rgb[2]):t.hsl&&(e=d(t.hsl[0],t.hsl[1],t.hsl[2])),e)?p(e):null},o=function(t){var e=i(t);if(e){var n=e.rgba;return h(n[0],n[1],n[2],n[3])}return null}}),s("akXkW",function(t,e){t.exports=JSON.parse('{"aliceblue":"#f0f8ff","antiquewhite":"#faebd7","aqua":"#00ffff","aquamarine":"#7fffd4","azure":"#f0ffff","beige":"#f5f5dc","bisque":"#ffe4c4","black":"#000000","blanchedalmond":"#ffebcd","blue":"#0000ff","blueviolet":"#8a2be2","brown":"#a52a2a","burlywood":"#deb887","cadetblue":"#5f9ea0","chartreuse":"#7fff00","chocolate":"#d2691e","coral":"#ff7f50","cornflowerblue":"#6495ed","cornsilk":"#fff8dc","crimson":"#dc143c","cyan":"#00ffff","darkblue":"#00008b","darkcyan":"#008b8b","darkgoldenrod":"#b8860b","darkgray":"#a9a9a9","darkgreen":"#006400","darkgrey":"#a9a9a9","darkkhaki":"#bdb76b","darkmagenta":"#8b008b","darkolivegreen":"#556b2f","darkorange":"#ff8c00","darkorchid":"#9932cc","darkred":"#8b0000","darksalmon":"#e9967a","darkseagreen":"#8fbc8f","darkslateblue":"#483d8b","darkslategray":"#2f4f4f","darkslategrey":"#2f4f4f","darkturquoise":"#00ced1","darkviolet":"#9400d3","deeppink":"#ff1493","deepskyblue":"#00bfff","dimgray":"#696969","dimgrey":"#696969","dodgerblue":"#1e90ff","firebrick":"#b22222","floralwhite":"#fffaf0","forestgreen":"#228b22","fuchsia":"#ff00ff","gainsboro":"#dcdcdc","ghostwhite":"#f8f8ff","gold":"#ffd700","goldenrod":"#daa520","gray":"#808080","green":"#008000","greenyellow":"#adff2f","grey":"#808080","honeydew":"#f0fff0","hotpink":"#ff69b4","indianred":"#cd5c5c","indigo":"#4b0082","ivory":"#fffff0","khaki":"#f0e68c","lavender":"#e6e6fa","lavenderblush":"#fff0f5","lawngreen":"#7cfc00","lemonchiffon":"#fffacd","lightblue":"#add8e6","lightcoral":"#f08080","lightcyan":"#e0ffff","lightgoldenrodyellow":"#fafad2","lightgray":"#d3d3d3","lightgreen":"#90ee90","lightgrey":"#d3d3d3","lightpink":"#ffb6c1","lightsalmon":"#ffa07a","lightseagreen":"#20b2aa","lightskyblue":"#87cefa","lightslategray":"#778899","lightslategrey":"#778899","lightsteelblue":"#b0c4de","lightyellow":"#ffffe0","lime":"#00ff00","limegreen":"#32cd32","linen":"#faf0e6","magenta":"#ff00ff","maroon":"#800000","mediumaquamarine":"#66cdaa","mediumblue":"#0000cd","mediumorchid":"#ba55d3","mediumpurple":"#9370db","mediumseagreen":"#3cb371","mediumslateblue":"#7b68ee","mediumspringgreen":"#00fa9a","mediumturquoise":"#48d1cc","mediumvioletred":"#c71585","midnightblue":"#191970","mintcream":"#f5fffa","mistyrose":"#ffe4e1","moccasin":"#ffe4b5","navajowhite":"#ffdead","navy":"#000080","oldlace":"#fdf5e6","olive":"#808000","olivedrab":"#6b8e23","orange":"#ffa500","orangered":"#ff4500","orchid":"#da70d6","palegoldenrod":"#eee8aa","palegreen":"#98fb98","paleturquoise":"#afeeee","palevioletred":"#db7093","papayawhip":"#ffefd5","peachpuff":"#ffdab9","peru":"#cd853f","pink":"#ffc0cb","plum":"#dda0dd","powderblue":"#b0e0e6","purple":"#800080","rebeccapurple":"#663399","red":"#ff0000","rosybrown":"#bc8f8f","royalblue":"#4169e1","saddlebrown":"#8b4513","salmon":"#fa8072","sandybrown":"#f4a460","seagreen":"#2e8b57","seashell":"#fff5ee","sienna":"#a0522d","silver":"#c0c0c0","skyblue":"#87ceeb","slateblue":"#6a5acd","slategray":"#708090","slategrey":"#708090","snow":"#fffafa","springgreen":"#00ff7f","steelblue":"#4682b4","tan":"#d2b48c","teal":"#008080","thistle":"#d8bfd8","tomato":"#ff6347","turquoise":"#40e0d0","violet":"#ee82ee","wheat":"#f5deb3","white":"#ffffff","whitesmoke":"#f5f5f5","yellow":"#ffff00","yellowgreen":"#9acd32"}')}),s("h9P04",function(t,e){n(t.exports,"RGBAToHSLA",()=>i,t=>i=t),n(t.exports,"HSLAToRGBA",()=>o,t=>o=t);var i,o,s=a("e3JJ4"),l=a("cxMmF"),u=a("3f3Eq");i=function(t){var e=l([t[0]/255,t[1]/255,t[2]/255]);return[Math.max(0,Math.min(360,Math.round(360*e[0]))),Math.max(0,Math.min(100,Math.round(100*e[1]))),Math.max(0,Math.min(100,Math.round(100*e[2]))),t[3]]},o=function(t){var e=s([u(t[0],0,360)/360,t[1]/100,t[2]/100]);return[Math.max(0,Math.min(255,Math.round(255*e[0]))),Math.max(0,Math.min(255,Math.round(255*e[1]))),Math.max(0,Math.min(255,Math.round(255*e[2]))),t[3]]}}),s("e3JJ4",function(t,e){t.exports=function(t){var e,n,i,o,a,s=t[0],l=t[1],u=t[2];if(0===l)return[a=u,a,a];n=u<.5?u*(1+l):u+l-u*l,e=2*u-n,o=[0,0,0];for(var c=0;c<3;c++)(i=s+-(1/3*(c-1)))<0&&i++,i>1&&i--,a=6*i<1?e+(n-e)*6*i:2*i<1?n:3*i<2?e+(n-e)*(2/3-i)*6:e,o[c]=a;return o}}),s("cxMmF",function(t,e){t.exports=function(t){var e,n,i=t[0],o=t[1],a=t[2],s=Math.min(i,o,a),l=Math.max(i,o,a),u=l-s;return l===s?e=0:i===l?e=(o-a)/u:o===l?e=2+(a-i)/u:a===l&&(e=4+(i-o)/u),(e=Math.min(60*e,360))<0&&(e+=360),n=(s+l)/2,[e/360,l===s?0:n<=.5?u/(l+s):u/(2-l-s),n]}}),s("bgsKx",function(t,e){t.exports=function(t){if("string"!=typeof t)throw TypeError("Hex code parsing must be performed on a string parameter");if(t=t.toLowerCase(),!/^#[a-f0-9]+$/.test(t))return null;var e=t.replace(/^#/,""),n=1;8===e.length&&(n=parseInt(e.slice(6,8),16)/255,e=e.slice(0,6)),4===e.length&&(n=parseInt(e.slice(3,4).repeat(2),16)/255,e=e.slice(0,3)),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var i=parseInt(e,16);return[i>>16,i>>8&255,255&i,n]}}),s("c3mRC",function(t,e){t.exports=function(t){if(!t||!Array.isArray(t))throw TypeError("Must specify an array to convert into a hex code");var e=Math.max(0,Math.min(255,Math.round(t[0]||0))),n=Math.max(0,Math.min(255,Math.round(t[1]||0))),i=Math.max(0,Math.min(255,Math.round(t[2]||0))),o=t[3];void 0!==o&&isFinite(o)||(o=1);var a=Math.max(0,Math.min(255,Math.round(255*o))),s=255===a?"":(256|a).toString(16).slice(1);return"#"+((i|n<<8|e<<16|0x1000000).toString(16).slice(1)+s)}}),s("aNHS2",function(t,e){var n=1/12.92;function i(t){return Math.pow((t+.055)/1.055,2.4)}t.exports=function(t){var e=t[0]/255,o=t[1]/255,a=t[2]/255;return(e<=.03928?e*n:i(e))*.2126+(o<=.03928?o*n:i(o))*.7152+(a<=.03928?a*n:i(a))*.0722}}),s("1YuGF",function(t,e){n(t.exports,"createPath",()=>i,t=>i=t),n(t.exports,"pathsToSVGPaths",()=>o,t=>o=t),n(t.exports,"pathsToPolylines",()=>s,t=>s=t),n(t.exports,"pathsToSVG",()=>l,t=>l=t),n(t.exports,"renderPaths",()=>u,t=>u=t),n(t.exports,"convertToSVGPath",()=>c,t=>c=t),n(t.exports,"eachPath",()=>f,t=>f=t),n(t.exports,"drawSVGPath",()=>p,t=>p=t),n(t.exports,"polylineToSVGPath",()=>h,t=>h=t),n(t.exports,"polylinesToSVG",()=>d,t=>d=t),n(t.exports,"renderPolylines",()=>v,t=>v=t);var i,o,s,l,u,c,f,p,h,d,v,m=a("auZlB"),y=a("8py6G"),_=a("hl2Bj"),w=a("aPbeT"),x=a("8DJYa"),k=a("60Jtr"),E=a("9XLSV"),C=a("8ZJlf"),A=a("9HFYU");function P(t,e){var n=O(t,e=e||{});return(Array.isArray(n)?n:[n]).filter(Boolean)}function M(t,e){if(null!=(e=e||{}).curveResolution&&isFinite(e.curveResolution)&&"number"==typeof e.curveResolution)n=e.curveResolution;else{var n;n=Math.max(1,y(4,e.units||"px","px"))}var i=[];return V(t,function(t){if("string"==typeof t)w(x(t),n).forEach(function(t){i.push(t)});else{var e=t.map(function(t){return[t[0]||0,t[1]||0]});i.push(e)}}),i}function S(t,e){var n=(e=e||{}).width,i=e.height;if(void 0===n||void 0===i)throw Error('Must specify "width" and "height" options');var o=e.units||"px",a={units:o,viewUnits:"px",roundPixel:!1,precision:m(e.precision,5),pixelsPerInch:90};if(t=M(t,Object.assign({},a,{curveResolution:e.curveResolution||void 0})),e.optimize){var s="object"==typeof e.optimize?e.optimize:{sort:!0,merge:!0,removeDuplicates:!0,removeCollinear:!0},l=!1!==s.sort,u=!1!==s.merge,c=!1!==s.removeDuplicates,f=!1!==s.removeCollinear;if(c&&(t=t.map(function(t){return A.removeDuplicatePoints(t)})),f&&(t=t.map(function(t){return A.removeCollinearPoints(t)})),l&&(t=C.sort(t)),u){var p=null!=s.mergeThreshold?s.mergeThreshold:y(.25,"mm",o,{pixelsPerInch:90});t=C.merge(t,p)}}var h=P(t,a),d=y(n,o,"px",a).toString(),v=y(i,o,"px",a).toString(),_=e.fillStyle||"none",w=e.strokeStyle||"black",x=e.lineWidth,k=e.lineJoin,E=e.lineCap;void 0===x&&(x=y(.03,"cm",o,a).toString());var S=h.map(function(t){return"    <path "+T([["d",t]])+" />"}).join("\n"),j=T([["fill",_],["stroke",w],["stroke-width",x+""+o],!!k&&["stroke-linejoin",k],!!E&&["stroke-linecap",E]]);return['<?xml version="1.0" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" \n    "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">','<svg width="'+n+o+'" height="'+i+o+'"','    xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+d+" "+v+'">',"  <g "+j+">",S,"  </g>\n</svg>"].join("\n")}function T(t){return t.filter(Boolean).map(function(t){return t[0]+'="'+t[1]+'"'}).join(" ")}function j(t,e){var n=(e=e||{}).context;if(!n)throw Error('Must specify "context" options');var i=e.units||"px",o=e.width,a=e.height;if(void 0===o||void 0===a)throw Error('Must specify "width" and "height" options');var s=e.lineWidth;return void 0===s&&(s=y(.03,"cm",i,{roundPixel:!1,pixelsPerInch:90})),n.clearRect(0,0,o,a),n.fillStyle=e.background||"white",n.fillRect(0,0,o,a),n.strokeStyle=e.foreground||e.strokeStyle||"black",n.lineWidth=s,n.lineJoin=e.lineJoin||"miter",n.lineCap=e.lineCap||"butt",V(t,function(t){n.beginPath(),"string"==typeof t?D(n,t):t.forEach(function(t){n.lineTo(t[0],t[1])}),n.stroke()}),[n.canvas,{data:S(t,e),extension:".svg"}]}function O(t,e){return R(t)?"":"string"==typeof t?t:B(t)?t.toString():I(t)?L(t,e):Array.isArray(t)?t.map(function(t){return O(t,e)}).reduce(function(t,e){return t.concat(e)},[]):""}function V(t,e){R(t)||("string"==typeof t||B(t)?e(t.toString()):I(t)?e(t):Array.isArray(t)&&t.forEach(function(t){return V(t,e)}))}function D(t,e){for(var n=E(k(x(e))),i=0;i<n.length;i++){var o=n[i],a=o[0];if("M"===a)t.moveTo(o[1],o[2]);else if("C"===a)t.bezierCurveTo(o[1],o[2],o[3],o[4],o[5],o[6]);else throw Error('Illegal type "'+a+'" in SVG commands')}}function L(t,e){var n=(e=e||{}).units||"px",i=e.viewUnits||n,o=[],a={roundPixel:!1,precision:m(e.precision,5),pixelsPerInch:90};return t.forEach(function(t,e){var s=y(t[0],n,i,a).toString(),l=y(t[1],n,i,a).toString();o.push((0===e?"M":"L")+s+" "+l)}),o.join(" ")}function R(t){return!t||Array.isArray(t)&&0===t.length}function B(t){return"object"==typeof t&&t&&!Array.isArray(t)}function I(t){var e;return!!t&&!!Array.isArray(t)&&0!==t.length&&Array.isArray(e=t[0])&&e.length>=2&&e.every(function(t){return"number"==typeof t})}i=function(t){var e=_.default();return"function"==typeof t&&t(e),e.lineTo=n(e.lineTo),e.quadraticCurveTo=n(e.quadraticCurveTo),e.bezierCurveTo=n(e.bezierCurveTo),e;function n(t){return function(){var n=Array.prototype.slice.call(arguments);return null==e._x1&&null==e._y1&&e.moveTo(n[0],n[1]),t.apply(e,n)}}},o=P,s=M,l=S,u=j,c=O,f=V,p=D,h=L,d=function(t,e){if(!Array.isArray(t))throw Error("Expected array of arrays for polylines");return console.warn("polylinesToSVG is deprecated, use pathsToSVG instead which has the same functionality"),S(t,e)},v=function(t,e){if(!Array.isArray(t))throw Error("Expected array of arrays for polylines");return console.warn("renderPolylines is deprecated, use renderPaths instead which has the same functionality"),j(t,e)}}),s("8py6G",function(t,e){var n=a("auZlB"),i=["mm","cm","m","pc","pt","in","ft","px"],o={m:{system:"metric",factor:1},cm:{system:"metric",factor:.01},mm:{system:"metric",factor:.001},pt:{system:"imperial",factor:1/72},pc:{system:"imperial",factor:1/6},in:{system:"imperial",factor:1},ft:{system:"imperial",factor:12}};let s={metric:{unit:"m",ratio:1/.0254},imperial:{unit:"in",ratio:.0254}};t.exports=function(t,e,a,l){if("number"!=typeof t||!isFinite(t))throw Error("Value must be a finite number");if(!e||!a)throw Error("Must specify from and to units");var u=n((l=l||{}).pixelsPerInch,96),c=l.precision,f=!1!==l.roundPixel;if(e=e.toLowerCase(),a=a.toLowerCase(),-1===i.indexOf(e))throw Error('Invalid from unit "'+e+'", must be one of: '+i.join(", "));if(-1===i.indexOf(a))throw Error('Invalid from unit "'+a+'", must be one of: '+i.join(", "));if(e===a)return t;var p=1,h=1,d=!1;"px"===e&&(h=1/u,e="in"),"px"===a&&(d=!0,p=u,a="in");var v=o[e],m=o[a],y=t*v.factor*h;v.system!==m.system&&(y*=s[v.system].ratio);var _=y/m.factor*p;return d&&f?_=Math.round(_):"number"==typeof c&&isFinite(c)&&(_=Number(Math.round(_+"e"+c)+"e-"+c)),_},t.exports.units=i}),s("hl2Bj",function(t,e){n(t.exports,"default",()=>u);var i=Math.PI,o=2*i,a=o-1e-6;function s(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function l(){return new s}s.prototype=l.prototype={constructor:s,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,o,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+o)+","+(this._y1=+a)},arcTo:function(t,e,n,o,a){t*=1,e*=1,n*=1,o*=1,a*=1;var s=this._x1,l=this._y1,u=n-t,c=o-e,f=s-t,p=l-e,h=f*f+p*p;if(a<0)throw Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(p*u-c*f)>1e-6&&a){var d=n-s,v=o-l,m=u*u+c*c,y=Math.sqrt(m),_=Math.sqrt(h),w=a*Math.tan((i-Math.acos((m+h-(d*d+v*v))/(2*y*_)))/2),x=w/_,k=w/y;Math.abs(x-1)>1e-6&&(this._+="L"+(t+x*f)+","+(e+x*p)),this._+="A"+a+","+a+",0,0,"+ +(p*d>f*v)+","+(this._x1=t+k*u)+","+(this._y1=e+k*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,s,l,u){t*=1,e*=1,n*=1,u=!!u;var c=n*Math.cos(s),f=n*Math.sin(s),p=t+c,h=e+f,d=1^u,v=u?s-l:l-s;if(n<0)throw Error("negative radius: "+n);null===this._x1?this._+="M"+p+","+h:(Math.abs(this._x1-p)>1e-6||Math.abs(this._y1-h)>1e-6)&&(this._+="L"+p+","+h),n&&(v<0&&(v=v%o+o),v>a?this._+="A"+n+","+n+",0,1,"+d+","+(t-c)+","+(e-f)+"A"+n+","+n+",0,1,"+d+","+(this._x1=p)+","+(this._y1=h):v>1e-6&&(this._+="A"+n+","+n+",0,"+ +(v>=i)+","+d+","+(this._x1=t+n*Math.cos(l))+","+(this._y1=e+n*Math.sin(l))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var u=l}),s("aPbeT",function(t,e){var n=a("hRqVF"),i=a("60Jtr"),o=a("bIGtJ"),s=a("at7ar");function l(t,e,n){return t[0]=e,t[1]=n,t}var u=[0,0],c=[0,0],f=[0,0];t.exports=function(t,e){var a=[],p=[],h=[0,0];return o(i(t)).forEach(function(t,i,o){if("M"===t[0])s(h,t.slice(1)),p.length>0&&(a.push(p),p=[]);else if("C"===t[0]){var d;d=p,n(h,l(u,t[1],t[2]),l(c,t[3],t[4]),l(f,t[5],t[6]),e,d),l(h,t[5],t[6])}else throw Error("illegal type in SVG: "+t[0])}),p.length>0&&a.push(p),a}}),s("hRqVF",function(t,e){t.exports=a("1PQLi")()}),s("1PQLi",function(t,e){t.exports=function(t){var e="number"==typeof(t=t||{}).recursion?t.recursion:8,n="number"==typeof t.epsilon?t.epsilon:11920929e-14,i="number"==typeof t.pathEpsilon?t.pathEpsilon:1,o="number"==typeof t.angleEpsilon?t.angleEpsilon:.01,a=t.angleTolerance||0,s=t.cuspLimit||0;return function(t,l,u,c,f,p){p||(p=[]);var h=i/(f="number"==typeof f?f:1);return function(t,i,l,u,c,f){c.push([t[0],t[1]]),function t(i,l,u,c,f,p,h,d,v,m,y){if(!(y>e)){var _=Math.PI,w=(i+u)/2,x=(l+c)/2,k=(u+f)/2,E=(c+p)/2,C=(f+h)/2,A=(p+d)/2,P=(w+k)/2,M=(x+E)/2,S=(k+C)/2,T=(E+A)/2,j=(P+S)/2,O=(M+T)/2;if(y>0){var V,D,L=h-i,R=d-l,B=Math.abs((u-h)*R-(c-d)*L),I=Math.abs((f-h)*R-(p-d)*L);if(B>n&&I>n){if((B+I)*(B+I)<=m*(L*L+R*R)){if(a<o)return void v.push([j,O]);var F=Math.atan2(p-c,f-u);if(V=Math.abs(F-Math.atan2(c-l,u-i)),D=Math.abs(Math.atan2(d-p,h-f)-F),V>=_&&(V=2*_-V),D>=_&&(D=2*_-D),V+D<a)return void v.push([j,O]);if(0!==s){if(V>s)return void v.push([u,c]);if(D>s)return void v.push([f,p])}}}else if(B>n){if(B*B<=m*(L*L+R*R)){if(a<o)return void v.push([j,O]);if((V=Math.abs(Math.atan2(p-c,f-u)-Math.atan2(c-l,u-i)))>=_&&(V=2*_-V),V<a){v.push([u,c]),v.push([f,p]);return}if(0!==s&&V>s)return void v.push([u,c])}}else if(I>n){if(I*I<=m*(L*L+R*R)){if(a<o)return void v.push([j,O]);if((V=Math.abs(Math.atan2(d-p,h-f)-Math.atan2(p-c,f-u)))>=_&&(V=2*_-V),V<a){v.push([u,c]),v.push([f,p]);return}if(0!==s&&V>s)return void v.push([f,p])}}else if((L=j-(i+h)/2)*L+(R=O-(l+d)/2)*R<=m)return void v.push([j,O])}t(i,l,w,x,P,M,j,O,v,m,y+1),t(j,O,S,T,C,A,h,d,v,m,y+1)}}(t[0],t[1],i[0],i[1],l[0],l[1],u[0],u[1],c,f,0),c.push([u[0],u[1]])}(t,l,u,c,p,h*=h),p}}}),s("60Jtr",function(t,e){t.exports=function(t){var e=0,n=0,i=0,o=0;return t.map(function(t){var a=(t=t.slice())[0],s=a.toUpperCase();if(a!=s)switch(t[0]=s,a){case"a":t[6]+=i,t[7]+=o;break;case"v":t[1]+=o;break;case"h":t[1]+=i;break;default:for(var l=1;l<t.length;)t[l++]+=i,t[l++]+=o}switch(s){case"Z":i=e,o=n;break;case"H":i=t[1];break;case"V":o=t[1];break;case"M":i=e=t[1],o=n=t[2];break;default:i=t[t.length-2],o=t[t.length-1]}return t})}}),s("bIGtJ",function(t,e){var n=Math.PI,i=n/180*120;function o(t,e,n,i){return["C",t,e,n,i,n,i]}function a(t,e,n,i,o,a){return["C",t/3+2/3*n,e/3+2/3*i,o/3+2/3*n,a/3+2/3*i,o,a]}function s(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}t.exports=function(t){for(var e,l=[],u=0,c=0,f=0,p=0,h=null,d=null,v=0,m=0,y=0,_=t.length;y<_;y++){var w=t[y],x=w[0];switch(x){case"M":f=w[1],p=w[2];break;case"A":(w=function t(e,o,a,l,u,c,f,p,h,d){if(d)A=d[0],P=d[1],E=d[2],C=d[3];else{var v=s(e,o,-u);e=v.x,o=v.y,p=(v=s(p,h,-u)).x,h=v.y;var m=(e-p)/2,y=(o-h)/2,_=m*m/(a*a)+y*y/(l*l);_>1&&(a*=_=Math.sqrt(_),l*=_);var w=a*a,x=l*l,k=(c==f?-1:1)*Math.sqrt(Math.abs((w*x-w*y*y-x*m*m)/(w*y*y+x*m*m)));k==1/0&&(k=1);var E=k*a*y/l+(e+p)/2,C=-(k*l)*m/a+(o+h)/2,A=Math.asin(((o-C)/l).toFixed(9)),P=Math.asin(((h-C)/l).toFixed(9));A=e<E?n-A:A,P=p<E?n-P:P,A<0&&(A=2*n+A),P<0&&(P=2*n+P),f&&A>P&&(A-=2*n),!f&&P>A&&(P-=2*n)}if(Math.abs(P-A)>i)var M=P,S=p,T=h,j=t(p=E+a*Math.cos(P=A+i*(f&&P>A?1:-1)),h=C+l*Math.sin(P),a,l,u,0,f,S,T,[P,M,E,C]);var O=Math.tan((P-A)/4),V=4/3*a*O,D=4/3*l*O,L=[2*e-(e+V*Math.sin(A)),2*o-(o-D*Math.cos(A)),p+V*Math.sin(P),h-D*Math.cos(P),p,h];if(d)return L;j&&(L=L.concat(j));for(var R=0;R<L.length;){var B=s(L[R],L[R+1],u);L[R++]=B.x,L[R++]=B.y}return L}(v,m,w[1],w[2],function(t){return n/180*t}(w[3]),w[4],w[5],w[6],w[7])).unshift("C"),w.length>7&&(l.push(w.splice(0,7)),w.unshift("C"));break;case"S":var k=v,E=m;("C"==e||"S"==e)&&(k+=k-u,E+=E-c),w=["C",k,E,w[1],w[2],w[3],w[4]];break;case"T":"Q"==e||"T"==e?(h=2*v-h,d=2*m-d):(h=v,d=m),w=a(v,m,h,d,w[1],w[2]);break;case"Q":h=w[1],d=w[2],w=a(v,m,w[1],w[2],w[3],w[4]);break;case"L":w=o(v,m,w[1],w[2]);break;case"H":w=o(v,m,w[1],m);break;case"V":w=o(v,m,v,w[1]);break;case"Z":w=o(v,m,f,p)}e=x,v=w[w.length-2],m=w[w.length-1],w.length>4?(u=w[w.length-4],c=w[w.length-3]):(u=v,c=m),l.push(w)}return l}}),s("at7ar",function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t}}),s("8DJYa",function(t,e){t.exports=function(t){var e=[];return t.replace(i,function(t,i,a){var s,l=i.toLowerCase();for(a=(s=a.match(o))?s.map(Number):[],"m"==l&&a.length>2&&(e.push([i].concat(a.splice(0,2))),l="l",i="m"==i?"l":"L");;){if(a.length==n[l])return a.unshift(i),e.push(a);if(a.length<n[l])throw Error("malformed path data");e.push([i].concat(a.splice(0,n[l])))}}),e};var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=/([astvzqmhlc])([^astvzqmhlc]*)/ig,o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig}),s("9XLSV",function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0,configurable:!0}),n(t.exports,"default",()=>o);var i=a("3ijfV");function o(t){for(var e=[],n=0,o=0,a=0,u=0,c=null,f=null,p=0,h=0,d=0,v=t.length;d<v;d++){var m=t[d],y=m[0];switch(y){case"M":a=m[1],u=m[2];break;case"A":var _=(0,i.default)({px:p,py:h,cx:m[6],cy:m[7],rx:m[1],ry:m[2],xAxisRotation:m[3],largeArcFlag:m[4],sweepFlag:m[5]});if(!_.length)continue;for(var w,x,k=0;k<_.length;k++)m=["C",(x=_[k]).x1,x.y1,x.x2,x.y2,x.x,x.y],k<_.length-1&&e.push(m);break;case"S":var E=p,C=h;("C"==w||"S"==w)&&(E+=E-n,C+=C-o),m=["C",E,C,m[1],m[2],m[3],m[4]];break;case"T":"Q"==w||"T"==w?(c=2*p-c,f=2*h-f):(c=p,f=h),m=l(p,h,c,f,m[1],m[2]);break;case"Q":c=m[1],f=m[2],m=l(p,h,m[1],m[2],m[3],m[4]);break;case"L":m=s(p,h,m[1],m[2]);break;case"H":m=s(p,h,m[1],h);break;case"V":m=s(p,h,p,m[1]);break;case"Z":m=s(p,h,a,u)}w=y,p=m[m.length-2],h=m[m.length-1],m.length>4?(n=m[m.length-4],o=m[m.length-3]):(n=p,o=h),e.push(m)}return e}function s(t,e,n,i){return["C",t,e,n,i,n,i]}function l(t,e,n,i,o,a){return["C",t/3+2/3*n,e/3+2/3*i,o/3+2/3*n,a/3+2/3*i,o,a]}}),s("3ijfV",function(t,e){n(t.exports,"default",()=>c);var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,a=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}return n}(t,e);throw TypeError("Invalid attempt to destructure non-iterable instance")},o=2*Math.PI,a=function(t,e,n,i,o,a,s){var l=t.x,u=t.y;return{x:i*(l*=e)-o*(u*=n)+a,y:o*l+i*u+s}},s=function(t,e){var n=1.5707963267948966===e?.551915024494:-1.5707963267948966===e?-.551915024494:4/3*Math.tan(e/4),i=Math.cos(t),o=Math.sin(t),a=Math.cos(t+e),s=Math.sin(t+e);return[{x:i-o*n,y:o+i*n},{x:a+s*n,y:s-a*n},{x:a,y:s}]},l=function(t,e,n,i){var o=t*n+e*i;return o>1&&(o=1),o<-1&&(o=-1),(t*i-e*n<0?-1:1)*Math.acos(o)},u=function(t,e,n,i,a,s,u,c,f,p,h,d){var v=Math.pow(a,2),m=Math.pow(s,2),y=Math.pow(h,2),_=Math.pow(d,2),w=v*m-v*_-m*y;w<0&&(w=0),w/=v*_+m*y;var x=(w=Math.sqrt(w)*(u===c?-1:1))*a/s*d,k=-(w*s)/a*h,E=(h-x)/a,C=(d-k)/s,A=l(1,0,E,C),P=l(E,C,(-h-x)/a,(-d-k)/s);return 0===c&&P>0&&(P-=o),1===c&&P<0&&(P+=o),[p*x-f*k+(t+n)/2,f*x+p*k+(e+i)/2,A,P]},c=function(t){var e=t.px,n=t.py,l=t.cx,c=t.cy,f=t.rx,p=t.ry,h=t.xAxisRotation,d=void 0===h?0:h,v=t.largeArcFlag,m=t.sweepFlag,y=[];if(0===f||0===p)return[];var _=Math.sin(d*o/360),w=Math.cos(d*o/360),x=w*(e-l)/2+_*(n-c)/2,k=-_*(e-l)/2+w*(n-c)/2;if(0===x&&0===k)return[];var E=Math.pow(x,2)/Math.pow(f=Math.abs(f),2)+Math.pow(k,2)/Math.pow(p=Math.abs(p),2);E>1&&(f*=Math.sqrt(E),p*=Math.sqrt(E));var C=i(u(e,n,l,c,f,p,void 0===v?0:v,void 0===m?0:m,_,w,x,k),4),A=C[0],P=C[1],M=C[2],S=C[3],T=Math.abs(S)/(o/4);1e-7>Math.abs(1-T)&&(T=1);var j=Math.max(Math.ceil(T),1);S/=j;for(var O=0;O<j;O++)y.push(s(M,S)),M+=S;return y.map(function(t){var e=a(t[0],f,p,w,_,A,P),n=e.x,i=e.y,o=a(t[1],f,p,w,_,A,P),s=o.x,l=o.y,u=a(t[2],f,p,w,_,A,P);return{x1:n,y1:i,x2:s,y2:l,x:u.x,y:u.y}})}}),s("8ZJlf",function(t,e){n(t.exports,"sort",()=>i,t=>i=t),n(t.exports,"merge",()=>o,t=>o=t);var i,o,s=a("8kDCz"),l=a("hPF0J").squaredDistance;i=function(t){if(!(t=s(t)).length)return t;var e=[];for(e.push(t[0]),t=t.slice(1);t.length;){var n=e[e.length-1],i=n[n.length-1],o=t.reduce(function(t,e,n){var o=e[0],a=e[e.length-1],s=l(i,o),u=l(i,a);return t?s<t.distance?{idx:n,distance:s,reverse:!1}:u<t.distance?{idx:n,distance:u,reverse:!0}:t:{idx:n,distance:Math.min(s,u),reverse:u<s}},null),a=o.idx,u=o.reverse,c=t.splice(a,1)[0].slice();u&&c.reverse(),e.push(c)}return e},o=function(t,e){var n=(e=null!=e?e:.05)*e;t=s(t);for(var i=1;i<t.length;i++){var o=t[i-1];l(t[i][0],o[o.length-1])<n&&(t=function(t,e,n){var i=Math.min(e,n),o=Math.max(e,n),a=(t=t.slice())[i],s=t[o],l=a.concat(s.slice(1));return t.splice(o,1),t.splice(i,1,l),t}(t,i-1,i),i-=1)}return t}}),s("8kDCz",function(t,e){var n=a("6ZWSX").Buffer,i=function(){var t,e,i;function o(t,e){return null!=e&&t instanceof e}try{t=Map}catch(e){t=function(){}}try{e=Set}catch(t){e=function(){}}try{i=Promise}catch(t){i=function(){}}function a(s,u,c,f,p){"object"==typeof u&&(c=u.depth,f=u.prototype,p=u.includeNonEnumerable,u=u.circular);var h=[],d=[],v=void 0!==n;return void 0===u&&(u=!0),void 0===c&&(c=1/0),function s(c,m){if(null===c)return null;if(0===m||"object"!=typeof c)return c;if(o(c,t))y=new t;else if(o(c,e))y=new e;else if(o(c,i))y=new i(function(t,e){c.then(function(e){t(s(e,m-1))},function(t){e(s(t,m-1))})});else if(a.__isArray(c))y=[];else if(a.__isRegExp(c))y=new RegExp(c.source,l(c)),c.lastIndex&&(y.lastIndex=c.lastIndex);else if(a.__isDate(c))y=new Date(c.getTime());else{if(v&&n.isBuffer(c))return y=n.allocUnsafe?n.allocUnsafe(c.length):new n(c.length),c.copy(y),y;o(c,Error)?y=Object.create(c):void 0===f?y=Object.create(_=Object.getPrototypeOf(c)):(y=Object.create(f),_=f)}if(u){var y,_,w,x=h.indexOf(c);if(-1!=x)return d[x];h.push(c),d.push(y)}for(var k in o(c,t)&&c.forEach(function(t,e){var n=s(e,m-1),i=s(t,m-1);y.set(n,i)}),o(c,e)&&c.forEach(function(t){var e=s(t,m-1);y.add(e)}),c)_&&(w=Object.getOwnPropertyDescriptor(_,k)),w&&null==w.set||(y[k]=s(c[k],m-1));if(Object.getOwnPropertySymbols)for(var E=Object.getOwnPropertySymbols(c),k=0;k<E.length;k++){var C=E[k],A=Object.getOwnPropertyDescriptor(c,C);(!A||A.enumerable||p)&&(y[C]=s(c[C],m-1),A.enumerable||Object.defineProperty(y,C,{enumerable:!1}))}if(p)for(var P=Object.getOwnPropertyNames(c),k=0;k<P.length;k++){var M=P[k],A=Object.getOwnPropertyDescriptor(c,M);A&&A.enumerable||(y[M]=s(c[M],m-1),Object.defineProperty(y,M,{enumerable:!1}))}return y}(s,c)}function s(t){return Object.prototype.toString.call(t)}function l(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return a.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},a.__objToStr=s,a.__isDate=function(t){return"object"==typeof t&&"[object Date]"===s(t)},a.__isArray=function(t){return"object"==typeof t&&"[object Array]"===s(t)},a.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===s(t)},a.__getRegExpFlags=l,a}();t.exports&&(t.exports=i)}),s("6ZWSX",function(t,e){n(t.exports,"Buffer",()=>i,t=>i=t),n(t.exports,"INSPECT_MAX_BYTES",()=>o,t=>o=t);var i,o,s=a("kuxul"),l=a("9NvM5");let u="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function c(t){if(t>0x7fffffff)throw RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,f.prototype),e}function f(t,e,n){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return d(t)}return p(t,e,n)}function p(t,e,n){if("string"==typeof t){var i=t,o=e;if(("string"!=typeof o||""===o)&&(o="utf8"),!f.isEncoding(o))throw TypeError("Unknown encoding: "+o);let n=0|_(i,o),a=c(n),s=a.write(i,o);return s!==n&&(a=a.slice(0,s)),a}if(ArrayBuffer.isView(t)){var a=t;if(q(a,Uint8Array)){let t=new Uint8Array(a);return m(t.buffer,t.byteOffset,t.byteLength)}return v(a)}if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(q(t,ArrayBuffer)||t&&q(t.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(q(t,SharedArrayBuffer)||t&&q(t.buffer,SharedArrayBuffer)))return m(t,e,n);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');let s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return f.from(s,e,n);let l=function(t){if(f.isBuffer(t)){let e=0|y(t.length),n=c(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||function(t){return t!=t}(t.length)?c(0):v(t):"Buffer"===t.type&&Array.isArray(t.data)?v(t.data):void 0}(t);if(l)return l;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return f.from(t[Symbol.toPrimitive]("string"),e,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function d(t){return h(t),c(t<0?0:0|y(t))}function v(t){let e=t.length<0?0:0|y(t.length),n=c(e);for(let i=0;i<e;i+=1)n[i]=255&t[i];return n}function m(t,e,n){let i;if(e<0||t.byteLength<e)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),f.prototype),i}function y(t){if(t>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function _(t,e){if(f.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||q(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let n=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(o)return i?-1:z(t).length;e=(""+e).toLowerCase(),o=!0}}function w(t,e,n){let i=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,n){let i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);let o="";for(let i=e;i<n;++i)o+=H[t[i]];return o}(this,e,n);case"utf8":case"utf-8":return C(this,e,n);case"ascii":return function(t,e,n){let i="";n=Math.min(t.length,n);for(let o=e;o<n;++o)i+=String.fromCharCode(127&t[o]);return i}(this,e,n);case"latin1":case"binary":return function(t,e,n){let i="";n=Math.min(t.length,n);for(let o=e;o<n;++o)i+=String.fromCharCode(t[o]);return i}(this,e,n);case"base64":var o,a,l;return o=this,a=e,l=n,0===a&&l===o.length?s.fromByteArray(o):s.fromByteArray(o.slice(a,l));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,n){let i=t.slice(e,n),o="";for(let t=0;t<i.length-1;t+=2)o+=String.fromCharCode(i[t]+256*i[t+1]);return o}(this,e,n);default:if(i)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function x(t,e,n){let i=t[e];t[e]=t[n],t[n]=i}function k(t,e,n,i,o){var a;if(0===t.length)return -1;if("string"==typeof n?(i=n,n=0):n>0x7fffffff?n=0x7fffffff:n<-0x80000000&&(n=-0x80000000),(a=n*=1)!=a&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length)if(o)return -1;else n=t.length-1;else if(n<0)if(!o)return -1;else n=0;if("string"==typeof e&&(e=f.from(e,i)),f.isBuffer(e))return 0===e.length?-1:E(t,e,n,i,o);if("number"==typeof e){if(e&=255,"function"==typeof Uint8Array.prototype.indexOf)if(o)return Uint8Array.prototype.indexOf.call(t,e,n);else return Uint8Array.prototype.lastIndexOf.call(t,e,n);return E(t,[e],n,i,o)}throw TypeError("val must be string, number or Buffer")}function E(t,e,n,i,o){let a,s=1,l=t.length,u=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return -1;s=2,l/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){let i=-1;for(a=n;a<l;a++)if(c(t,a)===c(e,-1===i?0:a-i)){if(-1===i&&(i=a),a-i+1===u)return i*s}else -1!==i&&(a-=a-i),i=-1}else for(n+u>l&&(n=l-u),a=n;a>=0;a--){let n=!0;for(let i=0;i<u;i++)if(c(t,a+i)!==c(e,i)){n=!1;break}if(n)return a}return -1}function C(t,e,n){n=Math.min(t.length,n);let i=[],o=e;for(;o<n;){let e=t[o],a=null,s=e>239?4:e>223?3:e>191?2:1;if(o+s<=n){let n,i,l,u;switch(s){case 1:e<128&&(a=e);break;case 2:(192&(n=t[o+1]))==128&&(u=(31&e)<<6|63&n)>127&&(a=u);break;case 3:n=t[o+1],i=t[o+2],(192&n)==128&&(192&i)==128&&(u=(15&e)<<12|(63&n)<<6|63&i)>2047&&(u<55296||u>57343)&&(a=u);break;case 4:n=t[o+1],i=t[o+2],l=t[o+3],(192&n)==128&&(192&i)==128&&(192&l)==128&&(u=(15&e)<<18|(63&n)<<12|(63&i)<<6|63&l)>65535&&u<1114112&&(a=u)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),o+=s}var a=i;let s=a.length;if(s<=4096)return String.fromCharCode.apply(String,a);let l="",u=0;for(;u<s;)l+=String.fromCharCode.apply(String,a.slice(u,u+=4096));return l}function A(t,e,n){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>n)throw RangeError("Trying to access beyond buffer length")}function P(t,e,n,i,o,a){if(!f.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<a)throw RangeError('"value" argument is out of bounds');if(n+i>t.length)throw RangeError("Index out of range")}function M(t,e,n,i,o){R(e,i,o,t,n,7);let a=Number(e&BigInt(0xffffffff));t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a;let s=Number(e>>BigInt(32)&BigInt(0xffffffff));return t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,n}function S(t,e,n,i,o){R(e,i,o,t,n,7);let a=Number(e&BigInt(0xffffffff));t[n+7]=a,a>>=8,t[n+6]=a,a>>=8,t[n+5]=a,a>>=8,t[n+4]=a;let s=Number(e>>BigInt(32)&BigInt(0xffffffff));return t[n+3]=s,s>>=8,t[n+2]=s,s>>=8,t[n+1]=s,s>>=8,t[n]=s,n+8}function T(t,e,n,i,o,a){if(n+i>t.length||n<0)throw RangeError("Index out of range")}function j(t,e,n,i,o){return e*=1,n>>>=0,o||T(t,e,n,4,34028234663852886e22,-34028234663852886e22),l.write(t,e,n,i,23,4),n+4}function O(t,e,n,i,o){return e*=1,n>>>=0,o||T(t,e,n,8,17976931348623157e292,-17976931348623157e292),l.write(t,e,n,i,52,8),n+8}i=f,o=50,f.TYPED_ARRAY_SUPPORT=function(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),f.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(t,e,n){return p(t,e,n)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(t,e,n){return(h(t),t<=0)?c(t):void 0!==e?"string"==typeof n?c(t).fill(e,n):c(t).fill(e):c(t)},f.allocUnsafe=function(t){return d(t)},f.allocUnsafeSlow=function(t){return d(t)},f.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==f.prototype},f.compare=function(t,e){if(q(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),q(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(t)||!f.isBuffer(e))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,i=e.length;for(let o=0,a=Math.min(n,i);o<a;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:+(i<n)},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,e){let n;if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);if(void 0===e)for(n=0,e=0;n<t.length;++n)e+=t[n].length;let i=f.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){let e=t[n];if(q(e,Uint8Array))o+e.length>i.length?(f.isBuffer(e)||(e=f.from(e)),e.copy(i,o)):Uint8Array.prototype.set.call(i,e,o);else if(f.isBuffer(e))e.copy(i,o);else throw TypeError('"list" argument must be an Array of Buffers');o+=e.length}return i},f.byteLength=_,f.prototype._isBuffer=!0,f.prototype.swap16=function(){let t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)x(this,e,e+1);return this},f.prototype.swap32=function(){let t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)x(this,e,e+3),x(this,e+1,e+2);return this},f.prototype.swap64=function(){let t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)x(this,e,e+7),x(this,e+1,e+6),x(this,e+2,e+5),x(this,e+3,e+4);return this},f.prototype.toString=function(){let t=this.length;return 0===t?"":0==arguments.length?C(this,0,t):w.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(t){if(!f.isBuffer(t))throw TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){let t="",e=o;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},u&&(f.prototype[u]=f.prototype.inspect),f.prototype.compare=function(t,e,n,i,o){if(q(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return -1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;let a=o-i,s=n-e,l=Math.min(a,s),u=this.slice(i,o),c=t.slice(e,n);for(let t=0;t<l;++t)if(u[t]!==c[t]){a=u[t],s=c[t];break}return a<s?-1:+(s<a)},f.prototype.includes=function(t,e,n){return -1!==this.indexOf(t,e,n)},f.prototype.indexOf=function(t,e,n){return k(this,t,e,n,!0)},f.prototype.lastIndexOf=function(t,e,n){return k(this,t,e,n,!1)},f.prototype.write=function(t,e,n,i){var o,a,s,l,u,c,f,p;if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let h=this.length-e;if((void 0===n||n>h)&&(n=h),t.length>0&&(n<0||e<0)||e>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let d=!1;for(;;)switch(i){case"hex":return function(t,e,n,i){let o;n=Number(n)||0;let a=t.length-n;i?(i=Number(i))>a&&(i=a):i=a;let s=e.length;for(i>s/2&&(i=s/2),o=0;o<i;++o){var l;let i=parseInt(e.substr(2*o,2),16);if((l=i)!=l)break;t[n+o]=i}return o}(this,t,e,n);case"utf8":case"utf-8":return o=e,a=n,N(z(t,this.length-o),this,o,a);case"ascii":case"latin1":case"binary":return s=e,l=n,N(function(t){let e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(t),this,s,l);case"base64":return u=e,c=n,N(U(t),this,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f=e,p=n,N(function(t,e){let n,i,o=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)i=(n=t.charCodeAt(a))>>8,o.push(n%256),o.push(i);return o}(t,this.length-f),this,f,p);default:if(d)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),d=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},f.prototype.slice=function(t,e){let n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);let i=this.subarray(t,e);return Object.setPrototypeOf(i,f.prototype),i},f.prototype.readUintLE=f.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||A(t,e,this.length);let i=this[t],o=1,a=0;for(;++a<e&&(o*=256);)i+=this[t+a]*o;return i},f.prototype.readUintBE=f.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||A(t,e,this.length);let i=this[t+--e],o=1;for(;e>0&&(o*=256);)i+=this[t+--e]*o;return i},f.prototype.readUint8=f.prototype.readUInt8=function(t,e){return t>>>=0,e||A(t,1,this.length),this[t]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(t,e){return t>>>=0,e||A(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(t,e){return t>>>=0,e||A(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(t,e){return t>>>=0,e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+0x1000000*this[t+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(t,e){return t>>>=0,e||A(t,4,this.length),0x1000000*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readBigUInt64LE=$(function(t){B(t>>>=0,"offset");let e=this[t],n=this[t+7];(void 0===e||void 0===n)&&I(t,this.length-8);let i=e+256*this[++t]+65536*this[++t]+0x1000000*this[++t],o=this[++t]+256*this[++t]+65536*this[++t]+0x1000000*n;return BigInt(i)+(BigInt(o)<<BigInt(32))}),f.prototype.readBigUInt64BE=$(function(t){B(t>>>=0,"offset");let e=this[t],n=this[t+7];(void 0===e||void 0===n)&&I(t,this.length-8);let i=0x1000000*e+65536*this[++t]+256*this[++t]+this[++t],o=0x1000000*this[++t]+65536*this[++t]+256*this[++t]+n;return(BigInt(i)<<BigInt(32))+BigInt(o)}),f.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||A(t,e,this.length);let i=this[t],o=1,a=0;for(;++a<e&&(o*=256);)i+=this[t+a]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},f.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||A(t,e,this.length);let i=e,o=1,a=this[t+--i];for(;i>0&&(o*=256);)a+=this[t+--i]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*e)),a},f.prototype.readInt8=function(t,e){return(t>>>=0,e||A(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},f.prototype.readInt16LE=function(t,e){t>>>=0,e||A(t,2,this.length);let n=this[t]|this[t+1]<<8;return 32768&n?0xffff0000|n:n},f.prototype.readInt16BE=function(t,e){t>>>=0,e||A(t,2,this.length);let n=this[t+1]|this[t]<<8;return 32768&n?0xffff0000|n:n},f.prototype.readInt32LE=function(t,e){return t>>>=0,e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,e){return t>>>=0,e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readBigInt64LE=$(function(t){B(t>>>=0,"offset");let e=this[t],n=this[t+7];return(void 0===e||void 0===n)&&I(t,this.length-8),(BigInt(this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24))<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+0x1000000*this[++t])}),f.prototype.readBigInt64BE=$(function(t){B(t>>>=0,"offset");let e=this[t],n=this[t+7];return(void 0===e||void 0===n)&&I(t,this.length-8),(BigInt((e<<24)+65536*this[++t]+256*this[++t]+this[++t])<<BigInt(32))+BigInt(0x1000000*this[++t]+65536*this[++t]+256*this[++t]+n)}),f.prototype.readFloatLE=function(t,e){return t>>>=0,e||A(t,4,this.length),l.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,e){return t>>>=0,e||A(t,4,this.length),l.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,e){return t>>>=0,e||A(t,8,this.length),l.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,e){return t>>>=0,e||A(t,8,this.length),l.read(this,t,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(t,e,n,i){if(t*=1,e>>>=0,n>>>=0,!i){let i=Math.pow(2,8*n)-1;P(this,t,e,n,i,0)}let o=1,a=0;for(this[e]=255&t;++a<n&&(o*=256);)this[e+a]=t/o&255;return e+n},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(t,e,n,i){if(t*=1,e>>>=0,n>>>=0,!i){let i=Math.pow(2,8*n)-1;P(this,t,e,n,i,0)}let o=n-1,a=1;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=t/a&255;return e+n},f.prototype.writeUint8=f.prototype.writeUInt8=function(t,e,n){return t*=1,e>>>=0,n||P(this,t,e,1,255,0),this[e]=255&t,e+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(t,e,n){return t*=1,e>>>=0,n||P(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(t,e,n){return t*=1,e>>>=0,n||P(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(t,e,n){return t*=1,e>>>=0,n||P(this,t,e,4,0xffffffff,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(t,e,n){return t*=1,e>>>=0,n||P(this,t,e,4,0xffffffff,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},f.prototype.writeBigUInt64LE=$(function(t,e=0){return M(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=$(function(t,e=0){return S(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(t,e,n,i){if(t*=1,e>>>=0,!i){let i=Math.pow(2,8*n-1);P(this,t,e,n,i-1,-i)}let o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a|0)-s&255;return e+n},f.prototype.writeIntBE=function(t,e,n,i){if(t*=1,e>>>=0,!i){let i=Math.pow(2,8*n-1);P(this,t,e,n,i-1,-i)}let o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a|0)-s&255;return e+n},f.prototype.writeInt8=function(t,e,n){return t*=1,e>>>=0,n||P(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},f.prototype.writeInt16LE=function(t,e,n){return t*=1,e>>>=0,n||P(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},f.prototype.writeInt16BE=function(t,e,n){return t*=1,e>>>=0,n||P(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},f.prototype.writeInt32LE=function(t,e,n){return t*=1,e>>>=0,n||P(this,t,e,4,0x7fffffff,-0x80000000),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},f.prototype.writeInt32BE=function(t,e,n){return t*=1,e>>>=0,n||P(this,t,e,4,0x7fffffff,-0x80000000),t<0&&(t=0xffffffff+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},f.prototype.writeBigInt64LE=$(function(t,e=0){return M(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=$(function(t,e=0){return S(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeFloatLE=function(t,e,n){return j(this,t,e,!0,n)},f.prototype.writeFloatBE=function(t,e,n){return j(this,t,e,!1,n)},f.prototype.writeDoubleLE=function(t,e,n){return O(this,t,e,!0,n)},f.prototype.writeDoubleBE=function(t,e,n){return O(this,t,e,!1,n)},f.prototype.copy=function(t,e,n,i){if(!f.isBuffer(t))throw TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n||0===t.length||0===this.length)return 0;if(e<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);let o=i-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,i):Uint8Array.prototype.set.call(t,this.subarray(n,i),e),o},f.prototype.fill=function(t,e,n,i){let o;if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!f.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===t.length){let e=t.charCodeAt(0);("utf8"===i&&e<128||"latin1"===i)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw RangeError("Out of range index");if(n<=e)return this;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{let a=f.isBuffer(t)?t:f.from(t,i),s=a.length;if(0===s)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};let V={};function D(t,e,n){V[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function L(t){let e="",n=t.length,i=+("-"===t[0]);for(;n>=i+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function R(t,e,n,i,o,a){if(t>n||t<e){let i,o="bigint"==typeof e?"n":"";throw i=a>3?0===e||e===BigInt(0)?`>= 0${o} and < 2${o} ** ${(a+1)*8}${o}`:`>= -(2${o} ** ${(a+1)*8-1}${o}) and < 2 ** ${(a+1)*8-1}${o}`:`>= ${e}${o} and <= ${n}${o}`,new V.ERR_OUT_OF_RANGE("value",i,t)}B(o,"offset"),(void 0===i[o]||void 0===i[o+a])&&I(o,i.length-(a+1))}function B(t,e){if("number"!=typeof t)throw new V.ERR_INVALID_ARG_TYPE(e,"number",t)}function I(t,e,n){if(Math.floor(t)!==t)throw B(t,n),new V.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(n||"offset",`>= ${+!!n} and <= ${e}`,t)}D("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),D("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),D("ERR_OUT_OF_RANGE",function(t,e,n){let i=`The value of "${t}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>0x100000000?o=L(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=L(o)),o+="n"),i+=` It must be ${e}. Received ${o}`},RangeError);let F=/[^+/0-9A-Za-z-_]/g;function z(t,e){let n;e=e||1/0;let i=t.length,o=null,a=[];for(let s=0;s<i;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319||s+1===i){(e-=3)>-1&&a.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&a.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return a}function U(t){return s.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function N(t,e,n,i){let o;for(o=0;o<i&&!(o+n>=e.length)&&!(o>=t.length);++o)e[o+n]=t[o];return o}function q(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}let H=function(){let t="0123456789abcdef",e=Array(256);for(let n=0;n<16;++n){let i=16*n;for(let o=0;o<16;++o)e[i+o]=t[n]+t[o]}return e}();function $(t){return"undefined"==typeof BigInt?G:t}function G(){throw Error("BigInt not supported")}}),s("kuxul",function(t,e){n(t.exports,"toByteArray",()=>i,t=>i=t),n(t.exports,"fromByteArray",()=>o,t=>o=t);for(var i=function(t){var e,n,i=function(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var i=n===e?0:4-n%4;return[n,i]}(t),o=i[0],a=i[1],u=new l((o+a)*3/4-a),c=0,f=a>0?o-4:o;for(n=0;n<f;n+=4)e=s[t.charCodeAt(n)]<<18|s[t.charCodeAt(n+1)]<<12|s[t.charCodeAt(n+2)]<<6|s[t.charCodeAt(n+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;return 2===a&&(e=s[t.charCodeAt(n)]<<2|s[t.charCodeAt(n+1)]>>4,u[c++]=255&e),1===a&&(e=s[t.charCodeAt(n)]<<10|s[t.charCodeAt(n+1)]<<4|s[t.charCodeAt(n+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e),u},o=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,l=n-i;s<l;s+=16383)o.push(function(t,e,n){for(var i,o=[],s=e;s<n;s+=3)i=(t[s]<<16&0xff0000)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(a[i>>18&63]+a[i>>12&63]+a[i>>6&63]+a[63&i]);return o.join("")}(t,s,s+16383>l?l:s+16383));return 1===i?o.push(a[(e=t[n-1])>>2]+a[e<<4&63]+"=="):2===i&&o.push(a[(e=(t[n-2]<<8)+t[n-1])>>10]+a[e>>4&63]+a[e<<2&63]+"="),o.join("")},a=[],s=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,f=u.length;c<f;++c)a[c]=u[c],s[u.charCodeAt(c)]=c;s[45]=62,s[95]=63}),s("9NvM5",function(t,e){var i,o;n(t.exports,"read",()=>i,t=>i=t),n(t.exports,"write",()=>o,t=>o=t),i=function(t,e,n,i,o){var a,s,l=8*o-i-1,u=(1<<l)-1,c=u>>1,f=-7,p=n?o-1:0,h=n?-1:1,d=t[e+p];for(p+=h,a=d&(1<<-f)-1,d>>=-f,f+=l;f>0;a=256*a+t[e+p],p+=h,f-=8);for(s=a&(1<<-f)-1,a>>=-f,f+=i;f>0;s=256*s+t[e+p],p+=h,f-=8);if(0===a)a=1-c;else{if(a===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,i),a-=c}return(d?-1:1)*s*Math.pow(2,a-i)},o=function(t,e,n,i,o,a){var s,l,u,c=8*a-o-1,f=(1<<c)-1,p=f>>1,h=5960464477539062e-23*(23===o),d=i?0:a-1,v=i?1:-1,m=+(e<0||0===e&&1/e<0);for(isNaN(e=Math.abs(e))||e===1/0?(l=+!!isNaN(e),s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+p>=1?e+=h/u:e+=h*Math.pow(2,1-p),e*u>=2&&(s++,u/=2),s+p>=f?(l=0,s=f):s+p>=1?(l=(e*u-1)*Math.pow(2,o),s+=p):(l=e*Math.pow(2,p-1)*Math.pow(2,o),s=0));o>=8;t[n+d]=255&l,d+=v,l/=256,o-=8);for(s=s<<o|l,c+=o;c>0;t[n+d]=255&s,d+=v,s/=256,c-=8);t[n+d-v]|=128*m}}),s("hPF0J",function(t,e){var i;n(t.exports,"squaredDistance",()=>i,t=>i=t),i=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}}),s("9HFYU",function(t,e){n(t.exports,"arePointsCollinear",()=>i,t=>i=t),n(t.exports,"removeDuplicatePoints",()=>o,t=>o=t),n(t.exports,"removeCollinearPoints",()=>s,t=>s=t),n(t.exports,"clipSegmentToCircle",()=>l,t=>l=t),n(t.exports,"clipLineToCircle",()=>u,t=>u=t),n(t.exports,"clipPolylinesToBox",()=>c,t=>c=t),n(t.exports,"createHatchLines",()=>f,t=>f=t),n(t.exports,"getBounds",()=>p,t=>p=t);var i,o,s,l,u,c,f,p,h=a("iV833"),d=a("2GlOr"),v=a("jmZDm"),m=a("8kDCz"),y=a("hPF0J").squaredDistance;i=function(t,e,n){var i=t[0],o=t[1],a=e[0];return d((o-e[1])*(i-n[0]),(o-n[1])*(i-a))},o=function(t){for(var e,n=[],i=0;i<t.length;i++){var o=t[i];e&&v(e,o)||(n.push(o),e=o)}return m(n)},s=function(t){for(var e=[],n=m(t);n.length>=3;){var o=n[0],a=n[1],s=n[2],l=i(o,a,s);if(l&&y(o,a)>y(o,s)&&(l=!1),l)n.splice(1,1);else for(var u=0;u<1;u++)e.push(n.shift())}for(;n.length;)e.push(n.shift());return e},l=a("lfT8t"),u=a("fgpGm"),c=function(t,e,n,i){if(!Array.isArray(e)||2!==e.length&&4!==e.length)throw Error("Expected box to either be format [ minPoint, maxPoint ] or [ minX, minY, maxX, maxY ]");if(2===e.length){var o=e[0],a=e[1];e=[o[0],o[1],a[0],a[1]]}return(i=!1!==i,n=!!n)?t.map(function(t){var n=h.polygon(t,e);return i&&n.length>2&&n.push(n[0]),n}).filter(function(t){return t.length>0}):t.map(function(t){return h.polyline(t,e)}).reduce(function(t,e){return t.concat(e)},[])},f=function(t,e,n,i){if(!Array.isArray(t)||2!==t.length&&4!==t.length)throw Error("Expected box to either be format [ minPoint, maxPoint ] or [ minX, minY, maxX, maxY ]");if(2===t.length){var o=t[0],a=t[1];t=[o[0],o[1],a[0],a[1]]}if(null==e&&(e=-Math.PI/4),null==n&&(n=.5),null==i&&(i=[]),0===(n=Math.abs(n)))throw Error("cannot use a spacing of zero as it will run an infinite loop!");var s=t[0],l=t[1],u=t[2],c=t[3],f=u-s,p=c-l;if(0===f||0===p)return i;for(var h=Math.sqrt(f*f+p*p)/2,d=Math.PI/2-e,v=Math.cos(d),m=Math.sin(d),y=s+f/2,_=l+p/2,w=-h;w<=h;){var x=y+w*v+h*m,k=_+w*m-h*v,E=y+w*v-h*m,C=_+w*m+h*v;w+=n,x<s&&E<s||x>u&&E>u||k<l&&C<l||k>c&&C>c||i.push([[x,k],[E,C]])}return i},p=function(t){var e=t.length;if(0===e)throw Error("Expected points to be a non-empty array");for(var n=t[0].length,i=t[0].slice(),o=t[0].slice(),a=1;a<e;++a)for(var s=t[a],l=0;l<n;++l){var u=s[l];i[l]=Math.min(i[l],u),o[l]=Math.max(o[l],u)}return[i,o]}}),s("iV833",function(t,e){function n(t,e,n){var a,s,l,u,c,f=t.length,p=o(t[0],e),h=[];for(n||(n=[]),a=1;a<f;a++){for(s=t[a-1],u=c=o(l=t[a],e);;)if(p|u)if(p&u)break;else p?p=o(s=i(s,l,p,e),e):u=o(l=i(s,l,u,e),e);else{h.push(s),u!==c?(h.push(l),a<f-1&&(n.push(h),h=[])):a===f-1&&h.push(l);break}p=c}return h.length&&n.push(h),n}function i(t,e,n,i){return 8&n?[t[0]+(e[0]-t[0])*(i[3]-t[1])/(e[1]-t[1]),i[3]]:4&n?[t[0]+(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1]),i[1]]:2&n?[i[2],t[1]+(e[1]-t[1])*(i[2]-t[0])/(e[0]-t[0])]:1&n?[i[0],t[1]+(e[1]-t[1])*(i[0]-t[0])/(e[0]-t[0])]:null}function o(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}t.exports=n,n.polyline=n,n.polygon=function(t,e){var n,a,s,l,u,c,f;for(a=1;a<=8;a*=2){for(u=0,n=[],l=!(o(s=t[t.length-1],e)&a);u<t.length;u++)(f=!(o(c=t[u],e)&a))!==l&&n.push(i(s,c,a,e)),f&&n.push(c),s=c,l=f;if(!(t=n).length)break}return n}}),s("2GlOr",function(t,e){var n=Math.abs,i=Math.min;function o(t,e,a,s){var l=n(t-e);return null==a&&(a=o.DBL_EPSILON),null==s&&(s=a),!!(l<=a||l<=s*i(n(t),n(e)))||t===e}o.FLT_EPSILON=11920929e-14,o.DBL_EPSILON=2220446049250313e-31,t.exports=o}),s("jmZDm",function(t,e){var n=a("1yGqf"),i=a("1SNli");t.exports=function(t,e,o,a){return!!t&&!!e&&!!n(t)&&!!n(e)&&t.length===e.length&&("number"!=typeof o&&(o=i.FLT_EPSILON),"number"!=typeof a&&(a=o),Array.prototype.slice.call(t).every(function(t,n){var s=e[n];return t===s||i(t,s,o,a)}))}}),s("1yGqf",function(t,e){var n=Object.prototype.toString;t.exports=function(t){return t.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===n.call(t.buffer)||Array.isArray(t)}}),s("1SNli",function(t,e){var n=Math.abs,i=Math.min;function o(t,e,o,a){var s=n(t-e);return!!(s<=o||s<=a*i(n(t),n(e)))||t===e}o.FLT_EPSILON=11920929e-14,o.DBL_EPSILON=2220446049250313e-31,t.exports=o}),s("lfT8t",function(t,e){var n=a("2GlOr");function i(t,e,n,i,o){var a,s;return(a=n-t)*a+(s=i-e)*s<=o*o}function o(t,e,n,i){var o=t-n,a=e-i;return Math.sqrt(o*o+a*a)}function s(t,e,n,i,a){var s=a/o(t,e,n,i);return[t+s*(n-t),e+s*(i-e)]}t.exports=function(t,e,a,l,u){return function(t,e,a,l,u,c,f,p){null==p&&(p=[]);var h,d,v,m,y,_=i(t,e,u,c,f),w=i(a,l,u,c,f);if(_&&w)return p.push([t,e]),p.push([a,l]),!0;if(_||w){d=Math.sqrt(f*f-(h=o(m=(x=t,k=e,E=a,C=l,A=u,P=c,T=((M=E-x)*(A-x)+(S=C-k)*(P-k))/(M*M+S*S),v=[x+T*M,k+T*S])[0],y=v[1],u,c))*h);var x,k,E,C,A,P,M,S,T,j=_?[t,e]:[a,l],O=_?s(m,y,a,l,d):s(m,y,t,e,d);return n(j[0],O[0])&&n(j[1],O[1])?p.push(j):(p.push(j),p.push(O)),!0}return m=(v=function(t,e,n,i,o,a){var s=n-t,l=i-e,u=s*(o-t)+l*(a-e);if(u<=0)return[t,e];var c=s*s+l*l;if(c<=u)return[n,i];var f=u/c;return[t+f*s,e+f*l]}(t,e,a,l,u,c))[0],y=v[1],!(n(t,m)&&n(e,y)||n(a,m)&&n(l,y)||(h=o(m,y,u,c))>f)&&(n(h,f)?(p.push([m,y]),!0):n(h,0)?(p.push(s(u,c,t,e,f)),p.push(s(u,c,a,l,f)),!0):(d=Math.sqrt(f*f-h*h),p.push(s(m,y,t,e,d)),p.push(s(m,y,a,l,d)),!0))}(t[0],t[1],e[0],e[1],a[0],a[1],l,u)}}),s("fgpGm",function(t,e){var n=a("2GlOr");t.exports=function(t,e,i,o,a){null==a&&(a=[]);var s,l=function(t){return t*t}(e[0]-t[0])+function(t){return t*t}(e[1]-t[1]),u=2*((e[0]-t[0])*(t[0]-i[0])+(e[1]-t[1])*(t[1]-i[1])),c=u*u-4*l*(function(t){return t*t}(i[0])+function(t){return t*t}(i[1])+function(t){return t*t}(t[0])+function(t){return t*t}(t[1])-2*(i[0]*t[0]+i[1]*t[1])-function(t){return t*t}(o));if(c<0)return!1;if(n(c,0))return s=-u/(2*l),a.push([t[0]+s*(e[0]-t[0]),t[1]+s*(e[1]-t[1])]),!0;if(c>0){var f=Math.sqrt(c);return s=(-u+f)/(2*l),a.push([t[0]+s*(e[0]-t[0]),t[1]+s*(e[1]-t[1])]),s=(-u-f)/(2*l),a.push([t[0]+s*(e[0]-t[0]),t[1]+s*(e[1]-t[1])]),!0}return null}}),s("5OLQM",function(t,e){var n=a("ekvHU"),i=a("dpmWT"),o=a("4t0MC"),s=a("auZlB");function l(t){return t&&!Array.isArray(t)&&"object"==typeof t}t.exports=function(t){if(!(t=t||{}).gl)throw Error('Must specify { context: "webgl" } in sketch settings, or a WebGL-enabled canvas');var e,a=t.gl,u={gl:a};void 0!==t.extensions&&(u.extensions=t.extensions),void 0!==t.optionalExtensions&&(u.optionalExtensions=t.optionalExtensions),void 0!==t.profile&&(u.profile=t.profile),void 0!==t.onDone&&(u.onDone=t.onDone);var c=n(u),f=i(),p=new Map,h=t.uniforms||{},d=Object.assign({},h);Object.keys(h).forEach(function(t){var e=h[t];"function"==typeof e?d[t]=function(t,n,i){var o=e.call(h,n,i);if(l(o))if(p.has(e)){var a=p.get(e);a(o),o=a}else{var s=c.texture(o);p.set(e,s),o=s}return o}:l(e)?d[t]=c.texture(e):d[t]=e});try{e=c({scissor:!!t.scissor&&{enable:!0,box:{x:c.prop("scissorX"),y:c.prop("scissorY"),width:c.prop("scissorWidth"),height:c.prop("scissorHeight")}},uniforms:d,frag:t.frag||"precision highp float;\n\nvoid main () {\n  gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n}",vert:t.vert||"precision highp float;\nattribute vec3 position;\nvarying vec2 vUv;\n\nvoid main () {\n  gl_Position = vec4(position.xyz, 1.0);\n  vUv = gl_Position.xy * 0.5 + 0.5;\n}",blend:!1!==t.blend?{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1}}:void 0,attributes:{position:f.positions},elements:f.cells})}catch(t){x(t)}var v=s(t.clearColor,"black");if("string"==typeof v){var m=o(v);if(!m.rgb)throw Error('Error parsing { clearColor } color string "'+v+'"');v=m.rgb.slice(0,3).map(function(t){return t/255})}else if(v&&(!Array.isArray(v)||v.length<3))throw Error("Error with { clearColor } option, must be a string or [ r, g, b ] float array");var y=s(t.clearAlpha,1),_=!!v&&v.concat([y||0]);return{render:function(t){c.poll(),_&&c.clear({color:_,depth:1,stencil:0}),w(t),a.flush()},regl:c,drawQuad:w,unload:function(){p.clear(),c.destroy()}};function w(t){if(t=t||{},e)try{e(t)}catch(e){x(e)&&null==t&&console.warn('Warning: shader.render() is not called with any "props" parameter')}}function x(t){if(/^\(regl\)/.test(t.message))return!0;throw t}}}),s("ekvHU",function(t,e){t.exports,t.exports=function(){var t=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},e=function(t,e){for(var n=Object.keys(e),i=0;i<n.length;++i)t[n[i]]=e[n[i]];return t};function n(t){var e=Error("(regl) "+t);throw console.error(e),e}function i(t,e){t||n(e)}function o(t){return t?": "+t:""}function a(t,e){switch(e){case"number":return"number"==typeof t;case"object":return"object"==typeof t;case"string":return"string"==typeof t;case"boolean":return"boolean"==typeof t;case"function":return"function"==typeof t;case"undefined":return void 0===t;case"symbol":return"symbol"==typeof t}}function s(t,e,i){0>e.indexOf(t)&&n("invalid value"+o(i)+". must be one of: "+e)}var l=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function u(t,e){for(t+="";t.length<e;)t=" "+t;return t}function c(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function f(t,e){this.number=t,this.line=e,this.errors=[]}function p(t,e,n){this.file=t,this.line=e,this.message=n}function h(){var t=Error(),e=(t.stack||t).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(n)return n[1];var i=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return i?i[1]:"unknown"}function d(){var t=Error(),e=(t.stack||t).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(n)return n[1];var i=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return i?i[1]:"unknown"}function v(t,e){var n=t.split("\n"),i=1,o=0,a={unknown:new c,0:new c};a.unknown.name=a[0].name=e||h(),a.unknown.lines.push(new f(0,""));for(var s=0;s<n.length;++s){var l=n[s],u=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(l);if(u)switch(u[1]){case"line":var p=/(\d+)(\s+\d+)?/.exec(u[2]);p&&(i=0|p[1],p[2]&&((o=0|p[2])in a||(a[o]=new c)));break;case"define":var d,v=/SHADER_NAME(_B64)?\s+(.*)$/.exec(u[2]);v&&(a[o].name=v[1]?(d=v[2],"undefined"!=typeof atob?atob(d):"base64:"+d):v[2])}a[o].lines.push(new f(i++,l))}return Object.keys(a).forEach(function(t){var e=a[t];e.lines.forEach(function(t){e.index[t.number]=t})}),a}function m(t){t._commandRef=h()}function y(t,e){var i=d();n(t+" in command "+(e||h())+("unknown"===i?"":" called from "+i))}function _(t,e,n,i){a(t,e)||y("invalid parameter type"+o(n)+". expected "+e+", got "+typeof t,i||h())}var w={};function x(t,e){return 32820===t||32819===t||33635===t?2:34042===t?4:w[t]*e}function k(t){return!(t&t-1)&&!!t}w[5120]=w[5121]=1,w[5122]=w[5123]=w[36193]=w[33635]=w[32819]=w[32820]=2,w[5124]=w[5125]=w[5126]=w[34042]=4;var E=e(i,{optional:function(t){t()},raise:n,commandRaise:y,command:function(t,e,n){t||y(e,n||h())},parameter:function(t,e,i){t in e||n("unknown parameter ("+t+")"+o(i)+". possible values: "+Object.keys(e).join())},commandParameter:function(t,e,n,i){t in e||y("unknown parameter ("+t+")"+o(n)+". possible values: "+Object.keys(e).join(),i||h())},constructor:function(t){Object.keys(t).forEach(function(t){0>l.indexOf(t)&&n('invalid regl constructor argument "'+t+'". must be one of '+l)})},type:function(t,e,i){a(t,e)||n("invalid parameter type"+o(i)+". expected "+e+", got "+typeof t)},commandType:_,isTypedArray:function(e,i){t(e)||n("invalid parameter type"+o(i)+". must be a typed array")},nni:function(t,e){t>=0&&(0|t)===t||n("invalid parameter type, ("+t+")"+o(e)+". must be a nonnegative integer")},oneOf:s,shaderError:function(t,e,n,o,a){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var s,l=t.getShaderInfoLog(e),c=o===t.FRAGMENT_SHADER?"fragment":"vertex";_(n,"string",c+" shader source must be a string",a);var f=v(n,a);(s=[],l.split("\n").forEach(function(t){if(!(t.length<5)){var e=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(t);e?s.push(new p(0|e[1],0|e[2],e[3].trim())):t.length>0&&s.push(new p("unknown",0,t))}}),s).forEach(function(t){var e=f[t.file];if(e){var n=e.index[t.line];if(n){n.errors.push(t),e.hasErrors=!0;return}}f.unknown.hasErrors=!0,f.unknown.lines[0].errors.push(t)}),Object.keys(f).forEach(function(t){var e=f[t];if(e.hasErrors){var n=[""],i=[""];o("file number "+t+": "+e.name+"\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach(function(t){if(t.errors.length>0){o(u(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(t.line+"\n","color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach(function(n){var i=n.message,a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(i);if(a){var s=a[1];i=a[2],"assign"===s&&(s="="),e=Math.max(t.line.indexOf(s,e),0)}else e=0;o(u("| ",6)),o(u("^^^",e+3)+"\n","font-weight:bold"),o(u("| ",6)),o(i+"\n","font-weight:bold")}),o(u("| ",6)+"\n")}else o(u(t.number,4)+"|  "),o(t.line+"\n","color:red")}),"undefined"==typeof document||window.chrome?console.log(n.join("")):(i[0]=n.join("%c"),console.log.apply(console,i))}function o(t,e){n.push(t),i.push(e||"")}}),i.raise("Error compiling "+c+" shader, "+f[0].name)}},linkError:function(t,e,n,o,a){if(!t.getProgramParameter(e,t.LINK_STATUS)){var s=t.getProgramInfoLog(e),l=v(n,a),u='Error linking program with vertex shader, "'+v(o,a)[0].name+'", and fragment shader "'+l[0].name+'"';"undefined"!=typeof document?console.log("%c"+u+"\n%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(u+"\n"+s),i.raise(u)}},callSite:d,saveCommandRef:m,saveDrawInfo:function(t,e,n,i){function o(t,e){Object.keys(e).forEach(function(e){t[i.id(e)]=!0})}m(t),t._fragId=(a=t.static.frag)?i.id(a):0,t._vertId=(s=t.static.vert)?i.id(s):0;var a,s,l=t._uniformSet={};o(l,e.static),o(l,e.dynamic);var u=t._attributeSet={};o(u,n.static),o(u,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic},framebufferFormat:function(t,e,n){t.texture?s(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):s(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:h,texture2D:function(t,e,n){var o,a=e.width,s=e.height,l=e.channels;i(a>0&&a<=n.maxTextureSize&&s>0&&s<=n.maxTextureSize,"invalid texture shape"),(33071!==t.wrapS||33071!==t.wrapT)&&i(k(a)&&k(s),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==a&&1!==s&&i(9984!==t.minFilter&&9986!==t.minFilter&&9985!==t.minFilter&&9987!==t.minFilter,"min filter requires mipmap"):(i(k(a)&&k(s),"texture must be a square power of 2 to support mipmapping"),i(e.mipmask===(a<<1)-1,"missing or incomplete mipmap data")),5126===e.type&&(0>n.extensions.indexOf("oes_texture_float_linear")&&i(9728===t.minFilter&&9728===t.magFilter,"filter not supported, must enable oes_texture_float_linear"),i(!t.genMipmaps,"mipmap generation not supported with float textures"));var u=e.images;for(o=0;o<16;++o)if(u[o]){var c=a>>o,f=s>>o;i(e.mipmask&1<<o,"missing mipmap data");var p=u[o];if(i(p.width===c&&p.height===f,"invalid shape for mip images"),i(p.format===e.format&&p.internalformat===e.internalformat&&p.type===e.type,"incompatible type for mip image"),p.compressed);else if(p.data){var h=Math.ceil(x(p.type,l)*c/p.unpackAlignment)*p.unpackAlignment;i(p.data.byteLength===h*f,"invalid data for image, buffer size is inconsistent with image format")}else p.element||p.copy}else t.genMipmaps||i((e.mipmask&1<<o)==0,"extra mipmap data");e.compressed&&i(!t.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(t,e,n,o){var a=t.width,s=t.height,l=t.channels;i(a>0&&a<=o.maxTextureSize&&s>0&&s<=o.maxTextureSize,"invalid texture shape"),i(a===s,"cube map must be square"),i(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(var u=0;u<n.length;++u){var c=n[u];i(c.width===a&&c.height===s,"inconsistent cube map face shape"),e.genMipmaps&&(i(!c.compressed,"can not generate mipmap for compressed textures"),i(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var f=c.images,p=0;p<16;++p){var h=f[p];if(h){var d=a>>p,v=s>>p;i(c.mipmask&1<<p,"missing mipmap data"),i(h.width===d&&h.height===v,"invalid shape for mip images"),i(h.format===t.format&&h.internalformat===t.internalformat&&h.type===t.type,"incompatible type for mip image"),h.compressed||(h.data?i(h.data.byteLength===d*v*Math.max(x(h.type,l),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}}),C=0;function A(t,e){this.id=C++,this.type=t,this.data=e}function P(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}var M=function(t,e){return new A(t,"["+(function t(e){if(0===e.length)return[];var n=e.charAt(0),i=e.charAt(e.length-1);if(e.length>1&&n===i&&('"'===n||"'"===n))return['"'+P(e.substr(1,e.length-2))+'"'];var o=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(o)return t(e.substr(0,o.index)).concat(t(o[1])).concat(t(e.substr(o.index+o[0].length)));var a=e.split(".");if(1===a.length)return['"'+P(e)+'"'];for(var s=[],l=0;l<a.length;++l)s=s.concat(t(a[l]));return s})(e+"").join("][")+"]")},S=function(t){return"function"==typeof t&&!t._reglType||t instanceof A},T=function t(e,n){return"function"==typeof e?new A(0,e):"number"==typeof e||"boolean"==typeof e?new A(5,e):Array.isArray(e)?new A(6,e.map((e,i)=>t(e,n+"["+i+"]"))):e instanceof A?e:void E(!1,"invalid option type in uniform "+n)},j={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},O="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function V(t){return"string"==typeof t?t.split():(E(Array.isArray(t),"invalid extension array"),t)}function D(t){return"string"==typeof t?(E("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function L(t,e){for(var n=Array(t),i=0;i<t;++i)n[i]=e(i);return n}function R(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,(e|=n)|t>>1}function B(){var t=L(8,function(){return[]});function e(e){var n=function(t){for(var e=16;e<=0x10000000;e*=16)if(t<=e)return e;return 0}(e),i=t[R(n)>>2];return i.length>0?i.pop():new ArrayBuffer(n)}function n(e){t[R(e.byteLength)>>2].push(e)}return{alloc:e,free:n,allocType:function(t,n){var i=null;switch(t){case 5120:i=new Int8Array(e(n),0,n);break;case 5121:i=new Uint8Array(e(n),0,n);break;case 5122:i=new Int16Array(e(2*n),0,n);break;case 5123:i=new Uint16Array(e(2*n),0,n);break;case 5124:i=new Int32Array(e(4*n),0,n);break;case 5125:i=new Uint32Array(e(4*n),0,n);break;case 5126:i=new Float32Array(e(4*n),0,n);break;default:return null}return i.length!==n?i.subarray(0,n):i},freeType:function(t){n(t.buffer)}}}var I=B();I.zero=B();var F=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(34047));var i=1,o=1;e.webgl_draw_buffers&&(i=t.getParameter(34852),o=t.getParameter(36063));var a=!!e.oes_texture_float;if(a){var s=t.createTexture();t.bindTexture(3553,s),t.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var l=t.createFramebuffer();if(t.bindFramebuffer(36160,l),t.framebufferTexture2D(36160,36064,3553,s,0),t.bindTexture(3553,null),36053!==t.checkFramebufferStatus(36160))a=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(16384);var u=I.allocType(5126,4);t.readPixels(0,0,1,1,6408,5126,u),t.getError()?a=!1:(t.deleteFramebuffer(l),t.deleteTexture(s),a=1===u[0]),I.freeType(u)}}var c="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),f=!0;if(!c){var p=t.createTexture(),h=I.allocType(5121,36);t.activeTexture(33984),t.bindTexture(34067,p),t.texImage2D(34069,0,6408,3,3,0,6408,5121,h),I.freeType(h),t.bindTexture(34067,null),t.deleteTexture(p),f=!t.getError()}return{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter(function(t){return!!e[t]}),maxAnisotropic:n,maxDrawbuffers:i,maxColorAttachments:o,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938),readFloat:a,npotTextureCube:f}};function z(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}var U=function(t){return Object.keys(t).map(function(e){return t[e]})},N=function(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e},q=function(t,e,n,i){var o=1;if(e.length)for(var a=0;a<e.length;++a)o*=e[a];else o=0;var s=i||I.allocType(n,o);switch(e.length){case 0:break;case 1:for(var l=e[0],u=0;u<l;++u)s[u]=t[u];break;case 2:!function(t,e,n,i){for(var o=0,a=0;a<e;++a)for(var s=t[a],l=0;l<n;++l)i[o++]=s[l]}(t,e[0],e[1],s);break;case 3:H(t,e[0],e[1],e[2],s,0);break;default:!function t(e,n,i,o,a){for(var s=1,l=i+1;l<n.length;++l)s*=n[l];var u=n[i];if(n.length-i==4){var c=n[i+1],f=n[i+2],p=n[i+3];for(l=0;l<u;++l)H(e[l],c,f,p,o,a),a+=s}else for(l=0;l<u;++l)t(e[l],n,i+1,o,a),a+=s}(t,e,0,s,0)}return s};function H(t,e,n,i,o,a){for(var s=a,l=0;l<e;++l)for(var u=t[l],c=0;c<n;++c)for(var f=u[c],p=0;p<i;++p)o[s++]=f[p]}var $={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},G={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},K={dynamic:35048,stream:35040,static:35044},W=[];function Y(t){return 0|$[Object.prototype.toString.call(t)]}function Q(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function J(t,e,n,i,o,a,s){for(var l=0,u=0;u<n;++u)for(var c=0;c<i;++c)t[l++]=e[o*u+a*c+s]}W[5120]=1,W[5122]=2,W[5124]=4,W[5121]=1,W[5123]=2,W[5125]=4,W[5126]=4;var X={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Z=new Float32Array(1),tt=new Uint32Array(Z.buffer);function te(t){for(var e=I.allocType(5123,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{Z[0]=t[n];var i=tt[0],o=i>>>31<<15,a=(i<<1>>>24)-127,s=i>>13&1023;if(a<-24)e[n]=o;else if(a<-14){var l=-14-a;e[n]=o+(s+1024>>l)}else a>15?e[n]=o+31744:e[n]=o+(a+15<<10)+s}return e}function tr(e){return Array.isArray(e)||t(e)}var tn=function(t){return!(t&t-1)&&!!t},ti=[9984,9986,9985,9987],to=[0,6409,6410,6407,6408],ta={};function ts(t){return"[object "+t+"]"}ta[6409]=ta[6406]=ta[6402]=1,ta[34041]=ta[6410]=2,ta[6407]=ta[35904]=3,ta[6408]=ta[35906]=4;var tl=ts("HTMLCanvasElement"),tu=ts("OffscreenCanvas"),tc=ts("CanvasRenderingContext2D"),tf=ts("ImageBitmap"),tp=ts("HTMLImageElement"),th=ts("HTMLVideoElement"),td=Object.keys($).concat([tl,tu,tc,tf,tp,th]),tv=[];tv[5121]=1,tv[5126]=4,tv[36193]=2,tv[5123]=2,tv[5125]=4;var tm=[];function tg(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function tb(t){return!!Array.isArray(t)&&0!==t.length&&!!tr(t[0])}function ty(t){return Object.prototype.toString.call(t)}function t_(t){if(!t)return!1;var e=ty(t);return td.indexOf(e)>=0||tg(t)||tb(t)||z(t)}function tw(t){return 0|$[Object.prototype.toString.call(t)]}function tx(t,e){return I.allocType(36193===t.type?5126:t.type,e)}function tk(t,e){36193===t.type?(t.data=te(e),I.freeType(e)):t.data=e}function tE(t,e,n,i,o,a){var s;if(s=void 0!==tm[t]?tm[t]:ta[t]*tv[e],a&&(s*=6),!o)return s*n*i;for(var l=0,u=n;u>=1;)l+=s*u*u,u/=2;return l}tm[32854]=2,tm[32855]=2,tm[36194]=2,tm[34041]=4,tm[33776]=.5,tm[33777]=.5,tm[33778]=1,tm[33779]=1,tm[35986]=.5,tm[35987]=1,tm[34798]=1,tm[35840]=.5,tm[35841]=.25,tm[35842]=.5,tm[35843]=.25,tm[36196]=.5;var tC=[];tC[32854]=2,tC[32855]=2,tC[36194]=2,tC[33189]=2,tC[36168]=1,tC[34041]=4,tC[35907]=4,tC[34836]=16,tC[34842]=8,tC[34843]=6;var tA=function(t,e,n,i,o){var a={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(a.srgba=35907),e.ext_color_buffer_half_float&&(a.rgba16f=34842,a.rgb16f=34843),e.webgl_color_buffer_float&&(a.rgba32f=34836);var s=[];Object.keys(a).forEach(function(t){s[a[t]]=t});var l=0,u={};function c(t){this.id=l++,this.refCount=1,this.renderbuffer=t,this.format=32854,this.width=0,this.height=0,o.profile&&(this.stats={size:0})}function f(e){var n=e.renderbuffer;E(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(36161,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete u[e.id],i.renderbufferCount--}return c.prototype.decRef=function(){--this.refCount<=0&&f(this)},o.profile&&(i.getTotalRenderbufferSize=function(){var t=0;return Object.keys(u).forEach(function(e){t+=u[e].stats.size}),t}),{create:function(e,l){var f=new c(t.createRenderbuffer());function p(e,i){var l,u,c,h=0,d=0,v=32854;if("object"==typeof e&&e){if("shape"in e){var m=e.shape;E(Array.isArray(m)&&m.length>=2,"invalid renderbuffer shape"),h=0|m[0],d=0|m[1]}else"radius"in e&&(h=d=0|e.radius),"width"in e&&(h=0|e.width),"height"in e&&(d=0|e.height);"format"in e&&(E.parameter(e.format,a,"invalid renderbuffer format"),v=a[e.format])}else"number"==typeof e?(h=0|e,d="number"==typeof i?0|i:h):e?E.raise("invalid arguments to renderbuffer constructor"):h=d=1;if(E(h>0&&d>0&&h<=n.maxRenderbufferSize&&d<=n.maxRenderbufferSize,"invalid renderbuffer size"),h!==f.width||d!==f.height||v!==f.format)return p.width=f.width=h,p.height=f.height=d,f.format=v,t.bindRenderbuffer(36161,f.renderbuffer),t.renderbufferStorage(36161,v,h,d),E(0===t.getError(),"invalid render buffer format"),o.profile&&(f.stats.size=(l=f.format,u=f.width,c=f.height,tC[l]*u*c)),p.format=s[f.format],p}return u[f.id]=f,i.renderbufferCount++,p(e,l),p.resize=function(e,i){var a,s,l,u=0|e,c=0|i||u;return u===f.width&&c===f.height?p:(E(u>0&&c>0&&u<=n.maxRenderbufferSize&&c<=n.maxRenderbufferSize,"invalid renderbuffer size"),p.width=f.width=u,p.height=f.height=c,t.bindRenderbuffer(36161,f.renderbuffer),t.renderbufferStorage(36161,f.format,u,c),E(0===t.getError(),"invalid render buffer format"),o.profile&&(f.stats.size=(a=f.format,s=f.width,l=f.height,tC[a]*s*l)),p)},p._reglType="renderbuffer",p._renderbuffer=f,o.profile&&(p.stats=f.stats),p.destroy=function(){f.decRef()},p},clear:function(){U(u).forEach(f)},restore:function(){U(u).forEach(function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,e.renderbuffer),t.renderbufferStorage(36161,e.format,e.width,e.height)}),t.bindRenderbuffer(36161,null)}}},tP=[6407,6408],tM=[];tM[6408]=4,tM[6407]=3;var tS=[];tS[5121]=1,tS[5126]=4,tS[36193]=2;var tT=[32854,32855,36194,35907,34842,34843,34836],tj={};function tO(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function tV(t){return Array.prototype.slice.call(t)}function tD(t){return tV(t).join("")}tj[36053]="complete",tj[36054]="incomplete attachment",tj[36057]="incomplete dimensions",tj[36055]="incomplete, missing attachment",tj[36061]="unsupported";var tL="xyzw".split(""),tR="dither",tB="blend.enable",tI="blend.color",tF="blend.equation",tz="blend.func",tU="depth.enable",tN="depth.func",tq="depth.range",tH="depth.mask",t$="colorMask",tG="cull.enable",tK="cull.face",tW="frontFace",tY="lineWidth",tQ="polygonOffset.enable",tJ="polygonOffset.offset",tX="sample.alpha",tZ="sample.enable",t0="sample.coverage",t1="stencil.enable",t2="stencil.mask",t5="stencil.func",t3="stencil.opFront",t6="stencil.opBack",t4="scissor.enable",t8="scissor.box",t7="viewport",t9="profile",et="framebuffer",ee="vert",er="frag",en="elements",ei="primitive",eo="count",ea="offset",es="instances",el="Width",eu="Height",ec=et+el,ef=et+eu,ep=t7+el,eh=t7+eu,ed="drawingBuffer",ev=ed+el,em=ed+eu,eg=[tz,tF,t5,t3,t6,t0,t7,t8,tJ],eb={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ey=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],e_={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ew={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ex={frag:35632,vert:35633},ek={cw:2304,ccw:2305};function eE(e){return Array.isArray(e)||t(e)||z(e)}function eC(t){return t.sort(function(t,e){return t===t7?-1:e===t7?1:t<e?-1:1})}function eA(t,e,n,i){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=i}function eP(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function eM(t){return new eA(!1,!1,!1,t)}function eS(t,e){var n=t.type;if(0===n){var i=t.data.length;return new eA(!0,i>=1,i>=2,e)}if(4===n){var o=t.data;return new eA(o.thisDep,o.contextDep,o.propDep,e)}if(5===n)return new eA(!1,!1,!1,e);if(6!==n)return new eA(3===n,2===n,1===n,e);for(var a=!1,s=!1,l=!1,u=0;u<t.data.length;++u){var c=t.data[u];if(1===c.type)l=!0;else if(2===c.type)s=!0;else if(3===c.type)a=!0;else if(0===c.type){a=!0;var f=c.data;f>=1&&(s=!0),f>=2&&(l=!0)}else 4===c.type&&(a=a||c.data.thisDep,s=s||c.data.contextDep,l=l||c.data.propDep)}return new eA(a,s,l,e)}var eT=new eA(!1,!1,!1,function(){}),ej=function(t,e){if(!e.ext_disjoint_timer_query)return null;var n=[],i=[];function o(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var a=[],s=[];function l(t,e,n){var i=a.pop()||new o;i.startQueryIndex=t,i.endQueryIndex=e,i.sum=0,i.stats=n,s.push(i)}var u=[],c=[];return{beginQuery:function(t){var o=n.pop()||e.ext_disjoint_timer_query.createQueryEXT();e.ext_disjoint_timer_query.beginQueryEXT(35007,o),i.push(o),l(i.length-1,i.length,t)},endQuery:function(){e.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:l,update:function(){var t,o,l=i.length;if(0!==l){c.length=Math.max(c.length,l+1),u.length=Math.max(u.length,l+1),u[0]=0,c[0]=0;var f=0;for(o=0,t=0;o<i.length;++o){var p=i[o];e.ext_disjoint_timer_query.getQueryObjectEXT(p,34919)?(f+=e.ext_disjoint_timer_query.getQueryObjectEXT(p,34918),n.push(p)):i[t++]=p,u[o+1]=f,c[o+1]=t}for(o=0,i.length=t,t=0;o<s.length;++o){var h=s[o],d=h.startQueryIndex,v=h.endQueryIndex;h.sum+=u[v]-u[d];var m=c[d],y=c[v];y===m?(h.stats.gpuTime+=h.sum/1e6,a.push(h)):(h.startQueryIndex=m,h.endQueryIndex=y,s[t++]=h)}s.length=t}},getNumPendingQueries:function(){return i.length},clear:function(){n.push.apply(n,i);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);i.length=0,n.length=0},restore:function(){i.length=0,n.length=0}}},eO="webglcontextlost",eV="webglcontextrestored";function eD(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return -1}return function(n){var i,o,a=function(t){var n,i,o,a,s=t||{},l={},u=[],c=[],f="undefined"==typeof window?1:window.devicePixelRatio,p=!1,h=function(t){t&&E.raise(t)},d=function(){};if("string"==typeof s?(E("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),E(n=document.querySelector(s),"invalid query string for element")):"object"==typeof s?"string"==typeof s.nodeName&&"function"==typeof s.appendChild&&"function"==typeof s.getBoundingClientRect?n=s:"function"==typeof s.drawArrays||"function"==typeof s.drawElements?o=(a=s).canvas:(E.constructor(s),"gl"in s?a=s.gl:"canvas"in s?o=D(s.canvas):"container"in s&&(i=D(s.container)),"attributes"in s&&(l=s.attributes,E.type(l,"object","invalid context attributes")),"extensions"in s&&(u=V(s.extensions)),"optionalExtensions"in s&&(c=V(s.optionalExtensions)),"onDone"in s&&(E.type(s.onDone,"function","invalid or missing onDone callback"),h=s.onDone),"profile"in s&&(p=!!s.profile),"pixelRatio"in s&&E((f=+s.pixelRatio)>0,"invalid pixel ratio")):E.raise("invalid arguments to regl"),n&&("canvas"===n.nodeName.toLowerCase()?o=n:i=n),!a){if(!o){E("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var v=function(t,n,i){var o,a=document.createElement("canvas");function s(){var n=window.innerWidth,o=window.innerHeight;if(t!==document.body){var s=t.getBoundingClientRect();n=s.right-s.left,o=s.bottom-s.top}a.width=i*n,a.height=i*o,e(a.style,{width:n+"px",height:o+"px"})}return e(a.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(a),t===document.body&&(a.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(o=new ResizeObserver(function(){setTimeout(s)})).observe(t):window.addEventListener("resize",s,!1),s(),{canvas:a,onDestroy:function(){o?o.disconnect():window.removeEventListener("resize",s),t.removeChild(a)}}}(i||document.body,0,f);if(!v)return null;o=v.canvas,d=v.onDestroy}void 0===l.premultipliedAlpha&&(l.premultipliedAlpha=!0),a=function(t,e){function n(n){try{return t.getContext(n,e)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(o,l)}return a?{gl:a,canvas:o,container:i,extensions:u,optionalExtensions:c,pixelRatio:f,profile:p,onDone:h,onDestroy:d}:(d(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(n);if(!a)return null;var s=a.gl,l=s.getContextAttributes(),u=s.isContextLost(),c=function(t,e){var n={};function i(e){E.type(e,"string","extension name must be string");var i,o=e.toLowerCase();try{i=n[o]=t.getExtension(o)}catch(t){}return!!i}for(var o=0;o<e.extensions.length;++o){var a=e.extensions[o];if(!i(a))return e.onDestroy(),e.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(i),{extensions:n,restore:function(){Object.keys(n).forEach(function(t){if(n[t]&&!i(t))throw Error("(regl): error restoring extension "+t)})}}}(s,a);if(!c)return null;var f=(i={"":0},o=[""],{id:function(t){var e=i[t];return e||(e=i[t]=o.length,o.push(t)),e},str:function(t){return o[t]}}),p={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},h=c.extensions,d=ej(s,h),v=O(),m=s.drawingBufferWidth,y=s.drawingBufferHeight,_={tick:0,time:0,viewportWidth:m,viewportHeight:y,framebufferWidth:m,framebufferHeight:y,drawingBufferWidth:m,drawingBufferHeight:y,pixelRatio:a.pixelRatio},w=F(s,h),x=function(e,n,i,o){var a=0,s={};function l(t){this.id=a++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,i.profile&&(this.stats={size:0})}l.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},l.prototype.destroy=function(){p(this)};var u=[];function c(t,n,i){t.byteLength=n.byteLength,e.bufferData(t.type,n,i)}function f(e,n,i,o,a,s){if(e.usage=i,Array.isArray(n)){if(e.dtype=o||5126,n.length>0)if(Array.isArray(n[0])){for(var l,u=N(n),f=1,p=1;p<u.length;++p)f*=u[p];e.dimension=f,l=q(n,u,e.dtype),c(e,l,i),s?e.persistentData=l:I.freeType(l)}else if("number"==typeof n[0]){e.dimension=a;var h=I.allocType(e.dtype,n.length);Q(h,n),c(e,h,i),s?e.persistentData=h:I.freeType(h)}else t(n[0])?(e.dimension=n[0].length,e.dtype=o||Y(n[0])||5126,l=q(n,[n.length,n[0].length],e.dtype),c(e,l,i),s?e.persistentData=l:I.freeType(l)):E.raise("invalid buffer data")}else if(t(n))e.dtype=o||Y(n),e.dimension=a,c(e,n,i),s&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(z(n)){u=n.shape;var d=n.stride,v=n.offset,m=0,y=0,_=0,w=0;1===u.length?(m=u[0],y=1,_=d[0],w=0):2===u.length?(m=u[0],y=u[1],_=d[0],w=d[1]):E.raise("invalid shape"),e.dtype=o||Y(n.data)||5126,e.dimension=y;var x=I.allocType(e.dtype,m*y);J(x,n.data,m,y,_,w,v),c(e,x,i),s?e.persistentData=x:I.freeType(x)}else n instanceof ArrayBuffer?(e.dtype=5121,e.dimension=a,c(e,n,i),s&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):E.raise("invalid buffer data")}function p(t){n.bufferCount--,o(t);var i=t.buffer;E(i,"buffer must not be deleted already"),e.deleteBuffer(i),t.buffer=null,delete s[t.id]}return i.profile&&(n.getTotalBufferSize=function(){var t=0;return Object.keys(s).forEach(function(e){t+=s[e].stats.size}),t}),{create:function(o,a,u,c){n.bufferCount++;var h=new l(a);function d(n){var o=35044,a=null,s=0,l=0,u=1;return Array.isArray(n)||t(n)||z(n)||n instanceof ArrayBuffer?a=n:"number"==typeof n?s=0|n:n&&(E.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(E(null===a||Array.isArray(a)||t(a)||z(a),"invalid data for buffer"),a=n.data),"usage"in n&&(E.parameter(n.usage,K,"invalid buffer usage"),o=K[n.usage]),"type"in n&&(E.parameter(n.type,G,"invalid buffer type"),l=G[n.type]),"dimension"in n&&(E.type(n.dimension,"number","invalid dimension"),u=0|n.dimension),"length"in n&&(E.nni(s,"buffer length must be a nonnegative integer"),s=0|n.length)),h.bind(),a?f(h,a,o,l,u,c):(s&&e.bufferData(h.type,s,o),h.dtype=l||5121,h.usage=o,h.dimension=u,h.byteLength=s),i.profile&&(h.stats.size=h.byteLength*W[h.dtype]),d}function v(t,n){E(n+t.byteLength<=h.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+h.byteLength),e.bufferSubData(h.type,n,t)}return s[h.id]=h,u||d(o),d._reglType="buffer",d._buffer=h,d.subdata=function(e,n){var i,o=0|(n||0);if(h.bind(),t(e)||e instanceof ArrayBuffer)v(e,o);else if(Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var a=I.allocType(h.dtype,e.length);Q(a,e),v(a,o),I.freeType(a)}else if(Array.isArray(e[0])||t(e[0])){i=N(e);var s=q(e,i,h.dtype);v(s,o),I.freeType(s)}else E.raise("invalid buffer data")}else if(z(e)){i=e.shape;var l=e.stride,u=0,c=0,f=0,p=0;1===i.length?(u=i[0],c=1,f=l[0],p=0):2===i.length?(u=i[0],c=i[1],f=l[0],p=l[1]):E.raise("invalid shape");var m=Array.isArray(e.data)?h.dtype:Y(e.data),y=I.allocType(m,u*c);J(y,e.data,u,c,f,p,e.offset),v(y,o),I.freeType(y)}else E.raise("invalid data for buffer subdata");return d},i.profile&&(d.stats=h.stats),d.destroy=function(){p(h)},d},createStream:function(t,e){var n=u.pop();return n||(n=new l(t)),n.bind(),f(n,e,35040,0,1,!1),n},destroyStream:function(t){u.push(t)},clear:function(){U(s).forEach(p),u.forEach(p)},getBuffer:function(t){return t&&t._buffer instanceof l?t._buffer:null},restore:function(){U(s).forEach(function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)})},_initBuffer:f}}(s,p,a,function(t){return k.destroyBuffer(t)}),k=function(e,n,i,o,a){for(var s=i.maxAttributes,l=Array(s),u=0;u<s;++u)l[u]=new tO;var c=0,f={},p={Record:tO,scope:{},state:l,currentVAO:null,targetVAO:null,restore:h()?function(){h()&&U(f).forEach(function(t){t.refresh()})}:function(){},createVAO:function(e){var i=new v;function l(e){E(Array.isArray(e),"arguments to vertex array constructor must be an array"),E(e.length<s,"too many attributes"),E(e.length>0,"must specify at least one attribute");var o={},u=i.attributes;u.length=e.length;for(var c=0;c<e.length;++c){var f,p=e[c],h=u[c]=new tO,d=p.data||p;Array.isArray(d)||t(d)||z(d)?(i.buffers[c]&&(f=i.buffers[c],t(d)&&f._buffer.byteLength>=d.byteLength?f.subdata(d):(f.destroy(),i.buffers[c]=null)),i.buffers[c]||(f=i.buffers[c]=a.create(p,34962,!1,!0)),h.buffer=a.getBuffer(f),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1,o[c]=1):a.getBuffer(p)?(h.buffer=a.getBuffer(p),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1):a.getBuffer(p.buffer)?(h.buffer=a.getBuffer(p.buffer),h.size=0|(+p.size||h.buffer.dimension),h.normalized=!!p.normalized,"type"in p?(E.parameter(p.type,G,"invalid buffer type"),h.type=G[p.type]):h.type=h.buffer.dtype,h.offset=0|(p.offset||0),h.stride=0|(p.stride||0),h.divisor=0|(p.divisor||0),h.state=1,E(h.size>=1&&h.size<=4,"size must be between 1 and 4"),E(h.offset>=0,"invalid offset"),E(h.stride>=0&&h.stride<=255,"stride must be between 0 and 255"),E(h.divisor>=0,"divisor must be positive"),E(!h.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in p?(E(c>0,"first attribute must not be a constant"),h.x=+p.x||0,h.y=+p.y||0,h.z=+p.z||0,h.w=+p.w||0,h.state=2):E(!1,"invalid attribute spec for location "+c)}for(var v=0;v<i.buffers.length;++v)!o[v]&&i.buffers[v]&&(i.buffers[v].destroy(),i.buffers[v]=null);return i.refresh(),l}return o.vaoCount+=1,l.destroy=function(){for(var t=0;t<i.buffers.length;++t)i.buffers[t]&&i.buffers[t].destroy();i.buffers.length=0,i.destroy()},l._vao=i,l._reglType="vao",l(e)},getVAO:function(t){return"function"==typeof t&&t._vao?t._vao:null},destroyBuffer:function(t){for(var n=0;n<l.length;++n){var i=l[n];i.buffer===t&&(e.disableVertexAttribArray(n),i.buffer=null)}},setVAO:h()?function(t){if(t!==p.currentVAO){var e=h();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),p.currentVAO=t}}:function(t){if(t!==p.currentVAO){if(t)t.bindAttrs();else for(var n=d(),i=0;i<l.length;++i){var o=l[i];o.buffer?(e.enableVertexAttribArray(i),e.vertexAttribPointer(i,o.size,o.type,o.normalized,o.stride,o.offfset),n&&o.divisor&&n.vertexAttribDivisorANGLE(i,o.divisor)):(e.disableVertexAttribArray(i),e.vertexAttrib4f(i,o.x,o.y,o.z,o.w))}p.currentVAO=t}},clear:h()?function(){U(f).forEach(function(t){t.destroy()})}:function(){}};function h(){return n.oes_vertex_array_object}function d(){return n.angle_instanced_arrays}function v(){this.id=++c,this.attributes=[];var t=h();t?this.vao=t.createVertexArrayOES():this.vao=null,f[this.id]=this,this.buffers=[]}return v.prototype.bindAttrs=function(){for(var t=d(),n=this.attributes,i=0;i<n.length;++i){var o=n[i];o.buffer?(e.enableVertexAttribArray(i),e.bindBuffer(34962,o.buffer.buffer),e.vertexAttribPointer(i,o.size,o.type,o.normalized,o.stride,o.offset),t&&o.divisor&&t.vertexAttribDivisorANGLE(i,o.divisor)):(e.disableVertexAttribArray(i),e.vertexAttrib4f(i,o.x,o.y,o.z,o.w))}for(var a=n.length;a<s;++a)e.disableVertexAttribArray(a)},v.prototype.refresh=function(){var t=h();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),p.currentVAO=this)},v.prototype.destroy=function(){if(this.vao){var t=h();this===p.currentVAO&&(p.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}f[this.id]&&(delete f[this.id],o.vaoCount-=1)},p}(s,h,w,p,x),C=function(e,n,i,o){var a={},s=0,l={uint8:5121,uint16:5123};function u(t){this.id=s++,a[this.id]=this,this.buffer=t,this.primType=4,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(l.uint32=5125),u.prototype.bind=function(){this.buffer.bind()};var c=[];function f(o,a,s,l,u,c,f){if(o.buffer.bind(),a){var p,h=f;!f&&(!t(a)||z(a)&&!t(a.data))&&(h=n.oes_element_index_uint?5125:5123),i._initBuffer(o.buffer,a,s,h,3)}else e.bufferData(34963,c,s),o.buffer.dtype=p||5121,o.buffer.usage=s,o.buffer.dimension=3,o.buffer.byteLength=c;if(p=f,!f){switch(o.buffer.dtype){case 5121:case 5120:p=5121;break;case 5123:case 5122:p=5123;break;case 5125:case 5124:p=5125;break;default:E.raise("unsupported type for element array")}o.buffer.dtype=p}o.type=p,E(5125!==p||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var d=u;d<0&&(d=o.buffer.byteLength,5123===p?d>>=1:5125===p&&(d>>=2)),o.vertCount=d;var v=l;if(l<0){v=4;var m=o.buffer.dimension;1===m&&(v=0),2===m&&(v=1),3===m&&(v=4)}o.primType=v}function p(t){o.elementsCount--,E(null!==t.buffer,"must not double destroy elements"),delete a[t.id],t.buffer.destroy(),t.buffer=null}return{create:function(e,n){var a=i.create(null,34963,!0),s=new u(a._buffer);function c(e){if(e)if("number"==typeof e)a(e),s.primType=4,s.vertCount=0|e,s.type=5121;else{var n=null,i=35044,o=-1,u=-1,p=0,h=0;Array.isArray(e)||t(e)||z(e)?n=e:(E.type(e,"object","invalid arguments for elements"),"data"in e&&E(Array.isArray(n=e.data)||t(n)||z(n),"invalid data for element buffer"),"usage"in e&&(E.parameter(e.usage,K,"invalid element buffer usage"),i=K[e.usage]),"primitive"in e&&(E.parameter(e.primitive,X,"invalid element buffer primitive"),o=X[e.primitive]),"count"in e&&(E("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),u=0|e.count),"type"in e&&(E.parameter(e.type,l,"invalid buffer type"),h=l[e.type]),"length"in e?p=0|e.length:(p=u,5123===h||5122===h?p*=2:(5125===h||5124===h)&&(p*=4))),f(s,n,i,o,u,p,h)}else a(),s.primType=4,s.vertCount=0,s.type=5121;return c}return o.elementsCount++,c(e),c._reglType="elements",c._elements=s,c.subdata=function(t,e){return a.subdata(t,e),c},c.destroy=function(){p(s)},c},createStream:function(t){var e=c.pop();return e||(e=new u(i.create(null,34963,!0,!1)._buffer)),f(e,t,35040,-1,-1,0,0),e},destroyStream:function(t){c.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof u?t._elements:null},clear:function(){U(a).forEach(p)}}}(s,h,x,p),P=function(t,n,i,o){var a={},s={};function l(t,e,n,i){this.name=t,this.id=e,this.location=n,this.info=i}function u(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id){t[n].location=e.location;return}t.push(e)}function c(e,i,o){var l=35632===e?a:s,u=l[i];if(!u){var c=n.str(i);u=t.createShader(e),t.shaderSource(u,c),t.compileShader(u),E.shaderError(t,u,c,e,o),l[i]=u}return u}var f={},p=[],h=0;function d(t,e){this.id=h++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,o.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function v(e,i,a){var s,f,p=c(35632,e.fragId),h=c(35633,e.vertId),d=e.program=t.createProgram();if(t.attachShader(d,p),t.attachShader(d,h),a)for(s=0;s<a.length;++s){var v=a[s];t.bindAttribLocation(d,v[0],v[1])}t.linkProgram(d),E.linkError(t,d,n.str(e.fragId),n.str(e.vertId),i);var m=t.getProgramParameter(d,35718);o.profile&&(e.stats.uniformsCount=m);var y=e.uniforms;for(s=0;s<m;++s)if(f=t.getActiveUniform(d,s))if(f.size>1)for(var _=0;_<f.size;++_){var w=f.name.replace("[0]","["+_+"]");u(y,new l(w,n.id(w),t.getUniformLocation(d,w),f))}else u(y,new l(f.name,n.id(f.name),t.getUniformLocation(d,f.name),f));var x=t.getProgramParameter(d,35721);o.profile&&(e.stats.attributesCount=x);var k=e.attributes;for(s=0;s<x;++s)(f=t.getActiveAttrib(d,s))&&u(k,new l(f.name,n.id(f.name),t.getAttribLocation(d,f.name),f))}return o.profile&&(i.getMaxUniformsCount=function(){var t=0;return p.forEach(function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)}),t},i.getMaxAttributesCount=function(){var t=0;return p.forEach(function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)}),t}),{clear:function(){var e=t.deleteShader.bind(t);U(a).forEach(e),a={},U(s).forEach(e),s={},p.forEach(function(e){t.deleteProgram(e.program)}),p.length=0,f={},i.shaderCount=0},program:function(n,o,l,u){E.command(n>=0,"missing vertex shader",l),E.command(o>=0,"missing fragment shader",l);var c=f[o];c||(c=f[o]={});var h=c[n];if(h&&(h.refCount++,!u))return h;var m=new d(o,n);return i.shaderCount++,v(m,l,u),h||(c[n]=m),p.push(m),e(m,{destroy:function(){if(m.refCount--,m.refCount<=0){t.deleteProgram(m.program);var e=p.indexOf(m);p.splice(e,1),i.shaderCount--}c[m.vertId].refCount<=0&&(t.deleteShader(s[m.vertId]),delete s[m.vertId],delete f[m.fragId][m.vertId]),Object.keys(f[m.fragId]).length||(t.deleteShader(a[m.fragId]),delete a[m.fragId],delete f[m.fragId])}})},restore:function(){a={},s={};for(var t=0;t<p.length;++t)v(p[t],null,p[t].attributes.map(function(t){return[t.location,t.name]}))},shader:c,frag:-1,vert:-1}}(s,f,p,a),R=function(n,i,o,a,s,l,u){var c={"don't care":4352,"dont care":4352,nice:4354,fast:4353},f={repeat:10497,clamp:33071,mirror:33648},p={nearest:9728,linear:9729},h=e({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},p),d={none:0,browser:37444},v={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},m={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},y={};i.ext_srgb&&(m.srgb=35904,m.srgba=35906),i.oes_texture_float&&(v.float32=v.float=5126),i.oes_texture_half_float&&(v.float16=v["half float"]=36193),i.webgl_depth_texture&&(e(m,{depth:6402,"depth stencil":34041}),e(v,{uint16:5123,uint32:5125,"depth stencil":34042})),i.webgl_compressed_texture_s3tc&&e(y,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),i.webgl_compressed_texture_atc&&e(y,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),i.webgl_compressed_texture_pvrtc&&e(y,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),i.webgl_compressed_texture_etc1&&(y["rgb etc1"]=36196);var _=Array.prototype.slice.call(n.getParameter(34467));Object.keys(y).forEach(function(t){var e=y[t];_.indexOf(e)>=0&&(m[t]=e)});var w=Object.keys(m);o.textureFormats=w;var x=[];Object.keys(m).forEach(function(t){x[m[t]]=t});var k=[];Object.keys(v).forEach(function(t){k[v[t]]=t});var C=[];Object.keys(p).forEach(function(t){C[p[t]]=t});var A=[];Object.keys(h).forEach(function(t){A[h[t]]=t});var P=[];Object.keys(f).forEach(function(t){P[f[t]]=t});var M=w.reduce(function(t,e){var n=m[e];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n||i.ext_srgb&&(35904===n||35906===n)?t[n]=n:32855===n||e.indexOf("rgba")>=0?t[n]=6408:t[n]=6407,t},{});function S(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function T(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function j(t,e){if("object"==typeof e&&e){if("premultiplyAlpha"in e&&(E.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(E.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(E.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(E.parameter(e.colorSpace,d,"invalid colorSpace"),t.colorSpace=d[e.colorSpace]),"type"in e){var n=e.type;E(i.oes_texture_float||"float"!==n&&"float32"!==n,"you must enable the OES_texture_float extension in order to use floating point textures."),E(i.oes_texture_half_float||"half float"!==n&&"float16"!==n,"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),E(i.webgl_depth_texture||"uint16"!==n&&"uint32"!==n&&"depth stencil"!==n,"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),E.parameter(n,v,"invalid texture type"),t.type=v[n]}var a=t.width,s=t.height,l=t.channels,u=!1;"shape"in e?(E(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),a=e.shape[0],s=e.shape[1],3===e.shape.length&&(E((l=e.shape[2])>0&&l<=4,"invalid number of channels"),u=!0),E(a>=0&&a<=o.maxTextureSize,"invalid width"),E(s>=0&&s<=o.maxTextureSize,"invalid height")):("radius"in e&&E((a=s=e.radius)>=0&&a<=o.maxTextureSize,"invalid radius"),"width"in e&&E((a=e.width)>=0&&a<=o.maxTextureSize,"invalid width"),"height"in e&&E((s=e.height)>=0&&s<=o.maxTextureSize,"invalid height"),"channels"in e&&(E((l=e.channels)>0&&l<=4,"invalid number of channels"),u=!0)),t.width=0|a,t.height=0|s,t.channels=0|l;var c=!1;if("format"in e){var f=e.format;E(i.webgl_depth_texture||"depth"!==f&&"depth stencil"!==f,"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),E.parameter(f,m,"invalid texture format");var p=t.internalformat=m[f];t.format=M[p],f in v&&!("type"in e)&&(t.type=v[f]),f in y&&(t.compressed=!0),c=!0}!u&&c?t.channels=ta[t.format]:u&&!c?t.channels!==to[t.format]&&(t.format=t.internalformat=to[t.channels]):c&&u&&E(t.channels===ta[t.format],"number of channels inconsistent with specified format")}}function O(t){n.pixelStorei(37440,t.flipY),n.pixelStorei(37441,t.premultiplyAlpha),n.pixelStorei(37443,t.colorSpace),n.pixelStorei(3317,t.unpackAlignment)}function V(){S.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function D(e,n){var i=null;if(t_(n)?i=n:n&&(E.type(n,"object","invalid pixel data type"),j(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),t_(n.data)&&(i=n.data)),E(!e.compressed||i instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){E(!i,"can not specify copy and data field for the same texture");var a=s.viewportWidth,l=s.viewportHeight;e.width=e.width||a-e.xOffset,e.height=e.height||l-e.yOffset,e.needsCopy=!0,E(e.xOffset>=0&&e.xOffset<a&&e.yOffset>=0&&e.yOffset<l&&e.width>0&&e.width<=a&&e.height>0&&e.height<=l,"copy texture read out of bounds")}else if(i){if(t(i))e.channels=e.channels||4,e.data=i,"type"in n||5121!==e.type||(e.type=tw(i));else if(tg(i)){e.channels=e.channels||4;var u=i,c=u.length;switch(e.type){case 5121:case 5123:case 5125:case 5126:var f=I.allocType(e.type,c);f.set(u),e.data=f;break;case 36193:e.data=te(u);break;default:E.raise("unsupported texture type, must specify a typed array")}e.alignment=1,e.needsFree=!0}else if(z(i)){var p,h,d,v,m,y,_=i.data;Array.isArray(_)||5121!==e.type||(e.type=tw(_));var w=i.shape,x=i.stride;3===w.length?(d=w[2],y=x[2]):(E(2===w.length,"invalid ndarray pixel data, must be 2 or 3D"),d=1,y=1),p=w[0],h=w[1],v=x[0],m=x[1],e.alignment=1,e.width=p,e.height=h,e.channels=d,e.format=e.internalformat=to[d],e.needsFree=!0,function(t,e,n,i,o,a){for(var s=t.width,l=t.height,u=t.channels,c=tx(t,s*l*u),f=0,p=0;p<l;++p)for(var h=0;h<s;++h)for(var d=0;d<u;++d)c[f++]=e[n*h+i*p+o*d+a];tk(t,c)}(e,_,v,m,y,i.offset)}else if(ty(i)===tl||ty(i)===tu||ty(i)===tc)ty(i)===tl||ty(i)===tu?e.element=i:e.element=i.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(ty(i)===tf)e.element=i,e.width=i.width,e.height=i.height,e.channels=4;else if(ty(i)===tp)e.element=i,e.width=i.naturalWidth,e.height=i.naturalHeight,e.channels=4;else if(ty(i)===th)e.element=i,e.width=i.videoWidth,e.height=i.videoHeight,e.channels=4;else if(tb(i)){var k=e.width||i[0].length,C=e.height||i.length,A=e.channels;A=tr(i[0][0])?A||i[0][0].length:A||1;for(var P=N(i),M=1,S=0;S<P.length;++S)M*=P[S];var T=tx(e,M);q(i,P,"",T),tk(e,T),e.alignment=1,e.width=k,e.height=C,e.channels=A,e.format=e.internalformat=to[A],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;5126===e.type?E(o.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):36193===e.type&&E(o.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function L(t,e,i,o,s){var l=t.element,u=t.data,c=t.internalformat,f=t.format,p=t.type,h=t.width,d=t.height;O(t),l?n.texSubImage2D(e,s,i,o,f,p,l):t.compressed?n.compressedTexSubImage2D(e,s,i,o,c,h,d,u):t.needsCopy?(a(),n.copyTexSubImage2D(e,s,i,o,t.xOffset,t.yOffset,h,d)):n.texSubImage2D(e,s,i,o,h,d,f,p,u)}var R=[];function B(){return R.pop()||new V}function F(t){t.needsFree&&I.freeType(t.data),V.call(t),R.push(t)}function H(){S.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function $(t,e,n){var i=t.images[0]=B();t.mipmask=1,i.width=t.width=e,i.height=t.height=n,i.channels=t.channels=4}function G(t,e){var n=null;if(t_(e))T(n=t.images[0]=B(),t),D(n,e),t.mipmask=1;else if(j(t,e),Array.isArray(e.mipmap))for(var i=e.mipmap,o=0;o<i.length;++o)T(n=t.images[o]=B(),t),n.width>>=o,n.height>>=o,D(n,i[o]),t.mipmask|=1<<o;else T(n=t.images[0]=B(),t),D(n,e),t.mipmask=1;T(t,t.images[0]),t.compressed&&(33776===t.internalformat||33777===t.internalformat||33778===t.internalformat||33779===t.internalformat)&&E(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function K(t,e){for(var i=t.images,o=0;o<i.length;++o){if(!i[o])return;!function(t,e,i){var o=t.element,s=t.data,l=t.internalformat,u=t.format,c=t.type,f=t.width,p=t.height;O(t),o?n.texImage2D(e,i,u,u,c,o):t.compressed?n.compressedTexImage2D(e,i,l,f,p,0,s):t.needsCopy?(a(),n.copyTexImage2D(e,i,u,t.xOffset,t.yOffset,f,p,0)):n.texImage2D(e,i,u,f,p,0,u,c,s||null)}(i[o],e,o)}}var W=[];function Y(){var t=W.pop()||new H;S.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function Q(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&F(e[n]),e[n]=null;W.push(t)}function J(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function X(t,e){if("min"in e){var n=e.min;E.parameter(n,h),t.minFilter=h[n],!(ti.indexOf(t.minFilter)>=0)||"faces"in e||(t.genMipmaps=!0)}if("mag"in e){var i=e.mag;E.parameter(i,p),t.magFilter=p[i]}var a=t.wrapS,s=t.wrapT;if("wrap"in e){var l=e.wrap;"string"==typeof l?(E.parameter(l,f),a=s=f[l]):Array.isArray(l)&&(E.parameter(l[0],f),E.parameter(l[1],f),a=f[l[0]],s=f[l[1]])}else{if("wrapS"in e){var u=e.wrapS;E.parameter(u,f),a=f[u]}if("wrapT"in e){var d=e.wrapT;E.parameter(d,f),s=f[d]}}if(t.wrapS=a,t.wrapT=s,"anisotropic"in e){var v=e.anisotropic;E("number"==typeof v&&v>=1&&v<=o.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var m=!1;switch(typeof e.mipmap){case"string":E.parameter(e.mipmap,c,"invalid mipmap hint"),t.mipmapHint=c[e.mipmap],t.genMipmaps=!0,m=!0;break;case"boolean":m=t.genMipmaps=e.mipmap;break;case"object":E(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,m=!0;break;default:E.raise("invalid mipmap type")}!m||"min"in e||(t.minFilter=9984)}}function Z(t,e){n.texParameteri(e,10241,t.minFilter),n.texParameteri(e,10240,t.magFilter),n.texParameteri(e,10242,t.wrapS),n.texParameteri(e,10243,t.wrapT),i.ext_texture_filter_anisotropic&&n.texParameteri(e,34046,t.anisotropic),t.genMipmaps&&(n.hint(33170,t.mipmapHint),n.generateMipmap(e))}var tt=0,ts={},td=o.maxTextureUnits,tv=Array(td).map(function(){return null});function tm(t){S.call(this),this.mipmask=0,this.internalformat=6408,this.id=tt++,this.refCount=1,this.target=t,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new J,u.profile&&(this.stats={size:0})}function tC(t){n.activeTexture(33984),n.bindTexture(t.target,t.texture)}function tA(){var t=tv[0];t?n.bindTexture(t.target,t.texture):n.bindTexture(3553,null)}function tP(t){var e=t.texture;E(e,"must not double destroy texture");var i=t.unit,o=t.target;i>=0&&(n.activeTexture(33984+i),n.bindTexture(o,null),tv[i]=null),n.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete ts[t.id],l.textureCount--}return e(tm.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(t<0){for(var e=0;e<td;++e){var i=tv[e];if(i){if(i.bindCount>0)continue;i.unit=-1}tv[e]=this,t=e;break}t>=td&&E.raise("insufficient number of texture units"),u.profile&&l.maxTextureUnits<t+1&&(l.maxTextureUnits=t+1),this.unit=t,n.activeTexture(33984+t),n.bindTexture(this.target,this.texture)}return t},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&tP(this)}}),u.profile&&(l.getTotalTextureSize=function(){var t=0;return Object.keys(ts).forEach(function(e){t+=ts[e].stats.size}),t}),{create2D:function(t,e){var i=new tm(3553);function a(t,e){var n=i.texInfo;J.call(n);var s=Y();return"number"==typeof t?"number"==typeof e?$(s,0|t,0|e):$(s,0|t,0|t):t?(E.type(t,"object","invalid arguments to regl.texture"),X(n,t),G(s,t)):$(s,1,1),n.genMipmaps&&(s.mipmask=(s.width<<1)-1),i.mipmask=s.mipmask,T(i,s),E.texture2D(n,s,o),i.internalformat=s.internalformat,a.width=s.width,a.height=s.height,tC(i),K(s,3553),Z(n,3553),tA(),Q(s),u.profile&&(i.stats.size=tE(i.internalformat,i.type,s.width,s.height,n.genMipmaps,!1)),a.format=x[i.internalformat],a.type=k[i.type],a.mag=C[n.magFilter],a.min=A[n.minFilter],a.wrapS=P[n.wrapS],a.wrapT=P[n.wrapT],a}return ts[i.id]=i,l.textureCount++,a(t,e),a.subimage=function(t,e,n,o){E(!!t,"must specify image data");var s=0|e,l=0|n,u=0|o,c=B();return T(c,i),c.width=0,c.height=0,D(c,t),c.width=c.width||(i.width>>u)-s,c.height=c.height||(i.height>>u)-l,E(i.type===c.type&&i.format===c.format&&i.internalformat===c.internalformat,"incompatible format for texture.subimage"),E(s>=0&&l>=0&&s+c.width<=i.width&&l+c.height<=i.height,"texture.subimage write out of bounds"),E(i.mipmask&1<<u,"missing mipmap data"),E(c.data||c.element||c.needsCopy,"missing image data"),tC(i),L(c,3553,s,l,u),tA(),F(c),a},a.resize=function(t,e){var o=0|t,s=0|e||o;if(o===i.width&&s===i.height)return a;a.width=i.width=o,a.height=i.height=s,tC(i);for(var l=0;i.mipmask>>l;++l){var c=o>>l,f=s>>l;if(!c||!f)break;n.texImage2D(3553,l,i.format,c,f,0,i.format,i.type,null)}return tA(),u.profile&&(i.stats.size=tE(i.internalformat,i.type,o,s,!1,!1)),a},a._reglType="texture2d",a._texture=i,u.profile&&(a.stats=i.stats),a.destroy=function(){i.decRef()},a},createCube:function(t,e,i,a,s,c){var f=new tm(34067);ts[f.id]=f,l.cubeCount++;var p=Array(6);function h(t,e,n,i,a,s){var l,c=f.texInfo;for(J.call(c),l=0;l<6;++l)p[l]=Y();if("number"!=typeof t&&t)if("object"==typeof t)if(e)G(p[0],t),G(p[1],e),G(p[2],n),G(p[3],i),G(p[4],a),G(p[5],s);else if(X(c,t),j(f,t),"faces"in t){var d=t.faces;for(E(Array.isArray(d)&&6===d.length,"cube faces must be a length 6 array"),l=0;l<6;++l)E("object"==typeof d[l]&&!!d[l],"invalid input for cube map face"),T(p[l],f),G(p[l],d[l])}else for(l=0;l<6;++l)G(p[l],t);else E.raise("invalid arguments to cube map");else{var v=0|t||1;for(l=0;l<6;++l)$(p[l],v,v)}for(T(f,p[0]),o.npotTextureCube||E(tn(f.width)&&tn(f.height),"your browser does not support non power or two texture dimensions"),c.genMipmaps?f.mipmask=(p[0].width<<1)-1:f.mipmask=p[0].mipmask,E.textureCube(f,c,p,o),f.internalformat=p[0].internalformat,h.width=p[0].width,h.height=p[0].height,tC(f),l=0;l<6;++l)K(p[l],34069+l);for(Z(c,34067),tA(),u.profile&&(f.stats.size=tE(f.internalformat,f.type,h.width,h.height,c.genMipmaps,!0)),h.format=x[f.internalformat],h.type=k[f.type],h.mag=C[c.magFilter],h.min=A[c.minFilter],h.wrapS=P[c.wrapS],h.wrapT=P[c.wrapT],l=0;l<6;++l)Q(p[l]);return h}return h(t,e,i,a,s,c),h.subimage=function(t,e,n,i,o){E(!!e,"must specify image data"),E("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var a=0|n,s=0|i,l=0|o,u=B();return T(u,f),u.width=0,u.height=0,D(u,e),u.width=u.width||(f.width>>l)-a,u.height=u.height||(f.height>>l)-s,E(f.type===u.type&&f.format===u.format&&f.internalformat===u.internalformat,"incompatible format for texture.subimage"),E(a>=0&&s>=0&&a+u.width<=f.width&&s+u.height<=f.height,"texture.subimage write out of bounds"),E(f.mipmask&1<<l,"missing mipmap data"),E(u.data||u.element||u.needsCopy,"missing image data"),tC(f),L(u,34069+t,a,s,l),tA(),F(u),h},h.resize=function(t){var e=0|t;if(e!==f.width){h.width=f.width=e,h.height=f.height=e,tC(f);for(var i=0;i<6;++i)for(var o=0;f.mipmask>>o;++o)n.texImage2D(34069+i,o,f.format,e>>o,e>>o,0,f.format,f.type,null);return tA(),u.profile&&(f.stats.size=tE(f.internalformat,f.type,h.width,h.height,!1,!0)),h}},h._reglType="textureCube",h._texture=f,u.profile&&(h.stats=f.stats),h.destroy=function(){f.decRef()},h},clear:function(){for(var t=0;t<td;++t)n.activeTexture(33984+t),n.bindTexture(3553,null),tv[t]=null;U(ts).forEach(tP),l.cubeCount=0,l.textureCount=0},getTexture:function(t){return null},restore:function(){for(var t=0;t<td;++t){var e=tv[t];e&&(e.bindCount=0,e.unit=-1,tv[t]=null)}U(ts).forEach(function(t){t.texture=n.createTexture(),n.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if((t.mipmask&1<<e)!=0)if(3553===t.target)n.texImage2D(3553,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var i=0;i<6;++i)n.texImage2D(34069+i,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);Z(t.texInfo,t.target)})},refresh:function(){for(var t=0;t<td;++t){var e=tv[t];e&&(e.bindCount=0,e.unit=-1,tv[t]=null),n.activeTexture(33984+t),n.bindTexture(3553,null),n.bindTexture(34067,null)}}}}(s,h,w,function(){$.procs.poll()},_,p,a),B=tA(s,h,w,p,a),H=function(t,n,i,o,a,s){var l={cur:null,next:null,dirty:!1,setFBO:null},u=["rgba"],c=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&c.push("srgba"),n.ext_color_buffer_half_float&&c.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&c.push("rgba32f");var f=["uint8"];function p(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var i=0,o=0;e?(i=e.width,o=e.height):n&&(i=n.width,o=n.height),this.width=i,this.height=o}function h(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function d(t,e,n){if(t)if(t.texture){var i=t.texture._texture,o=Math.max(1,i.width),a=Math.max(1,i.height);E(o===e&&a===n,"inconsistent width/height for supplied texture"),i.refCount+=1}else{var s=t.renderbuffer._renderbuffer;E(s.width===e&&s.height===n,"inconsistent width/height for renderbuffer"),s.refCount+=1}}function v(e,n){n&&(n.texture?t.framebufferTexture2D(36160,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(36160,e,36161,n.renderbuffer._renderbuffer.renderbuffer))}function m(t){var e=3553,n=null,i=null,o=t;"object"==typeof t&&(o=t.data,"target"in t&&(e=0|t.target)),E.type(o,"function","invalid attachment data");var a=o._reglType;return"texture2d"===a?(n=o,E(3553===e)):"textureCube"===a?(n=o,E(e>=34069&&e<34075,"invalid cube map target")):"renderbuffer"===a?(i=o,e=36161):E.raise("invalid regl object for attachment"),new p(e,n,i)}function y(t,e,n,i,s){if(n){var l=o.create2D({width:t,height:e,format:i,type:s});return l._texture.refCount=0,new p(3553,l,null)}var u=a.create({width:t,height:e,format:i});return u._renderbuffer.refCount=0,new p(36161,null,u)}function _(t){return t&&(t.texture||t.renderbuffer)}function w(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}n.oes_texture_half_float&&f.push("half float","float16"),n.oes_texture_float&&f.push("float","float32");var x=0,k={};function C(){this.id=x++,k[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function A(t){t.colorAttachments.forEach(h),h(t.depthAttachment),h(t.stencilAttachment),h(t.depthStencilAttachment)}function P(e){var n=e.framebuffer;E(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,s.framebufferCount--,delete k[e.id]}function M(e){t.bindFramebuffer(36160,e.framebuffer);var n,o=e.colorAttachments;for(n=0;n<o.length;++n)v(36064+n,o[n]);for(n=o.length;n<i.maxColorAttachments;++n)t.framebufferTexture2D(36160,36064+n,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0),t.framebufferTexture2D(36160,36096,3553,null,0),t.framebufferTexture2D(36160,36128,3553,null,0),v(36096,e.depthAttachment),v(36128,e.stencilAttachment),v(33306,e.depthStencilAttachment);var a=t.checkFramebufferStatus(36160);t.isContextLost()||36053===a||E.raise("framebuffer configuration not supported, status = "+tj[a]),t.bindFramebuffer(36160,l.next?l.next.framebuffer:null),l.cur=l.next,t.getError()}function S(t,o){var a=new C;function p(t,e){E(l.next!==a,"can not update framebuffer which is currently in use");var o,s=0,h=0,v=!0,w=!0,x=null,k=!0,C="rgba",P="uint8",S=1,T=null,j=null,O=null,V=!1;if("number"==typeof t)s=0|t,h=0|e||s;else if(t){if(E.type(t,"object","invalid arguments for framebuffer"),"shape"in t){var D=t.shape;E(Array.isArray(D)&&D.length>=2,"invalid shape for framebuffer"),s=D[0],h=D[1]}else"radius"in t&&(s=h=t.radius),"width"in t&&(s=t.width),"height"in t&&(h=t.height);("color"in t||"colors"in t)&&Array.isArray(x=t.color||t.colors)&&E(1===x.length||n.webgl_draw_buffers,"multiple render targets not supported"),!x&&("colorCount"in t&&E((S=0|t.colorCount)>0,"invalid color buffer count"),"colorTexture"in t&&(k=!!t.colorTexture,C="rgba4"),"colorType"in t&&(P=t.colorType,k?(E(n.oes_texture_float||"float"!==P&&"float32"!==P,"you must enable OES_texture_float in order to use floating point framebuffer objects"),E(n.oes_texture_half_float||"half float"!==P&&"float16"!==P,"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===P||"float16"===P?(E(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),C="rgba16f"):("float"===P||"float32"===P)&&(E(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),C="rgba32f"),E.oneOf(P,f,"invalid color type")),"colorFormat"in t&&(C=t.colorFormat,u.indexOf(C)>=0?k=!0:c.indexOf(C)>=0?k=!1:k?E.oneOf(t.colorFormat,u,"invalid color format for texture"):E.oneOf(t.colorFormat,c,"invalid color format for renderbuffer"))),("depthTexture"in t||"depthStencilTexture"in t)&&E(!(V=!!(t.depthTexture||t.depthStencilTexture))||n.webgl_depth_texture,"webgl_depth_texture extension not supported"),"depth"in t&&("boolean"==typeof t.depth?v=t.depth:(T=t.depth,w=!1)),"stencil"in t&&("boolean"==typeof t.stencil?w=t.stencil:(j=t.stencil,v=!1)),"depthStencil"in t&&("boolean"==typeof t.depthStencil?v=w=t.depthStencil:(O=t.depthStencil,v=!1,w=!1))}else s=h=1;var L=null,R=null,B=null,I=null;if(Array.isArray(x))L=x.map(m);else if(x)L=[m(x)];else for(o=0,L=Array(S);o<S;++o)L[o]=y(s,h,k,C,P);E(n.webgl_draw_buffers||L.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),E(L.length<=i.maxColorAttachments,"too many color attachments, not supported"),s=s||L[0].width,h=h||L[0].height,T?R=m(T):v&&!w&&(R=y(s,h,V,"depth","uint32")),j?B=m(j):w&&!v&&(B=y(s,h,!1,"stencil","uint8")),O?I=m(O):!T&&!j&&w&&v&&(I=y(s,h,V,"depth stencil","depth stencil")),E(!!T+!!j+!!O<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var F=null;for(o=0;o<L.length;++o)if(d(L[o],s,h),E(!L[o]||L[o].texture&&tP.indexOf(L[o].texture._texture.format)>=0||L[o].renderbuffer&&tT.indexOf(L[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),L[o]&&L[o].texture){var z=tM[L[o].texture._texture.format]*tS[L[o].texture._texture.type];null===F?F=z:E(F===z,"all color attachments much have the same number of bits per pixel.")}return d(R,s,h),E(!R||R.texture&&6402===R.texture._texture.format||R.renderbuffer&&33189===R.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object"),d(B,s,h),E(!B||B.renderbuffer&&36168===B.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object"),d(I,s,h),E(!I||I.texture&&34041===I.texture._texture.format||I.renderbuffer&&34041===I.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object"),A(a),a.width=s,a.height=h,a.colorAttachments=L,a.depthAttachment=R,a.stencilAttachment=B,a.depthStencilAttachment=I,p.color=L.map(_),p.depth=_(R),p.stencil=_(B),p.depthStencil=_(I),p.width=a.width,p.height=a.height,M(a),p}return s.framebufferCount++,p(t,o),e(p,{resize:function(t,e){E(l.next!==a,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),i=Math.max(0|e||n,1);if(n===a.width&&i===a.height)return p;for(var o=a.colorAttachments,s=0;s<o.length;++s)w(o[s],n,i);return w(a.depthAttachment,n,i),w(a.stencilAttachment,n,i),w(a.depthStencilAttachment,n,i),a.width=p.width=n,a.height=p.height=i,M(a),p},_reglType:"framebuffer",_framebuffer:a,destroy:function(){P(a),A(a)},use:function(t){l.setFBO({framebuffer:p},t)}})}return e(l,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof C)return e}return null},create:S,createCube:function(t){var a=Array(6);function s(t){E(0>a.indexOf(l.next),"can not update framebuffer which is currently in use");var i,c,p={color:null},h=0,d=null,v="rgba",m="uint8",y=1;if("number"==typeof t)h=0|t;else if(t){if(E.type(t,"object","invalid arguments for framebuffer"),"shape"in t){var _=t.shape;E(Array.isArray(_)&&_.length>=2,"invalid shape for framebuffer"),E(_[0]===_[1],"cube framebuffer must be square"),h=_[0]}else"radius"in t&&(h=0|t.radius),"width"in t?(h=0|t.width,"height"in t&&E(t.height===h,"must be square")):"height"in t&&(h=0|t.height);("color"in t||"colors"in t)&&Array.isArray(d=t.color||t.colors)&&E(1===d.length||n.webgl_draw_buffers,"multiple render targets not supported"),!d&&("colorCount"in t&&E((y=0|t.colorCount)>0,"invalid color buffer count"),"colorType"in t&&(E.oneOf(t.colorType,f,"invalid color type"),m=t.colorType),"colorFormat"in t&&(v=t.colorFormat,E.oneOf(t.colorFormat,u,"invalid color format for texture"))),"depth"in t&&(p.depth=t.depth),"stencil"in t&&(p.stencil=t.stencil),"depthStencil"in t&&(p.depthStencil=t.depthStencil)}else h=1;if(d)if(Array.isArray(d))for(i=0,c=[];i<d.length;++i)c[i]=d[i];else c=[d];else{c=Array(y);var w={radius:h,format:v,type:m};for(i=0;i<y;++i)c[i]=o.createCube(w)}for(i=0,p.color=Array(c.length);i<c.length;++i){var x=c[i];E("function"==typeof x&&"textureCube"===x._reglType,"invalid cube map"),h=h||x.width,E(x.width===h&&x.height===h,"invalid cube map shape"),p.color[i]={target:34069,data:c[i]}}for(i=0;i<6;++i){for(var k=0;k<c.length;++k)p.color[k].target=34069+i;i>0&&(p.depth=a[0].depth,p.stencil=a[0].stencil,p.depthStencil=a[0].depthStencil),a[i]?a[i](p):a[i]=S(p)}return e(s,{width:h,height:h,color:c})}return s(t),e(s,{faces:a,resize:function(t){var e,n=0|t;if(E(n>0&&n<=i.maxCubeMapSize,"invalid radius for cube fbo"),n===s.width)return s;var o=s.color;for(e=0;e<o.length;++e)o[e].resize(n);for(e=0;e<6;++e)a[e].resize(n);return s.width=s.height=n,s},_reglType:"framebufferCube",destroy:function(){a.forEach(function(t){t.destroy()})}})},clear:function(){U(k).forEach(P)},restore:function(){l.cur=null,l.next=null,l.dirty=!0,U(k).forEach(function(e){e.framebuffer=t.createFramebuffer(),M(e)})}})}(s,h,w,R,B,p),$=function(t,n,i,o,a,s,l,u,c,f,p,h,d,v,m){var y=f.Record,_={add:32774,subtract:32778,"reverse subtract":32779};i.ext_blend_minmax&&(_.min=32775,_.max=32776);var w=i.angle_instanced_arrays,x=i.webgl_draw_buffers,k={dirty:!0,profile:m.profile},C={},P=[],M={},j={};function O(t){return t.replace(".","_")}function V(t,e,n){var i=O(t);P.push(t),C[i]=k[i]=!!n,M[i]=e}function D(t,e,n){var i=O(t);P.push(t),Array.isArray(n)?(k[i]=n.slice(),C[i]=n.slice()):k[i]=C[i]=n,j[i]=e}V(tR,3024),V(tB,3042),D(tI,"blendColor",[0,0,0,0]),D(tF,"blendEquationSeparate",[32774,32774]),D(tz,"blendFuncSeparate",[1,0,1,0]),V(tU,2929,!0),D(tN,"depthFunc",513),D(tq,"depthRange",[0,1]),D(tH,"depthMask",!0),D(t$,t$,[!0,!0,!0,!0]),V(tG,2884),D(tK,"cullFace",1029),D(tW,tW,2305),D(tY,tY,1),V(tQ,32823),D(tJ,"polygonOffset",[0,0]),V(tX,32926),V(tZ,32928),D(t0,"sampleCoverage",[1,!1]),V(t1,2960),D(t2,"stencilMask",-1),D(t5,"stencilFunc",[519,0,-1]),D(t3,"stencilOpSeparate",[1028,7680,7680,7680]),D(t6,"stencilOpSeparate",[1029,7680,7680,7680]),V(t4,3089),D(t8,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),D(t7,t7,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var R={gl:t,context:d,strings:n,next:C,current:k,draw:h,elements:s,buffer:a,shader:p,attributes:f.state,vao:f,uniforms:c,framebuffer:u,extensions:i,timer:v,isBufferArgs:eE},B={primTypes:X,compareFuncs:e_,blendFuncs:eb,blendEquations:_,stencilOps:ew,glTypes:G,orientationType:ek};E.optional(function(){R.isArrayLike=tr}),x&&(B.backBuffer=[1029],B.drawBuffer=L(o.maxDrawbuffers,function(t){return 0===t?[0]:L(t,function(t){return 36064+t})}));var I=0;function F(){var t=function(){var t=0,n=[],i=[];function o(){var n=[],i=[];return e(function(){n.push.apply(n,tV(arguments))},{def:function(){var e="v"+t++;return i.push(e),arguments.length>0&&(n.push(e,"="),n.push.apply(n,tV(arguments)),n.push(";")),e},toString:function(){return tD([i.length>0?"var "+i.join(",")+";":"",tD(n)])}})}function a(){var t=o(),n=o(),i=t.toString,a=n.toString;function s(e,i){n(e,i,"=",t.def(e,i),";")}return e(function(){t.apply(t,tV(arguments))},{def:t.def,entry:t,exit:n,save:s,set:function(e,n,i){s(e,n),t(e,n,"=",i,";")},toString:function(){return i()+a()}})}var s=o(),l={};return{global:s,link:function(e){for(var o=0;o<i.length;++o)if(i[o]===e)return n[o];var a="g"+t++;return n.push(a),i.push(e),a},block:o,proc:function(t,n){var i=[];function o(){var t="a"+i.length;return i.push(t),t}n=n||0;for(var s=0;s<n;++s)o();var u=a(),c=u.toString;return l[t]=e(u,{arg:o,toString:function(){return tD(["function(",i.join(),"){",c(),"}"])}})},scope:a,cond:function(){var t=tD(arguments),n=a(),i=a(),o=n.toString,s=i.toString;return e(n,{then:function(){return n.apply(n,tV(arguments)),this},else:function(){return i.apply(i,tV(arguments)),this},toString:function(){var e=s();return e&&(e="else{"+e+"}"),tD(["if(",t,"){",o(),"}",e])}})},compile:function(){var t=['"use strict";',s,"return {"];Object.keys(l).forEach(function(e){t.push('"',e,'":',l[e].toString(),",")}),t.push("}");var e=tD(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(e)).apply(null,i)}}}(),i=t.link,o=t.global;t.id=I++,t.batchId="0";var a=i(R),s=t.shared={props:"a0"};Object.keys(R).forEach(function(t){s[t]=o.def(a,".",t)}),E.optional(function(){t.CHECK=i(E),t.commandStr=E.guessCommand(),t.command=i(t.commandStr),t.assert=function(t,e,n){t("if(!(",e,"))",this.CHECK,".commandRaise(",i(n),",",this.command,");")},B.invalidBlendCombinations=ey});var l=t.next={},u=t.current={};Object.keys(j).forEach(function(t){Array.isArray(k[t])&&(l[t]=o.def(s.next,".",t),u[t]=o.def(s.current,".",t))});var c=t.constants={};Object.keys(B).forEach(function(t){c[t]=o.def(JSON.stringify(B[t]))}),t.invoke=function(e,n){switch(n.type){case 0:var o=["this",s.context,s.props,t.batchId];return e.def(i(n.data),".call(",o.slice(0,Math.max(n.data.length+1,4)),")");case 1:return e.def(s.props,n.data);case 2:return e.def(s.context,n.data);case 3:return e.def("this",n.data);case 4:return n.data.append(t,e),n.data.ref;case 5:return n.data.toString();case 6:return n.data.map(function(n){return t.invoke(e,n)})}},t.attribCache={};var p={};return t.scopeAttrib=function(t){var e=n.id(t);if(e in p)return p[e];var o=f.scope[e];return o||(o=f.scope[e]=new y),p[e]=i(o)},t}function z(t,e,n){var i=t.shared.context,o=t.scope();Object.keys(n).forEach(function(a){e.save(i,"."+a);var s=n[a].append(t,e);Array.isArray(s)?o(i,".",a,"=[",s.join(),"];"):o(i,".",a,"=",s,";")}),e(o)}function U(t,e,n,i){var o,a,s=t.shared,l=s.gl,u=s.framebuffer;x&&(o=e.def(s.extensions,".webgl_draw_buffers"));var c=t.constants,f=c.drawBuffer,p=c.backBuffer;a=n?n.append(t,e):e.def(u,".next"),i||e("if(",a,"!==",u,".cur){"),e("if(",a,"){",l,".bindFramebuffer(",36160,",",a,".framebuffer);"),x&&e(o,".drawBuffersWEBGL(",f,"[",a,".colorAttachments.length]);"),e("}else{",l,".bindFramebuffer(",36160,",null);"),x&&e(o,".drawBuffersWEBGL(",p,");"),e("}",u,".cur=",a,";"),i||e("}")}function N(t,e,n){var i=t.shared,o=i.gl,a=t.current,s=t.next,l=i.current,u=i.next,c=t.cond(l,".dirty");P.forEach(function(e){var i,f,p=O(e);if(!(p in n.state))if(p in s){i=s[p],f=a[p];var h=L(k[p].length,function(t){return c.def(i,"[",t,"]")});c(t.cond(h.map(function(t,e){return t+"!=="+f+"["+e+"]"}).join("||")).then(o,".",j[p],"(",h,");",h.map(function(t,e){return f+"["+e+"]="+t}).join(";"),";"))}else{i=c.def(u,".",p);var d=t.cond(i,"!==",l,".",p);c(d),p in M?d(t.cond(i).then(o,".enable(",M[p],");").else(o,".disable(",M[p],");"),l,".",p,"=",i,";"):d(o,".",j[p],"(",i,");",l,".",p,"=",i,";")}}),0===Object.keys(n.state).length&&c(l,".dirty=false;"),e(c)}function q(t,e,n,i){var o=t.shared,a=t.current,s=o.current,l=o.gl;eC(Object.keys(n)).forEach(function(o){var u=n[o];if(!i||i(u)){var c=u.append(t,e);if(M[o]){var f=M[o];eP(u)?c?e(l,".enable(",f,");"):e(l,".disable(",f,");"):e(t.cond(c).then(l,".enable(",f,");").else(l,".disable(",f,");")),e(s,".",o,"=",c,";")}else if(tr(c)){var p=a[o];e(l,".",j[o],"(",c,");",c.map(function(t,e){return p+"["+e+"]="+t}).join(";"),";")}else e(l,".",j[o],"(",c,");",s,".",o,"=",c,";")}})}function H(t,e){w&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function $(t,e,n,i,o){var a,s,l,u=t.shared,c=t.stats,f=u.current,p=u.timer,h=n.profile;function d(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function m(t){t(a=e.def(),"=",d(),";"),"string"==typeof o?t(c,".count+=",o,";"):t(c,".count++;"),v&&(i?t(s=e.def(),"=",p,".getNumPendingQueries();"):t(p,".beginQuery(",c,");"))}function y(t){t(c,".cpuTime+=",d(),"-",a,";"),v&&(i?t(p,".pushScopeStats(",s,",",p,".getNumPendingQueries(),",c,");"):t(p,".endQuery();"))}function _(t){var n=e.def(f,".profile");e(f,".profile=",t,";"),e.exit(f,".profile=",n,";")}if(h){if(eP(h))return void(h.enable?(m(e),y(e.exit),_("true")):_("false"));_(l=h.append(t,e))}else l=e.def(f,".profile");var w=t.block();m(w),e("if(",l,"){",w,"}");var x=t.block();y(x),e.exit("if(",l,"){",x,"}")}function K(t,e,n,i,o){var a=t.shared;i.forEach(function(i){var s,l=i.name,u=n.attributes[l];if(u){if(!o(u))return;s=u.append(t,e)}else{if(!o(eT))return;var c=t.scopeAttrib(l);E.optional(function(){t.assert(e,c+".state","missing attribute "+l)}),s={},Object.keys(new y).forEach(function(t){s[t]=e.def(c,".",t)})}!function(n,i,o){var s=a.gl,l=e.def(n,".location"),u=e.def(a.attributes,"[",l,"]"),c=o.state,f=o.buffer,p=[o.x,o.y,o.z,o.w],h=["buffer","normalized","offset","stride"];function d(){e("if(!",u,".buffer){",s,".enableVertexAttribArray(",l,");}");var n,a=o.type;if(n=o.size?e.def(o.size,"||",i):i,e("if(",u,".type!==",a,"||",u,".size!==",n,"||",h.map(function(t){return u+"."+t+"!=="+o[t]}).join("||"),"){",s,".bindBuffer(",34962,",",f,".buffer);",s,".vertexAttribPointer(",[l,n,a,o.normalized,o.stride,o.offset],");",u,".type=",a,";",u,".size=",n,";",h.map(function(t){return u+"."+t+"="+o[t]+";"}).join(""),"}"),w){var c=o.divisor;e("if(",u,".divisor!==",c,"){",t.instancing,".vertexAttribDivisorANGLE(",[l,c],");",u,".divisor=",c,";}")}}function v(){e("if(",u,".buffer){",s,".disableVertexAttribArray(",l,");",u,".buffer=null;","}if(",tL.map(function(t,e){return u+"."+t+"!=="+p[e]}).join("||"),"){",s,".vertexAttrib4f(",l,",",p,");",tL.map(function(t,e){return u+"."+t+"="+p[e]+";"}).join(""),"}")}1===c?d():2===c?v():(e("if(",c,"===",1,"){"),d(),e("}else{"),v(),e("}"))}(t.link(i),function(t){switch(t){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(i.info.type),s)})}function W(t,e,i,o,a){for(var s=t.shared,l=s.gl,u=0;u<o.length;++u){var c,f,p=o[u],h=p.name,d=p.info.type,v=i.uniforms[h],m=t.link(p)+".location";if(v){if(!a(v))continue;if(eP(v)){var y=v.value;if(E.command(null!=y,'missing uniform "'+h+'"',t.commandStr),35678===d||35680===d){E.command("function"==typeof y&&(35678===d&&("texture2d"===y._reglType||"framebuffer"===y._reglType)||35680===d&&("textureCube"===y._reglType||"framebufferCube"===y._reglType)),"invalid texture for uniform "+h,t.commandStr);var _=t.link(y._texture||y.color[0]._texture);e(l,".uniform1i(",m,",",_+".bind());"),e.exit(_,".unbind();")}else if(35674===d||35675===d||35676===d){E.optional(function(){E.command(tr(y),"invalid matrix for uniform "+h,t.commandStr),E.command(35674===d&&4===y.length||35675===d&&9===y.length||35676===d&&16===y.length,"invalid length for matrix uniform "+h,t.commandStr)});var w=t.global.def("new Float32Array(["+Array.prototype.slice.call(y)+"])"),x=2;35675===d?x=3:35676===d&&(x=4),e(l,".uniformMatrix",x,"fv(",m,",false,",w,");")}else{switch(d){case 5126:E.commandType(y,"number","uniform "+h,t.commandStr),c="1f";break;case 35664:E.command(tr(y)&&2===y.length,"uniform "+h,t.commandStr),c="2f";break;case 35665:E.command(tr(y)&&3===y.length,"uniform "+h,t.commandStr),c="3f";break;case 35666:E.command(tr(y)&&4===y.length,"uniform "+h,t.commandStr),c="4f";break;case 35670:E.commandType(y,"boolean","uniform "+h,t.commandStr),c="1i";break;case 5124:E.commandType(y,"number","uniform "+h,t.commandStr),c="1i";break;case 35671:case 35667:E.command(tr(y)&&2===y.length,"uniform "+h,t.commandStr),c="2i";break;case 35672:case 35668:E.command(tr(y)&&3===y.length,"uniform "+h,t.commandStr),c="3i";break;case 35673:case 35669:E.command(tr(y)&&4===y.length,"uniform "+h,t.commandStr),c="4i"}e(l,".uniform",c,"(",m,",",tr(y)?Array.prototype.slice.call(y):y,");")}continue}f=v.append(t,e)}else{if(!a(eT))continue;f=e.def(s.uniforms,"[",n.id(h),"]")}35678===d?(E(!Array.isArray(f),"must specify a scalar prop for textures"),e("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}")):35680===d&&(E(!Array.isArray(f),"must specify a scalar prop for cube maps"),e("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}")),E.optional(function(){function n(n,i){t.assert(e,n,'bad data or missing for uniform "'+h+'".  '+i)}function i(t){E(!Array.isArray(f),"must not specify an array type for uniform"),n("typeof "+f+'==="'+t+'"',"invalid type, expected "+t)}function o(e,i){Array.isArray(f)?E(f.length===e,"must have length "+e):n(s.isArrayLike+"("+f+")&&"+f+".length==="+e,"invalid vector, should have length "+e,t.commandStr)}function a(e){E(!Array.isArray(f),"must not specify a value type"),n("typeof "+f+'==="function"&&'+f+'._reglType==="texture'+(3553===e?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(d){case 5124:case 5126:i("number");break;case 35667:case 35664:o(2,"number");break;case 35668:case 35665:o(3,"number");break;case 35669:case 35666:case 35674:o(4,"number");break;case 35670:i("boolean");break;case 35671:o(2,"boolean");break;case 35672:o(3,"boolean");break;case 35673:o(4,"boolean");break;case 35675:o(9,"number");break;case 35676:o(16,"number");break;case 35678:a(3553);break;case 35680:a(34067)}});var k=1;switch(d){case 35678:case 35680:var C=e.def(f,"._texture");e(l,".uniform1i(",m,",",C,".bind());"),e.exit(C,".unbind();");continue;case 5124:case 35670:c="1i";break;case 35667:case 35671:c="2i",k=2;break;case 35668:case 35672:c="3i",k=3;break;case 35669:case 35673:c="4i",k=4;break;case 5126:c="1f";break;case 35664:c="2f",k=2;break;case 35665:c="3f",k=3;break;case 35666:c="4f",k=4;break;case 35674:c="Matrix2fv";break;case 35675:c="Matrix3fv";break;case 35676:c="Matrix4fv"}if(e(l,".uniform",c,"(",m,","),"M"===c.charAt(0)){var A=Math.pow(d-35674+2,2),P=t.global.def("new Float32Array(",A,")");Array.isArray(f)?e("false,(",L(A,function(t){return P+"["+t+"]="+f[t]}),",",P,")"):e("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",L(A,function(t){return P+"["+t+"]="+f+"["+t+"]"}),",",P,")")}else k>1?e(L(k,function(t){return Array.isArray(f)?f[t]:f+"["+t+"]"})):(E(!Array.isArray(f),"uniform value must not be an array"),e(f));e(");")}}function Y(t,e,n,i){var o,a,s,l,u,c,f,p,h=t.shared,d=h.gl,v=h.draw,m=i.draw,y=(a=m.elements,s=e,a?((a.contextDep&&i.contextDynamic||a.propDep)&&(s=n),o=a.append(t,s)):o=s.def(v,".",en),o&&s("if("+o+")"+d+".bindBuffer(34963,"+o+".buffer.buffer);"),o);function _(o){var a=m[o];return a?a.contextDep&&i.contextDynamic||a.propDep?a.append(t,n):a.append(t,e):e.def(v,".",o)}var x=_(ei),k=_(ea),C=(u=m.count,c=e,u?((u.contextDep&&i.contextDynamic||u.propDep)&&(c=n),l=u.append(t,c),E.optional(function(){u.MISSING&&t.assert(e,"false","missing vertex count"),u.DYNAMIC&&t.assert(c,l+">=0","missing vertex count")})):(l=c.def(v,".",eo),E.optional(function(){t.assert(c,l+">=0","missing vertex count")})),l);if("number"==typeof C){if(0===C)return}else n("if(",C,"){"),n.exit("}");w&&(f=_(es),p=t.instancing);var A=y+".type",P=m.elements&&eP(m.elements);function M(){function t(){n(p,".drawElementsInstancedANGLE(",[x,C,A,k+"<<(("+A+"-5121)>>1)",f],");")}function e(){n(p,".drawArraysInstancedANGLE(",[x,k,C,f],");")}y?P?t():(n("if(",y,"){"),t(),n("}else{"),e(),n("}")):e()}function S(){function t(){n(d+".drawElements("+[x,C,A,k+"<<(("+A+"-5121)>>1)"]+");")}function e(){n(d+".drawArrays("+[x,k,C]+");")}y?P?t():(n("if(",y,"){"),t(),n("}else{"),e(),n("}")):e()}w&&("number"!=typeof f||f>=0)?"string"==typeof f?(n("if(",f,">0){"),M(),n("}else if(",f,"<0){"),S(),n("}")):M():S()}function Q(t,e,n,i,o){var a=F(),s=a.proc("body",o);return E.optional(function(){a.commandStr=e.commandStr,a.command=a.link(e.commandStr)}),w&&(a.instancing=s.def(a.shared.extensions,".angle_instanced_arrays")),t(a,s,n,i),a.compile().body}function J(t,e,n,i){H(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),K(t,e,n,i.attributes,function(){return!0})),W(t,e,n,i.uniforms,function(){return!0}),Y(t,e,e,n)}function Z(t,e,n,i){function o(){return!0}t.batchId="a1",H(t,e),K(t,e,n,i.attributes,o),W(t,e,n,i.uniforms,o),Y(t,e,e,n)}function tt(t,e,n,i){H(t,e);var o=n.contextDep,a=e.def(),s=e.def();t.shared.props=s,t.batchId=a;var l=t.scope(),u=t.scope();function c(t){return t.contextDep&&o||t.propDep}function f(t){return!c(t)}if(e(l.entry,"for(",a,"=0;",a,"<","a1",";++",a,"){",s,"=","a0","[",a,"];",u,"}",l.exit),n.needsContext&&z(t,u,n.context),n.needsFramebuffer&&U(t,u,n.framebuffer),q(t,u,n.state,c),n.profile&&c(n.profile)&&$(t,u,n,!1,!0),i)n.useVAO?n.drawVAO?c(n.drawVAO)?u(t.shared.vao,".setVAO(",n.drawVAO.append(t,u),");"):l(t.shared.vao,".setVAO(",n.drawVAO.append(t,l),");"):l(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(l(t.shared.vao,".setVAO(null);"),K(t,l,n,i.attributes,f),K(t,u,n,i.attributes,c)),W(t,l,n,i.uniforms,f),W(t,u,n,i.uniforms,c),Y(t,l,u,n);else{var p=t.global.def("{}"),h=n.shader.progVar.append(t,u),d=u.def(h,".id"),v=u.def(p,"[",d,"]");u(t.shared.gl,".useProgram(",h,".program);","if(!",v,"){",v,"=",p,"[",d,"]=",t.link(function(e){return Q(Z,t,n,e,2)}),"(",h,");}",v,".call(this,a0[",a,"],",a,");")}}function te(t,e,n){var i=e.static[n];if(i&&function(t){if(!("object"!=typeof t||tr(t))){for(var e=Object.keys(t),n=0;n<e.length;++n)if(S(t[e[n]]))return!0;return!1}}(i)){var o=t.global,a=Object.keys(i),s=!1,l=!1,u=!1,c=t.global.def("{}");a.forEach(function(e){var n=i[e];if(S(n)){"function"==typeof n&&(n=i[e]=T(n));var a=eS(n,null);s=s||a.thisDep,u=u||a.propDep,l=l||a.contextDep}else{switch(o(c,".",e,"="),typeof n){case"number":o(n);break;case"string":o('"',n,'"');break;case"object":Array.isArray(n)&&o("[",n.join(),"]");break;default:o(t.link(n))}o(";")}}),e.dynamic[n]=new A(4,{thisDep:s,contextDep:l,propDep:u,ref:c,append:function(t,e){a.forEach(function(n){var o=i[n];if(S(o)){var a=t.invoke(e,o);e(c,".",n,"=",a,";")}})}}),delete e.static[n]}}return{next:C,current:k,procs:function(){var t,e=F(),n=e.proc("poll"),a=e.proc("refresh"),s=e.block();n(s),a(s);var l=e.shared,u=l.gl,c=l.next,f=l.current;s(f,".dirty=false;"),U(e,n),U(e,a,null,!0),w&&(t=e.link(w)),i.oes_vertex_array_object&&a(e.link(i.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var p=0;p<o.maxAttributes;++p){var h=a.def(l.attributes,"[",p,"]"),d=e.cond(h,".buffer");d.then(u,".enableVertexAttribArray(",p,");",u,".bindBuffer(",34962,",",h,".buffer.buffer);",u,".vertexAttribPointer(",p,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);").else(u,".disableVertexAttribArray(",p,");",u,".vertexAttrib4f(",p,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),a(d),w&&a(t,".vertexAttribDivisorANGLE(",p,",",h,".divisor);")}return a(e.shared.vao,".currentVAO=null;",e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"),Object.keys(M).forEach(function(t){var i=M[t],o=s.def(c,".",t),l=e.block();l("if(",o,"){",u,".enable(",i,")}else{",u,".disable(",i,")}",f,".",t,"=",o,";"),a(l),n("if(",o,"!==",f,".",t,"){",l,"}")}),Object.keys(j).forEach(function(t){var i,o,l=j[t],p=k[t],h=e.block();if(h(u,".",l,"("),tr(p)){var d=p.length;i=e.global.def(c,".",t),o=e.global.def(f,".",t),h(L(d,function(t){return i+"["+t+"]"}),");",L(d,function(t){return o+"["+t+"]="+i+"["+t+"];"}).join("")),n("if(",L(d,function(t){return i+"["+t+"]!=="+o+"["+t+"]"}).join("||"),"){",h,"}")}else i=s.def(c,".",t),o=s.def(f,".",t),h(i,");",f,".",t,"=",i,";"),n("if(",i,"!==",o,"){",h,"}");a(h)}),e.compile()}(),compile:function(t,l,c,h,d){var v=F();v.stats=v.link(d),Object.keys(l.static).forEach(function(t){te(v,l,t)}),eg.forEach(function(e){te(v,t,e)});var m=function(t,e,l,c,h){var d,v,m,x,k,C,A,M,S,T,j,V,D=t.static,R=t.dynamic;E.optional(function(){var t=[et,ee,er,en,ei,ea,eo,es,t9,"vao"].concat(P);function e(e){Object.keys(e).forEach(function(e){E.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',h.commandStr)})}e(D),e(R)});var B=function(t,e){var n=t.static;if("string"==typeof n[er]&&"string"==typeof n[ee]){if(Object.keys(e.dynamic).length>0)return null;var i=e.static,o=Object.keys(i);if(o.length>0&&"number"==typeof i[o[0]]){for(var a=[],s=0;s<o.length;++s)E("number"==typeof i[o[s]],"must specify all vertex attribute locations when using vaos"),a.push([0|i[o[s]],o[s]]);return a}}return null}(t,e),I=function(t,e){var n=t.static,i=t.dynamic;if(et in n){var o=n[et];return o?(o=u.getFramebuffer(o),E.command(o,"invalid framebuffer object"),eM(function(t,e){var n=t.link(o),i=t.shared;e.set(i.framebuffer,".next",n);var a=i.context;return e.set(a,"."+ec,n+".width"),e.set(a,"."+ef,n+".height"),n})):eM(function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var i=n.context;return e.set(i,"."+ec,i+"."+ev),e.set(i,"."+ef,i+"."+em),"null"})}if(!(et in i))return null;var a=i[et];return eS(a,function(t,e){var n=t.invoke(e,a),i=t.shared,o=i.framebuffer,s=e.def(o,".getFramebuffer(",n,")");E.optional(function(){t.assert(e,"!"+n+"||"+s,"invalid framebuffer object")}),e.set(o,".next",s);var l=i.context;return e.set(l,"."+ec,s+"?"+s+".width:"+l+"."+ev),e.set(l,"."+ef,s+"?"+s+".height:"+l+"."+em),s})}(t,0),F=function(t,e,n){var i=t.static,o=t.dynamic;function a(t){if(t in i){var a,s,l=i[t];E.commandType(l,"object","invalid "+t,n.commandStr);var u=!0,c=0|l.x,f=0|l.y;return"width"in l?(a=0|l.width,E.command(a>=0,"invalid "+t,n.commandStr)):u=!1,"height"in l?(s=0|l.height,E.command(s>=0,"invalid "+t,n.commandStr)):u=!1,new eA(!u&&e&&e.thisDep,!u&&e&&e.contextDep,!u&&e&&e.propDep,function(t,e){var n=t.shared.context,i=a;"width"in l||(i=e.def(n,".",ec,"-",c));var o=s;return"height"in l||(o=e.def(n,".",ef,"-",f)),[c,f,i,o]})}if(t in o){var p=o[t],h=eS(p,function(e,n){var i=e.invoke(n,p);E.optional(function(){e.assert(n,i+"&&typeof "+i+'==="object"',"invalid "+t)});var o=e.shared.context,a=n.def(i,".x|0"),s=n.def(i,".y|0"),l=n.def('"width" in ',i,"?",i,".width|0:","(",o,".",ec,"-",a,")"),u=n.def('"height" in ',i,"?",i,".height|0:","(",o,".",ef,"-",s,")");return E.optional(function(){e.assert(n,l+">=0&&"+u+">=0","invalid "+t)}),[a,s,l,u]});return e&&(h.thisDep=h.thisDep||e.thisDep,h.contextDep=h.contextDep||e.contextDep,h.propDep=h.propDep||e.propDep),h}return e?new eA(e.thisDep,e.contextDep,e.propDep,function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",ec),e.def(n,".",ef)]}):null}var s=a(t7);if(s){var l=s;s=new eA(s.thisDep,s.contextDep,s.propDep,function(t,e){var n=l.append(t,e),i=t.shared.context;return e.set(i,"."+ep,n[2]),e.set(i,"."+eh,n[3]),n})}return{viewport:s,scissor_box:a(t8)}}(t,I,h),z=function(t,e){var n=t.static,i=t.dynamic,o=function(){if(en in n){var t=n[en];eE(t)?t=s.getElements(s.create(t,!0)):t&&(t=s.getElements(t),E.command(t,"invalid elements",e.commandStr));var o=eM(function(e,n){if(t){var i=e.link(t);return e.ELEMENTS=i,i}return e.ELEMENTS=null,null});return o.value=t,o}if(en in i){var a=i[en];return eS(a,function(t,e){var n=t.shared,i=n.isBufferArgs,o=n.elements,s=t.invoke(e,a),l=e.def("null"),u=e.def(i,"(",s,")"),c=t.cond(u).then(l,"=",o,".createStream(",s,");").else(l,"=",o,".getElements(",s,");");return E.optional(function(){t.assert(c.else,"!"+s+"||"+l,"invalid elements")}),e.entry(c),e.exit(t.cond(u).then(o,".destroyStream(",l,");")),t.ELEMENTS=l,l})}return null}();function a(t,a){if(t in n){var s=0|n[t];return E.command(!a||s>=0,"invalid "+t,e.commandStr),eM(function(t,e){return a&&(t.OFFSET=s),s})}if(t in i){var l=i[t];return eS(l,function(e,n){var i=e.invoke(n,l);return a&&(e.OFFSET=i,E.optional(function(){e.assert(n,i+">=0","invalid "+t)})),i})}return a&&o?eM(function(t,e){return t.OFFSET="0",0}):null}var l=a(ea,!0);return{elements:o,primitive:function(){if(ei in n){var t=n[ei];return E.commandParameter(t,X,"invalid primitve",e.commandStr),eM(function(e,n){return X[t]})}if(ei in i){var a=i[ei];return eS(a,function(t,e){var n=t.constants.primTypes,i=t.invoke(e,a);return E.optional(function(){t.assert(e,i+" in "+n,"invalid primitive, must be one of "+Object.keys(X))}),e.def(n,"[",i,"]")})}if(o)if(!eP(o))return new eA(o.thisDep,o.contextDep,o.propDep,function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",4)});else if(o.value)return eM(function(t,e){return e.def(t.ELEMENTS,".primType")});else return eM(function(){return 4});return null}(),count:function(){if(eo in n){var t=0|n[eo];return E.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),eM(function(){return t})}if(eo in i){var a=i[eo];return eS(a,function(t,e){var n=t.invoke(e,a);return E.optional(function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")}),n})}if(o)if(eP(o))if(o)if(l)return new eA(l.thisDep,l.contextDep,l.propDep,function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return E.optional(function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")}),n});else return eM(function(t,e){return e.def(t.ELEMENTS,".vertCount")});else{var s=eM(function(){return -1});return E.optional(function(){s.MISSING=!0}),s}else{var u=new eA(o.thisDep||l.thisDep,o.contextDep||l.contextDep,o.propDep||l.propDep,function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")});return E.optional(function(){u.DYNAMIC=!0}),u}return null}(),instances:a(es,!1),offset:l}}(t,h),U=(d=t.static,v=t.dynamic,m={},P.forEach(function(t){var e=O(t);function n(n,i){if(t in d){var o=n(d[t]);m[e]=eM(function(){return o})}else if(t in v){var a=v[t];m[e]=eS(a,function(t,e){return i(t,e,t.invoke(e,a))})}}switch(t){case tG:case tB:case tR:case t1:case tU:case t4:case tQ:case tX:case tZ:case tH:return n(function(e){return E.commandType(e,"boolean",t,h.commandStr),e},function(e,n,i){return E.optional(function(){e.assert(n,"typeof "+i+'==="boolean"',"invalid flag "+t,e.commandStr)}),i});case tN:return n(function(e){return E.commandParameter(e,e_,"invalid "+t,h.commandStr),e_[e]},function(e,n,i){var o=e.constants.compareFuncs;return E.optional(function(){e.assert(n,i+" in "+o,"invalid "+t+", must be one of "+Object.keys(e_))}),n.def(o,"[",i,"]")});case tq:return n(function(t){return E.command(tr(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",h.commandStr),t},function(t,e,n){return E.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")}),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]});case tz:return n(function(t){E.commandType(t,"object","blend.func",h.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,i="srcAlpha"in t?t.srcAlpha:t.src,o="dstRGB"in t?t.dstRGB:t.dst,a="dstAlpha"in t?t.dstAlpha:t.dst;return E.commandParameter(n,eb,e+".srcRGB",h.commandStr),E.commandParameter(i,eb,e+".srcAlpha",h.commandStr),E.commandParameter(o,eb,e+".dstRGB",h.commandStr),E.commandParameter(a,eb,e+".dstAlpha",h.commandStr),E.command(-1===ey.indexOf(n+", "+o),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+o+")",h.commandStr),[eb[n],eb[o],eb[i],eb[a]]},function(e,n,i){var o=e.constants.blendFuncs;function a(a,s){var l=n.def('"',a,s,'" in ',i,"?",i,".",a,s,":",i,".",a);return E.optional(function(){e.assert(n,l+" in "+o,"invalid "+t+"."+a+s+", must be one of "+Object.keys(eb))}),l}E.optional(function(){e.assert(n,i+"&&typeof "+i+'==="object"',"invalid blend func, must be an object")});var s=a("src","RGB"),l=a("dst","RGB");E.optional(function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+s+'+", "+'+l+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var u=n.def(o,"[",s,"]"),c=n.def(o,"[",a("src","Alpha"),"]");return[u,n.def(o,"[",l,"]"),c,n.def(o,"[",a("dst","Alpha"),"]")]});case tF:return n(function(e){return"string"==typeof e?(E.commandParameter(e,_,"invalid "+t,h.commandStr),[_[e],_[e]]):"object"==typeof e?(E.commandParameter(e.rgb,_,t+".rgb",h.commandStr),E.commandParameter(e.alpha,_,t+".alpha",h.commandStr),[_[e.rgb],_[e.alpha]]):void E.commandRaise("invalid blend.equation",h.commandStr)},function(e,n,i){var o=e.constants.blendEquations,a=n.def(),s=n.def(),l=e.cond("typeof ",i,'==="string"');return E.optional(function(){function n(t,n,i){e.assert(t,i+" in "+o,"invalid "+n+", must be one of "+Object.keys(_))}n(l.then,t,i),e.assert(l.else,i+"&&typeof "+i+'==="object"',"invalid "+t),n(l.else,t+".rgb",i+".rgb"),n(l.else,t+".alpha",i+".alpha")}),l.then(a,"=",s,"=",o,"[",i,"];"),l.else(a,"=",o,"[",i,".rgb];",s,"=",o,"[",i,".alpha];"),n(l),[a,s]});case tI:return n(function(t){return E.command(tr(t)&&4===t.length,"blend.color must be a 4d array",h.commandStr),L(4,function(e){return+t[e]})},function(t,e,n){return E.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")}),L(4,function(t){return e.def("+",n,"[",t,"]")})});case t2:return n(function(t){return E.commandType(t,"number",e,h.commandStr),0|t},function(t,e,n){return E.optional(function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")}),e.def(n,"|0")});case t5:return n(function(n){E.commandType(n,"object",e,h.commandStr);var i=n.cmp||"keep",o=n.ref||0,a="mask"in n?n.mask:-1;return E.commandParameter(i,e_,t+".cmp",h.commandStr),E.commandType(o,"number",t+".ref",h.commandStr),E.commandType(a,"number",t+".mask",h.commandStr),[e_[i],o,a]},function(t,e,n){var i=t.constants.compareFuncs;return E.optional(function(){function o(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}o(n+"&&typeof ",n,'==="object"'),o('!("cmp" in ',n,")||(",n,".cmp in ",i,")")}),[e.def('"cmp" in ',n,"?",i,"[",n,".cmp]",":",7680),e.def(n,".ref|0"),e.def('"mask" in ',n,"?",n,".mask|0:-1")]});case t3:case t6:return n(function(n){E.commandType(n,"object",e,h.commandStr);var i=n.fail||"keep",o=n.zfail||"keep",a=n.zpass||"keep";return E.commandParameter(i,ew,t+".fail",h.commandStr),E.commandParameter(o,ew,t+".zfail",h.commandStr),E.commandParameter(a,ew,t+".zpass",h.commandStr),[t===t6?1029:1028,ew[i],ew[o],ew[a]]},function(e,n,i){var o=e.constants.stencilOps;function a(a){return E.optional(function(){e.assert(n,'!("'+a+'" in '+i+")||("+i+"."+a+" in "+o+")","invalid "+t+"."+a+", must be one of "+Object.keys(ew))}),n.def('"',a,'" in ',i,"?",o,"[",i,".",a,"]:",7680)}return E.optional(function(){e.assert(n,i+"&&typeof "+i+'==="object"',"invalid "+t)}),[t===t6?1029:1028,a("fail"),a("zfail"),a("zpass")]});case tJ:return n(function(t){E.commandType(t,"object",e,h.commandStr);var n=0|t.factor,i=0|t.units;return E.commandType(n,"number",e+".factor",h.commandStr),E.commandType(i,"number",e+".units",h.commandStr),[n,i]},function(e,n,i){return E.optional(function(){e.assert(n,i+"&&typeof "+i+'==="object"',"invalid "+t)}),[n.def(i,".factor|0"),n.def(i,".units|0")]});case tK:return n(function(t){var n=0;return"front"===t?n=1028:"back"===t&&(n=1029),E.command(!!n,e,h.commandStr),n},function(t,e,n){return E.optional(function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")}),e.def(n,'==="front"?',1028,":",1029)});case tY:return n(function(t){return E.command("number"==typeof t&&t>=o.lineWidthDims[0]&&t<=o.lineWidthDims[1],"invalid line width, must be a positive number between "+o.lineWidthDims[0]+" and "+o.lineWidthDims[1],h.commandStr),t},function(t,e,n){return E.optional(function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+o.lineWidthDims[0]+"&&"+n+"<="+o.lineWidthDims[1],"invalid line width")}),n});case tW:return n(function(t){return E.commandParameter(t,ek,e,h.commandStr),ek[t]},function(t,e,n){return E.optional(function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),e.def(n+'==="cw"?2304:2305')});case t$:return n(function(t){return E.command(tr(t)&&4===t.length,"color.mask must be length 4 array",h.commandStr),t.map(function(t){return!!t})},function(t,e,n){return E.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")}),L(4,function(t){return"!!"+n+"["+t+"]"})});case t0:return n(function(t){E.command("object"==typeof t&&t,e,h.commandStr);var n="value"in t?t.value:1,i=!!t.invert;return E.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",h.commandStr),[n,i]},function(t,e,n){return E.optional(function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")}),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]})}}),m),N=function(t,e,i){var o,a=t.static,s=t.dynamic;function l(t){if(t in a){var e=n.id(a[t]);E.optional(function(){p.shader(ex[t],e,E.guessCommand())});var i=eM(function(){return e});return i.id=e,i}if(t in s){var o=s[t];return eS(o,function(e,n){var i=e.invoke(n,o),a=n.def(e.shared.strings,".id(",i,")");return E.optional(function(){n(e.shared.shader,".shader(",ex[t],",",a,",",e.command,");")}),a})}return null}var u=l(er),c=l(ee),f=null;return eP(u)&&eP(c)?(f=p.program(c.id,u.id,null,i),o=eM(function(t,e){return t.link(f)})):o=new eA(u&&u.thisDep||c&&c.thisDep,u&&u.contextDep||c&&c.contextDep,u&&u.propDep||c&&c.propDep,function(t,e){var n,i,o=t.shared.shader;n=u?u.append(t,e):e.def(o,".",er),i=c?c.append(t,e):e.def(o,".",ee);var a=o+".program("+i+","+n;return E.optional(function(){a+=","+t.command}),e.def(a+")")}),{frag:u,vert:c,progVar:o,program:f}}(t,0,B);function q(t){var e=F[t];e&&(U[t]=e)}q(t7),q(O(t8));var H=Object.keys(U).length>0,$={framebuffer:I,draw:z,shader:N,state:U,dirty:H,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if($.profile=function(t){var e,n=t.static,i=t.dynamic;if(t9 in n){var o=!!n[t9];(e=eM(function(t,e){return o})).enable=o}else if(t9 in i){var a=i[t9];e=eS(a,function(t,e){return t.invoke(e,a)})}return e}(t,h),x=l.static,k=l.dynamic,C={},Object.keys(x).forEach(function(t){var e,n=x[t];if("number"==typeof n||"boolean"==typeof n)e=eM(function(){return n});else if("function"==typeof n){var i=n._reglType;"texture2d"===i||"textureCube"===i?e=eM(function(t){return t.link(n)}):"framebuffer"===i||"framebufferCube"===i?(E.command(n.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',h.commandStr),e=eM(function(t){return t.link(n.color[0])})):E.commandRaise('invalid data for uniform "'+t+'"',h.commandStr)}else tr(n)?e=eM(function(e){return e.global.def("[",L(n.length,function(i){return E.command("number"==typeof n[i]||"boolean"==typeof n[i],"invalid uniform "+t,e.commandStr),n[i]}),"]")}):E.commandRaise('invalid or missing data for uniform "'+t+'"',h.commandStr);e.value=n,C[t]=e}),Object.keys(k).forEach(function(t){var e=k[t];C[t]=eS(e,function(t,n){return t.invoke(n,e)})}),$.uniforms=C,$.drawVAO=$.scopeVAO=function(t,e){var n=t.static,i=t.dynamic;if("vao"in n){var o=n.vao;return null!==o&&null===f.getVAO(o)&&(o=f.createVAO(o)),eM(function(t){return t.link(f.getVAO(o))})}if("vao"in i){var a=i.vao;return eS(a,function(t,e){var n=t.invoke(e,a);return e.def(t.shared.vao+".getVAO("+n+")")})}return null}(t,0),!$.drawVAO&&N.program&&!B&&i.angle_instanced_arrays){var K=!0,W=N.program.attributes.map(function(t){var n=e.static[t];return K=K&&!!n,n});if(K&&W.length>0){var Y=f.getVAO(f.createVAO(W));$.drawVAO=new eA(null,null,null,function(t,e){return t.link(Y)}),$.useVAO=!0}}return B?$.useVAO=!0:(A=e.static,M=e.dynamic,S={},Object.keys(A).forEach(function(t){var e=A[t],i=n.id(t),o=new y;if(eE(e))o.state=1,o.buffer=a.getBuffer(a.create(e,34962,!1,!0)),o.type=0;else{var s=a.getBuffer(e);if(s)o.state=1,o.buffer=s,o.type=0;else if(E.command("object"==typeof e&&e,"invalid data for attribute "+t,h.commandStr),"constant"in e){var l=e.constant;o.buffer="null",o.state=2,"number"==typeof l?o.x=l:(E.command(tr(l)&&l.length>0&&l.length<=4,"invalid constant for attribute "+t,h.commandStr),tL.forEach(function(t,e){e<l.length&&(o[t]=l[e])}))}else{s=eE(e.buffer)?a.getBuffer(a.create(e.buffer,34962,!1,!0)):a.getBuffer(e.buffer),E.command(!!s,'missing buffer for attribute "'+t+'"',h.commandStr);var u=0|e.offset;E.command(u>=0,'invalid offset for attribute "'+t+'"',h.commandStr);var c=0|e.stride;E.command(c>=0&&c<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',h.commandStr);var f=0|e.size;E.command(!("size"in e)||f>0&&f<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',h.commandStr);var p=!!e.normalized,d=0;"type"in e&&(E.commandParameter(e.type,G,"invalid type for attribute "+t,h.commandStr),d=G[e.type]);var v=0|e.divisor;"divisor"in e&&(E.command(0===v||w,'cannot specify divisor for attribute "'+t+'", instancing not supported',h.commandStr),E.command(v>=0,'invalid divisor for attribute "'+t+'"',h.commandStr)),E.optional(function(){var n=h.commandStr,i=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(e).forEach(function(e){E.command(i.indexOf(e)>=0,'unknown parameter "'+e+'" for attribute pointer "'+t+'" (valid parameters are '+i+")",n)})}),o.buffer=s,o.state=1,o.size=f,o.normalized=p,o.type=d||s.dtype,o.offset=u,o.stride=c,o.divisor=v}}S[t]=eM(function(t,e){var n=t.attribCache;if(i in n)return n[i];var a={isStream:!1};return Object.keys(o).forEach(function(t){a[t]=o[t]}),o.buffer&&(a.buffer=t.link(o.buffer),a.type=a.type||a.buffer+".dtype"),n[i]=a,a})}),Object.keys(M).forEach(function(t){var e=M[t];S[t]=eS(e,function(n,i){var o=n.invoke(i,e),a=n.shared,s=n.constants,l=a.isBufferArgs,u=a.buffer;E.optional(function(){n.assert(i,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+l+"("+o+")||"+u+".getBuffer("+o+")||"+u+".getBuffer("+o+".buffer)||"+l+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+a.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+t+'"')});var c={isStream:i.def(!1)},f=new y;f.state=1,Object.keys(f).forEach(function(t){c[t]=i.def(""+f[t])});var p=c.buffer,h=c.type;function d(t){i(c[t],"=",o,".",t,"|0;")}return i("if(",l,"(",o,")){",c.isStream,"=true;",p,"=",u,".createStream(",34962,",",o,");",h,"=",p,".dtype;","}else{",p,"=",u,".getBuffer(",o,");","if(",p,"){",h,"=",p,".dtype;",'}else if("constant" in ',o,"){",c.state,"=",2,";","if(typeof "+o+'.constant === "number"){',c[tL[0]],"=",o,".constant;",tL.slice(1).map(function(t){return c[t]}).join("="),"=0;","}else{",tL.map(function(t,e){return c[t]+"="+o+".constant.length>"+e+"?"+o+".constant["+e+"]:0;"}).join(""),"}}else{","if(",l,"(",o,".buffer)){",p,"=",u,".createStream(",34962,",",o,".buffer);","}else{",p,"=",u,".getBuffer(",o,".buffer);","}",h,'="type" in ',o,"?",s.glTypes,"[",o,".type]:",p,".dtype;",c.normalized,"=!!",o,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),i("}}"),i.exit("if(",c.isStream,"){",u,".destroyStream(",p,");","}"),c})}),$.attributes=S),T=c.static,j=c.dynamic,V={},Object.keys(T).forEach(function(t){var e=T[t];V[t]=eM(function(t,n){return"number"==typeof e||"boolean"==typeof e?""+e:t.link(e)})}),Object.keys(j).forEach(function(t){var e=j[t];V[t]=eS(e,function(t,n){return t.invoke(n,e)})}),$.context=V,$}(t,l,c,h,v);!function(t,e){var n=t.proc("draw",1);H(t,n),z(t,n,e.context),U(t,n,e.framebuffer),N(t,n,e),q(t,n,e.state),$(t,n,e,!1,!0);var i=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",i,".program);"),e.shader.program)J(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var o=t.global.def("{}"),a=n.def(i,".id"),s=n.def(o,"[",a,"]");n(t.cond(s).then(s,".call(this,a0);").else(s,"=",o,"[",a,"]=",t.link(function(n){return Q(J,t,e,n,1)}),"(",i,");",s,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(v,m);var x=v.proc("scope",3);v.batchId="a2";var k=v.shared,C=k.current;function A(t){var e=m.shader[t];e&&x.set(k.shader,"."+t,e.append(v,x))}return z(v,x,m.context),m.framebuffer&&m.framebuffer.append(v,x),eC(Object.keys(m.state)).forEach(function(t){var e=m.state[t].append(v,x);tr(e)?e.forEach(function(e,n){x.set(v.next[t],"["+n+"]",e)}):x.set(k.next,"."+t,e)}),$(v,x,m,!0,!0),[en,ea,eo,es,ei].forEach(function(t){var e=m.draw[t];e&&x.set(k.draw,"."+t,""+e.append(v,x))}),Object.keys(m.uniforms).forEach(function(t){var e=m.uniforms[t].append(v,x);Array.isArray(e)&&(e="["+e.join()+"]"),x.set(k.uniforms,"["+n.id(t)+"]",e)}),Object.keys(m.attributes).forEach(function(t){var e=m.attributes[t].append(v,x),n=v.scopeAttrib(t);Object.keys(new y).forEach(function(t){x.set(n,"."+t,e[t])})}),m.scopeVAO&&x.set(k.vao,".targetVAO",m.scopeVAO.append(v,x)),A(ee),A(er),Object.keys(m.state).length>0&&(x(C,".dirty=true;"),x.exit(C,".dirty=true;")),x("a1(",v.shared.context,",a0,",v.batchId,");"),!function(t,e){var n=t.proc("batch",2);t.batchId="0",H(t,n);var i=!1,o=!0;Object.keys(e.context).forEach(function(t){i=i||e.context[t].propDep}),i||(z(t,n,e.context),o=!1);var a=e.framebuffer,s=!1;function l(t){return t.contextDep&&i||t.propDep}a?(a.propDep?i=s=!0:a.contextDep&&i&&(s=!0),s||U(t,n,a)):U(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(i=!0),N(t,n,e),q(t,n,e.state,function(t){return!l(t)}),e.profile&&l(e.profile)||$(t,n,e,!1,"a1"),e.contextDep=i,e.needsContext=o,e.needsFramebuffer=s;var u=e.shader.progVar;if(u.contextDep&&i||u.propDep)tt(t,n,e,null);else{var c=u.append(t,n);if(n(t.shared.gl,".useProgram(",c,".program);"),e.shader.program)tt(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var f=t.global.def("{}"),p=n.def(c,".id"),h=n.def(f,"[",p,"]");n(t.cond(h).then(h,".call(this,a0,a1);").else(h,"=",f,"[",p,"]=",t.link(function(n){return Q(tt,t,e,n,2)}),"(",c,");",h,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(v,m),e(v.compile(),{destroy:function(){m.shader.program.destroy()}})}}}(s,f,h,w,x,C,0,H,{},k,P,{elements:null,primitive:4,count:-1,offset:0,instances:-1},_,d,a),Z=function(e,n,i,o,a,s,l){function u(u){null===n.next?(E(a.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=5121):(E(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,s.oes_texture_float?(E(5121===c||5126===c,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===c&&E(l.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):E(5121===c,"Reading from a framebuffer is only allowed for the type 'uint8'"));var c,f=0,p=0,h=o.framebufferWidth,d=o.framebufferHeight,v=null;t(u)?v=u:u&&(E.type(u,"object","invalid arguments to regl.read()"),f=0|u.x,p=0|u.y,E(f>=0&&f<o.framebufferWidth,"invalid x offset for regl.read"),E(p>=0&&p<o.framebufferHeight,"invalid y offset for regl.read"),h=0|(u.width||o.framebufferWidth-f),d=0|(u.height||o.framebufferHeight-p),v=u.data||null),v&&(5121===c?E(v instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===c&&E(v instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),E(h>0&&h+f<=o.framebufferWidth,"invalid width for read pixels"),E(d>0&&d+p<=o.framebufferHeight,"invalid height for read pixels"),i();var m=h*d*4;return v||(5121===c?v=new Uint8Array(m):5126===c&&(v=v||new Float32Array(m))),E.isTypedArray(v,"data buffer for regl.read() must be a typedarray"),E(v.byteLength>=m,"data buffer for regl.read() too small"),e.pixelStorei(3333,4),e.readPixels(f,p,h,d,6408,c,v),v}return function(t){var e;return t&&"framebuffer"in t?(n.setFBO({framebuffer:t.framebuffer},function(){e=u(t)}),e):u(t)}}(s,H,$.procs.poll,_,l,h,w),tt=$.next,ts=s.canvas,td=[],tv=[],tm=[],tC=[a.onDestroy],el=null;function eu(){if(0===td.length){d&&d.update(),el=null;return}el=j.next(eu),eq();for(var t=td.length-1;t>=0;--t){var e=td[t];e&&e(_,null,0)}s.flush(),d&&d.update()}function ed(){!el&&td.length>0&&(el=j.next(eu))}function eL(){el&&(j.cancel(eu),el=null)}function eR(t){t.preventDefault(),u=!0,eL(),tv.forEach(function(t){t()})}function eB(t){s.getError(),u=!1,c.restore(),P.restore(),x.restore(),R.restore(),B.restore(),H.restore(),k.restore(),d&&d.restore(),$.procs.refresh(),ed(),tm.forEach(function(t){t()})}function eI(t){function n(t,e){var n={},i={};return Object.keys(t).forEach(function(o){var a=t[o];if(S(a)){i[o]=T(a,o);return}if(e&&Array.isArray(a)){for(var s=0;s<a.length;++s)if(S(a[s])){i[o]=T(a,o);return}}n[o]=a}),{dynamic:i,static:n}}E(!!t,"invalid args to regl({...})"),E.type(t,"object","invalid args to regl({...})");var i=n(t.context||{},!0),o=n(t.uniforms||{},!0),a=n(t.attributes||{},!1),s=n(function(t){var n=e({},t);function i(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach(function(i){n[t+"."+i]=e[i]})}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),i("blend"),i("depth"),i("cull"),i("stencil"),i("polygonOffset"),i("scissor"),i("sample"),"vao"in t&&(n.vao=t.vao),n}(t),!1),l={gpuTime:0,cpuTime:0,count:0},c=$.compile(s,a,o,i,l),f=c.draw,p=c.batch,h=c.scope,d=[];return e(function(t,e){var n;if(u&&E.raise("context lost"),"function"==typeof t)return h.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(n=0;n<t;++n)h.call(this,null,e,n);else if(!Array.isArray(t))return h.call(this,t,e,0);else for(n=0;n<t.length;++n)h.call(this,t[n],e,n);else if("number"==typeof t){if(t>0)return p.call(this,function(t){for(;d.length<t;)d.push(null);return d}(0|t),0|t)}else if(!Array.isArray(t))return f.call(this,t);else if(t.length)return p.call(this,t,t.length)},{stats:l,destroy:function(){c.destroy()}})}ts&&(ts.addEventListener(eO,eR,!1),ts.addEventListener(eV,eB,!1));var eF=H.setFBO=eI({framebuffer:M.call(null,1,"framebuffer")});function ez(t,e){var n=0;$.procs.poll();var i=e.color;i&&(s.clearColor(+i[0]||0,+i[1]||0,+i[2]||0,+i[3]||0),n|=16384),"depth"in e&&(s.clearDepth(+e.depth),n|=256),"stencil"in e&&(s.clearStencil(0|e.stencil),n|=1024),E(!!n,"called regl.clear with no buffer specified"),s.clear(n)}function eU(t){return E.type(t,"function","regl.frame() callback must be a function"),td.push(t),ed(),{cancel:function(){var e=eD(td,t);E(e>=0,"cannot cancel a frame twice"),td[e]=function t(){var e=eD(td,t);td[e]=td[td.length-1],td.length-=1,td.length<=0&&eL()}}}}function eN(){var t=tt.viewport,e=tt.scissor_box;t[0]=t[1]=e[0]=e[1]=0,_.viewportWidth=_.framebufferWidth=_.drawingBufferWidth=t[2]=e[2]=s.drawingBufferWidth,_.viewportHeight=_.framebufferHeight=_.drawingBufferHeight=t[3]=e[3]=s.drawingBufferHeight}function eq(){_.tick+=1,_.time=e$(),eN(),$.procs.poll()}function eH(){R.refresh(),eN(),$.procs.refresh(),d&&d.update()}function e$(){return(O()-v)/1e3}eH();var eG=e(eI,{clear:function(t){if(E("object"==typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)eF(e({framebuffer:t.framebuffer.faces[n]},t),ez);else eF(t,ez);else ez(null,t)},prop:M.bind(null,1),context:M.bind(null,2),this:M.bind(null,3),draw:eI({}),buffer:function(t){return x.create(t,34962,!1,!1)},elements:function(t){return C.create(t,!1)},texture:R.create2D,cube:R.createCube,renderbuffer:B.create,framebuffer:H.create,framebufferCube:H.createCube,vao:k.createVAO,attributes:l,frame:eU,on:function(t,e){var n;switch(E.type(e,"function","listener callback must be a function"),t){case"frame":return eU(e);case"lost":n=tv;break;case"restore":n=tm;break;case"destroy":n=tC;break;default:E.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e){n[t]=n[n.length-1],n.pop();return}}}},limits:w,hasExtension:function(t){return w.extensions.indexOf(t.toLowerCase())>=0},read:Z,destroy:function(){td.length=0,eL(),ts&&(ts.removeEventListener(eO,eR),ts.removeEventListener(eV,eB)),P.clear(),H.clear(),B.clear(),R.clear(),C.clear(),x.clear(),k.clear(),d&&d.clear(),tC.forEach(function(t){t()})},_gl:s,_refresh:eH,poll:function(){eq(),d&&d.update()},now:e$,stats:p});return a.onDone(null,eG),eG}}()}),s("dpmWT",function(t,e){t.exports=function(t){Array.isArray(t=void 0!==t?t:1)||(t=[t,t]);var e=[[-t[0],-t[1],0],[t[0],-t[1],0],[t[0],t[1],0],[-t[0],t[1],0]],n=[0,0,-1];return{positions:e,cells:[[0,1,2],[2,3,0]],uvs:[[0,0],[1,0],[1,1],[0,1]],normals:[n.slice(),n.slice(),n.slice(),n.slice()]}}}),s("4t0MC",function(t,e){var n=a("aqR3i");t.exports=function(t){if(e=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(t)){var e,i,o,a,s=e[1],l=s.replace(/a$/,""),u="cmyk"===l?4:3;i=n[l],o=e[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(t,e){return/%$/.test(t)&&e===u?parseFloat(t)/100:(/%$/.test(t),parseFloat(t))}),s===l&&o.push(1),a=void 0===o[u]?1:o[u],o=o.slice(0,u),i[l]=function(){return o}}else if(/^#[A-Fa-f0-9]+$/.test(t)){var l=t.replace(/^#/,""),u=l.length;i=n.rgb,o=(o=l.split(3===u?/(.)/:/(..)/)).filter(Boolean).map(function(t){return 3===u?parseInt(t+t,16):parseInt(t,16)}),a=1,i.rgb=function(){return o},o[0]||(o[0]=0),o[1]||(o[1]=0),o[2]||(o[2]=0)}else(i=n.keyword).keyword=function(){return t},o=t,a=1;var c={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{c.rgb=i.rgb(o)}catch(t){}try{c.hsl=i.hsl(o)}catch(t){}try{c.hsv=i.hsv(o)}catch(t){}try{c.cmyk=i.cmyk(o)}catch(t){}try{c.keyword=i.keyword(o)}catch(t){}return c.rgb&&(c.hex="#"+c.rgb.map(function(t){var e=t.toString(16);return 1===e.length?"0"+e:e}).join("")),c.rgb&&(c.rgba=c.rgb.concat(a)),c.hsl&&(c.hsla=c.hsl.concat(a)),c.hsv&&(c.hsva=c.hsv.concat(a)),c.cmyk&&(c.cmyka=c.cmyk.concat(a)),c}}),s("aqR3i",function(t,e){var n=a("bOJCB"),i=function(){return new c};for(var o in n){i[o+"Raw"]=function(t){return function(e){return"number"==typeof e&&(e=Array.prototype.slice.call(arguments)),n[t](e)}}(o);var s=/(\w+)2(\w+)/.exec(o),l=s[1],u=s[2];i[l]=i[l]||{},i[l][u]=i[o]=function(t){return function(e){"number"==typeof e&&(e=Array.prototype.slice.call(arguments));var i=n[t](e);if("string"==typeof i||void 0===i)return i;for(var o=0;o<i.length;o++)i[o]=Math.round(i[o]);return i}}(o)}var c=function(){this.convs={}};c.prototype.routeSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"==typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n))},c.prototype.setValues=function(t,e){return this.space=t,this.convs={},this.convs[t]=e,this},c.prototype.getValues=function(t){var e=this.convs[t];if(!e){var n=this.space,o=this.convs[n];e=i[n][t](o),this.convs[t]=e}return e},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(t){c.prototype[t]=function(e){return this.routeSpace(t,arguments)}}),t.exports=i}),s("bOJCB",function(t,e){function n(t){var e,n,i=t[0]/255,o=t[1]/255,a=t[2]/255,s=Math.min(i,o,a),l=Math.max(i,o,a),u=l-s;return l==s?e=0:i==l?e=(o-a)/u:o==l?e=2+(a-i)/u:a==l&&(e=4+(i-o)/u),(e=Math.min(60*e,360))<0&&(e+=360),n=(s+l)/2,[e,100*(l==s?0:n<=.5?u/(l+s):u/(2-l-s)),100*n]}function i(t){var e,n,i=t[0],o=t[1],a=t[2],s=Math.min(i,o,a),l=Math.max(i,o,a),u=l-s;return n=0==l?0:u/l*1e3/10,l==s?e=0:i==l?e=(o-a)/u:o==l?e=2+(a-i)/u:a==l&&(e=4+(i-o)/u),(e=Math.min(60*e,360))<0&&(e+=360),[e,n,l/255*1e3/10]}function o(t){var e=t[0],i=t[1],o=t[2],a=n(t)[0],s=1/255*Math.min(e,Math.min(i,o)),o=1-1/255*Math.max(e,Math.max(i,o));return[a,100*s,100*o]}function a(t){var e,n=t[0]/255,i=t[1]/255,o=t[2]/255;return e=Math.min(1-n,1-i,1-o),[100*((1-n-e)/(1-e)||0),100*((1-i-e)/(1-e)||0),100*((1-o-e)/(1-e)||0),100*e]}function s(t){return k[JSON.stringify(t)]}function l(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)),100*(.2126*e+.7152*n+.0722*i),100*(.0193*e+.1192*n+.9505*i)]}function u(t){var e=l(t),n=e[0],i=e[1],o=e[2];return n/=95.047,i/=100,o/=108.883,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(n-i),200*(i-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]}function c(t){var e,n,i,o,a,s=t[0]/360,l=t[1]/100,u=t[2]/100;if(0==l)return[a=255*u,a,a];n=u<.5?u*(1+l):u+l-u*l,e=2*u-n,o=[0,0,0];for(var c=0;c<3;c++)(i=s+-(1/3*(c-1)))<0&&i++,i>1&&i--,a=6*i<1?e+(n-e)*6*i:2*i<1?n:3*i<2?e+(n-e)*(2/3-i)*6:e,o[c]=255*a;return o}function f(t){var e=t[0]/60,n=t[1]/100,i=t[2]/100,o=Math.floor(e)%6,a=e-Math.floor(e),s=255*i*(1-n),l=255*i*(1-n*a),u=255*i*(1-n*(1-a)),i=255*i;switch(o){case 0:return[i,u,s];case 1:return[l,i,s];case 2:return[s,i,u];case 3:return[s,l,i];case 4:return[u,s,i];case 5:return[i,s,l]}}function p(t){var e,n,i,o,a=t[0]/360,s=t[1]/100,l=t[2]/100,u=s+l;switch(u>1&&(s/=u,l/=u),e=Math.floor(6*a),n=1-l,i=6*a-e,(1&e)!=0&&(i=1-i),o=s+i*(n-s),e){default:case 6:case 0:r=n,g=o,b=s;break;case 1:r=o,g=n,b=s;break;case 2:r=s,g=n,b=o;break;case 3:r=s,g=o,b=n;break;case 4:r=o,g=s,b=n;break;case 5:r=n,g=s,b=o}return[255*r,255*g,255*b]}function h(t){var e=t[0]/100,n=t[1]/100,i=t[2]/100,o=t[3]/100;return[255*(1-Math.min(1,e*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o)),255*(1-Math.min(1,i*(1-o)+o))]}function d(t){var e,n,i,o=t[0]/100,a=t[1]/100,s=t[2]/100;return e=3.2406*o+-1.5372*a+-.4986*s,n=-.9689*o+1.8758*a+.0415*s,i=.0557*o+-.204*a+1.057*s,e=e>.0031308?1.055*Math.pow(e,1/2.4)-.055:e*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(i=Math.min(Math.max(0,i),1))]}function v(t){var e=t[0],n=t[1],i=t[2];return e/=95.047,n/=100,i/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]}function m(t){var e,n,i,o,a=t[0],s=t[1],l=t[2];return o=a<=8?(n=100*a/903.3)/100*7.787+16/116:Math.pow((n=100*Math.pow((a+16)/116,3))/100,1/3),[e=e/95.047<=.008856?e=95.047*(s/500+o-16/116)/7.787:95.047*Math.pow(s/500+o,3),n,i=i/108.883<=.008859?i=108.883*(o-l/200-16/116)/7.787:108.883*Math.pow(o-l/200,3)]}function y(t){var e,n=t[0],i=t[1],o=t[2];return(e=360*Math.atan2(o,i)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(i*i+o*o),e]}function _(t){return d(m(t))}function w(t){var e,n=t[0],i=t[1];return[n,i*Math.cos(e=t[2]/360*2*Math.PI),i*Math.sin(e)]}t.exports={rgb2hsl:n,rgb2hsv:i,rgb2hwb:o,rgb2cmyk:a,rgb2keyword:s,rgb2xyz:l,rgb2lab:u,rgb2lch:function(t){return y(u(t))},hsl2rgb:c,hsl2hsv:function(t){var e,n=t[0],i=t[1]/100,o=t[2]/100;return 0===o?[0,0,0]:(o*=2,i*=o<=1?o:2-o,e=(o+i)/2,[n,2*i/(o+i)*100,100*e])},hsl2hwb:function(t){return o(c(t))},hsl2cmyk:function(t){return a(c(t))},hsl2keyword:function(t){return s(c(t))},hsv2rgb:f,hsv2hsl:function(t){var e,n,i=t[0],o=t[1]/100,a=t[2]/100;return n=(2-o)*a,[i,100*(e=(e=o*a/(n<=1?n:2-n))||0),100*(n/=2)]},hsv2hwb:function(t){return o(f(t))},hsv2cmyk:function(t){return a(f(t))},hsv2keyword:function(t){return s(f(t))},hwb2rgb:p,hwb2hsl:function(t){return n(p(t))},hwb2hsv:function(t){return i(p(t))},hwb2cmyk:function(t){return a(p(t))},hwb2keyword:function(t){return s(p(t))},cmyk2rgb:h,cmyk2hsl:function(t){return n(h(t))},cmyk2hsv:function(t){return i(h(t))},cmyk2hwb:function(t){return o(h(t))},cmyk2keyword:function(t){return s(h(t))},keyword2rgb:function(t){return x[t]},keyword2hsl:function(t){return n(x[t])},keyword2hsv:function(t){return i(x[t])},keyword2hwb:function(t){return o(x[t])},keyword2cmyk:function(t){return a(x[t])},keyword2lab:function(t){return u(x[t])},keyword2xyz:function(t){return l(x[t])},xyz2rgb:d,xyz2lab:v,xyz2lch:function(t){return y(v(t))},lab2xyz:m,lab2rgb:_,lab2lch:y,lch2lab:w,lch2xyz:function(t){return m(w(t))},lch2rgb:function(t){return _(w(t))}};var x={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},k={};for(var E in x)k[JSON.stringify(x[E])]=E}),s("cmoHh",function(t,e){!function(t,e,n){function i(t){var e,n=this,i=(e=0xefc8249d,function(t){t=String(t);for(var n=0;n<t.length;n++){var i=.02519603282416938*(e+=t.charCodeAt(n));e=i>>>0,i-=e,i*=e,e=i>>>0,i-=e,e+=0x100000000*i}return(e>>>0)*23283064365386963e-26});n.next=function(){var t=2091639*n.s0+23283064365386963e-26*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=i(" "),n.s1=i(" "),n.s2=i(" "),n.s0-=i(t),n.s0<0&&(n.s0+=1),n.s1-=i(t),n.s1<0&&(n.s1+=1),n.s2-=i(t),n.s2<0&&(n.s2+=1)}function o(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function a(t,e){var n=new i(t),a=e&&e.state,s=n.next;return s.int32=function(){return 0x100000000*n.next()|0},s.double=function(){return s()+(2097152*s()|0)*11102230246251565e-32},s.quick=s,a&&("object"==typeof a&&o(a,n),s.state=function(){return o(n,{})}),s}e&&e.exports?e.exports=a:n&&n.amd?n(function(){return a}):this.alea=a}(0,t,"function"==typeof define&&define)}),s("euRi5",function(t,e){!function(t,e,n){function i(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var i=0;i<n.length+64;i++)e.x^=n.charCodeAt(i),e.next()}function o(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function a(t,e){var n=new i(t),a=e&&e.state,s=function(){return(n.next()>>>0)/0x100000000};return s.double=function(){do var t=n.next()>>>11,e=(n.next()>>>0)/0x100000000,i=(t+e)/2097152;while(0===i)return i},s.int32=n.next,s.quick=s,a&&("object"==typeof a&&o(a,n),s.state=function(){return o(n,{})}),s}e&&e.exports?e.exports=a:n&&n.amd?n(function(){return a}):this.xor128=a}(0,t,"function"==typeof define&&define)}),s("hDsEw",function(t,e){!function(t,e,n){function i(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^(t^t<<1))|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var i=0;i<n.length+64;i++)e.x^=n.charCodeAt(i),i==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function o(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function a(t,e){var n=new i(t),a=e&&e.state,s=function(){return(n.next()>>>0)/0x100000000};return s.double=function(){do var t=n.next()>>>11,e=(n.next()>>>0)/0x100000000,i=(t+e)/2097152;while(0===i)return i},s.int32=n.next,s.quick=s,a&&("object"==typeof a&&o(a,n),s.state=function(){return o(n,{})}),s}e&&e.exports?e.exports=a:n&&n.amd?n(function(){return a}):this.xorwow=a}(0,t,"function"==typeof define&&define)}),s("3J2Zm",function(t,e){!function(t,e,n){function i(t){var e=this;e.next=function(){var t,n,i=e.x,o=e.i;return t=i[o],t^=t>>>7,n=t^t<<24^((t=i[o+1&7])^t>>>10)^((t=i[o+3&7])^t>>>3)^((t=i[o+4&7])^t<<7),t=i[o+7&7],t^=t<<13,n^=t^t<<9,i[o]=n,e.i=o+1&7,n};var n,i=t,o=[];if(i===(0|i))o[0]=i;else for(n=0,i=""+i;n<i.length;++n)o[7&n]=o[7&n]<<15^i.charCodeAt(n)+o[n+1&7]<<13;for(;o.length<8;)o.push(0);for(n=0;n<8&&0===o[n];++n);for(8==n?o[7]=-1:o[n],e.x=o,e.i=0,n=256;n>0;--n)e.next()}function o(t,e){return e.x=t.x.slice(),e.i=t.i,e}function a(t,e){null==t&&(t=+new Date);var n=new i(t),a=e&&e.state,s=function(){return(n.next()>>>0)/0x100000000};return s.double=function(){do var t=n.next()>>>11,e=(n.next()>>>0)/0x100000000,i=(t+e)/2097152;while(0===i)return i},s.int32=n.next,s.quick=s,a&&(a.x&&o(a,n),s.state=function(){return o(n,{})}),s}e&&e.exports?e.exports=a:n&&n.amd?n(function(){return a}):this.xorshift7=a}(0,t,"function"==typeof define&&define)}),s("6Px8M",function(t,e){!function(t,e,n){function i(t){var e=this;e.next=function(){var t,n,i=e.w,o=e.X,a=e.i;return e.w=i=i+0x61c88647|0,n=o[a+34&127],t=o[a=a+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=o[a]=n^t,e.i=a,n+(i^i>>>16)|0},!function(t,e){var n,i,o,a,s,l=[],u=128;for(e===(0|e)?(i=e,e=null):(e+="\0",i=0,u=Math.max(u,e.length)),o=0,a=-32;a<u;++a)e&&(i^=e.charCodeAt((a+32)%e.length)),0===a&&(s=i),i^=i<<10,i^=i>>>15,i^=i<<4,i^=i>>>13,a>=0&&(s=s+0x61c88647|0,o=0==(n=l[127&a]^=i+s)?o+1:0);for(o>=128&&(l[127&(e&&e.length||0)]=-1),o=127,a=512;a>0;--a)i=l[o+34&127],n=l[o=o+1&127],i^=i<<13,n^=n<<17,i^=i>>>15,n^=n>>>12,l[o]=i^n;t.w=s,t.X=l,t.i=o}(e,t)}function o(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function a(t,e){null==t&&(t=+new Date);var n=new i(t),a=e&&e.state,s=function(){return(n.next()>>>0)/0x100000000};return s.double=function(){do var t=n.next()>>>11,e=(n.next()>>>0)/0x100000000,i=(t+e)/2097152;while(0===i)return i},s.int32=n.next,s.quick=s,a&&(a.X&&o(a,n),s.state=function(){return o(n,{})}),s}e&&e.exports?e.exports=a:n&&n.amd?n(function(){return a}):this.xor4096=a}(0,t,"function"==typeof define&&define)}),s("lDm0S",function(t,e){!function(t,e,n){function i(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,i=e.d,o=e.a;return t=t<<25^t>>>7^n,n=n-i|0,i=i<<24^i>>>8^o,o=o-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-i|0,e.d=i<<16^n>>>16^o,e.a=o-t|0},e.a=0,e.b=0,e.c=-0x61c88647,e.d=0x517cc1b7,t===Math.floor(t)?(e.a=t/0x100000000|0,e.b=0|t):n+=t;for(var i=0;i<n.length+20;i++)e.b^=n.charCodeAt(i),e.next()}function o(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function a(t,e){var n=new i(t),a=e&&e.state,s=function(){return(n.next()>>>0)/0x100000000};return s.double=function(){do var t=n.next()>>>11,e=(n.next()>>>0)/0x100000000,i=(t+e)/2097152;while(0===i)return i},s.int32=n.next,s.quick=s,a&&("object"==typeof a&&o(a,n),s.state=function(){return o(n,{})}),s}e&&e.exports?e.exports=a:n&&n.amd?n(function(){return a}):this.tychei=a}(0,t,"function"==typeof define&&define)}),s("kjyEk",function(t,e){}),console.log("\uD83C\uDFA8 Running SKYLINE-MODULAR version");var l={};l=function(){var t,n,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=!function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==i.join(""))return!1;var o={};if("abcdefghijklmnopqrst".split("").forEach(function(t){o[t]=t}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},o)).join(""))return!1;return!0}catch(t){return!1}}()?function(t,e){for(var n,s,l=function(t){if(null==t)throw TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))o.call(n,c)&&(l[c]=n[c]);if(i){s=i(n);for(var f=0;f<s.length;f++)a.call(n,s[f])&&(l[s[f]]=n[s[f]])}}return l}:Object.assign,l="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function u(t,e){return t(e={exports:{}},e.exports),e.exports}var c=l.performance&&l.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date},f=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then};function p(){return"undefined"!=typeof window&&window["canvas-sketch-cli"]}function h(){for(var t=arguments,e=0;e<arguments.length;e++)if(null!=t[e])return t[e]}function d(){return"undefined"!=typeof document}function v(t){return t&&"function"==typeof t.save&&"function"==typeof t.scale&&"function"==typeof t.restore}var m=u(function(t,e){(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n;function n(t){var e=[];for(var n in t)e.push(n);return e}});m.shim;var y=u(function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}()?n:i).supported=n,e.unsupported=i});y.supported,y.unsupported;var _=u(function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():t&&o&&("object"==typeof t||"object"==typeof o)?function(t,o,a){if(null==t||null==o||t.prototype!==o.prototype)return!1;if(y(t))return!!y(o)&&n(t=e.call(t),o=e.call(o),a);if(i(t)){if(!i(o)||t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var s,l,u=m(t),c=m(o)}catch(t){return!1}if(u.length!=c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!=c[s])return!1;for(s=u.length-1;s>=0;s--)if(!n(t[l=u[s]],o[l],a))return!1;return typeof t==typeof o}(t,o,a):a.strict?t===o:t==o)};function i(t){return!!t&&"object"==typeof t&&"number"==typeof t.length&&"function"==typeof t.copy&&"function"==typeof t.slice&&(!(t.length>0)||"number"==typeof t[0])}}),w=u(function(t,e){!function(e){var n,i,o,a=(n=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,i=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,o=/[^-+\dA-Z]/g,function(t,e,l,u){if(1!=arguments.length||"string"!==(null===(c=t)?"null":void 0===c?"undefined":"object"!=typeof c?typeof c:Array.isArray(c)?"array":({}).toString.call(c).slice(8,-1).toLowerCase())||/\d/.test(t)||(e=t,t=void 0),(t=t||new Date)instanceof Date||(t=new Date(t)),isNaN(t))throw TypeError("Invalid date");var c,f,p,h,d,v,m=(e=String(a.masks[e]||e||a.masks.default)).slice(0,4);("UTC:"===m||"GMT:"===m)&&(e=e.slice(4),l=!0,"GMT:"===m&&(u=!0));var y=l?"getUTC":"get",_=t[y+"Date"](),w=t[y+"Day"](),x=t[y+"Month"](),k=t[y+"FullYear"](),E=t[y+"Hours"](),C=t[y+"Minutes"](),A=t[y+"Seconds"](),P=t[y+"Milliseconds"](),M=l?0:t.getTimezoneOffset(),S=((p=new Date((f=t).getFullYear(),f.getMonth(),f.getDate())).setDate(p.getDate()-(p.getDay()+6)%7+3),(h=new Date(p.getFullYear(),0,4)).setDate(h.getDate()-(h.getDay()+6)%7+3),d=p.getTimezoneOffset()-h.getTimezoneOffset(),p.setHours(p.getHours()-d),1+Math.floor((p-h)/6048e5)),T=(0===(v=t.getDay())&&(v=7),v),j={d:_,dd:s(_),ddd:a.i18n.dayNames[w],dddd:a.i18n.dayNames[w+7],m:x+1,mm:s(x+1),mmm:a.i18n.monthNames[x],mmmm:a.i18n.monthNames[x+12],yy:String(k).slice(2),yyyy:k,h:E%12||12,hh:s(E%12||12),H:E,HH:s(E),M:C,MM:s(C),s:A,ss:s(A),l:s(P,3),L:s(Math.round(P/10)),t:E<12?a.i18n.timeNames[0]:a.i18n.timeNames[1],tt:E<12?a.i18n.timeNames[2]:a.i18n.timeNames[3],T:E<12?a.i18n.timeNames[4]:a.i18n.timeNames[5],TT:E<12?a.i18n.timeNames[6]:a.i18n.timeNames[7],Z:u?"GMT":l?"UTC":(String(t).match(i)||[""]).pop().replace(o,""),o:(M>0?"-":"+")+s(100*Math.floor(Math.abs(M)/60)+Math.abs(M)%60,4),S:["th","st","nd","rd"][_%10>3?0:(_%100-_%10!=10)*_%10],W:S,N:T};return e.replace(n,function(t){return t in j?j[t]:t.slice(1,t.length-1)})});function s(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}a.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},a.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},t.exports=a}(0)}),x="",k=function(){},E={extension:"",prefix:"",suffix:""},C=["image/png","image/jpeg","image/webp"];function A(t,e){return void 0===e&&(e={}),new Promise(function(n,i){var o=M(Object.assign({},e=s({},E,e),{extension:"",frame:void 0})),a=t?"streamStart":"streamEnd",l=p();return l&&l.output&&"function"==typeof l[a]?l[a](s({},e,{filename:o})).then(function(t){return n(t)}):n({filename:o,client:!1})})}function P(t,e){return void 0===e&&(e={}),new Promise(function(i){var o=(e=s({},E,e)).filename,a=p();if(a&&"function"==typeof a.saveBlob&&a.output)return a.saveBlob(t,s({},e,{filename:o})).then(function(t){return i(t)});n||((n=document.createElement("a")).style.visibility="hidden",n.target="_blank"),n.download=o,n.href=window.URL.createObjectURL(t),document.body.appendChild(n),n.onclick=function(){n.onclick=k,setTimeout(function(){window.URL.revokeObjectURL(t),n.parentElement&&n.parentElement.removeChild(n),n.removeAttribute("href"),i({filename:o,client:!1})})},n.click()})}function M(e){if(void 0===e&&(e={}),"function"==typeof(e=s({},e)).file)return e.file(e);if(e.file)return e.file;var n,i,o,a,l=null,u="";"string"==typeof e.extension&&(u=e.extension),"number"==typeof e.frame&&(a="number"==typeof e.totalFrames?e.totalFrames:Math.max(1e4,e.frame),n=String(e.frame),i=String(a).length,o="0",n=n.toString(),l=void 0===i?n:function(e,n){if("string"!=typeof e)throw TypeError("expected a string");if(1===n)return e;if(2===n)return e+e;var i=e.length*n;if(t!==e||void 0===t)t=e,x="";else if(x.length>=i)return x.substr(0,i);for(;i>x.length&&n>1;)1&n&&(x+=e),n>>=1,e+=e;return x+=e,x=x.substr(0,i)}(o=0===o?"0":o?o.toString():" ",i-n.length)+n);var c=isFinite(e.totalLayers)&&isFinite(e.layer)&&e.totalLayers>1?""+e.layer:"";if(null!=l)return[c,l].filter(Boolean).join("-")+u;var f=e.timeStamp;return[e.prefix,e.name||f,c,e.hash,e.suffix].filter(Boolean).join("-")+u}var S={dimension:"dimensions",animated:"animate",animating:"animate",unit:"units",P5:"p5",pixellated:"pixelated",looping:"loop",pixelPerInch:"pixels"},T=["dimensions","units","pixelsPerInch","orientation","scaleToFit","scaleToView","bleed","pixelRatio","exportPixelRatio","maxPixelRatio","scaleContext","resizeCanvas","styleCanvas","canvas","context","attributes","parent","file","name","prefix","suffix","animate","playing","loop","duration","totalFrames","fps","playbackRate","timeScale","frame","time","flush","pixelated","hotkeys","p5","id","scaleToFitPadding","data","params","encoding","encodingQuality"],j=function(t){Object.keys(t).forEach(function(t){if(t in S){var e=S[t];console.warn('[canvas-sketch] Could not recognize the setting "'+t+'", did you mean "'+e+'"?')}else T.includes(t)||console.warn('[canvas-sketch] Could not recognize the setting "'+t+'"')})},O=[["postcard",101.6,152.4],["poster-small",280,430],["poster",460,610],["poster-large",610,910],["business-card",50.8,88.9],["2r",64,89],["3r",89,127],["4r",102,152],["5r",127,178],["6r",152,203],["8r",203,254],["10r",254,305],["11r",279,356],["12r",305,381],["a0",841,1189],["a1",594,841],["a2",420,594],["a3",297,420],["a4",210,297],["a5",148,210],["a6",105,148],["a7",74,105],["a8",52,74],["a9",37,52],["a10",26,37],["2a0",1189,1682],["4a0",1682,2378],["b0",1e3,1414],["b1",707,1e3],["b1+",720,1020],["b2",500,707],["b2+",520,720],["b3",353,500],["b4",250,353],["b5",176,250],["b6",125,176],["b7",88,125],["b8",62,88],["b9",44,62],["b10",31,44],["b11",22,32],["b12",16,22],["c0",917,1297],["c1",648,917],["c2",458,648],["c3",324,458],["c4",229,324],["c5",162,229],["c6",114,162],["c7",81,114],["c8",57,81],["c9",40,57],["c10",28,40],["c11",22,32],["c12",16,22],["half-letter",5.5,8.5,"in"],["letter",8.5,11,"in"],["legal",8.5,14,"in"],["junior-legal",5,8,"in"],["ledger",11,17,"in"],["tabloid",11,17,"in"],["ansi-a",8.5,11,"in"],["ansi-b",11,17,"in"],["ansi-c",17,22,"in"],["ansi-d",22,34,"in"],["ansi-e",34,44,"in"],["arch-a",9,12,"in"],["arch-b",12,18,"in"],["arch-c",18,24,"in"],["arch-d",24,36,"in"],["arch-e",36,48,"in"],["arch-e1",30,42,"in"],["arch-e2",26,38,"in"],["arch-e3",27,39,"in"]].reduce(function(t,e){var n={units:e[3]||"mm",dimensions:[e[1],e[2]]};return t[e[0]]=n,t[e[0].replace(/-/g," ")]=n,t},{}),V=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},D=["mm","cm","m","pc","pt","in","ft","px"],L={m:{system:"metric",factor:1},cm:{system:"metric",factor:.01},mm:{system:"metric",factor:.001},pt:{system:"imperial",factor:1/72},pc:{system:"imperial",factor:1/6},in:{system:"imperial",factor:1},ft:{system:"imperial",factor:12}};let R={metric:{unit:"m",ratio:1/.0254},imperial:{unit:"in",ratio:.0254}};var B=function(t,e,n,i){if("number"!=typeof t||!isFinite(t))throw Error("Value must be a finite number");if(!e||!n)throw Error("Must specify from and to units");var o=V((i=i||{}).pixelsPerInch,96),a=i.precision,s=!1!==i.roundPixel;if(e=e.toLowerCase(),n=n.toLowerCase(),-1===D.indexOf(e))throw Error('Invalid from unit "'+e+'", must be one of: '+D.join(", "));if(-1===D.indexOf(n))throw Error('Invalid from unit "'+n+'", must be one of: '+D.join(", "));if(e===n)return t;var l=1,u=1,c=!1;"px"===e&&(u=1/o,e="in"),"px"===n&&(c=!0,l=o,n="in");var f=L[e],p=L[n],h=t*f.factor*u;f.system!==p.system&&(h*=R[f.system].ratio);var d=h/p.factor*l;return c&&s?d=Math.round(d):"number"==typeof a&&isFinite(a)&&(d=Number(Math.round(d+"e"+a)+"e-"+a)),d};function I(t,e,n,i){return void 0===e&&(e="px"),void 0===n&&(n="px"),void 0===i&&(i=72),B(t,e,n,{pixelsPerInch:i,precision:4,roundPixel:!0})}function F(t){void 0===t&&(t={});var e,n,i=!1;if(!1!==t.canvas){if(!(e=t.context)||"string"==typeof e){var o=t.canvas;o||(o=function(){if(!d())throw Error("It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.");return document.createElement("canvas")}(),i=!0);var a=e||"2d";if("function"!=typeof o.getContext)throw Error("The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?");if(!(e=function(t,e){if("string"!=typeof t)throw TypeError("must specify type string");if(e=e||{},"undefined"==typeof document&&!e.canvas)return null;var n,i=e.canvas||document.createElement("canvas");"number"==typeof e.width&&(i.width=e.width),"number"==typeof e.height&&(i.height=e.height);var o=e;try{var a=[t];0===t.indexOf("webgl")&&a.push("experimental-"+t);for(var s=0;s<a.length;s++)if(n=i.getContext(a[s],o))return n}catch(t){n=null}return n||null}(a,s({},t.attributes,{canvas:o}))))throw Error("Failed at canvas.getContext('"+a+"') - the browser may not support this context, or a different context may already be in use with this canvas.")}if(n=e.canvas,t.canvas&&n!==t.canvas)throw Error("The { canvas } and { context } settings must point to the same underlying canvas element");t.pixelated&&(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.oImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1,n.style["image-rendering"]="pixelated")}return{canvas:n,context:e,ownsCanvas:i}}B.units=D;var z=function(){var t,e,n=this;this._settings={},this._props={},this._sketch=void 0,this._raf=null,this._recordTimeout=null,this._lastRedrawResult=void 0,this._isP5Resizing=!1,this._keyboardShortcuts=(t={enabled:function(){return!1!==n.settings.hotkeys},save:function(t){t.shiftKey?n.props.recording?(n.endRecord(),n.run()):n.record():n.props.recording||n.exportFrame()},togglePlay:function(){n.props.playing?n.pause():n.play()},commit:function(t){n.exportFrame({commit:!0})}},e=function(e){if(t.enabled()){var n=p();83===e.keyCode&&!e.altKey&&(e.metaKey||e.ctrlKey)?(e.preventDefault(),t.save(e)):32===e.keyCode?t.togglePlay(e):n&&!e.altKey&&75===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),t.commit(e))}},{attach:function(){window.addEventListener("keydown",e)},detach:function(){window.removeEventListener("keydown",e)}}),this._animateHandler=function(){return n.animate()},this._resizeHandler=function(){n.resize()&&n.render()}},U={sketch:{configurable:!0},settings:{configurable:!0},props:{configurable:!0}};U.sketch.get=function(){return this._sketch},U.settings.get=function(){return this._settings},U.props.get=function(){return this._props},z.prototype._computePlayhead=function(t,e){return"number"==typeof e&&isFinite(e)?t/e:0},z.prototype._computeFrame=function(t,e,n,i){return isFinite(n)&&n>1?Math.floor(t*(n-1)):Math.floor(i*e)},z.prototype._computeCurrentFrame=function(){return this._computeFrame(this.props.playhead,this.props.time,this.props.totalFrames,this.props.fps)},z.prototype._getSizeProps=function(){var t=this.props;return{width:t.width,height:t.height,pixelRatio:t.pixelRatio,canvasWidth:t.canvasWidth,canvasHeight:t.canvasHeight,viewportWidth:t.viewportWidth,viewportHeight:t.viewportHeight}},z.prototype.run=function(){if(!this.sketch)throw Error("should wait until sketch is loaded before trying to play()");return!1!==this.settings.playing&&this.play(),"function"==typeof this.sketch.dispose&&console.warn("In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()"),this.props.started||(this._signalBegin(),this.props.started=!0),this.tick(),this.render(),this},z.prototype._cancelTimeouts=function(){null!=this._raf&&"undefined"!=typeof window&&"function"==typeof window.cancelAnimationFrame&&(window.cancelAnimationFrame(this._raf),this._raf=null),null!=this._recordTimeout&&(clearTimeout(this._recordTimeout),this._recordTimeout=null)},z.prototype.play=function(){var t=this.settings.animate;if("animation"in this.settings&&(t=!0,console.warn("[canvas-sketch] { animation } has been renamed to { animate }")),t){if(!d())return void console.error("[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported");this.props.playing||(this.props.started||(this._signalBegin(),this.props.started=!0),this.props.playing=!0,this._cancelTimeouts(),this._lastTime=c(),this._raf=window.requestAnimationFrame(this._animateHandler))}},z.prototype.pause=function(){this.props.recording&&this.endRecord(),this.props.playing=!1,this._cancelTimeouts()},z.prototype.togglePlay=function(){this.props.playing?this.pause():this.play()},z.prototype.stop=function(){this.pause(),this.props.frame=0,this.props.playhead=0,this.props.time=0,this.props.deltaTime=0,this.props.started=!1,this.render()},z.prototype.record=function(){var t=this;if(!this.props.recording){if(!d())return void console.error("[canvas-sketch] WARN: Recording from Node.js is not yet supported");this.stop(),this.props.playing=!0,this.props.recording=!0;var e,n=this._createExportOptions({sequence:!0}),i=1/this.props.fps;this._cancelTimeouts();var o=function(){return t.props.recording?(t.props.deltaTime=i,t.tick(),t.exportFrame(n).then(function(){t.props.recording&&(t.props.deltaTime=0,t.props.frame++,t.props.frame<t.props.totalFrames?(t.props.time+=i,t.props.playhead=t._computePlayhead(t.props.time,t.props.duration),t._recordTimeout=setTimeout(o,0)):(console.log("Finished recording"),t._signalEnd(),t.endRecord(),t.stop(),t.run()))})):Promise.resolve()};this.props.started||(this._signalBegin(),this.props.started=!0),this.sketch&&"function"==typeof this.sketch.beginRecord&&this._wrapContextScale(function(e){return t.sketch.beginRecord(e)}),(void 0===(e=n)&&(e={}),A(!0,e)).catch(function(t){console.error(t)}).then(function(e){t._raf=window.requestAnimationFrame(o)})}},z.prototype._signalBegin=function(){var t=this;this.sketch&&"function"==typeof this.sketch.begin&&this._wrapContextScale(function(e){return t.sketch.begin(e)})},z.prototype._signalEnd=function(){var t=this;this.sketch&&"function"==typeof this.sketch.end&&this._wrapContextScale(function(e){return t.sketch.end(e)})},z.prototype.endRecord=function(){var t,e=this,n=this.props.recording;return this._cancelTimeouts(),this.props.recording=!1,this.props.deltaTime=0,this.props.playing=!1,(void 0===t&&(t={}),A(!1,t)).catch(function(t){console.error(t)}).then(function(){n&&e.sketch&&"function"==typeof e.sketch.endRecord&&e._wrapContextScale(function(t){return e.sketch.endRecord(t)})})},z.prototype._createExportOptions=function(t){return void 0===t&&(t={}),{sequence:t.sequence,save:t.save,fps:this.props.fps,frame:t.sequence?this.props.frame:void 0,file:this.settings.file,name:this.settings.name,prefix:this.settings.prefix,suffix:this.settings.suffix,encoding:this.settings.encoding,encodingQuality:this.settings.encodingQuality,timeStamp:t.timeStamp||w(new Date,"yyyy.mm.dd-HH.MM.ss"),totalFrames:isFinite(this.props.totalFrames)?Math.max(0,this.props.totalFrames):1e3}},z.prototype.exportFrame=function(t){var e=this;if(void 0===t&&(t={}),!this.sketch)return Promise.all([]);"function"==typeof this.sketch.preExport&&this.sketch.preExport();var n=this._createExportOptions(t),i=p(),o=Promise.resolve();if(i&&t.commit&&"function"==typeof i.commit){var a=s({},n),l=i.commit(a);o=f(l)?l:Promise.resolve(l)}return o.then(function(t){return e._doExportFrame(s({},n,{hash:t||""}))}).then(function(t){return 1===t.length?t[0]:t})},z.prototype._doExportFrame=function(t){var e=this;void 0===t&&(t={}),this._props.exporting=!0,this.resize();var n=this.render(),i=this.props.canvas;return void 0===n&&(n=[i]),n=(n=[].concat(n).filter(Boolean)).map(function(e){var n,i="object"==typeof e&&e&&("data"in e||"dataURL"in e),o=i?e.data:e,a=i?s({},e,{data:o}):{data:o};if(!((n=o)&&"object"==typeof n&&("object"==typeof window&&"object"==typeof window.Node?n instanceof window.Node:"number"==typeof n.nodeType&&"string"==typeof n.nodeName)&&/canvas/i.test(o.nodeName))||"function"!=typeof o.getContext)return a;var l=function(t,e){void 0===e&&(e={});var n=e.encoding||"image/png";if(!C.includes(n))throw Error("Invalid canvas encoding "+n);var i=(n.split("/")[1]||"").replace(/jpeg/i,"jpg");return i&&(i=("."+i).toLowerCase()),{extension:i,type:n,dataURL:t.toDataURL(n,e.encodingQuality)}}(o,{encoding:a.encoding||t.encoding,encodingQuality:h(a.encodingQuality,t.encodingQuality,.95)});return Object.assign(a,{dataURL:l.dataURL,extension:l.extension,type:l.type})}),this._props.exporting=!1,this.resize(),this.render(),Promise.all(n.map(function(e,n,i){var o=s({extension:"",prefix:"",suffix:""},t,e,{layer:n,totalLayers:i.length});for(var a in o.save=!1!==(!1!==t.save&&e.save),o.filename=M(o),delete o.encoding,delete o.encodingQuality,o)void 0===o[a]&&delete o[a];var l=Promise.resolve({});if(o.save){var u,c,f,p,h=o.data;o.dataURL?(u=o.dataURL,void 0===(c=o)&&(c={}),l=new Promise(function(t){var e=u.indexOf(",");if(-1===e)return void t(new window.Blob);for(var n=u.slice(e+1),i=window.atob(n),o=u.slice(0,e),a=/data:([^;]+)/.exec(o),s=(a?a[1]:"")||void 0,l=new ArrayBuffer(i.length),c=new Uint8Array(l),f=0;f<i.length;f++)c[f]=i.charCodeAt(f);t(new window.Blob([l],{type:s}))}).then(function(t){return P(t,c)})):(void 0===(f=o)&&(f={}),p=Array.isArray(h)?h:[h],l=P(new window.Blob(p,{type:f.type||""}),f))}return l.then(function(t){return Object.assign({},o,t)})})).then(function(n){var i=n.filter(function(t){return t.save});if(i.length>0){var o,a=i.find(function(t){return t.outputName}),s=i.some(function(t){return t.client}),l=i.some(function(t){return t.stream});o=i.length>1?i.length:a?a.outputName+"/"+i[0].filename:""+i[0].filename;var u="";t.sequence?u=isFinite(e.props.totalFrames)?" (frame "+(t.frame+1)+" / "+e.props.totalFrames+")":" (frame "+t.frame+")":i.length>1&&(u=" files"),console.log("%c["+(s?"canvas-sketch-cli":"canvas-sketch")+"]%c "+(l?"Streaming into":"Exported")+" %c"+o+"%c"+u,"color: #8e8e8e;","color: initial;","font-weight: bold;","font-weight: initial;")}return"function"==typeof e.sketch.postExport&&e.sketch.postExport(),n})},z.prototype._wrapContextScale=function(t){this._preRender(),t(this.props),this._postRender()},z.prototype._preRender=function(){var t=this.props;v(t.context)&&!t.p5?(t.context.save(),!1!==this.settings.scaleContext&&t.context.scale(t.scaleX,t.scaleY)):t.p5&&t.p5.scale(t.scaleX/t.pixelRatio,t.scaleY/t.pixelRatio)},z.prototype._postRender=function(){var t=this.props;v(t.context)&&!t.p5&&t.context.restore(),t.gl&&!1!==this.settings.flush&&!t.p5&&t.gl.flush()},z.prototype.tick=function(){this.sketch&&"function"==typeof this.sketch.tick&&(this._preRender(),this.sketch.tick(this.props),this._postRender())},z.prototype.render=function(){return this.props.p5?(this._lastRedrawResult=void 0,this.props.p5.redraw(),this._lastRedrawResult):this.submitDrawCall()},z.prototype.submitDrawCall=function(){if(this.sketch){var t,e=this.props;return this._preRender(),"function"==typeof this.sketch?t=this.sketch(e):"function"==typeof this.sketch.render&&(t=this.sketch.render(e)),this._postRender(),t}},z.prototype.update=function(t){var e=this;void 0===t&&(t={});var n=["animate"];Object.keys(t).forEach(function(t){if(n.indexOf(t)>=0)throw Error("Sorry, the { "+t+" } option is not yet supported with update().")});var i=this._settings.canvas,o=this._settings.context;for(var a in t){var s=t[a];void 0!==s&&(e._settings[a]=s)}var l=Object.assign({},this._settings,t);if("time"in t&&"frame"in t)throw Error("You should specify { time } or { frame } but not both");if("time"in t?delete l.frame:"frame"in t&&delete l.time,"duration"in t&&"totalFrames"in t)throw Error("You should specify { duration } or { totalFrames } but not both");"duration"in t?delete l.totalFrames:"totalFrames"in t&&delete l.duration,"data"in t&&(this._props.data=t.data);var u=this.getTimeProps(l);if(Object.assign(this._props,u),i!==this._settings.canvas||o!==this._settings.context){var c=F(this._settings),f=c.canvas,p=c.context;this.props.canvas=f,this.props.context=p,this._setupGLKey(),this._appendCanvasIfNeeded()}return t.p5&&"function"!=typeof t.p5&&(this.props.p5=t.p5,this.props.p5.draw=function(){e._isP5Resizing||(e._lastRedrawResult=e.submitDrawCall())}),"playing"in t&&(t.playing?this.play():this.pause()),j(this._settings),this.resize(),this.render(),this.props},z.prototype.resize=function(){var t=this._getSizeProps(),e=this.settings,n=this.props,i=function(t,e){var n,i,o,a,s,l,u,c,f,p,v=d(),m=e.dimensions,y=!!e.dimensions&&!!("string"==typeof e.dimensions||Array.isArray(e.dimensions)&&e.dimensions.length>=2),_=t.exporting,w=!!y&&!1!==e.scaleToFit,x=!!_||!y||e.scaleToView;v||(w=x=!1);var k=e.units,E="number"==typeof e.pixelsPerInch&&isFinite(e.pixelsPerInch)?e.pixelsPerInch:72,C=h(e.bleed,0),A=v?window.devicePixelRatio:1,P=x?A:1;"number"==typeof e.pixelRatio&&isFinite(e.pixelRatio)?(u=e.pixelRatio,c=h(e.exportPixelRatio,u)):y?(u=P,c=h(e.exportPixelRatio,1)):(u=A,c=h(e.exportPixelRatio,u)),"number"==typeof e.maxPixelRatio&&isFinite(e.maxPixelRatio)&&(u=Math.min(e.maxPixelRatio,u)),_&&(u=c);var M=function(t,e){if(!d())return[300,150];var n=e.parent||window;if(n===window||n===document||n===document.body)return[window.innerWidth,window.innerHeight];var i=n.getBoundingClientRect();return[i.width,i.height]}(0,e),S=M[0],T=M[1];if(y){var j=function(t,e,n){if(void 0===e&&(e="px"),void 0===n&&(n=72),"string"!=typeof t)return t;var i=t.toLowerCase();if(!(i in O))throw Error('The dimension preset "'+t+'" is not supported or could not be found; try using a4, a3, postcard, letter, etc.');var o=O[i];return o.dimensions.map(function(t){return I(t,o.units,e,n)})}(m,k,E),V=Math.max(j[0],j[1]),D=Math.min(j[0],j[1]);if(e.orientation){var L="landscape"===e.orientation;n=L?V:D,i=L?D:V}else n=j[0],i=j[1];f=n,p=i,n+=2*C,i+=2*C}else n=S,i=T,f=n,p=i;var R=n,B=i;if(y&&k&&(R=I(n,k,"px",E),B=I(i,k,"px",E)),o=Math.round(R),a=Math.round(B),w&&!_&&y){var F=n/i,z=h(e.scaleToFitPadding,40),U=Math.round(S-2*z),N=Math.round(T-2*z);(o>U||a>N)&&(S/T>F?o=Math.round((a=N)*F):a=Math.round((o=U)/F))}var q=(s=x?Math.round(u*o):Math.round(u*R))/n,H=(l=x?Math.round(u*a):Math.round(u*B))/i;return{bleed:C,pixelRatio:u,width:n,height:i,dimensions:[n,i],units:k||"px",scaleX:q,scaleY:H,pixelsPerInch:E,viewportWidth:x?Math.round(o):Math.round(R),viewportHeight:x?Math.round(a):Math.round(B),canvasWidth:s,canvasHeight:l,trimWidth:f,trimHeight:p,styleWidth:o,styleHeight:a}}(n,e);Object.assign(this._props,i);var o=this.props,a=o.pixelRatio,s=o.canvasWidth,l=o.canvasHeight,u=o.styleWidth,c=o.styleHeight,f=this.props.canvas;f&&!1!==e.resizeCanvas&&(n.p5?(f.width!==s||f.height!==l)&&(this._isP5Resizing=!0,n.p5.pixelDensity(a),n.p5.resizeCanvas(s/a,l/a,!1),this._isP5Resizing=!1):(f.width!==s&&(f.width=s),f.height!==l&&(f.height=l)),d()&&!1!==e.styleCanvas&&(f.style.width=u+"px",f.style.height=c+"px"));var p=!_(t,this._getSizeProps());return p&&this._sizeChanged(),p},z.prototype._sizeChanged=function(){this.sketch&&"function"==typeof this.sketch.resize&&this.sketch.resize(this.props)},z.prototype.animate=function(){if(this.props.playing){if(!d())return void console.error("[canvas-sketch] WARN: Animation in Node.js is not yet supported");this._raf=window.requestAnimationFrame(this._animateHandler);var t=c(),e=1e3/this.props.fps,n=t-this._lastTime,i=this.props.duration,o="number"==typeof i&&isFinite(i),a=!0,s=this.settings.playbackRate;"fixed"===s?n=e:"throttle"===s?n>e?(t-=n%e,this._lastTime=t):a=!1:this._lastTime=t;var l=n/1e3,u=this.props.time+l*this.props.timeScale;u<0&&o&&(u=i+u);var f=!1,p=!1,h=!1!==this.settings.loop;if(o&&u>=i&&(h?(a=!0,u%=i,p=!0):(a=!1,u=i,f=!0),this._signalEnd()),a){this.props.deltaTime=l,this.props.time=u,this.props.playhead=this._computePlayhead(u,i);var v=this.props.frame;this.props.frame=this._computeCurrentFrame(),p&&this._signalBegin(),v!==this.props.frame&&this.tick(),this.render(),this.props.deltaTime=0}f&&this.pause()}},z.prototype.dispatch=function(t){if("function"!=typeof t)throw Error("must pass function into dispatch()");t(this.props),this.render()},z.prototype.mount=function(){this._appendCanvasIfNeeded()},z.prototype.unmount=function(){d()&&(window.removeEventListener("resize",this._resizeHandler),this._keyboardShortcuts.detach()),this.props.canvas.parentElement&&this.props.canvas.parentElement.removeChild(this.props.canvas)},z.prototype._appendCanvasIfNeeded=function(){d()&&!1!==this.settings.parent&&this.props.canvas&&!this.props.canvas.parentElement&&(this.settings.parent||document.body).appendChild(this.props.canvas)},z.prototype._setupGLKey=function(){if(this.props.context){var t;(t=this.props.context)&&"function"==typeof t.clear&&"function"==typeof t.clearColor&&"function"==typeof t.bufferData?this._props.gl=this.props.context:delete this._props.gl}},z.prototype.getTimeProps=function(t){void 0===t&&(t={});var e=t.duration,n=t.totalFrames,i=h(t.timeScale,1),o=h(t.fps,24),a="number"==typeof e&&isFinite(e),s="number"==typeof n&&isFinite(n),l=a?Math.floor(o*e):void 0,u=s?n/o:void 0;if(a&&s&&l!==n)throw Error("You should specify either duration or totalFrames, but not both. Or, they must match exactly.");void 0===t.dimensions&&void 0!==t.units&&console.warn("You've specified a { units } setting but no { dimension }, so the units will be ignored."),n=h(n,l,1/0),e=h(e,u,1/0);var c=t.time,f=t.frame,p="number"==typeof c&&isFinite(c),d="number"==typeof f&&isFinite(f),v=0,m=0,y=0;if(p&&d)throw Error("You should specify either start frame or time, but not both.");return p?(v=c,y=this._computePlayhead(v,e),m=this._computeFrame(y,v,n,o)):d&&(v=(m=f)/o,y=this._computePlayhead(v,e)),{playhead:y,time:v,frame:m,duration:e,totalFrames:n,fps:o,timeScale:i}},z.prototype.setup=function(t){var e=this;if(void 0===t&&(t={}),this.sketch)throw Error("Multiple setup() calls not yet supported.");this._settings=Object.assign({},t,this._settings),j(this._settings);var n=F(this._settings),i=n.context,o=n.canvas,a=this.getTimeProps(this._settings);this._props=Object.assign({},a,{canvas:o,context:i,deltaTime:0,started:!1,exporting:!1,playing:!1,recording:!1,settings:this.settings,data:this.settings.data,render:function(){return e.render()},togglePlay:function(){return e.togglePlay()},dispatch:function(t){return e.dispatch(t)},tick:function(){return e.tick()},resize:function(){return e.resize()},update:function(t){return e.update(t)},exportFrame:function(t){return e.exportFrame(t)},record:function(){return e.record()},play:function(){return e.play()},pause:function(){return e.pause()},stop:function(){return e.stop()}}),this._setupGLKey(),this.resize()},z.prototype.loadAndRun=function(t,e){var n=this;return this.load(t,e).then(function(){return n.run(),n})},z.prototype.unload=function(){var t=this;this.pause(),this.sketch&&("function"==typeof this.sketch.unload&&this._wrapContextScale(function(e){return t.sketch.unload(e)}),this._sketch=null)},z.prototype.destroy=function(){this.unload(),this.unmount()},z.prototype.load=function(t,e){var n=this;if("function"!=typeof t)throw Error("The function must take in a function as the first parameter. Example:\n  canvasSketcher(() => { ... }, settings)");this.sketch&&this.unload(),void 0!==e&&this.update(e),this._preRender();var i=Promise.resolve();if(this.settings.p5){if(!d())throw Error("[canvas-sketch] ERROR: Using p5.js in Node.js is not supported");i=new Promise(function(t){var e,i=n.settings.p5;i.p5&&(e=i.preload,i=i.p5);var o=function(i){e&&(i.preload=function(){return e(i)}),i.setup=function(){var e=n.props,o="webgl"===n.settings.context,a=o?i.WEBGL:i.P2D;i.noLoop(),i.pixelDensity(e.pixelRatio),i.createCanvas(e.viewportWidth,e.viewportHeight,a),o&&n.settings.attributes&&i.setAttributes(n.settings.attributes),n.update({p5:i,canvas:i.canvas,context:i._renderer.drawingContext}),t()}};if("function"==typeof i)new i(o);else{if("function"!=typeof window.createCanvas)throw Error("{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?\nnew p5(); // <-- attaches to global scope");o(window)}})}return i.then(function(){var e=t(n.props);return f(e)||(e=Promise.resolve(e)),e}).then(function(t){return t||(t={}),n._sketch=t,d()&&(n._keyboardShortcuts.attach(),window.addEventListener("resize",n._resizeHandler)),n._postRender(),n._sizeChanged(),n}).catch(function(t){throw console.warn("Could not start sketch, the async loading function rejected with an error:\n    Error: "+t.message),t})},Object.defineProperties(z.prototype,U);var N="hot-id-cache",q=[];function H(t,e){if(void 0===e&&(e={}),e.p5){if(e.canvas||e.context&&"string"!=typeof e.context)throw Error('In { p5 } mode, you can\'t pass your own canvas or context, unless the context is a "webgl" or "2d" string');var n,i,o="string"==typeof e.context&&e.context;e=Object.assign({},e,{canvas:!1,context:o})}var a=(n=p())&&n.hot;a&&(i=h(e.id,"$__DEFAULT_CANVAS_SKETCH_ID__$"));var s=a&&"string"==typeof i;s&&q.includes(i)&&(console.warn("Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. ",i),s=!1);var l=Promise.resolve();if(s){q.push(i);var u=function(t){var e=p();if(e)return e[N]=e[N]||{},e[N][t]}(i);if(u){var c=function(){var t,n=(t=u.manager,e.animate?{time:t.props.time}:void 0);return u.manager.destroy(),n};l=u.load.then(c).catch(c)}}return l.then(function(n){var o,a,l,u,c=new z;return t?(e=Object.assign({},e,n),c.setup(e),c.mount(),u=c.loadAndRun(t)):u=Promise.resolve(c),s&&(o=i,a={load:u,manager:c},(l=p())&&(l[N]=l[N]||{},l[N][o]=a)),u})}return H.canvasSketch=H,H.PaperSizes=O,H}();var u=a("2aVrh"),c=a("igh2p");a("f1q41");var c=a("igh2p");c.lerp;var f=c.mapRange,p=a("4vRa3");p.blend;var h=p.RGBAToHex;({random:a("2aVrh"),math:a("igh2p"),penplot:a("1YuGF"),geometry:a("9HFYU"),shader:a("5OLQM"),color:a("4vRa3")}).color;var u=a("2aVrh"),d=u.noise1D,v={};(function(t){class e{constructor(t){this.controller_=t}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(t){this.controller_.viewProps.set("hidden",t)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class n{constructor(t){this.target=t}}class i extends n{constructor(t,e,n,i){super(t),this.value=e,this.presetKey=n,this.last=null==i||i}}class o extends n{constructor(t,e,n){super(t),this.value=e,this.presetKey=n}}class a extends n{constructor(t,e){super(t),this.expanded=e}}class s extends n{constructor(t,e){super(t),this.index=e}}function l(t){return null==t}function u(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function c(t,e){let n=t;do{let t=Object.getOwnPropertyDescriptor(n,e);if(t&&(void 0!==t.set||!0===t.writable))return!0;n=Object.getPrototypeOf(n)}while(null!==n)return!1}let f={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class p{static alreadyDisposed(){return new p({type:"alreadydisposed"})}static notBindable(){return new p({type:"notbindable"})}static propertyNotFound(t){return new p({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new p({type:"shouldneverhappen"})}constructor(t){var e;this.message=null!=(e=f[t.type](t.context))?e:"Unexpected error",this.name=this.constructor.name,this.stack=Error(this.message).stack,this.type=t.type}}class h{constructor(t,e,n){this.obj_=t,this.key_=e,this.presetKey_=null!=n?n:e}static isBindable(t){return null!==t&&("object"==typeof t||"function"==typeof t)}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(t){this.obj_[this.key_]=t}writeProperty(t,e){let n=this.read();if(!h.isBindable(n))throw p.notBindable();if(!(t in n))throw p.propertyNotFound(t);n[t]=e}}class d extends e{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get title(){var t;return null!=(t=this.controller_.valueController.props.get("title"))?t:""}set title(t){this.controller_.valueController.props.set("title",t)}on(t,e){let i=e.bind(this);return this.controller_.valueController.emitter.on(t,()=>{i(new n(this))}),this}}class v{constructor(){this.observers_={}}on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){let n=this.observers_[t];return n&&(this.observers_[t]=n.filter(t=>t.handler!==e)),this}emit(t,e){let n=this.observers_[t];n&&n.forEach(t=>{t.handler(e)})}}function m(t){return(e,n)=>"tp-"+t+"v"+(e?`_${e}`:"")+(n?`-${n}`:"")}function y(t){return t.rawValue}function _(t,e){t.emitter.on("change",t=>e(y(t))),e(t.rawValue)}function w(t,e,n){_(t.value(e),n)}function x(t,e){return n=>{n?t.classList.add(e):t.classList.remove(e)}}function k(t,e){_(t,t=>{e.textContent=null!=t?t:""})}let E=m("btn");class C{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(E()),e.viewProps.bindClassModifiers(this.element);let n=t.createElement("button");n.classList.add(E("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;let i=t.createElement("div");i.classList.add(E("t")),k(e.props.value("title"),i),this.buttonElement.appendChild(i)}}class A{constructor(t,e){this.emitter=new v,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new C(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class P{constructor(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!=(n=null==e?void 0:e.equals)?n:(t,e)=>t===e,this.emitter=new v,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){let n=null!=e?e:{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(t):t,o=this.rawValue_;(!this.equals_(o,i)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:n,previousRawValue:o,rawValue:i,sender:this}))}}class M{constructor(t){this.emitter=new v,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){let n=null!=e?e:{forceEmit:!1,last:!0},i=this.value_;(i!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,previousRawValue:i,rawValue:this.value_,sender:this}))}}function S(t,e){let n=null==e?void 0:e.constraint,i=null==e?void 0:e.equals;return n||i?new P(t,e):new M(t)}class T{constructor(t){for(let e in this.emitter=new v,this.valMap_=t,this.valMap_)this.valMap_[e].emitter.on("change",()=>{this.emitter.emit("change",{key:e,sender:this})})}static createCore(t){return Object.keys(t).reduce((e,n)=>Object.assign(e,{[n]:S(t[n])}),{})}static fromObject(t){return new T(this.createCore(t))}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}function j(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};let i=t(n);return void 0!==i?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function O(t){return{custom:e=>j(e)(t),boolean:j(t=>"boolean"==typeof t?t:void 0)(t),number:j(t=>"number"==typeof t?t:void 0)(t),string:j(t=>"string"==typeof t?t:void 0)(t),function:j(t=>"function"==typeof t?t:void 0)(t),constant:e=>j(t=>t===e?e:void 0)(t),raw:j(t=>t)(t),object:e=>j(t=>{if(null!==t&&"object"==typeof t)return Object.keys(e).reduce((n,i)=>{if(void 0===n)return;let o=(0,e[i])(t[i]);return o.succeeded?Object.assign(Object.assign({},n),{[i]:o.value}):void 0},{})})(t),array:e=>j(t=>{if(Array.isArray(t))return t.reduce((t,n)=>{if(void 0===t)return;let i=e(n);if(i.succeeded&&void 0!==i.value)return[...t,i.value]},[])})(t)}}let V={optional:O(!0),required:O(!1)};function D(t,e){let n=V.required.object(e)(t);return n.succeeded?n.value:void 0}function L(t){console.warn(`Missing '${t.key}' of ${t.target} in ${t.place}. Please rebuild plugins with the latest core package.`)}class R{constructor(t){this.value_=t}static create(t){return[new R(t),(e,n)=>{t.setRawValue(e,n)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}}let B=m("");function I(t,e){return x(t,B(void 0,e))}class F extends T{constructor(t){var e;super(t),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=R.create(S(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),null==(e=this.get("parent"))||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(t){var e,n,i;let o=null!=t?t:{};return new F(T.createCore({disabled:null!=(e=o.disabled)&&e,disposed:!1,hidden:null!=(n=o.hidden)&&n,parent:null!=(i=o.parent)?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(t){_(this.globalDisabled_,I(t,"disabled")),w(this,"hidden",I(t,"hidden"))}bindDisabled(t){_(this.globalDisabled_,e=>{t.disabled=e})}bindTabIndex(t){_(this.globalDisabled_,e=>{t.tabIndex=e?-1:0})}handleDispose(t){this.value("disposed").emitter.on("change",e=>{e&&t()})}getGlobalDisabled_(){let t=this.get("parent");return!!t&&t.globalDisabled.rawValue||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(t){var e;let n=t.previousRawValue;null==n||n.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),null==(e=this.get("parent"))||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}let z=m(""),U={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class N{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;let e=this.view.element;this.blade.value("positions").emitter.on("change",()=>{["veryfirst","first","last","verylast"].forEach(t=>{e.classList.remove(z(void 0,U[t]))}),this.blade.get("positions").forEach(t=>{e.classList.add(z(void 0,U[t]))})}),this.viewProps.handleDispose(()=>{e&&e.parentElement&&e.parentElement.removeChild(e)})}get parent(){return this.parent_}set parent(t){if(this.parent_=t,!("parent"in this.viewProps.valMap_))return void L({key:"parent",target:F.name,place:"BladeController.parent"});this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}}let q="http://www.w3.org/2000/svg";function H(t){t.offsetHeight}function $(t){return void 0!==t.ontouchstart}let G={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function K(t,e){let n=t.createElementNS(q,"svg");return n.innerHTML=G[e],n}function W(t,e,n){t.insertBefore(e,t.children[n])}function Y(t){t.parentElement&&t.parentElement.removeChild(t)}function Q(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function J(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}let X=m("lbl");class Z{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(X()),e.viewProps.bindClassModifiers(this.element);let n=t.createElement("div");n.classList.add(X("l")),w(e.props,"label",e=>{if(l(e))this.element.classList.add(X(void 0,"nol"));else{for(this.element.classList.remove(X(void 0,"nol"));n.childNodes.length>0;)n.removeChild(n.childNodes[0]);n.appendChild(function(t,e){let n=t.createDocumentFragment();return e.split("\n").map(e=>t.createTextNode(e)).forEach((e,i)=>{i>0&&n.appendChild(t.createElement("br")),n.appendChild(e)}),n}(t,e))}}),this.element.appendChild(n),this.labelElement=n;let i=t.createElement("div");i.classList.add(X("v")),this.element.appendChild(i),this.valueElement=i}}class tt extends N{constructor(t,e){let n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{view:new Z(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}let te={id:"button",type:"blade",accept(t){let e=D(t,{title:V.required.string,view:V.required.constant("button"),label:V.optional.string});return e?{params:e}:null},controller:t=>new tt(t.document,{blade:t.blade,props:T.fromObject({label:t.params.label}),valueController:new A(t.document,{props:T.fromObject({title:t.params.title}),viewProps:t.viewProps})}),api:t=>t.controller instanceof tt&&t.controller.valueController instanceof A?new d(t.controller):null};class tr extends N{constructor(t){super(t),this.value=t.value}}function tn(){return new T({positions:S([],{equals:u})})}class ti extends T{constructor(t){super(t)}static create(t){return new ti(T.createCore({completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null}))}get styleExpanded(){var t;return null!=(t=this.get("temporaryExpanded"))?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";let t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!l(t)?`${t}px`:"auto"}bindExpandedClass(t,e){let n=()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)};w(this,"expanded",n),w(this,"temporaryExpanded",n)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function to(t,e){e.style.height=t.styleHeight}function ta(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),l(t.get("expandedHeight"))){let n=function(t,e){let n=0,i=e.style.transition;return e.style.transition="none",t.set("expandedHeight",null),t.set("temporaryExpanded",!0),H(e),n=e.clientHeight,t.set("temporaryExpanded",null),H(e),e.style.transition=i,n}(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),H(e)}),t.emitter.on("change",()=>{to(t,e)}),to(t,e),e.addEventListener("transitionend",e=>{"height"===e.propertyName&&t.cleanUpTransition()})}class ts extends e{constructor(t,e){super(t),this.rackApi_=e}}class tl{constructor(t){this.emitter=new v,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(let e of this.allItems())if(t(e))return e;return null}includes(t){return this.cache_.has(t)}add(t,e){if(this.includes(t))throw p.shouldNeverHappen();let n=void 0!==e?e:this.items_.length;this.items_.splice(n,0,t),this.cache_.add(t);let i=this.extract_(t);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(t=>{this.cache_.add(t)})),this.emitter.emit("add",{index:n,item:t,root:this,target:this})}remove(t){let e=this.items_.indexOf(t);if(e<0)return;this.items_.splice(e,1),this.cache_.delete(t);let n=this.extract_(t);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}class tu extends e{constructor(t){super(t),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new v,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){let n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(t){let e=t.sender.target.read();this.emitter_.emit("change",{event:new i(this,e,this.controller_.binding.target.presetKey,t.options.last)})}}class tc extends tt{constructor(t,e){super(t,e),this.binding=e.binding}}class tf extends e{constructor(t){super(t),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new v,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){let n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(t){let e=t.sender.target.read();this.emitter_.emit("update",{event:new o(this,e,this.controller_.binding.target.presetKey)})}}class tp extends tt{constructor(t,e){super(t,e),this.binding=e.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}}function th(t){return t instanceof tm?t.apiSet_:t instanceof ts?t.rackApi_.apiSet_:null}function td(t,e){let n=t.find(t=>t.controller_===e);if(!n)throw p.shouldNeverHappen();return n}function tv(t,e,n){if(!h.isBindable(t))throw p.notBindable();return new h(t,e,n)}class tm extends e{constructor(t,e){super(t),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new v,this.apiSet_=new tl(th),this.pool_=e;let n=this.controller_.rack;n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),n.emitter.on("inputchange",this.onRackInputChange_),n.emitter.on("monitorupdate",this.onRackMonitorUpdate_),n.children.forEach(t=>{this.setUpApi_(t)})}get children(){return this.controller_.rack.children.map(t=>td(this.apiSet_,t))}addInput(t,e,n){let i=null!=n?n:{},o=this.controller_.view.element.ownerDocument,a=new tu(this.pool_.createInput(o,tv(t,e,i.presetKey),i));return this.add(a,i.index)}addMonitor(t,e,n){let i=null!=n?n:{},o=this.controller_.view.element.ownerDocument,a=new tf(this.pool_.createMonitor(o,tv(t,e),i));return this.add(a,i.index)}addFolder(t){return this.addBlade(Object.assign(Object.assign({},t),{view:"folder"}))}addButton(t){return this.addBlade(Object.assign(Object.assign({},t),{view:"button"}))}addSeparator(t){return this.addBlade(Object.assign(Object.assign({},null!=t?t:{}),{view:"separator"}))}addTab(t){return this.addBlade(Object.assign(Object.assign({},t),{view:"tab"}))}add(t,e){this.controller_.rack.add(t.controller_,e);let n=this.apiSet_.find(e=>e.controller_===t.controller_);return n&&this.apiSet_.remove(n),this.apiSet_.add(t),t}remove(t){this.controller_.rack.remove(t.controller_)}addBlade(t){let e=this.controller_.view.element.ownerDocument,n=this.pool_.createBlade(e,t),i=this.pool_.createBladeApi(n);return this.add(i,t.index)}on(t,e){let n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}setUpApi_(t){this.apiSet_.find(e=>e.controller_===t)||this.apiSet_.add(this.pool_.createBladeApi(t))}onRackAdd_(t){this.setUpApi_(t.bladeController)}onRackRemove_(t){if(t.isRoot){let e=td(this.apiSet_,t.bladeController);this.apiSet_.remove(e)}}onRackInputChange_(t){let e=t.bladeController;if(e instanceof tc){let n=td(this.apiSet_,e),o=e.binding;this.emitter_.emit("change",{event:new i(n,o.target.read(),o.target.presetKey,t.options.last)})}else if(e instanceof tr){let n=td(this.apiSet_,e);this.emitter_.emit("change",{event:new i(n,e.value.rawValue,void 0,t.options.last)})}}onRackMonitorUpdate_(t){if(!(t.bladeController instanceof tp))throw p.shouldNeverHappen();let e=td(this.apiSet_,t.bladeController),n=t.bladeController.binding;this.emitter_.emit("update",{event:new o(e,n.target.read(),n.target.presetKey)})}}class tg extends ts{constructor(t,e){super(t,new tm(t.rackController,e)),this.emitter_=new v,this.controller_.foldable.value("expanded").emitter.on("change",t=>{this.emitter_.emit("fold",{event:new a(this,t.sender.rawValue)})}),this.rackApi_.on("change",t=>{this.emitter_.emit("change",{event:t})}),this.rackApi_.on("update",t=>{this.emitter_.emit("update",{event:t})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(t){this.controller_.foldable.set("expanded",t)}get title(){return this.controller_.props.get("title")}set title(t){this.controller_.props.set("title",t)}get children(){return this.rackApi_.children}addInput(t,e,n){return this.rackApi_.addInput(t,e,n)}addMonitor(t,e,n){return this.rackApi_.addMonitor(t,e,n)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){return this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,e){let n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}}class tb extends N{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}}class ty{constructor(t,e){let n=m(e.viewName);this.element=t.createElement("div"),this.element.classList.add(n()),e.viewProps.bindClassModifiers(this.element)}}function t_(t){return t instanceof tk?t.rack:t instanceof tb?t.rackController.rack:null}function tw(t){let e=t_(t);return e?e.bcSet_:null}class tx{constructor(t){var e,n;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new v,this.blade_=null!=(e=t.blade)?e:null,null==(n=this.blade_)||n.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=t.viewProps,this.bcSet_=new tl(tw),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,e){var n;null==(n=t.parent)||n.remove(t),c(t,"parent")?t.parent=this:(t.parent_=this,L({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(t,e)}remove(t){c(t,"parent")?t.parent=null:(t.parent_=null,L({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(t)}find(t){return this.bcSet_.allItems().filter(e=>e instanceof t)}onSetAdd_(t){this.updatePositions_();let e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,isRoot:e,sender:this}),!e)return;let n=t.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),n instanceof tc)n.binding.emitter.on("change",this.onChildInputChange_);else if(n instanceof tp)n.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(n instanceof tr)n.value.emitter.on("change",this.onChildValueChange_);else{let t=t_(n);if(t){let e=t.emitter;e.on("layout",this.onDescendantLayout_),e.on("inputchange",this.onDescendantInputChange_),e.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(t){this.updatePositions_();let e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,isRoot:e,sender:this}),!e)return;let n=t.item;if(n instanceof tc)n.binding.emitter.off("change",this.onChildInputChange_);else if(n instanceof tp)n.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(n instanceof tr)n.value.emitter.off("change",this.onChildValueChange_);else{let t=t_(n);if(t){let e=t.emitter;e.off("layout",this.onDescendantLayout_),e.off("inputchange",this.onDescendantInputChange_),e.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){let t=this.bcSet_.items.filter(t=>!t.viewProps.get("hidden")),e=t[0],n=t[t.length-1];this.bcSet_.items.forEach(t=>{let i=[];t===e&&(i.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&i.push("veryfirst")),t===n&&(i.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&i.push("verylast")),t.blade.set("positions",i)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(t=>t.viewProps.get("disposed")).forEach(t=>{this.bcSet_.remove(t)})}onChildInputChange_(t){let e=function(t,e){for(let n=0;n<t.length;n++){let i=t[n];if(i instanceof tc&&i.binding===e)return i}return null}(this.find(tc),t.sender);if(!e)throw p.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onChildMonitorUpdate_(t){let e=function(t,e){for(let n=0;n<t.length;n++){let i=t[n];if(i instanceof tp&&i.binding===e)return i}return null}(this.find(tp),t.sender);if(!e)throw p.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:e,sender:this})}onChildValueChange_(t){let e=function(t,e){for(let n=0;n<t.length;n++){let i=t[n];if(i instanceof tr&&i.value===e)return i}return null}(this.find(tr),t.sender);if(!e)throw p.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onDescendantLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(t){this.emitter.emit("inputchange",{bladeController:t.bladeController,options:t.options,sender:this})}onDescendantMonitorUpdate_(t){this.emitter.emit("monitorupdate",{bladeController:t.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class tk extends N{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new ty(t,{viewName:"brk",viewProps:e.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);let n=new tx({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let t=this.rack.children.length-1;t>=0;t--)this.rack.children[t].viewProps.set("disposed",!0)})}onRackAdd_(t){t.isRoot&&W(this.view.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.isRoot&&Y(t.bladeController.view.element)}}let tE=m("cnt");class tC{constructor(t,e){var n;this.className_=m(null!=(n=e.viewName)?n:"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),tE()),e.viewProps.bindClassModifiers(this.element),this.foldable_=e.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),w(this.foldable_,"completed",x(this.element,this.className_(void 0,"cpl")));let i=t.createElement("button");i.classList.add(this.className_("b")),w(e.props,"title",t=>{l(t)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;let o=t.createElement("div");o.classList.add(this.className_("i")),this.element.appendChild(o);let a=t.createElement("div");a.classList.add(this.className_("t")),k(e.props.value("title"),a),this.buttonElement.appendChild(a),this.titleElement=a;let s=t.createElement("div");s.classList.add(this.className_("m")),this.buttonElement.appendChild(s);let u=e.containerElement;u.classList.add(this.className_("c")),this.element.appendChild(u),this.containerElement=u}}class tA extends tb{constructor(t,e){var n;let i=ti.create(null==(n=e.expanded)||n),o=new tk(t,{blade:e.blade,root:e.root,viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:o,view:new tC(t,{containerElement:o.view.element,foldable:i,props:e.props,viewName:e.root?"rot":void 0,viewProps:e.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=e.props,this.foldable=i,ta(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}let tP={id:"folder",type:"blade",accept(t){let e=D(t,{title:V.required.string,view:V.required.constant("folder"),expanded:V.optional.boolean});return e?{params:e}:null},controller:t=>new tA(t.document,{blade:t.blade,expanded:t.params.expanded,props:T.fromObject({title:t.params.title}),viewProps:t.viewProps}),api:t=>t.controller instanceof tA?new tg(t.controller,t.pool):null};class tM extends tr{constructor(t,e){let n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{value:e.valueController.value,view:new Z(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class tS extends e{}let tT=m("spr");class tj{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(tT()),e.viewProps.bindClassModifiers(this.element);let n=t.createElement("hr");n.classList.add(tT("r")),this.element.appendChild(n)}}class tO extends N{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new tj(t,{viewProps:e.viewProps})}))}}let tV={id:"separator",type:"blade",accept(t){let e=D(t,{view:V.required.constant("separator")});return e?{params:e}:null},controller:t=>new tO(t.document,{blade:t.blade,viewProps:t.viewProps}),api:t=>t.controller instanceof tO?new tS(t.controller):null},tD=m("tbi");class tL{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(tD()),e.viewProps.bindClassModifiers(this.element),w(e.props,"selected",t=>{t?this.element.classList.add(tD(void 0,"sel")):this.element.classList.remove(tD(void 0,"sel"))});let n=t.createElement("button");n.classList.add(tD("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;let i=t.createElement("div");i.classList.add(tD("t")),k(e.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class tR{constructor(t,e){this.emitter=new v,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new tL(t,{props:e.props,viewProps:e.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class tB{constructor(t,e){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new tR(t,{props:e.itemProps,viewProps:F.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new tk(t,{blade:tn(),viewProps:F.create()}),this.props=e.props,w(this.props,"selected",t=>{this.itemController.props.set("selected",t),this.contentController.viewProps.set("hidden",!t)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class tI{constructor(t,e){this.controller_=t,this.rackApi_=e}get title(){var t;return null!=(t=this.controller_.itemController.props.get("title"))?t:""}set title(t){this.controller_.itemController.props.set("title",t)}get selected(){return this.controller_.props.get("selected")}set selected(t){this.controller_.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addInput(t,e,n){return this.rackApi_.addInput(t,e,n)}addMonitor(t,e,n){return this.rackApi_.addMonitor(t,e,n)}addBlade(t){return this.rackApi_.addBlade(t)}}class tF extends ts{constructor(t,e){super(t,new tm(t.rackController,e)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new v,this.pageApiMap_=new Map,this.rackApi_.on("change",t=>{this.emitter_.emit("change",{event:t})}),this.rackApi_.on("update",t=>{this.emitter_.emit("update",{event:t})}),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(t=>{this.setUpPageApi_(t)})}get pages(){return this.controller_.pageSet.items.map(t=>{let e=this.pageApiMap_.get(t);if(!e)throw p.shouldNeverHappen();return e})}addPage(t){let e=new tB(this.controller_.view.element.ownerDocument,{itemProps:T.fromObject({selected:!1,title:t.title}),props:T.fromObject({selected:!1})});this.controller_.add(e,t.index);let n=this.pageApiMap_.get(e);if(!n)throw p.shouldNeverHappen();return n}removePage(t){this.controller_.remove(t)}on(t,e){let n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}setUpPageApi_(t){let e=this.rackApi_.apiSet_.find(e=>e.controller_===t.contentController);if(!e)throw p.shouldNeverHappen();let n=new tI(t,e);this.pageApiMap_.set(t,n)}onPageAdd_(t){this.setUpPageApi_(t.item)}onPageRemove_(t){if(!this.pageApiMap_.get(t.item))throw p.shouldNeverHappen();this.pageApiMap_.delete(t.item)}onSelect_(t){this.emitter_.emit("select",{event:new s(this,t.rawValue)})}}class tz{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=S(!0),this.selectedIndex=S(-1),this.items_=[]}add(t,e){let n=null!=e?e:this.items_.length;this.items_.splice(n,0,t),t.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(t){let e=this.items_.indexOf(t);e<0||(this.items_.splice(e,1),t.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(0===this.items_.length){this.selectedIndex.rawValue=-1,this.empty.rawValue=!0;return}let t=this.items_.findIndex(t=>t.rawValue);t<0?(this.items_.forEach((t,e)=>{t.rawValue=0===e}),this.selectedIndex.rawValue=0):(this.items_.forEach((e,n)=>{e.rawValue=n===t}),this.selectedIndex.rawValue=t),this.empty.rawValue=!1}onItemSelectedChange_(t){if(t.rawValue){let e=this.items_.findIndex(e=>e===t.sender);this.items_.forEach((t,n)=>{t.rawValue=n===e}),this.selectedIndex.rawValue=e}else this.keepSelection_()}}let tU=m("tab");class tN{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(tU(),tE()),e.viewProps.bindClassModifiers(this.element),_(e.empty,x(this.element,tU(void 0,"nop")));let n=t.createElement("div");n.classList.add(tU("t")),this.element.appendChild(n),this.itemsElement=n;let i=t.createElement("div");i.classList.add(tU("i")),this.element.appendChild(i);let o=e.contentsElement;o.classList.add(tU("c")),this.element.appendChild(o),this.contentsElement=o}}class tq extends tb{constructor(t,e){let n=new tk(t,{blade:e.blade,viewProps:e.viewProps}),i=new tz;super({blade:e.blade,rackController:n,view:new tN(t,{contentsElement:n.view.element,empty:i.empty,viewProps:e.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new tl(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=i}get pageSet(){return this.pageSet_}add(t,e){this.pageSet_.add(t,e)}remove(t){this.pageSet_.remove(this.pageSet_.items[t])}onPageAdd_(t){let e=t.item;W(this.view.itemsElement,e.itemController.view.element,t.index),e.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(e.contentController,t.index),this.tab.add(e.props.value("selected"))}onPageRemove_(t){let e=t.item;Y(e.itemController.view.element),e.itemController.viewProps.set("parent",null),this.rackController.rack.remove(e.contentController),this.tab.remove(e.props.value("selected"))}}let tH={id:"tab",type:"blade",accept(t){let e=D(t,{pages:V.required.array(V.required.object({title:V.required.string})),view:V.required.constant("tab")});return e&&0!==e.pages.length?{params:e}:null},controller(t){let e=new tq(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{let i=new tB(t.document,{itemProps:T.fromObject({selected:!1,title:n.title}),props:T.fromObject({selected:!1})});e.add(i)}),e},api:t=>t.controller instanceof tq?new tF(t.controller,t.pool):null};class t${constructor(){this.disabled=!1,this.emitter=new v}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class tG{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new v,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;let t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;let t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class tK{constructor(t){this.onValueChange_=this.onValueChange_.bind(this),this.reader=t.reader,this.writer=t.writer,this.emitter=new v,this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.target=t.target,this.read()}read(){let t=this.target.read();void 0!==t&&(this.value.rawValue=this.reader(t))}write_(t){this.writer(this.target,t)}onValueChange_(t){this.write_(t.rawValue),this.emitter.emit("change",{options:t.options,rawValue:t.rawValue,sender:this})}}function tW(t,e){for(;t.length<e;)t.push(void 0)}class tY{constructor(t){this.onTick_=this.onTick_.bind(this),this.reader_=t.reader,this.target=t.target,this.emitter=new v,this.value=t.value,this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){let t=this.target.read();if(void 0===t)return;let e=this.value.rawValue,n=this.reader_(t);this.value.rawValue=function(t,e){let n=[...function(t){let e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}(t),e];return n.length>t.length?n.splice(0,n.length-t.length):tW(n,t.length),n}(e,n),this.emitter.emit("update",{rawValue:n,sender:this})}onTick_(t){this.read()}}class tQ{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce((t,e)=>e.constrain(t),t)}}function tJ(t,e){if(t instanceof e)return t;if(t instanceof tQ){let n=t.constraints.reduce((t,n)=>t||(n instanceof e?n:null),null);if(n)return n}return null}class tX{constructor(t){this.values=T.fromObject({max:t.max,min:t.min})}constrain(t){let e=this.values.get("max");return Math.min(Math.max(t,this.values.get("min")),e)}}class tZ{constructor(t){this.values=T.fromObject({options:t})}get options(){return this.values.get("options")}constrain(t){let e=this.values.get("options");return 0===e.length||e.filter(e=>e.value===t).length>0?t:e[0].value}}class t0{constructor(t){this.values=T.fromObject({max:t.max,min:t.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(t){let e=this.values.get("max"),n=this.values.get("min"),i=t;return l(n)||(i=Math.max(i,n)),l(e)||(i=Math.min(i,e)),i}}class t1{constructor(t,e=0){this.step=t,this.origin=e}constrain(t){let e=this.origin%this.step,n=Math.round((t-e)/this.step);return e+n*this.step}}let t2=m("lst");class t5{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.element=t.createElement("div"),this.element.classList.add(t2()),e.viewProps.bindClassModifiers(this.element);let n=t.createElement("select");n.classList.add(t2("s")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;let i=t.createElement("div");i.classList.add(t2("m")),i.appendChild(K(t,"dropdown")),this.element.appendChild(i),e.value.emitter.on("change",this.onValueChange_),this.value_=e.value,w(this.props_,"options",e=>{Q(this.selectElement),e.forEach(e=>{let n=t.createElement("option");n.textContent=e.text,this.selectElement.appendChild(n)}),this.update_()})}update_(){let t=this.props_.get("options").map(t=>t.value);this.selectElement.selectedIndex=t.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class t3{constructor(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new t5(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){let e=t.currentTarget;this.value.rawValue=this.props.get("options")[e.selectedIndex].value}}let t6=m("pop");class t4{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(t6()),e.viewProps.bindClassModifiers(this.element),_(e.shows,x(this.element,t6(void 0,"v")))}}class t8{constructor(t,e){this.shows=S(!1),this.viewProps=e.viewProps,this.view=new t4(t,{shows:this.shows,viewProps:this.viewProps})}}let t7=m("txt");class t9{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(t7()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);let n=t.createElement("input");n.classList.add(t7("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){let t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class et{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new t9(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){let e=t.currentTarget.value,n=this.parser_(e);l(n)||(this.value.rawValue=n),this.view.refresh()}}function ee(t){return"false"!==t&&!!t}function er(t){return String(t)}class en{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}let ei={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class eo{constructor(t,e,n){this.left=e,this.operator=t,this.right=n}evaluate(){let t=ei[this.operator];if(!t)throw Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}let ea={"+":t=>t,"-":t=>-t,"~":t=>~t};class es{constructor(t,e){this.operator=t,this.expression=e}evaluate(){let t=ea[this.operator];if(!t)throw Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function el(t){return(e,n)=>{for(let i=0;i<t.length;i++){let o=t[i](e,n);if(""!==o)return o}return""}}function eu(t,e){var n;let i=t.substr(e).match(/^\s+/);return null!=(n=i&&i[0])?n:""}function ec(t,e){var n;let i=t.substr(e).match(/^[0-9]+/);return null!=(n=i&&i[0])?n:""}function ef(t,e){let n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";let i=function(t,e){let n=ec(t,e);if(""!==n)return n;let i=t.substr(e,1);if(e+=1,"-"!==i&&"+"!==i)return"";let o=ec(t,e);return""===o?"":i+o}(t,e);return""===i?"":n+i}function ep(t,e){let n=t.substr(e,1);if("0"===n)return n;let i=function(t,e){let n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}(t,e);return(e+=i.length,""===i)?"":i+ec(t,e)}let eh=el([function(t,e){let n=ep(t,e);if(e+=n.length,""===n)return"";let i=t.substr(e,1);if(e+=i.length,"."!==i)return"";let o=ec(t,e);return e+=o.length,n+i+o+ef(t,e)},function(t,e){let n=t.substr(e,1);if(e+=n.length,"."!==n)return"";let i=ec(t,e);return(e+=i.length,""===i)?"":n+i+ef(t,e)},function(t,e){let n=ep(t,e);return(e+=n.length,""===n)?"":n+ef(t,e)}]),ed=el([function(t,e){let n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";let i=function(t,e){var n;let i=t.substr(e).match(/^[01]+/);return null!=(n=i&&i[0])?n:""}(t,e);return""===i?"":n+i},function(t,e){let n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";let i=function(t,e){var n;let i=t.substr(e).match(/^[0-7]+/);return null!=(n=i&&i[0])?n:""}(t,e);return""===i?"":n+i},function(t,e){let n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";let i=function(t,e){var n;let i=t.substr(e).match(/^[0-9a-f]+/i);return null!=(n=i&&i[0])?n:""}(t,e);return""===i?"":n+i}]),ev=el([ed,eh]),em=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>(n,i)=>{let o=t(n,i);if(!o)return null;i=o.cursor;let a=o.evaluable;for(;;){let o=function(t,e,n){n+=eu(e,n).length;let i=t.filter(t=>e.startsWith(t,n))[0];return i?(n+=i.length,{cursor:n+=eu(e,n).length,operator:i}):null}(e,n,i);if(!o)break;let s=t(n,i=o.cursor);if(!s)return null;i=s.cursor,a=new eo(o.operator,a,s.evaluable)}return a?{cursor:i,evaluable:a}:null},function t(e,n){var i,o;let a=null!=(o=function(t,e){let n=ev(t,e);return(e+=n.length,""===n)?null:{evaluable:new en(n),cursor:e}}(e,i=n))?o:function(t,e){let n=t.substr(e,1);if(e+=n.length,"("!==n)return null;let i=eg(t,e);if(!i)return null;e=i.cursor,e+=eu(t,e).length;let o=t.substr(e,1);return(e+=o.length,")"!==o)?null:{evaluable:i.evaluable,cursor:e}}(e,i);if(a)return a;let s=e.substr(n,1);if(n+=s.length,"+"!==s&&"-"!==s&&"~"!==s)return null;let l=t(e,n);return l?{cursor:n=l.cursor,evaluable:new es(s,l.evaluable)}:null});function eg(t,e){return e+=eu(t,e).length,em(t,e)}function eb(t){var e;let n=function(t){let e=eg(t,0);return e&&e.cursor+eu(t,e.cursor).length===t.length?e.evaluable:null}(t);return null!=(e=null==n?void 0:n.evaluate())?e:null}function ey(t){if("number"==typeof t)return t;if("string"==typeof t){let e=eb(t);if(!l(e))return e}return 0}function e_(t){return String(t)}function ew(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}let ex=ew(0);function ek(t){return ex(t)+"%"}function eE(t){return String(t)}function eC(t){return t}function eA({primary:t,secondary:e,forward:n,backward:i}){let o=!1;function a(t){o||(o=!0,t(),o=!1)}t.emitter.on("change",i=>{a(()=>{e.setRawValue(n(t,e),i.options)})}),e.emitter.on("change",o=>{a(()=>{t.setRawValue(i(t,e),o.options)}),a(()=>{e.setRawValue(n(t,e),o.options)})}),a(()=>{e.setRawValue(n(t,e),{forceEmit:!1,last:!0})})}function eP(t,e){let n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function eM(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function eS(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function eT(t){return"ArrowUp"===t||"ArrowDown"===t||"ArrowLeft"===t||"ArrowRight"===t}function ej(t,e){var n,i;let o=e.ownerDocument.defaultView,a=e.getBoundingClientRect();return{x:t.pageX-((null!=(n=o&&o.scrollX)?n:0)+a.left),y:t.pageY-((null!=(i=o&&o.scrollY)?i:0)+a.top)}}class eO{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new v,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){let e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null==(e=t.currentTarget)||e.focus();let n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(ej(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(ej(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){let e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(ej(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();let e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){let e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;let n=null!=(e=t.targetTouches.item(0))?e:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-i.left,y:n.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function eV(t,e,n,i,o){return i+(t-e)/(n-e)*(o-i)}function eD(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function eL(t,e,n){return Math.min(Math.max(t,e),n)}let eR=m("txt");class eB{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(eR(),eR(void 0,"num")),e.arrayPosition&&this.element.classList.add(eR(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);let n=t.createElement("input");n.classList.add(eR("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(eR()),this.inputElement.classList.add(eR("i"));let i=t.createElement("div");i.classList.add(eR("k")),this.element.appendChild(i),this.knobElement=i;let o=t.createElementNS(q,"svg");o.classList.add(eR("g")),this.knobElement.appendChild(o);let a=t.createElementNS(q,"path");a.classList.add(eR("gb")),o.appendChild(a),this.guideBodyElem_=a;let s=t.createElementNS(q,"path");s.classList.add(eR("gh")),o.appendChild(s),this.guideHeadElem_=s;let l=t.createElement("div");l.classList.add(m("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(eR(void 0,"drg"));this.element.classList.add(eR(void 0,"drg"));let e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:+(e<0)),i=eL(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",`M ${n+i},0 L${n},4 L${n+i},8 M ${e},-1 L${e},9`),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);let o=this.props_.get("formatter");this.tooltipElem_.textContent=o(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){let t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class eI{constructor(t,e){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.sliderProps_=null!=(n=e.sliderProps)?n:null,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=S(null),this.view=new eB(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);let i=new eO(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var e,n;let i=null==(e=this.sliderProps_)?void 0:e.get("minValue"),o=null==(n=this.sliderProps_)?void 0:n.get("maxValue"),a=t;return void 0!==i&&(a=Math.max(a,i)),void 0!==o&&(a=Math.min(a,o)),a}onInputChange_(t){let e=t.currentTarget.value,n=this.parser_(e);l(n)||(this.value.rawValue=this.constrainValue_(n)),this.view.refresh()}onInputKeyDown_(t){let e=eP(this.baseStep_,eM(t));0!==e&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+e),{forceEmit:!1,last:!1})}onInputKeyUp_(t){0!==eP(this.baseStep_,eM(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;let e=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+e*this.props.get("draggingScale"))}onPointerMove_(t){let e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){let e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}let eF=m("sld");class ez{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(eF()),e.viewProps.bindClassModifiers(this.element);let n=t.createElement("div");n.classList.add(eF("t")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;let i=t.createElement("div");i.classList.add(eF("k")),this.trackElement.appendChild(i),this.knobElement=i,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.update_()}update_(){let t=eL(eV(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class eU{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.value=e.value,this.viewProps=e.viewProps,this.props=e.props,this.view=new ez(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new eO(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){t.point&&this.value.setRawValue(eV(eL(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),e)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){let e=eP(this.baseStep_,eS(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onKeyUp_(t){0!==eP(this.baseStep_,eS(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}let eN=m("sldtxt");class eq{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(eN());let n=t.createElement("div");n.classList.add(eN("s")),this.sliderView_=e.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);let i=t.createElement("div");i.classList.add(eN("t")),this.textView_=e.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class eH{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sliderC_=new eU(t,{baseStep:e.baseStep,props:e.sliderProps,value:e.value,viewProps:this.viewProps}),this.textC_=new eI(t,{baseStep:e.baseStep,parser:e.parser,props:e.textProps,sliderProps:e.sliderProps,value:e.value,viewProps:e.viewProps}),this.view=new eq(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function e$(t,e){t.write(e)}function eG(t){return Array.isArray(t)?V.required.array(V.required.object({text:V.required.string,value:V.required.raw}))(t).value:"object"==typeof t?V.required.raw(t).value:void 0}function eK(t){if("inline"===t||"popup"===t)return t}function eW(t){return V.required.object({max:V.optional.number,min:V.optional.number,step:V.optional.number})(t).value}function eY(t){if(Array.isArray(t))return t;let e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function eQ(t){return l(t)?null:new tZ(eY(t))}function eJ(t,e){let n=t&&tJ(t,t1);return n?eD(n.step):Math.max(eD(e),2)}function eX(t){let e=function(t){let e=t?tJ(t,t1):null;return e?e.step:null}(t);return null!=e?e:1}function eZ(t,e){var n;let i=t&&tJ(t,t1),o=Math.abs(null!=(n=null==i?void 0:i.step)?n:e);return 0===o?.1:Math.pow(10,Math.floor(Math.log10(o))-1)}let e0=m("ckb");class e1{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(e0()),e.viewProps.bindClassModifiers(this.element);let n=t.createElement("label");n.classList.add(e0("l")),this.element.appendChild(n);let i=t.createElement("input");i.classList.add(e0("i")),i.type="checkbox",n.appendChild(i),this.inputElement=i,e.viewProps.bindDisabled(this.inputElement);let o=t.createElement("div");o.classList.add(e0("w")),n.appendChild(o);let a=K(t,"check");o.appendChild(a),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class e2{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new e1(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){let e=t.currentTarget;this.value.rawValue=e.checked}}let e5={id:"input-bool",type:"input",accept:(t,e)=>{if("boolean"!=typeof t)return null;let n=D(e,{options:V.optional.custom(eG)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>ee,constraint:t=>(function(t){let e=[],n=eQ(t.options);return n&&e.push(n),new tQ(e)})(t.params),writer:t=>e$},controller:t=>{let e=t.document,n=t.value,i=t.constraint,o=i&&tJ(i,tZ);return o?new t3(e,{props:new T({options:o.values.value("options")}),value:n,viewProps:t.viewProps}):new e2(e,{value:n,viewProps:t.viewProps})}},e3=m("col");class e6{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(e3()),e.foldable.bindExpandedClass(this.element,e3(void 0,"expanded")),w(e.foldable,"completed",x(this.element,e3(void 0,"cpl")));let n=t.createElement("div");n.classList.add(e3("h")),this.element.appendChild(n);let i=t.createElement("div");i.classList.add(e3("s")),n.appendChild(i),this.swatchElement=i;let o=t.createElement("div");if(o.classList.add(e3("t")),n.appendChild(o),this.textElement=o,"inline"===e.pickerLayout){let e=t.createElement("div");e.classList.add(e3("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}function e4(t,e,n){let i,o,a,s=(t%360+360)%360,l=eL(e/100,0,1),u=eL(n/100,0,1),c=u*l,f=c*(1-Math.abs(s/60%2-1)),p=u-c;return s>=0&&s<60?[i,o,a]=[c,f,0]:s>=60&&s<120?[i,o,a]=[f,c,0]:s>=120&&s<180?[i,o,a]=[0,c,f]:s>=180&&s<240?[i,o,a]=[0,f,c]:s>=240&&s<300?[i,o,a]=[f,0,c]:[i,o,a]=[c,0,f],[(i+p)*255,(o+p)*255,(a+p)*255]}function e8(t){return[t[0],t[1],t[2]]}function e7(t,e){return[t[0],t[1],t[2],e]}let e9={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:function(t,e,n){let i=n+e*(100-Math.abs(2*n-100))/200;return[t,0!==i?e*(100-Math.abs(2*n-100))/i:0,n+e*(100-Math.abs(2*n-100))/200]},rgb:function(t,e,n){let i,o,a,s=(t%360+360)%360,l=eL(e/100,0,1),u=eL(n/100,0,1),c=(1-Math.abs(2*u-1))*l,f=c*(1-Math.abs(s/60%2-1)),p=u-c/2;return s>=0&&s<60?[i,o,a]=[c,f,0]:s>=60&&s<120?[i,o,a]=[f,c,0]:s>=120&&s<180?[i,o,a]=[0,c,f]:s>=180&&s<240?[i,o,a]=[0,f,c]:s>=240&&s<300?[i,o,a]=[f,0,c]:[i,o,a]=[c,0,f],[(i+p)*255,(o+p)*255,(a+p)*255]}},hsv:{hsl:function(t,e,n){let i=100-Math.abs(n*(200-e)/100-100);return[t,0!==i?e*n/i:0,n*(200-e)/200]},hsv:(t,e,n)=>[t,e,n],rgb:e4},rgb:{hsl:function(t,e,n){let i=eL(t/255,0,1),o=eL(e/255,0,1),a=eL(n/255,0,1),s=Math.max(i,o,a),l=Math.min(i,o,a),u=s-l,c=0,f=0;return 0!==u&&(f=u/(1-Math.abs(s+l-1)),c=(c=i===s?(o-a)/u:o===s?2+(a-i)/u:4+(i-o)/u)/6+ +(c<0)),[360*c,100*f,(l+s)/2*100]},hsv:function(t,e,n){let i=eL(t/255,0,1),o=eL(e/255,0,1),a=eL(n/255,0,1),s=Math.max(i,o,a),l=s-Math.min(i,o,a);return[0===l?0:s===i?((o-a)/l%6+6)%6*60:s===o?60*((a-i)/l+2):60*((i-o)/l+4),100*(0===s?0:l/s),100*s]},rgb:(t,e,n)=>[t,e,n]}};function rt(t,e){return["float"===e?1:"rgb"===t?255:360,"float"===e?1:"rgb"===t?255:100,"float"===e?1:"rgb"===t?255:100]}function re(t,e,n,i){let o=rt(e,n),a=rt(e,i);return t.map((t,e)=>t/o[e]*a[e])}function rr(t,e){return!("object"!=typeof t||l(t))&&e in t&&"number"==typeof t[e]}class rn{static black(t="int"){return new rn([0,0,0],"rgb",t)}static fromObject(t,e="int"){return new rn("a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b],"rgb",e)}static toRgbaObject(t,e="int"){return t.toRgbaObject(e)}static isRgbColorObject(t){return rr(t,"r")&&rr(t,"g")&&rr(t,"b")}static isRgbaColorObject(t){return this.isRgbColorObject(t)&&rr(t,"a")}static isColorObject(t){return this.isRgbColorObject(t)}static equals(t,e){if(t.mode!==e.mode)return!1;let n=t.comps_,i=e.comps_;for(let t=0;t<n.length;t++)if(n[t]!==i[t])return!1;return!0}constructor(t,e,n="int"){this.mode=e,this.type=n,this.comps_=function(t,e,n){var i,o,a;let s=rt(e,n);return["rgb"===e?eL(t[0],0,s[0]):(o=t[0])===(a=s[0])?a:(o%a+a)%a,eL(t[1],0,s[1]),eL(t[2],0,s[2]),eL(null!=(i=t[3])?i:1,0,1)]}(t,e,n)}getComponents(t,e="int"){return e7(function(t,e,n){let i=re(t,e.mode,e.type,"int");return re(e9[e.mode][n.mode](...i),n.mode,"int",n.type)}(e8(this.comps_),{mode:this.mode,type:this.type},{mode:null!=t?t:this.mode,type:e}),this.comps_[3])}toRgbaObject(t="int"){let e=this.getComponents("rgb",t);return{r:e[0],g:e[1],b:e[2],a:e[3]}}}let ri=m("colp");class ro{constructor(t,e){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(ri()),e.viewProps.bindClassModifiers(this.element);let n=t.createElement("div");n.classList.add(ri("hsv"));let i=t.createElement("div");i.classList.add(ri("sv")),this.svPaletteView_=e.svPaletteView,i.appendChild(this.svPaletteView_.element),n.appendChild(i);let o=t.createElement("div");o.classList.add(ri("h")),this.hPaletteView_=e.hPaletteView,o.appendChild(this.hPaletteView_.element),n.appendChild(o),this.element.appendChild(n);let a=t.createElement("div");if(a.classList.add(ri("rgb")),this.textView_=e.textView,a.appendChild(this.textView_.element),this.element.appendChild(a),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};let n=t.createElement("div");n.classList.add(ri("a"));let i=t.createElement("div");i.classList.add(ri("ap")),i.appendChild(this.alphaViews_.palette.element),n.appendChild(i);let o=t.createElement("div");o.classList.add(ri("at")),o.appendChild(this.alphaViews_.text.element),n.appendChild(o),this.element.appendChild(n)}}get allFocusableElements(){let t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(t=>t.inputElement)];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function ra(t){return"int"===t?"int":"float"===t?"float":void 0}function rs(t){return D(t,{alpha:V.optional.boolean,color:V.optional.object({alpha:V.optional.boolean,type:V.optional.custom(ra)}),expanded:V.optional.boolean,picker:V.optional.custom(eK)})}function rl(t){return t?.1:1}function ru(t){var e;return null==(e=t.color)?void 0:e.type}function rc(t,e){let n=t.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*e,e):Math.min(parseFloat(t),e)}let rf={deg:t=>t,grad:t=>360*t/400,rad:t=>360*t/(2*Math.PI),turn:t=>360*t};function rp(t){let e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);let n=parseFloat(e[1]);return rf[e[2]](n)}function rh(t){let e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;let n=[rc(e[1],255),rc(e[2],255),rc(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function rd(t){return e=>{let n=rh(e);return n?new rn(n,"rgb",t):null}}function rv(t){let e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;let n=[rc(e[1],255),rc(e[2],255),rc(e[3],255),rc(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function rm(t){return e=>{let n=rv(e);return n?new rn(n,"rgb",t):null}}function rg(t){let e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;let n=[rp(e[1]),rc(e[2],100),rc(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function rb(t){return e=>{let n=rg(e);return n?new rn(n,"hsl",t):null}}function ry(t){let e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;let n=[rp(e[1]),rc(e[2],100),rc(e[3],100),rc(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function r_(t){return e=>{let n=ry(e);return n?new rn(n,"hsl",t):null}}function rw(t){let e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];let n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function rx(t){let e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),eV(parseInt(e[4]+e[4],16),0,255,0,1)];let n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),eV(parseInt(n[4],16),0,255,0,1)]:null}function rk(t){let e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;let n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function rE(t){return e=>{let n=rk(e);return n?new rn(n,"rgb",t):null}}function rC(t){let e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;let n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function rA(t){return e=>{let n=rC(e);return n?new rn(n,"rgb",t):null}}let rP=[{parser:rw,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:rx,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:rh,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:rv,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:rg,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:ry,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:rk,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:rC,result:{alpha:!0,mode:"rgb",notation:"object"}}];function rM(t,e="int"){let n=rP.reduce((e,{parser:n,result:i})=>e||(n(t)?i:null),null);return n?"hex"===n.notation&&"float"!==e?Object.assign(Object.assign({},n),{type:"int"}):"func"===n.notation?Object.assign(Object.assign({},n),{type:e}):null:null}let rS={int:[function(t){let e=rw(t);return e?new rn(e,"rgb","int"):null},function(t){let e=rx(t);return e?new rn(e,"rgb","int"):null},rd("int"),rm("int"),rb("int"),r_("int"),rE("int"),rA("int")],float:[rd("float"),rm("float"),rb("float"),r_("float"),rE("float"),rA("float")]};function rT(t){let e=rS[t];return t=>e.reduce((e,n)=>e||n(t),null)}function rj(t){let e=eL(Math.floor(t),0,255).toString(16);return 1===e.length?`0${e}`:e}function rO(t,e="#"){let n=e8(t.getComponents("rgb")).map(rj).join("");return`${e}${n}`}function rV(t,e="#"){let n=t.getComponents("rgb"),i=[n[0],n[1],n[2],255*n[3]].map(rj).join("");return`${e}${i}`}function rD(t,e){let n=ew(2*("float"===e)),i=e8(t.getComponents("rgb",e)).map(t=>n(t));return`rgb(${i.join(", ")})`}function rL(t,e){let n=ew(2),i=ew(2*("float"===e)),o=t.getComponents("rgb",e).map((t,e)=>(3===e?n:i)(t));return`rgba(${o.join(", ")})`}function rR(t,e){let n=ew(2*("float"===e)),i=["r","g","b"],o=e8(t.getComponents("rgb",e)).map((t,e)=>`${i[e]}: ${n(t)}`);return`{${o.join(", ")}}`}function rB(t,e){let n=ew(2),i=ew(2*("float"===e)),o=["r","g","b","a"],a=t.getComponents("rgb",e).map((t,e)=>`${o[e]}: ${(3===e?n:i)(t)}`);return`{${a.join(", ")}}`}let rI=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:rO},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:rV},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:function(t){let e=[ew(0),ek,ek],n=e8(t.getComponents("hsl")).map((t,n)=>e[n](t));return`hsl(${n.join(", ")})`}},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:function(t){let e=[ew(0),ek,ek,ew(2)],n=t.getComponents("hsl").map((t,n)=>e[n](t));return`hsla(${n.join(", ")})`}},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"func",type:e},stringifier:t=>rD(t,e)},{format:{alpha:!0,mode:"rgb",notation:"func",type:e},stringifier:t=>rL(t,e)},{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:t=>rR(t,e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:t=>rB(t,e)}],[])];function rF(t){return rI.reduce((e,n)=>{var i;return e?e:(i=n.format,i.alpha===t.alpha&&i.mode===t.mode&&i.notation===t.notation&&i.type===t.type)?n.stringifier:null},null)}let rz=m("apl");class rU{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(rz()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);let n=t.createElement("div");n.classList.add(rz("b")),this.element.appendChild(n);let i=t.createElement("div");i.classList.add(rz("c")),n.appendChild(i),this.colorElem_=i;let o=t.createElement("div");o.classList.add(rz("m")),this.element.appendChild(o),this.markerElem_=o;let a=t.createElement("div");a.classList.add(rz("p")),this.markerElem_.appendChild(a),this.previewElem_=a,this.update_()}update_(){let t=this.value.rawValue,e=t.getComponents("rgb"),n=new rn([e[0],e[1],e[2],0],"rgb"),i=new rn([e[0],e[1],e[2],255],"rgb"),o=["to right",rL(n),rL(i)];this.colorElem_.style.background=`linear-gradient(${o.join(",")})`,this.previewElem_.style.backgroundColor=rL(t);let a=eV(e[3],0,1,0,100);this.markerElem_.style.left=`${a}%`}onValueChange_(){this.update_()}}class rN{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new rU(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new eO(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;let n=t.point.x/t.bounds.width,[i,o,a]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new rn([i,o,a,n],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){let e=eP(rl(!0),eS(t));if(0===e)return;let[n,i,o,a]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new rn([n,i,o,a+e],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==eP(rl(!0),eS(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}let rq=m("coltxt");class rH{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(rq()),e.viewProps.bindClassModifiers(this.element);let n=t.createElement("div");n.classList.add(rq("m")),this.modeElem_=function(t){let e=t.createElement("select");return e.appendChild([{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}].reduce((e,n)=>{let i=t.createElement("option");return i.textContent=n.text,i.value=n.value,e.appendChild(i),e},t.createDocumentFragment())),e}(t),this.modeElem_.classList.add(rq("ms")),n.appendChild(this.modeSelectElement),e.viewProps.bindDisabled(this.modeElem_);let i=t.createElement("div");i.classList.add(rq("mm")),i.appendChild(K(t,"dropdown")),n.appendChild(i),this.element.appendChild(n);let o=t.createElement("div");o.classList.add(rq("w")),this.element.appendChild(o),this.textsElem_=o,this.textViews_=e.textViews,this.applyTextViews_(),_(e.colorMode,t=>{this.modeElem_.value=t})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(t){this.textViews_=t,this.applyTextViews_()}applyTextViews_(){Q(this.textsElem_);let t=this.element.ownerDocument;this.textViews_.forEach(e=>{let n=t.createElement("div");n.classList.add(rq("c")),n.appendChild(e.element),this.textsElem_.appendChild(n)})}}function r$(t,e,n){var i,o;return new eI(t,{arrayPosition:0===n?"fst":2===n?"lst":"mid",baseStep:rl(!1),parser:e.parser,props:T.fromObject({draggingScale:"float"===e.colorType?.01:1,formatter:ew(2*("float"===e.colorType))}),value:S(0,{constraint:(i=e.colorMode,o=e.colorType,new tX({min:0,max:rt(i,o)[n]}))}),viewProps:e.viewProps})}class rG{constructor(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=e.colorType,this.parser_=e.parser,this.value=e.value,this.viewProps=e.viewProps,this.colorMode=S(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new rH(t,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){let e={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},n=[r$(t,e,0),r$(t,e,1),r$(t,e,2)];return n.forEach((t,e)=>{eA({primary:this.value,secondary:t.value,forward:t=>t.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[e],backward:(t,n)=>{let i=this.colorMode.rawValue,o=t.rawValue.getComponents(i,this.colorType_);return o[e]=n.rawValue,new rn(e7(e8(o),o[3]),i,this.colorType_)}})}),n}onModeSelectChange_(t){let e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}let rK=m("hpl");class rW{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(rK()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);let n=t.createElement("div");n.classList.add(rK("c")),this.element.appendChild(n);let i=t.createElement("div");i.classList.add(rK("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){let[t]=this.value.rawValue.getComponents("hsv");this.markerElem_.style.backgroundColor=rD(new rn([t,100,100],"hsv"));let e=eV(t,0,360,0,100);this.markerElem_.style.left=`${e}%`}onValueChange_(){this.update_()}}class rY{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new rW(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new eO(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;let n=eV(eL(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),[,i,o,a]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new rn([n,i,o,a],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){let e=eP(rl(!1),eS(t));if(0===e)return;let[n,i,o,a]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new rn([n+e,i,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==eP(rl(!1),eS(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}let rQ=m("svp");class rJ{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(rQ()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);let n=t.createElement("canvas");n.height=64,n.width=64,n.classList.add(rQ("c")),this.element.appendChild(n),this.canvasElement=n;let i=t.createElement("div");i.classList.add(rQ("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){let t=function(t){let e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}(this.canvasElement);if(!t)return;let e=this.value.rawValue.getComponents("hsv"),n=this.canvasElement.width,i=this.canvasElement.height,o=t.getImageData(0,0,n,i),a=o.data;for(let t=0;t<i;t++)for(let o=0;o<n;o++){let s=eV(o,0,n,0,100),l=eV(t,0,i,100,0),u=e4(e[0],s,l),c=(t*n+o)*4;a[c]=u[0],a[c+1]=u[1],a[c+2]=u[2],a[c+3]=255}t.putImageData(o,0,0);let s=eV(e[1],0,100,0,100);this.markerElem_.style.left=`${s}%`;let l=eV(e[2],0,100,100,0);this.markerElem_.style.top=`${l}%`}onValueChange_(){this.update_()}}class rX{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new rJ(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new eO(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;let n=eV(t.point.x,0,t.bounds.width,0,100),i=eV(t.point.y,0,t.bounds.height,100,0),[o,,,a]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new rn([o,n,i,a],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){eT(t.key)&&t.preventDefault();let[e,n,i,o]=this.value.rawValue.getComponents("hsv"),a=rl(!1),s=eP(a,eS(t)),l=eP(a,eM(t));(0!==s||0!==l)&&this.value.setRawValue(new rn([e,n+s,i+l,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){let e=rl(!1),n=eP(e,eS(t)),i=eP(e,eM(t));(0!==n||0!==i)&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class rZ{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.hPaletteC_=new rY(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new rX(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new rN(t,{value:this.value,viewProps:this.viewProps}),text:new eI(t,{parser:eb,baseStep:.1,props:T.fromObject({draggingScale:.01,formatter:ew(2)}),value:S(0,{constraint:new tX({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&eA({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.rawValue.getComponents()[3],backward:(t,e)=>{let n=t.rawValue.getComponents();return n[3]=e.rawValue,new rn(n,t.rawValue.mode)}}),this.textC_=new rG(t,{colorType:e.colorType,parser:eb,value:this.value,viewProps:this.viewProps}),this.view=new ro(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}get textController(){return this.textC_}}let r0=m("colsw");class r1{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(r0()),e.viewProps.bindClassModifiers(this.element);let n=t.createElement("div");n.classList.add(r0("sw")),this.element.appendChild(n),this.swatchElem_=n;let i=t.createElement("button");i.classList.add(r0("b")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){let t=this.value.rawValue;this.swatchElem_.style.backgroundColor=rV(t)}onValueChange_(){this.update_()}}class r2{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new r1(t,{value:this.value,viewProps:this.viewProps})}}class r5{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=ti.create(e.expanded),this.swatchC_=new r2(t,{value:this.value,viewProps:this.viewProps});let n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new et(t,{parser:e.parser,props:T.fromObject({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new e6(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===e.pickerLayout?new t8(t,{viewProps:this.viewProps}):null;let i=new rZ(t,{colorType:e.colorType,supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),eA({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),ta(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;let e=this.view.element,n=t.relatedTarget;n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;let e=this.popC_.view.element,n=J(t);!(n&&e.contains(n))&&(!n||n!==this.swatchC_.view.buttonElement||$(e.ownerDocument))&&(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}}function r3(t){return e8(t.getComponents("rgb")).reduce((t,e)=>t<<8|255&Math.floor(e),0)}function r6(t){return t.getComponents("rgb").reduce((t,e,n)=>t<<8|255&Math.floor(3===n?255*e:e),0)>>>0}function r4(t){return"number"!=typeof t?rn.black():new rn([t>>16&255,t>>8&255,255&t],"rgb")}function r8(t){return"number"!=typeof t?rn.black():new rn([t>>24&255,t>>16&255,t>>8&255,eV(255&t,0,255,0,1)],"rgb")}function r7(t){var e;return null!=t&&!!t.alpha||null!=(e=null==t?void 0:t.color)&&!!e.alpha}let r9={id:"input-color-number",type:"input",accept:(t,e)=>{if("number"!=typeof t||!("color"in e||"view"in e&&"color"===e.view))return null;let n=rs(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>r7(t.params)?r8:r4,equals:rn.equals,writer:t=>(function(t){let e=t?r6:r3;return(t,n)=>{e$(t,e(n))}})(r7(t.params))},controller:t=>{let e=r7(t.params),n="expanded"in t.params?t.params.expanded:void 0,i="picker"in t.params?t.params.picker:void 0;return new r5(t.document,{colorType:"int",expanded:null!=n&&n,formatter:e?t=>rV(t,"0x"):t=>rO(t,"0x"),parser:rT("int"),pickerLayout:null!=i?i:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}},nt={id:"input-color-object",type:"input",accept:(t,e)=>{if(!rn.isColorObject(t))return null;let n=rs(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>{var e;return e=ru(t.params),t=>rn.isColorObject(t)?rn.fromObject(t,e):rn.black(e)},equals:rn.equals,writer:t=>{var e,n,i;return e=t.initialValue,n=rn.isRgbaColorObject(e),i=ru(t.params),(t,e)=>{if(n){let n=e.toRgbaObject(i);t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b),t.writeProperty("a",n.a)}else{let n=e.toRgbaObject(i);t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b)}}}},controller:t=>{var e;let n=rn.isRgbaColorObject(t.initialValue),i="expanded"in t.params?t.params.expanded:void 0,o="picker"in t.params?t.params.picker:void 0,a=null!=(e=ru(t.params))?e:"int";return new r5(t.document,{colorType:a,expanded:null!=i&&i,formatter:t=>n?rB(t,a):rR(t,a),parser:rT(a),pickerLayout:null!=o?o:"popup",supportsAlpha:n,value:t.value,viewProps:t.viewProps})}},ne={id:"input-color-string",type:"input",accept:(t,e)=>{if("string"!=typeof t||"view"in e&&"text"===e.view)return null;let n=rM(t,ru(e));if(!n||!rF(n))return null;let i=rs(e);return i?{initialValue:t,params:i}:null},binding:{reader:t=>{var e,n=null!=(e=ru(t.params))?e:"int";let i=rS[n];return t=>{if("string"!=typeof t)return rn.black(n);let e=i.reduce((e,n)=>e||n(t),null);return null!=e?e:rn.black(n)}},equals:rn.equals,writer:t=>{let e=rM(t.initialValue,ru(t.params));if(!e)throw p.shouldNeverHappen();let n=function(t){let e=rF(t);return e?(t,n)=>{e$(t,e(n))}:null}(e);if(!n)throw p.notBindable();return n}},controller:t=>{let e=rM(t.initialValue,ru(t.params));if(!e)throw p.shouldNeverHappen();let n=rF(e);if(!n)throw p.shouldNeverHappen();let i="expanded"in t.params?t.params.expanded:void 0,o="picker"in t.params?t.params.picker:void 0;return new r5(t.document,{colorType:e.type,expanded:null!=i&&i,formatter:n,parser:rT(e.type),pickerLayout:null!=o?o:"popup",supportsAlpha:e.alpha,value:t.value,viewProps:t.viewProps})}};class nr{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){let e=this.asm_.toComponents(t).map((t,e)=>{var n,i;return null!=(i=null==(n=this.components[e])?void 0:n.constrain(t))?i:t});return this.asm_.fromComponents(e)}}let nn=m("pndtxt");class ni{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(nn()),this.textViews.forEach(e=>{let n=t.createElement("div");n.classList.add(nn("a")),n.appendChild(e.element),this.element.appendChild(n)})}}class no{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map((n,i)=>new eI(t,{arrayPosition:0===i?"fst":i===e.axes.length-1?"lst":"mid",baseStep:e.axes[i].baseStep,parser:e.parser,props:e.axes[i].textProps,value:S(0,{constraint:e.axes[i].constraint}),viewProps:e.viewProps})),this.acs_.forEach((t,n)=>{eA({primary:this.value,secondary:t.value,forward:t=>e.assembly.toComponents(t.rawValue)[n],backward:(t,i)=>{let o=e.assembly.toComponents(t.rawValue);return o[n]=i.rawValue,e.assembly.fromComponents(o)}})}),this.view=new ni(t,{textViews:this.acs_.map(t=>t.view)})}}function na(t,e){return"step"in t&&!l(t.step)?new t1(t.step,e):null}function ns(t){return l(t.max)||l(t.min)?l(t.max)&&l(t.min)?null:new t0({max:t.max,min:t.min}):new tX({max:t.max,min:t.min})}let nl={id:"input-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;let n=D(e,{format:V.optional.function,max:V.optional.number,min:V.optional.number,options:V.optional.custom(eG),step:V.optional.number});return n?{initialValue:t,params:n}:null},binding:{reader:t=>ey,constraint:t=>(function(t,e){let n=[],i=na(t,e);i&&n.push(i);let o=ns(t);o&&n.push(o);let a=eQ(t.options);return a&&n.push(a),new tQ(n)})(t.params,t.initialValue),writer:t=>e$},controller:t=>{var e;let n=t.value,i=t.constraint,o=i&&tJ(i,tZ);if(o)return new t3(t.document,{props:new T({options:o.values.value("options")}),value:n,viewProps:t.viewProps});let a=null!=(e="format"in t.params?t.params.format:void 0)?e:ew(eJ(i,n.rawValue)),s=i&&tJ(i,tX);return s?new eH(t.document,{baseStep:eX(i),parser:eb,sliderProps:new T({maxValue:s.values.value("max"),minValue:s.values.value("min")}),textProps:T.fromObject({draggingScale:eZ(i,n.rawValue),formatter:a}),value:n,viewProps:t.viewProps}):new eI(t.document,{baseStep:eX(i),parser:eb,props:T.fromObject({draggingScale:eZ(i,n.rawValue),formatter:a}),value:n,viewProps:t.viewProps})}};class nu{constructor(t=0,e=0){this.x=t,this.y=e}getComponents(){return[this.x,this.y]}static isObject(t){if(l(t))return!1;let e=t.x,n=t.y;return"number"==typeof e&&"number"==typeof n}static equals(t,e){return t.x===e.x&&t.y===e.y}toObject(){return{x:this.x,y:this.y}}}let nc={toComponents:t=>t.getComponents(),fromComponents:t=>new nu(...t)},nf=m("p2d");class np{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(nf()),e.viewProps.bindClassModifiers(this.element),_(e.expanded,x(this.element,nf(void 0,"expanded")));let n=t.createElement("div");n.classList.add(nf("h")),this.element.appendChild(n);let i=t.createElement("button");i.classList.add(nf("b")),i.appendChild(K(t,"p2dpad")),e.viewProps.bindDisabled(i),n.appendChild(i),this.buttonElement=i;let o=t.createElement("div");if(o.classList.add(nf("t")),n.appendChild(o),this.textElement=o,"inline"===e.pickerLayout){let e=t.createElement("div");e.classList.add(nf("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}let nh=m("p2dp");class nd{constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=e.invertsY,this.maxValue_=e.maxValue,this.element=t.createElement("div"),this.element.classList.add(nh()),"popup"===e.layout&&this.element.classList.add(nh(void 0,"p")),e.viewProps.bindClassModifiers(this.element);let n=t.createElement("div");n.classList.add(nh("p")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;let i=t.createElementNS(q,"svg");i.classList.add(nh("g")),this.padElement.appendChild(i),this.svgElem_=i;let o=t.createElementNS(q,"line");o.classList.add(nh("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);let a=t.createElementNS(q,"line");a.classList.add(nh("ax")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","0"),a.setAttributeNS(null,"x2","50%"),a.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(a);let s=t.createElementNS(q,"line");s.classList.add(nh("l")),s.setAttributeNS(null,"x1","50%"),s.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(s),this.lineElem_=s;let l=t.createElement("div");l.classList.add(nh("m")),this.padElement.appendChild(l),this.markerElem_=l,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){let[t,e]=this.value.rawValue.getComponents(),n=this.maxValue_,i=eV(t,-n,+n,0,100),o=eV(e,-n,+n,0,100),a=this.invertsY_?100-o:o;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${a}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${a}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function nv(t,e,n){return[eP(e[0],eS(t)),eP(e[1],eM(t))*(n?1:-1)]}class nm{constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.baseSteps_=e.baseSteps,this.maxValue_=e.maxValue,this.invertsY_=e.invertsY,this.view=new nd(t,{invertsY:this.invertsY_,layout:e.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new eO(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;let n=this.maxValue_,i=eV(t.point.x,0,t.bounds.width,-n,+n),o=eV(this.invertsY_?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-n,+n);this.value.setRawValue(new nu(i,o),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){eT(t.key)&&t.preventDefault();let[e,n]=nv(t,this.baseSteps_,this.invertsY_);(0!==e||0!==n)&&this.value.setRawValue(new nu(this.value.rawValue.x+e,this.value.rawValue.y+n),{forceEmit:!1,last:!1})}onPadKeyUp_(t){let[e,n]=nv(t,this.baseSteps_,this.invertsY_);(0!==e||0!==n)&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class ng{constructor(t,e){var n,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=ti.create(e.expanded),this.popC_="popup"===e.pickerLayout?new t8(t,{viewProps:this.viewProps}):null;let o=new nm(t,{baseSteps:[e.axes[0].baseStep,e.axes[1].baseStep],invertsY:e.invertsY,layout:e.pickerLayout,maxValue:e.maxValue,value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.textC_=new no(t,{assembly:nc,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new np(t,{expanded:this.foldable_.value("expanded"),pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null==(n=this.view.buttonElement)||n.addEventListener("blur",this.onPadButtonBlur_),null==(i=this.view.buttonElement)||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),eA({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),ta(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(t){if(!this.popC_)return;let e=this.view.element,n=t.relatedTarget;n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;let e=this.popC_.view.element,n=J(t);!(n&&e.contains(n))&&(!n||n!==this.view.buttonElement||$(e.ownerDocument))&&(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.view.buttonElement.focus()}}class nb{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(l(t))return!1;let e=t.x,n=t.y,i=t.z;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}let ny={toComponents:t=>t.getComponents(),fromComponents:t=>new nb(...t)};function n_(t){return nb.isObject(t)?new nb(t.x,t.y,t.z):new nb}function nw(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function nx(t,e){return{baseStep:eX(e),constraint:e,textProps:T.fromObject({draggingScale:eZ(e,t),formatter:ew(eJ(e,t))})}}let nk={id:"input-point3d",type:"input",accept:(t,e)=>{if(!nb.isObject(t))return null;let n=D(e,{x:V.optional.custom(eW),y:V.optional.custom(eW),z:V.optional.custom(eW)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>n_,constraint:t=>{var e,n;return e=t.params,n=t.initialValue,new nr({assembly:ny,components:[nY("x"in e?e.x:void 0,n.x),nY("y"in e?e.y:void 0,n.y),nY("z"in e?e.z:void 0,n.z)]})},equals:nb.equals,writer:t=>nw},controller:t=>{let e=t.value,n=t.constraint;if(!(n instanceof nr))throw p.shouldNeverHappen();return new no(t.document,{assembly:ny,axes:[nx(e.rawValue.x,n.components[0]),nx(e.rawValue.y,n.components[1]),nx(e.rawValue.z,n.components[2])],parser:eb,value:e,viewProps:t.viewProps})}};class nE{constructor(t=0,e=0,n=0,i=0){this.x=t,this.y=e,this.z=n,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(l(t))return!1;let e=t.x,n=t.y,i=t.z,o=t.w;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i&&"number"==typeof o}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}let nC={toComponents:t=>t.getComponents(),fromComponents:t=>new nE(...t)};function nA(t){return nE.isObject(t)?new nE(t.x,t.y,t.z,t.w):new nE}function nP(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}let nM={id:"input-point4d",type:"input",accept:(t,e)=>{if(!nE.isObject(t))return null;let n=D(e,{x:V.optional.custom(eW),y:V.optional.custom(eW),z:V.optional.custom(eW),w:V.optional.custom(eW)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>nA,constraint:t=>{var e,n;return e=t.params,n=t.initialValue,new nr({assembly:nC,components:[nY("x"in e?e.x:void 0,n.x),nY("y"in e?e.y:void 0,n.y),nY("z"in e?e.z:void 0,n.z),nY("w"in e?e.w:void 0,n.w)]})},equals:nE.equals,writer:t=>nP},controller:t=>{let e=t.value,n=t.constraint;if(!(n instanceof nr))throw p.shouldNeverHappen();return new no(t.document,{assembly:nC,axes:e.rawValue.getComponents().map((t,e)=>{var i;return{baseStep:eX(i=n.components[e]),constraint:i,textProps:T.fromObject({draggingScale:eZ(i,t),formatter:ew(eJ(i,t))})}}),parser:eb,value:e,viewProps:t.viewProps})}},nS={id:"input-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;let n=D(e,{options:V.optional.custom(eG)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>eE,constraint:t=>(function(t){let e=[],n=eQ(t.options);return n&&e.push(n),new tQ(e)})(t.params),writer:t=>e$},controller:t=>{let e=t.document,n=t.value,i=t.constraint,o=i&&tJ(i,tZ);return o?new t3(e,{props:new T({options:o.values.value("options")}),value:n,viewProps:t.viewProps}):new et(e,{parser:t=>t,props:T.fromObject({formatter:eC}),value:n,viewProps:t.viewProps})}},nT=200,nj=3,nO=m("mll");class nV{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(nO()),e.viewProps.bindClassModifiers(this.element);let n=t.createElement("textarea");n.classList.add(nO("i")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,n.readOnly=!0,e.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){let t=this.textareaElem_,e=t.scrollTop===t.scrollHeight-t.clientHeight,n=[];this.value.rawValue.forEach(t=>{void 0!==t&&n.push(this.formatter_(t))}),t.textContent=n.join("\n"),e&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class nD{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new nV(t,{formatter:e.formatter,lineCount:e.lineCount,value:this.value,viewProps:this.viewProps})}}let nL=m("sgl");class nR{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(nL()),e.viewProps.bindClassModifiers(this.element);let n=t.createElement("input");n.classList.add(nL("i")),n.readOnly=!0,n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){let t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=void 0!==e?this.formatter_(e):""}onValueUpdate_(){this.update_()}}class nB{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new nR(t,{formatter:e.formatter,value:this.value,viewProps:this.viewProps})}}let nI={id:"monitor-bool",type:"monitor",accept:(t,e)=>{if("boolean"!=typeof t)return null;let n=D(e,{lineCount:V.optional.number});return n?{initialValue:t,params:n}:null},binding:{reader:t=>ee},controller:t=>{var e;return 1===t.value.rawValue.length?new nB(t.document,{formatter:er,value:t.value,viewProps:t.viewProps}):new nD(t.document,{formatter:er,lineCount:null!=(e=t.params.lineCount)?e:nj,value:t.value,viewProps:t.viewProps})}},nF=m("grl");class nz{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(nF()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.props_=e.props,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);let n=t.createElementNS(q,"svg");n.classList.add(nF("g")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,this.element.appendChild(n),this.svgElem_=n;let i=t.createElementNS(q,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;let o=t.createElement("div");o.classList.add(nF("t"),m("tt")()),this.element.appendChild(o),this.tooltipElem_=o,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){let t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,n=this.props_.get("minValue"),i=this.props_.get("maxValue"),o=[];this.value.rawValue.forEach((a,s)=>{if(void 0===a)return;let l=eV(s,0,e,0,t.width),u=eV(a,n,i,t.height,0);o.push([l,u].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));let a=this.tooltipElem_,s=this.value.rawValue[this.cursor_.rawValue];if(void 0===s)return void a.classList.remove(nF("t","a"));let l=eV(this.cursor_.rawValue,0,e,0,t.width),u=eV(s,n,i,t.height,0);a.style.left=`${l}px`,a.style.top=`${u}px`,a.textContent=`${this.formatter_(s)}`,a.classList.contains(nF("t","a"))||(a.classList.add(nF("t","a"),nF("t","in")),H(a),a.classList.remove(nF("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class nU{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=e.props,this.value=e.value,this.viewProps=e.viewProps,this.cursor_=S(-1),this.view=new nz(t,{cursor:this.cursor_,formatter:e.formatter,lineCount:e.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),$(t)){let t=new eO(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(t){let e=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(eV(t.offsetX,0,e.width,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){if(!t.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(eV(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function nN(t){return"format"in t&&!l(t.format)?t.format:ew(2)}function nq(t){return"view"in t&&"graph"===t.view}let nH={id:"monitor-number",type:"monitor",accept:(t,e)=>{if("number"!=typeof t)return null;let n=D(e,{format:V.optional.function,lineCount:V.optional.number,max:V.optional.number,min:V.optional.number,view:V.optional.string});return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>nq(t)?64:1,reader:t=>ey},controller:t=>{var e,n,i,o;return nq(t.params)?new nU(t.document,{formatter:nN(t.params),lineCount:null!=(e=t.params.lineCount)?e:nj,props:T.fromObject({maxValue:null!=(n="max"in t.params?t.params.max:null)?n:100,minValue:null!=(i="min"in t.params?t.params.min:null)?i:0}),value:t.value,viewProps:t.viewProps}):1===t.value.rawValue.length?new nB(t.document,{formatter:nN(t.params),value:t.value,viewProps:t.viewProps}):new nD(t.document,{formatter:nN(t.params),lineCount:null!=(o=t.params.lineCount)?o:nj,value:t.value,viewProps:t.viewProps})}},n$={id:"monitor-string",type:"monitor",accept:(t,e)=>{if("string"!=typeof t)return null;let n=D(e,{lineCount:V.optional.number,multiline:V.optional.boolean});return n?{initialValue:t,params:n}:null},binding:{reader:t=>eE},controller:t=>{var e;let n=t.value;return n.rawValue.length>1||"multiline"in t.params&&t.params.multiline?new nD(t.document,{formatter:eC,lineCount:null!=(e=t.params.lineCount)?e:nj,value:n,viewProps:t.viewProps}):new nB(t.document,{formatter:eC,value:n,viewProps:t.viewProps})}};class nG{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t){"blade"===t.type?this.pluginsMap_.blades.unshift(t):"input"===t.type?this.pluginsMap_.inputs.unshift(t):"monitor"===t.type&&this.pluginsMap_.monitors.unshift(t)}createInput(t,e,n){if(l(e.read()))throw new p({context:{key:e.key},type:"nomatchingcontroller"});let i=this.pluginsMap_.inputs.reduce((i,o)=>null!=i?i:function(t,e){var n;let i=t.accept(e.target.read(),e.params);if(l(i))return null;let o={target:e.target,initialValue:i.initialValue,params:i.params},a=t.binding.reader(o),s=t.binding.constraint?t.binding.constraint(o):void 0,u=S(a(i.initialValue),{constraint:s,equals:t.binding.equals}),c=new tK({reader:a,target:e.target,value:u,writer:t.binding.writer(o)}),f=V.optional.boolean(e.params.disabled).value,p=V.optional.boolean(e.params.hidden).value,h=t.controller({constraint:s,document:e.document,initialValue:i.initialValue,params:i.params,value:c.value,viewProps:F.create({disabled:f,hidden:p})});return new tc(e.document,{binding:c,blade:tn(),props:T.fromObject({label:"label"in e.params?null!=(n=V.optional.string(e.params.label).value)?n:null:e.target.key}),valueController:h})}(o,{document:t,target:e,params:n}),null);if(i)return i;throw new p({context:{key:e.key},type:"nomatchingcontroller"})}createMonitor(t,e,n){let i=this.pluginsMap_.monitors.reduce((i,o)=>null!=i?i:function(t,e){var n,i,o,a;let s=t.accept(e.target.read(),e.params);if(l(s))return null;let u={target:e.target,initialValue:s.initialValue,params:s.params},c=t.binding.reader(u),f=null!=(i=null!=(n=V.optional.number(e.params.bufferSize).value)?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(s.params))?i:1,p=V.optional.number(e.params.interval).value,h=new tY({reader:c,target:e.target,ticker:(a=e.document,0===p?new t$:new tG(a,null!=p?p:nT)),value:function(t){let e=[];return tW(e,t),S(e)}(f)}),d=V.optional.boolean(e.params.disabled).value,v=V.optional.boolean(e.params.hidden).value,m=t.controller({document:e.document,params:s.params,value:h.value,viewProps:F.create({disabled:d,hidden:v})});return new tp(e.document,{binding:h,blade:tn(),props:T.fromObject({label:"label"in e.params?null!=(o=V.optional.string(e.params.label).value)?o:null:e.target.key}),valueController:m})}(o,{document:t,params:n,target:e}),null);if(i)return i;throw new p({context:{key:e.key},type:"nomatchingcontroller"})}createBlade(t,e){let n=this.pluginsMap_.blades.reduce((n,i)=>null!=n?n:function(t,e){let n=t.accept(e.params);if(!n)return null;let i=V.optional.boolean(e.params.disabled).value,o=V.optional.boolean(e.params.hidden).value;return t.controller({blade:tn(),document:e.document,params:Object.assign(Object.assign({},n.params),{disabled:i,hidden:o}),viewProps:F.create({disabled:i,hidden:o})})}(i,{document:t,params:e}),null);if(!n)throw new p({type:"nomatchingview",context:{params:e}});return n}createBladeApi(t){if(t instanceof tc)return new tu(t);if(t instanceof tp)return new tf(t);if(t instanceof tk)return new tm(t,this);let e=this.pluginsMap_.blades.reduce((e,n)=>null!=e?e:n.api({controller:t,pool:this}),null);if(!e)throw p.shouldNeverHappen();return e}}function nK(t){return nu.isObject(t)?new nu(t.x,t.y):new nu}function nW(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function nY(t,e){if(!t)return;let n=[],i=na(t,e);i&&n.push(i);let o=ns(t);return o&&n.push(o),new tQ(n)}function nQ(t,e){let[n,i]=t?function(t){let e=tJ(t,tX);if(e)return[e.values.get("min"),e.values.get("max")];let n=tJ(t,t0);return n?[n.minValue,n.maxValue]:[void 0,void 0]}(t):[];return l(n)&&l(i)?Math.max(10*Math.abs(eX(t)),10*Math.abs(e)):Math.max(Math.abs(null!=n?n:0),Math.abs(null!=i?i:0))}function nJ(t,e){return{baseStep:eX(e),constraint:e,textProps:T.fromObject({draggingScale:eZ(e,t),formatter:ew(eJ(e,t))})}}let nX={id:"input-point2d",type:"input",accept:(t,e)=>{if(!nu.isObject(t))return null;let n=D(e,{expanded:V.optional.boolean,picker:V.optional.custom(eK),x:V.optional.custom(eW),y:V.optional.object({inverted:V.optional.boolean,max:V.optional.number,min:V.optional.number,step:V.optional.number})});return n?{initialValue:t,params:n}:null},binding:{reader:t=>nK,constraint:t=>{var e,n;return e=t.params,n=t.initialValue,new nr({assembly:nc,components:[nY("x"in e?e.x:void 0,n.x),nY("y"in e?e.y:void 0,n.y)]})},equals:nu.equals,writer:t=>nW},controller:t=>{let e=t.document,n=t.value,i=t.constraint;if(!(i instanceof nr))throw p.shouldNeverHappen();let o="expanded"in t.params?t.params.expanded:void 0,a="picker"in t.params?t.params.picker:void 0;return new ng(e,{axes:[nJ(n.rawValue.x,i.components[0]),nJ(n.rawValue.y,i.components[1])],expanded:null!=o&&o,invertsY:function(t){if(!("y"in t))return!1;let e=t.y;return!!e&&"inverted"in e&&!!e.inverted}(t.params),maxValue:function(t,e){let n=e instanceof nr?e.components[0]:void 0,i=e instanceof nr?e.components[1]:void 0;return Math.max(nQ(n,t.x),nQ(i,t.y))}(n.rawValue,i),parser:eb,pickerLayout:null!=a?a:"popup",value:n,viewProps:t.viewProps})}};class nZ extends e{constructor(t){super(t),this.emitter_=new v,this.controller_.valueController.value.emitter.on("change",t=>{this.emitter_.emit("change",{event:new i(this,t.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get options(){return this.controller_.valueController.props.get("options")}set options(t){this.controller_.valueController.props.set("options",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){let n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}}class n0 extends e{constructor(t){super(t),this.emitter_=new v,this.controller_.valueController.value.emitter.on("change",t=>{this.emitter_.emit("change",{event:new i(this,t.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(t){this.controller_.valueController.sliderController.props.set("maxValue",t)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(t){this.controller_.valueController.sliderController.props.set("minValue",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){let n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}}class n1 extends e{constructor(t){super(t),this.emitter_=new v,this.controller_.valueController.value.emitter.on("change",t=>{this.emitter_.emit("change",{event:new i(this,t.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(t){this.controller_.valueController.props.set("formatter",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){let n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}}let n2={id:"list",type:"blade",accept(t){let e=D(t,{options:V.required.custom(eG),value:V.required.raw,view:V.required.constant("list"),label:V.optional.string});return e?{params:e}:null},controller(t){let e=new tZ(eY(t.params.options)),n=S(t.params.value,{constraint:e}),i=new t3(t.document,{props:new T({options:e.values.value("options")}),value:n,viewProps:t.viewProps});return new tM(t.document,{blade:t.blade,props:T.fromObject({label:t.params.label}),valueController:i})},api:t=>t.controller instanceof tM&&t.controller.valueController instanceof t3?new nZ(t.controller):null};class n5 extends tg{constructor(t,e){super(t,e)}get element(){return this.controller_.view.element}importPreset(t){var e;e=this.controller_.rackController.rack.find(tc).map(t=>t.binding),e.forEach(e=>{let n=t[e.target.presetKey];void 0!==n&&e.writer(e.target,e.reader(n))}),this.refresh()}exportPreset(){return this.controller_.rackController.rack.find(tc).map(t=>t.binding.target).reduce((t,e)=>Object.assign(t,{[e.presetKey]:e.read()}),{})}refresh(){this.controller_.rackController.rack.find(tc).forEach(t=>{t.binding.read()}),this.controller_.rackController.rack.find(tp).forEach(t=>{t.binding.read()})}}class n3 extends tA{constructor(t,e){super(t,{expanded:e.expanded,blade:e.blade,props:e.props,root:!0,viewProps:e.viewProps})}}let n6={id:"slider",type:"blade",accept(t){let e=D(t,{max:V.required.number,min:V.required.number,view:V.required.constant("slider"),format:V.optional.function,label:V.optional.string,value:V.optional.number});return e?{params:e}:null},controller(t){var e,n;let i=null!=(e=t.params.value)?e:0,o=new tX({max:t.params.max,min:t.params.min}),a=new eH(t.document,{baseStep:1,parser:eb,sliderProps:new T({maxValue:o.values.value("max"),minValue:o.values.value("min")}),textProps:T.fromObject({draggingScale:eZ(void 0,i),formatter:null!=(n=t.params.format)?n:e_}),value:S(i,{constraint:o}),viewProps:t.viewProps});return new tM(t.document,{blade:t.blade,props:T.fromObject({label:t.params.label}),valueController:a})},api:t=>t.controller instanceof tM&&t.controller.valueController instanceof eH?new n0(t.controller):null},n4={id:"text",type:"blade",accept(t){let e=D(t,{parse:V.required.function,value:V.required.raw,view:V.required.constant("text"),format:V.optional.function,label:V.optional.string});return e?{params:e}:null},controller(t){var e;let n=new et(t.document,{parser:t.params.parse,props:T.fromObject({formatter:null!=(e=t.params.format)?e:t=>String(t)}),value:S(t.params.value),viewProps:t.viewProps});return new tM(t.document,{blade:t.blade,props:T.fromObject({label:t.params.label}),valueController:n})},api:t=>t.controller instanceof tM&&t.controller.valueController instanceof et?new n1(t.controller):null};function n8(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;let i=t.createElement("style");i.dataset.tpStyle=e,i.textContent=n,t.head.appendChild(i)}let n7=new class{constructor(t){let[e,n]=t.split("-"),i=e.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=null!=n?n:null}toString(){let t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t}}("3.1.10");t.BladeApi=e,t.ButtonApi=d,t.FolderApi=tg,t.InputBindingApi=tu,t.ListApi=nZ,t.MonitorBindingApi=tf,t.Pane=class extends n5{constructor(t){var e,n;let i=null!=t?t:{},o=null!=(e=i.document)?e:globalThis.document,a=function(){let t=new nG;return[nX,nk,nM,nS,nl,ne,nt,r9,e5,nI,n$,nH,te,tP,tV,tH].forEach(e=>{t.register(e)}),t}();super(new n3(o,{expanded:i.expanded,blade:tn(),props:T.fromObject({title:i.title}),viewProps:F.create()}),a),this.pool_=a,this.containerElem_=null!=(n=i.container)?n:function(t){let e=t.createElement("div");return e.classList.add(m("dfw")()),t.body&&t.body.appendChild(e),e}(o),this.containerElem_.appendChild(this.element),this.doc_=o,this.usesDefaultWrapper_=!i.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw p.alreadyDisposed();return this.doc_}dispose(){let t=this.containerElem_;if(!t)throw p.alreadyDisposed();if(this.usesDefaultWrapper_){let e=t.parentElement;e&&e.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach(t=>{this.pool_.register(t),this.embedPluginStyle_(t)})}embedPluginStyle_(t){t.css&&n8(this.document,`plugin-${t.id}`,t.css)}setUpDefaultPlugins_(){n8(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach(t=>{this.embedPluginStyle_(t)}),this.registerPlugin({plugins:[n6,n2,tH,n4]})}},t.SeparatorApi=tS,t.SliderApi=n0,t.TabApi=tF,t.TabPageApi=tI,t.TextApi=n1,t.TpChangeEvent=i,t.VERSION=n7,Object.defineProperty(t,"__esModule",{value:!0})})(v);var m={},y=a("cmoHh"),_=a("euRi5"),w=a("hDsEw"),x=a("3J2Zm"),k=a("6Px8M"),E=a("lDm0S"),C={};!function(t,e,n){var i,o="random",s=n.pow(256,6),l=n.pow(2,52),u=2*l;function c(a,c,v){var m=[],y=h(function t(e,n){var i,o=[],a=typeof e;if(n&&"object"==a)for(i in e)try{o.push(t(e[i],n-1))}catch(t){}return o.length?o:"string"==a?e:e+"\0"}((c=!0==c?{entropy:!0}:c||{}).entropy?[a,d(e)]:null==a?function(){try{var n;return i&&(n=i.randomBytes)?n=n(256):(n=new Uint8Array(256),(t.crypto||t.msCrypto).getRandomValues(n)),d(n)}catch(n){var o=t.navigator,a=o&&o.plugins;return[+new Date,t,a,t.screen,d(e)]}}():a,3),m),_=new f(m),w=function(){for(var t=_.g(6),e=s,n=0;t<l;)t=(t+n)*256,e*=256,n=_.g(1);for(;t>=u;)t/=2,e/=2,n>>>=1;return(t+n)/e};return w.int32=function(){return 0|_.g(4)},w.quick=function(){return _.g(4)/0x100000000},w.double=w,h(d(_.S),e),(c.pass||v||function(t,e,i,a){return(a&&(a.S&&p(a,_),t.state=function(){return p(_,{})}),i)?(n[o]=t,e):t})(w,y,"global"in c?c.global:this==n,c.state)}function f(t){var e,n=t.length,i=this,o=0,a=i.i=i.j=0,s=i.S=[];for(n||(t=[n++]);o<256;)s[o]=o++;for(o=0;o<256;o++)s[o]=s[a=255&a+t[o%n]+(e=s[o])],s[a]=e;(i.g=function(t){for(var e,n=0,o=i.i,a=i.j,s=i.S;t--;)e=s[o=255&o+1],n=256*n+s[255&(s[o]=s[a=255&a+e])+(s[a]=e)];return i.i=o,i.j=a,n})(256)}function p(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function h(t,e){for(var n,i=t+"",o=0;o<i.length;)e[255&o]=255&(n^=19*e[255&o])+i.charCodeAt(o++);return d(e)}function d(t){return String.fromCharCode.apply(0,t)}if(h(n.random(),e),C){C=c;try{i=a("kjyEk")}catch(t){}}else"function"==typeof define&&define.amd?define(function(){return c}):n["seed"+o]=c}("undefined"!=typeof self?self:C,[],Math),C.alea=y,C.xor128=_,C.xorwow=w,C.xorshift7=x,C.xor4096=k,C.tychei=E,m=C,a("c3mRC");const A=(t,e,n)=>{let i=t.r+n*(e.r-t.r);return{r:i,g:t.g+n*(e.g-t.g),b:t.b+n*(e.b-t.b)}},P={layers:16,module:10,height:1,width:.1,seed:42,window:1,colorSeed:0,randomColor:0,r1:130,g1:0,b1:183,r2:255,g2:205,b2:0,backgroundR:222,backgroundG:202,backgroundB:180};let M=!1,S=!1,T=!1;const j=new v.Pane;(t=j.addFolder({title:"Shape"})).addInput(P,"layers",{min:2,max:20,step:1}).on("change",t=>{M=!0}),t.addInput(P,"module",{min:20,max:30,step:2}).on("change",t=>{M=!0}),t.addInput(P,"height",{min:.25,max:5,step:.1}).on("change",t=>{M=!0}),t.addInput(P,"width",{min:.05,max:1,step:.1}).on("change",t=>{M=!0}),t.addInput(P,"seed",{min:0,max:45,step:1}).on("change",t=>{M=!0}),t.addInput(P,"window",{min:1,max:10,step:.1}).on("change",t=>{M=!0,S=!0}),(t=j.addFolder({title:"Color"})).addInput(P,"colorSeed",{min:0,max:100,step:1}).on("change",t=>{S=!0}),t.addInput(P,"randomColor",{min:0,max:1,step:1}).on("change",t=>{S=!0,T=!T}),t=j.addFolder({title:"Blended Colors"}),(t=j.addFolder({title:"Color 1"})).addInput(P,"r1",{min:0,max:255,step:1,label:"Red"}).on("change",t=>{S=!0}),t.addInput(P,"g1",{min:0,max:255,step:1,label:"Green"}).on("change",t=>{S=!0}),t.addInput(P,"b1",{min:0,max:255,step:1,label:"Blue"}).on("change",t=>{S=!0}),(t=j.addFolder({title:"Color 2"})).addInput(P,"r2",{min:0,max:255,step:1,label:"Red"}).on("change",t=>{S=!0}),t.addInput(P,"g2",{min:0,max:255,step:1,label:"Green"}).on("change",t=>{S=!0}),t.addInput(P,"b2",{min:0,max:255,step:1,label:"Blue"}).on("change",t=>{S=!0}),(t=j.addFolder({title:"Background Color"})).addInput(P,"backgroundR",{min:0,max:255,step:1,label:"Red"}).on("change",()=>{S=!0}),t.addInput(P,"backgroundG",{min:0,max:255,step:1,label:"Green"}).on("change",()=>{S=!0}),t.addInput(P,"backgroundB",{min:0,max:255,step:1,label:"Blue"}).on("change",()=>{S=!0}),j.addButton({title:"Download PNG"}).on("click",()=>{!function(){let t=document.querySelector("canvas");if(!t)return console.error("Canvas not found");let e=t.toDataURL("image/png").replace("image/png","image/octet-stream"),n=document.createElement("a");n.href=e,n.download="canvas-sketch-export.png",document.body.appendChild(n),n.click(),document.body.removeChild(n)}()}),l(({context:t,width:e,height:n})=>{L(t,e,n);let i=new V(n,e,P.layers,P.width,P.height,P.seed,P.colorSeed,P.window,P.module);return i.drawCanvas(t),({context:t,width:e,height:n})=>{if(M){i=new V(n,e,P.layers,P.width,P.height,P.seed,P.colorSeed,P.window,P.module),M=!1,t.fillStyle="white",L(t,e,n),t.fillRect(0,0,e,n);try{i.drawCanvas(t,P.colorSeed)}catch(t){console.log(t)}}else if(S){S=!1,t.fillStyle="white",L(t,e,n),t.fillRect(0,0,e,n);try{i.drawCanvas(t)}catch(t){console.log(t)}}}},{dimensions:[2400,1800],scaleToView:!0,animate:!0,context:"2d"});class O{constructor(t,e,n,i){this.x=t,this.y=e,this.width=n,this.height=i}}class V{buildings=[];constructor(t,e,n,i,o,a,s,l,u){this.dotRadius=l,this.module=u,this.seed=m(a),this.screenHeight=t,this.screenWidth=e,this.layers=n,this.allCells=[...Array(this.sizeX)].map(t=>Array(this.sizeX).fill(this.originalCell)),this.minBuildingWidth=Math.floor(Math.max(+i,1)),this.maxBuildingWidth=Math.floor(Math.max(5,8*i)),this.minBuildingHeight=Math.floor(Math.max(2,3*o)),this.maxBuildingHeight=Math.floor(Math.max(10,50*o)),this.generate()}generateLayer(t,e){let{minHeight:n,maxHeight:i}=t,{minWidth:o,maxWidth:a}=e,s=[],l=0;for(;l<=this.screenWidth;){let t=this.seed(),e=this.seed(),u=Math.floor(f(t,0,1,o,a)),c=Math.floor(f(e,0,1,n,i));c+=Math.floor(d(l,.2*a,.55*i));let p=new O(l,0,u*this.module,c*this.module);s.push(p),l+=u*this.module}return s}generate(){this.buildings=[...Array(this.layers)].map((t,e)=>{let n=e/(this.layers+1),i={minHeight:this.minBuildingHeight*n,maxHeight:this.maxBuildingHeight*n},o={minWidth:this.minBuildingWidth,maxWidth:this.maxBuildingWidth};return this.generateLayer(i,o)})}drawCanvas(t,e){this.colorSeed=m(e),t.save(),this.buildings.slice().reverse().forEach((e,n)=>{var i;let o=n/(this.buildings.length??1),a=A({r:P.r1,g:P.g1,b:P.b1},{r:P.r2,g:P.g2,b:P.b2},o),s=Math.floor(256*this.colorSeed()),l=Math.floor(256*this.colorSeed()),u=Math.floor(256*this.colorSeed()),c=T?`rgb(${s}, ${l}, ${u})`:`rgb(${a.r}, ${a.g}, ${a.b})`;i=h([s,l,u]),function(t,e,n){let i=n/100,o=[];for(let n=0;n<6;n+=2){let a=parseInt(t.substr(n,2),16),s=Math.round(a+(parseInt(e.substr(n,2),16)-a)*i);o.push(s.toString(16).padStart(2,"0"))}o.join("")}("#ffffff",i,.05),e.forEach(e=>this.drawBuilding(t,e,c,o))}),t.restore()}dotPattern(t,e,n,i,o){let a=document.createElement("canvas");a.width=this.module,a.height=this.module;let s=a.getContext("2d");if(s){s.fillStyle=n,s.fillRect(0,0,a.width,a.height),s.strokeStyle="white",s.lineWidth=e;let t=A({r:255,g:255,b:255},{r:180,g:180,b:180},1-o),l=`rgb(${t.r}, ${t.g}, ${t.b})`;i.forEach(t=>{s.fillStyle=l,s.beginPath(),s.arc(t.x,t.y,Math.max(this.dotRadius*o,1.2),0,2*Math.PI),s.fill(),s.stroke(),s.closePath()}),s.lineWidth=Math.max(+o,.5),s.strokeRect(0,0,this.module,this.module)}return t.createPattern(a,"repeat")}pickPattern(t,e,n,i){let o=Math.floor(f(Math.random(),0,1,1,7)),a=[],s,l,u,c,p;switch(!0){case 1===o:a=[{x:.5*this.module,y:.5*this.module}];break;case 2===o:a=[s={x:.25*this.module,y:.25*this.module},l={x:.75*this.module,y:.75*this.module}];break;case 3===o:s={x:.25*this.module,y:.25*this.module},a=[s,l={x:.5*this.module,y:.5*this.module},u={x:.75*this.module,y:.75*this.module}];break;case 4===o:s={x:.25*this.module,y:.25*this.module},l={x:.75*this.module,y:.25*this.module},a=[s,l,u={x:.75*this.module,y:.75*this.module},c={x:.25*this.module,y:.75*this.module}];break;case 5===o:s={x:.25*this.module,y:.25*this.module},l={x:.75*this.module,y:.25*this.module},u={x:.75*this.module,y:.75*this.module},a=[s,l,u,c={x:.25*this.module,y:.75*this.module},p={x:.5*this.module,y:.5*this.module}];break;case 6===o:s={x:.25*this.module,y:.25*this.module},l={x:.25*this.module,y:.5*this.module},u={x:.25*this.module,y:.75*this.module},c={x:.75*this.module,y:.25*this.module},a=[s,l,u,c,p={x:.75*this.module,y:.5*this.module},{x:.75*this.module,y:.75*this.module}]}return this.dotPattern(t,e,n,a,i)}traverseBuildingAndRender(t,e,n,i,o){let a=Array.from({length:e.height/this.module},(t,e)=>e*this.module),s=this.pickPattern(t,i,n,o);a.forEach(n=>{D(t,e,this.screenHeight,s,n)})}drawBuilding=(t,e,n,i)=>{t.lineWidth=1,t.fillStyle=n;let o=this.screenHeight-e.y;t.fillRect(e.x,o,e.width,-e.height),this.traverseBuildingAndRender(t,e,n,.5,i)}}const D=(t,e,n,i)=>{t.fillStyle=i;let o=n-e.y;t.fillRect(e.x,o,e.width,-e.height)},L=(t,e,n,i)=>{let o=1/4,a=`rgb(${P.backgroundR}, ${P.backgroundG}, ${P.backgroundB})`;t.fillStyle=i||a,t.fillRect(o,o,e-2*o,n-2*o)};
//# sourceMappingURL=skyline-generator.32a989a2.js.map
